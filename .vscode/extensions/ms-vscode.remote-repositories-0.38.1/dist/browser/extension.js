var Oc=Object.defineProperty;var o=(Po,Va)=>Oc(Po,"name",{value:Va,configurable:!0});(()=>{var Po={850:(st,l,C)=>{"use strict";C.r(l),C.d(l,{AppInsightsCore:()=>Qe,BaseCore:()=>Pn,BaseTelemetryPlugin:()=>Kr.i,CoreUtils:()=>H.Tr,DiagnosticLogger:()=>pe.AQ,ESPromise:()=>mr,ESPromiseScheduler:()=>Jn,EventHelper:()=>Nr.zB,EventLatency:()=>N,EventPersistence:()=>w,EventPropertyType:()=>m,EventsDiscardedReason:()=>wr.h,FullVersionString:()=>H.vs,InternalAppInsightsCore:()=>nt.F,InternalBaseCore:()=>Jt.A,LoggingSeverity:()=>y.X,MinChannelPriorty:()=>Qn,NotificationManager:()=>Rr.f,PerfEvent:()=>ke.zn,PerfManager:()=>ke.Jk,ProcessTelemetryContext:()=>Cr.Vi,TraceLevel:()=>O,Undefined:()=>br.jA,Utils:()=>H.cQ,ValueKind:()=>W,ValueSanitizer:()=>pr,Version:()=>H.Gf,_ExtendedInternalMessageId:()=>B,_InternalLogMessage:()=>pe.lQ,_InternalMessageId:()=>y.v,__getRegisteredEvents:()=>Ln.um,_logInternalMessage:()=>pe.L4,_throwInternal:()=>pe.kP,_warnToConsole:()=>pe.jV,addEventHandler:()=>Ln.Ib,addEventListeners:()=>Ln.yw,addPageHideEventListener:()=>Ln.TJ,addPageShowEventListener:()=>Ln.nD,addPageUnloadEventListener:()=>Ln.c9,areCookiesSupported:()=>Gr.p7,arrForEach:()=>P.tO,arrIndexOf:()=>P.UA,arrMap:()=>P.Mr,arrReduce:()=>P.Xz,attachEvent:()=>Ln.pZ,cookieAvailable:()=>Gr.p7,createCookieMgr:()=>Gr.Nz,createEnumStyle:()=>v.By,createGuid:()=>H.cm,createProcessTelemetryContext:()=>Cr.CD,createTraceParent:()=>_r.SU,createUniqueNamespace:()=>Tr.J,createUnloadHandlerContainer:()=>pi.Y,dateNow:()=>P.m6,deleteCookie:()=>H.kT,detachEvent:()=>Ln.pD,disableCookies:()=>H.oF,disallowsSameSiteNone:()=>Gr.UY,doPerf:()=>ke.Lm,dumpObj:()=>et.eU,eventOff:()=>Ln.QY,eventOn:()=>Ln.XO,extend:()=>H.l7,findW3cTraceParent:()=>_r.lq,formatTraceParent:()=>_r.aR,generateW3CId:()=>Nr.DO,getCommonSchemaMetaData:()=>H.Vv,getConsole:()=>et.dr,getCookie:()=>H.ej,getCookieValue:()=>H.Do,getCrypto:()=>et.MX,getDocument:()=>et.Me,getExceptionName:()=>P.jj,getFieldValueType:()=>H.Sy,getGlobal:()=>cr.Rd,getGlobalInst:()=>et.a8,getHistory:()=>et.s1,getIEVersion:()=>et.sA,getISOString:()=>P.Y6,getJSON:()=>et.xA,getLocation:()=>et.k$,getMsCrypto:()=>et.gz,getNavigator:()=>et.jW,getPerformance:()=>et.r,getSetValue:()=>P.qK,getTenantId:()=>H.jM,getTime:()=>H.hK,getWindow:()=>et.Jj,hasDocument:()=>et.Nv,hasHistory:()=>et.fE,hasJSON:()=>et.nS,hasNavigator:()=>et.d6,hasOwnProperty:()=>P.nr,hasWindow:()=>et.Ym,isArray:()=>P.kJ,isArrayValid:()=>H.JT,isBeaconsSupported:()=>et.MF,isBoolean:()=>P.jn,isChromium:()=>H.mJ,isDate:()=>P.J_,isDocumentObjectAvailable:()=>H.x9,isError:()=>P.VZ,isFetchSupported:()=>et.JO,isFunction:()=>P.mf,isIE:()=>et.w1,isLatency:()=>H.r7,isNotTruthy:()=>P.F,isNullOrUndefined:()=>P.le,isNumber:()=>P.hj,isObject:()=>P.Kn,isReactNative:()=>et.b$,isSampledFlag:()=>_r.Pn,isString:()=>P.HD,isTruthy:()=>P.fQ,isTypeof:()=>P.Ym,isUint8ArrayAvailable:()=>H.IZ,isUndefined:()=>P.o8,isValidSpanId:()=>_r.Lc,isValidTraceId:()=>_r.jN,isValidTraceParent:()=>_r.J6,isValueAssigned:()=>H.Sn,isValueKind:()=>H.oS,isWindowObjectAvailable:()=>H.dH,isXhrSupported:()=>et.Z3,mergeEvtNamespace:()=>Ln.jU,newGuid:()=>Nr.GW,newId:()=>On.pZ,normalizeJsName:()=>P.Gf,objCreate:()=>cr.pu,objDefineAccessors:()=>P.l_,objForEachKey:()=>P.rW,objFreeze:()=>P.FL,objKeys:()=>P.FY,objSeal:()=>P.Xi,openXhr:()=>H.ot,optimizeObject:()=>P.Ax,parseTraceParent:()=>_r.j_,perfNow:()=>Nr.Jj,proxyAssign:()=>P.cf,proxyFunctionAs:()=>P.Oi,proxyFunctions:()=>P.Vb,random32:()=>On._l,randomValue:()=>On.az,removeEventHandler:()=>Ln.C1,removeEventListeners:()=>Ln.nJ,removePageHideEventListener:()=>Ln.C9,removePageShowEventListener:()=>Ln.Yl,removePageUnloadEventListener:()=>Ln.JA,safeGetCookieMgr:()=>Gr.JP,safeGetLogger:()=>pe.vH,sanitizeProperty:()=>H.yj,setCookie:()=>H.d8,setEnableEnvMocks:()=>et.dI,setProcessTelemetryTimings:()=>H.if,setValue:()=>P.sO,strContains:()=>P._Q,strEndsWith:()=>P.Id,strFunction:()=>br.cb,strObject:()=>br.fK,strPrototype:()=>br.hB,strStartsWith:()=>P.xe,strTrim:()=>P.nd,strUndefined:()=>br.jA,throwError:()=>P._y,toISOString:()=>P.Y6,useXDomainRequest:()=>et.cp});var R=C(1088),v=C(4873),P=C(6708),y=C(7310),W=(0,v.By)({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),N=(0,v.By)({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),m=(0,v.By)({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),w=(0,v.By)({Normal:1,Critical:2}),O=(0,v.By)({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),B=(0,P.FL)((0,R.uc)((0,R.uc)({},y.v),(0,v.By)({AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519,SDKNotInitialized:520})));/*!
 * Microsoft Dynamic Proto Utility, 1.1.7
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */var E,$="undefined",F="constructor",j="prototype",q="function",_e="_dynInstFuncs",z="_isDynProxy",Q="_dynClass",Z="_dynCls$",T="_dynInstChk",Y=T,x="_dfOpts",le="_unknown_",V="__proto__",fe="_dyn"+V,Ae="__dynProto$Gbl",Ne="_dynInstProto",ae="useBaseInst",we="setInstFuncs",D=Object,Ve=D.getPrototypeOf,ye=D.getOwnPropertyNames;function ve(){var M;return typeof globalThis!==$&&(M=globalThis),!M&&typeof self!==$&&(M=self),!M&&typeof window!==$&&(M=window),!M&&typeof C.g!==$&&(M=C.g),M||{}}o(ve,"_getGlobal");var G=ve(),se=G[Ae]||(G[Ae]={o:(E={},E[we]=!0,E[ae]=!0,E),n:1e3});function Re(M,ue){return M&&D[j].hasOwnProperty.call(M,ue)}o(Re,"_hasOwnProperty");function Ge(M){return M&&(M===D[j]||M===Array[j])}o(Ge,"_isObjectOrArrayPrototype");function ie(M){return Ge(M)||M===Function[j]}o(ie,"_isObjectArrayOrFunctionPrototype");function Ze(M){var ue;if(M){if(Ve)return Ve(M);var Ee=M[V]||M[j]||(M[F]?M[F][j]:null);ue=M[fe]||Ee,Re(M,fe)||(delete M[Ne],ue=M[fe]=M[Ne]||M[fe],M[Ne]=Ee)}return ue}o(Ze,"_getObjProto");function ut(M,ue){var Ee=[];if(ye)Ee=ye(M);else for(var Le in M)typeof Le=="string"&&Re(M,Le)&&Ee.push(Le);if(Ee&&Ee.length>0)for(var tt=0;tt<Ee.length;tt++)ue(Ee[tt])}o(ut,"_forEachProp");function yt(M,ue,Ee){return ue!==F&&typeof M[ue]===q&&(Ee||Re(M,ue))}o(yt,"_isDynamicCandidate");function I(M){throw new TypeError("DynamicProto: "+M)}o(I,"_throwTypeError");function U(M){var ue={};return ut(M,function(Ee){!ue[Ee]&&yt(M,Ee,!1)&&(ue[Ee]=M[Ee])}),ue}o(U,"_getInstanceFuncs");function ne(M,ue){for(var Ee=M.length-1;Ee>=0;Ee--)if(M[Ee]===ue)return!0;return!1}o(ne,"_hasVisited");function de(M,ue,Ee,Le){function tt(Tt,_t,bt){var Ot=_t[bt];if(Ot[z]&&Le){var Bt=Tt[_e]||{};Bt[Y]!==!1&&(Ot=(Bt[_t[Q]]||{})[bt]||Ot)}return function(){return Ot.apply(Tt,arguments)}}o(tt,"_instFuncProxy");var qe={};ut(Ee,function(Tt){qe[Tt]=tt(ue,Ee,Tt)});for(var dt=Ze(M),Dt=[];dt&&!ie(dt)&&!ne(Dt,dt);)ut(dt,function(Tt){!qe[Tt]&&yt(dt,Tt,!Ve)&&(qe[Tt]=tt(ue,dt,Tt))}),Dt.push(dt),dt=Ze(dt);return qe}o(de,"_getBaseFuncs");function Ue(M,ue,Ee,Le){var tt=null;if(M&&Re(Ee,Q)){var qe=M[_e]||{};if(tt=(qe[Ee[Q]]||{})[ue],tt||I("Missing ["+ue+"] "+q),!tt[T]&&qe[Y]!==!1){for(var dt=!Re(M,ue),Dt=Ze(M),Tt=[];dt&&Dt&&!ie(Dt)&&!ne(Tt,Dt);){var _t=Dt[ue];if(_t){dt=_t===Le;break}Tt.push(Dt),Dt=Ze(Dt)}try{dt&&(M[ue]=tt),tt[T]=1}catch(bt){qe[Y]=!1}}}return tt}o(Ue,"_getInstFunc");function Ie(M,ue,Ee){var Le=ue[M];return Le===Ee&&(Le=Ze(ue)[M]),typeof Le!==q&&I("["+M+"] is not a "+q),Le}o(Ie,"_getProtoFunc");function ce(M,ue,Ee,Le,tt){function qe(Tt,_t){var bt=o(function(){var Ot=Ue(this,_t,Tt,bt)||Ie(_t,Tt,bt);return Ot.apply(this,arguments)},"dynProtoProxy");return bt[z]=1,bt}if(o(qe,"_createDynamicPrototype"),!Ge(M)){var dt=Ee[_e]=Ee[_e]||{},Dt=dt[ue]=dt[ue]||{};dt[Y]!==!1&&(dt[Y]=!!tt),ut(Ee,function(Tt){yt(Ee,Tt,!1)&&Ee[Tt]!==Le[Tt]&&(Dt[Tt]=Ee[Tt],delete Ee[Tt],(!Re(M,Tt)||M[Tt]&&!M[Tt][z])&&(M[Tt]=qe(M,Tt)))})}}o(ce,"_populatePrototype");function Ce(M,ue){if(Ve){for(var Ee=[],Le=Ze(ue);Le&&!ie(Le)&&!ne(Ee,Le);){if(Le===M)return!0;Ee.push(Le),Le=Ze(Le)}return!1}return!0}o(Ce,"_checkPrototype");function Te(M,ue){return Re(M,j)?M.name||ue||le:((M||{})[F]||{}).name||ue||le}o(Te,"_getObjName");function Ye(M,ue,Ee,Le){Re(M,j)||I("theClass is an invalid class definition.");var tt=M[j];Ce(tt,ue)||I("["+Te(M)+"] not in hierarchy of ["+Te(ue)+"]");var qe=null;Re(tt,Q)?qe=tt[Q]:(qe=Z+Te(M,"_")+"$"+se.n,se.n++,tt[Q]=qe);var dt=Ye[x],Dt=!!dt[ae];Dt&&Le&&Le[ae]!==void 0&&(Dt=!!Le[ae]);var Tt=U(ue),_t=de(tt,ue,Tt,Dt);Ee(ue,_t);var bt=!!Ve&&!!dt[we];bt&&Le&&(bt=!!Le[we]),ce(tt,qe,ue,Tt,bt!==!1)}o(Ye,"dynamicProto"),Ye[x]=se.o;var pe=C(5018),ke=C(9288),et=C(7630),nt=C(5121),be=C(7984),H=C(3599),K=function(M){(0,R.ne)(ue,M);function ue(){var Ee=M.call(this)||this;return Ee.pluginVersionStringArr=[],Ye(ue,Ee,function(Le,tt){(!Le.logger||!Le.logger.queue)&&(Le.logger=new pe.AQ({loggingLevelConsole:1})),Le.initialize=function(qe,dt,Dt,Tt){(0,ke.Lm)(Le,function(){return"AppInsightsCore.initialize"},function(){var _t=Le.pluginVersionStringArr;if(qe){qe.endpointUrl||(qe.endpointUrl=be.YT);var bt=qe.propertyStorageOverride;bt&&(!bt.getProperty||!bt.setProperty)&&(0,P._y)("Invalid property storage override passed."),qe.channels&&(0,P.tO)(qe.channels,function(Wt){Wt&&(0,P.tO)(Wt,function(Mt){if(Mt.identifier&&Mt.version){var Kn=Mt.identifier+"="+Mt.version;_t.push(Kn)}})})}Le.getWParam=function(){return typeof document!="undefined"||!!qe.enableWParam?0:-1},dt&&(0,P.tO)(dt,function(Wt){if(Wt&&Wt.identifier&&Wt.version){var Mt=Wt.identifier+"="+Wt.version;_t.push(Mt)}}),Le.pluginVersionString=_t.join(";"),Le.pluginVersionStringArr=_t;try{tt.initialize(qe,dt,Dt,Tt),Le.pollInternalLogs("InternalLog")}catch(Wt){var Ot=Le.logger,Bt=(0,et.eU)(Wt);Bt.indexOf("channels")!==-1&&(Bt+=`
 - Channels must be provided through config.channels only!`),(0,pe.kP)(Ot,1,514,"SDK Initialization Failed - no telemetry will be sent: "+Bt)}},function(){return{config:qe,extensions:dt,logger:Dt,notificationManager:Tt}})},Le.track=function(qe){(0,ke.Lm)(Le,function(){return"AppInsightsCore.track"},function(){var dt=qe;if(dt){dt.timings=dt.timings||{},dt.timings.trackStart=(0,H.hK)(),(0,H.r7)(dt.latency)||(dt.latency=1);var Dt=dt.ext=dt.ext||{};Dt.sdk=Dt.sdk||{},Dt.sdk.ver=H.vs;var Tt=dt.baseData=dt.baseData||{};Tt[be.o6]=Tt[be.o6]||{};var _t=Tt[be.o6];_t[be.p8]=_t[be.p8]||Le.pluginVersionString||be.qS}tt.track(dt)},function(){return{item:qe}},!qe.sync)}}),Ee}return o(ue,"AppInsightsCore"),ue.__ieDyn=1,ue}(nt.F);const Qe=K;var Jt=C(6900),Rn=function(M){(0,R.ne)(ue,M);function ue(){var Ee=M.call(this)||this;return Ye(ue,Ee,function(Le,tt){Le.initialize=function(qe,dt,Dt,Tt){qe&&!qe.endpointUrl&&(qe.endpointUrl=be.YT),Le.getWParam=function(){return H.x9||!!qe.enableWParam?0:-1};try{tt.initialize(qe,dt,Dt,Tt)}catch(_t){(0,pe.kP)(Le.logger,1,514,"Initialization Failed: "+(0,et.eU)(_t)+`
 - Note: Channels must be provided through config.channels only`)}},Le.track=function(qe){var dt=qe;if(dt){var Dt=dt.ext=dt.ext||{};Dt.sdk=Dt.sdk||{},Dt.sdk.ver=H.vs}tt.track(dt)}}),Ee}return o(ue,"BaseCore"),ue.__ieDyn=1,ue}(Jt.A);const Pn=Rn;var wn=P.mf;function lr(M,ue,Ee){return function(Le){M[ue]=Le,Ee()}}o(lr,"_createPromiseAllOnResolvedFunction");var sr=function(){function M(ue){var Ee=0,Le=null,tt=[];Ye(M,this,function(_t){_t.then=function(bt,Ot){return new M(function(Bt,Wt){qe(bt,Ot,Bt,Wt)})},_t.catch=function(bt){return _t.then(null,bt)}});function qe(_t,bt,Ot,Bt){tt.push(function(){var Wt;try{Ee===1?Wt=wn(_t)?_t(Le):Le:Wt=wn(bt)?bt(Le):Le,Wt instanceof M?Wt.then(Ot,Bt):Ee===2&&!wn(bt)?Bt(Wt):Ot(Wt)}catch(Mt){Bt(Mt);return}}),Ee!==0&&dt()}o(qe,"_enqueue");function dt(){if(tt.length>0){var _t=tt.slice();tt=[],setTimeout(function(){for(var bt=0,Ot=_t.length;bt<Ot;++bt)try{_t[bt]()}catch(Bt){}},0)}}o(dt,"_processQueue");function Dt(_t){Ee===0&&(Le=_t,Ee=1,dt())}o(Dt,"_resolve");function Tt(_t){Ee===0&&(Le=_t,Ee=2,dt())}o(Tt,"_reject"),o(function(){if(!wn(ue))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{ue(Dt,Tt)}catch(bt){Tt(bt)}},"_initialize")()}return o(M,"ESPromise"),M.resolve=function(ue){return ue instanceof M?ue:ue&&wn(ue.then)?new M(function(Ee,Le){try{ue.then(Ee,Le)}catch(tt){Le(tt)}}):new M(function(Ee){Ee(ue)})},M.reject=function(ue){return new M(function(Ee,Le){Le(ue)})},M.all=function(ue){if(!(!ue||!ue.length))return new M(function(Ee,Le){try{for(var tt=[],qe=0,dt=0;dt<ue.length;dt++){var Dt=ue[dt];Dt&&wn(Dt.then)?(qe++,Dt.then(lr(tt,dt,function(){--qe==0&&Ee(tt)}),Le)):tt[dt]=Dt}qe===0&&setTimeout(function(){Ee(tt)},0)}catch(Tt){Le(Tt)}})},M.race=function(ue){return new M(function(Ee,Le){if(!(!ue||!ue.length))try{for(var tt=o(function(dt){var Dt=ue[dt];Dt&&wn(Dt.then)?Dt.then(Ee,Le):setTimeout(function(){Ee(Dt)},0)},"_loop_1"),qe=0;qe<ue.length;qe++)tt(qe)}catch(dt){Le(dt)}})},M}();const mr=sr;var cr=C(2091),yr=6e5,ht=0,Gt=[],on=[],sn=[];function jt(){return new Date().getTime()}o(jt,"_getTime");var _n=function(){function M(ue,Ee){var Le=0,tt=(ue||"<unnamed>")+"."+ht;ht++,Ye(M,this,function(Dt){var Tt=null,_t=0;Dt.scheduleEvent=function(Ot,Bt,Wt){var Mt=tt+"."+_t;_t++,Bt&&(Mt+="-("+Bt+")");var Kn=Mt+"{"+Le+"}";Le++;var En={evt:null,tm:jt(),id:Kn,isRunning:!1,isAborted:!1};return Tt?En.evt=mi(En,Tt):En.evt=$n(En),Tt=En,Tt.evt._schId=Kn,En.evt;function Sr(Vt){for(var tr=jt(),An=tr-yr,Sn=Vt.length,fn=0;fn<Sn;){var nr=Vt[fn];if(nr&&nr.tm<An){var Zn=null;nr.abort?(Zn="Aborting ["+nr.id+"] due to Excessive runtime ("+(tr-nr.tm)+" ms)",nr.abort(Zn)):Zn="Removing ["+nr.id+"] due to Excessive runtime ("+(tr-nr.tm)+" ms)",dt(Zn),Vt.splice(fn,1),Sn--}else fn++}}o(Sr,"_abortAndRemoveOldEvents");function Xn(Vt,tr){var An=!1,Sn=bt(Gt,Vt);if(Sn||(Sn=bt(sn,Vt),An=!0),Sn){Sn.to&&(clearTimeout(Sn.to),Sn.to=null);var fn=jt()-Sn.tm;tr?An?dt("Timed out event ["+Vt+"] finally complete -- "+fn+" ms"):qe("Promise ["+Vt+"] Complete -- "+fn+" ms"):(sn.push(Sn),dt("Event ["+Vt+"] Timed out and removed -- "+fn+" ms"))}else qe("Failed to remove ["+Vt+"] from running queue");Tt&&Tt.id===Vt&&(Tt=null),Sr(Gt),Sr(on),Sr(sn)}o(Xn,"_cleanup");function ur(Vt,tr){return function(An){return Xn(Vt,!0),tr&&tr(An),An}}o(ur,"_removeScheduledEvent");function zr(Vt,tr,An,Sn){tr.then(function(fn){return fn instanceof mr?(qe("Event ["+Vt+"] returned a promise -- waiting"),zr(Vt,fn,An,Sn),fn):ur(Vt,An)(fn)},ur(Vt,Sn))}o(zr,"_waitForFinalResult");function Vr(Vt,tr){var An=Vt.id;return new mr(function(Sn,fn){qe("Event ["+An+"] Starting -- waited for "+(Vt.wTm||"--")+" ms"),Vt.isRunning=!0,Vt.abort=function(Zn){Vt.abort=null,Vt.isAborted=!0,Xn(An,!1),fn(new Error(Zn))};var nr=tr(An);nr instanceof mr?(Wt&&(Vt.to=setTimeout(function(){Xn(An,!1),fn(new Error("Timed out after ["+Wt+"] ms"))},Wt)),zr(An,nr,function(Zn){qe("Event ["+An+"] Resolving after "+(jt()-Vt.tm)+" ms"),Sn(Zn)},fn)):(qe("Promise ["+An+"] Auto completed as the start action did not return a promise"),Sn())})}o(Vr,"_createScheduledEvent");function $n(Vt){var tr=jt();return Vt.wTm=tr-Vt.tm,Vt.tm=tr,Vt.isAborted?mr.reject(new Error("["+Mt+"] was aborted")):(Gt.push(Vt),Vr(Vt,Ot))}o($n,"_startWaitingEvent");function mi(Vt,tr){var An=new mr(function(Sn,fn){var nr=jt()-tr.tm,Zn=tr.id;qe("["+Mt+"] is waiting for ["+Zn+":"+nr+" ms] to complete before starting -- ["+on.length+"] waiting and ["+Gt.length+"] running"),Vt.abort=function(Or){Vt.abort=null,bt(on,Mt),Vt.isAborted=!0,fn(new Error(Or))},tr.evt.then(function(Or){bt(on,Mt),$n(Vt).then(Sn,fn)},function(Or){bt(on,Mt),$n(Vt).then(Sn,fn)})});return on.push(Vt),An}o(mi,"_waitForPreviousEvent")};function bt(Ot,Bt){for(var Wt=0;Wt<Ot.length;Wt++)if(Ot[Wt].id===Bt)return Ot.splice(Wt,1)[0];return null}o(bt,"_removeQueuedEvent")});function qe(Dt){var Tt=(0,cr.Rd)();Tt&&Tt.QUnit&&console&&console.log("ESPromiseScheduler["+tt+"] "+Dt)}o(qe,"_debugLog");function dt(Dt){(0,pe.jV)(Ee,"ESPromiseScheduler["+tt+"] "+Dt)}o(dt,"_warnLog")}return o(M,"ESPromiseScheduler"),M.incomplete=function(){return Gt},M.waitingToStart=function(){return on},M}();const Jn=_n;var pr=function(){function M(ue){var Ee=this,Le={},tt=[],qe=[];ue&&qe.push(ue);function dt(bt,Ot){var Bt,Wt=Le[bt];if(Wt&&(Bt=Wt[Ot]),!Bt&&Bt!==null){if((0,P.HD)(bt)&&(0,P.HD)(Ot))if(qe.length>0){for(var Mt=0;Mt<qe.length;Mt++)if(qe[Mt].handleField(bt,Ot)){Bt={canHandle:!0,fieldHandler:qe[Mt]};break}}else tt.length===0&&(Bt={canHandle:!0});if(!Bt&&Bt!==null){Bt=null;for(var Mt=0;Mt<tt.length;Mt++)if(tt[Mt].handleField(bt,Ot)){Bt={canHandle:!0,handler:tt[Mt],fieldHandler:null};break}}Wt||(Wt=Le[bt]={}),Wt[Ot]=Bt}return Bt}o(dt,"_getFieldSanitizer"),Ee.addSanitizer=function(bt){bt&&(tt.push(bt),Le={})},Ee.addFieldSanitizer=function(bt){bt&&(qe.push(bt),Le={})},Ee.handleField=function(bt,Ot){var Bt=dt(bt,Ot);return Bt?Bt.canHandle:!1},Ee.value=function(bt,Ot,Bt,Wt){var Mt=dt(bt,Ot);if(Mt&&Mt.canHandle){if(!Mt||!Mt.canHandle)return null;if(Mt.handler)return Mt.handler.value(bt,Ot,Bt,Wt);if(!(0,P.HD)(Ot)||(0,P.le)(Bt)||Bt===be.qS)return null;var Kn=null,En=(0,H.Sy)(Bt);if((En&8192)==8192){var Sr=En&~8192;if(Kn=Bt,!(0,H.Sn)(Kn.value)||Sr!==1&&Sr!==2&&Sr!==3&&(Sr&4096)!=4096)return null}else En===1||En===2||En===3||(En&4096)==4096?Kn=Tt(bt,Ot,Bt):En===4&&(Kn=Tt(bt,Ot,Wt?JSON.stringify(Bt):Bt));if(Kn)return Dt(Mt,bt,Ot,En,Kn,Wt)}return null},Ee.property=function(bt,Ot,Bt,Wt){var Mt=dt(bt,Ot);if(!Mt||!Mt.canHandle||!(0,P.HD)(Ot)||(0,P.le)(Bt)||!(0,H.Sn)(Bt.value))return null;var Kn=(0,H.Sy)(Bt.value);return Kn===0?null:Dt(Mt,bt,Ot,Kn,Bt,Wt)};function Dt(bt,Ot,Bt,Wt,Mt,Kn){if(bt.handler)return bt.handler.property(Ot,Bt,Mt,Kn);if(!(0,P.le)(Mt.kind)){if((Wt&4096)==4096||!(0,H.oS)(Mt.kind))return null;Mt.value=Mt.value.toString()}return _t(bt.fieldHandler,Ot,Bt,Wt,Mt)}o(Dt,"_handleProperty");function Tt(bt,Ot,Bt){return(0,H.Sn)(Bt)?{value:Bt}:null}o(Tt,"_convertToProperty");function _t(bt,Ot,Bt,Wt,Mt){if(Mt&&bt){var Kn=bt.getSanitizer(Ot,Bt,Wt,Mt.kind,Mt.propertyType);if(Kn)if(Wt===4){var En={},Sr=Mt.value;(0,P.rW)(Sr,function(ur,zr){var Vr=Ot+"."+Bt;if((0,H.Sn)(zr)){var $n=Tt(Vr,ur,zr);$n=_t(bt,Vr,ur,(0,H.Sy)(zr),$n),$n&&(En[ur]=$n.value)}}),Mt.value=En}else{var Xn={path:Ot,name:Bt,type:Wt,prop:Mt,sanitizer:Ee};Mt=Kn.call(Ee,Xn)}}return Mt}o(_t,"_callFieldSanitizer")}return o(M,"ValueSanitizer"),M.getFieldType=H.Sy,M}(),Qn=100,Rr=C(1880),Kr=C(4063),Cr=C(1589),wr=C(5928),Nr=C(5843),Ln=C(4869),On=C(4878),br=C(4392),Gr=C(3242),Tr=C(5883),pi=C(310),_r=C(4206)},7984:(st,l,C)=>{"use strict";C.d(l,{qS:()=>R,YT:()=>v,p8:()=>W,o6:()=>N});var R="",v="https://browser.events.data.microsoft.com/OneCollector/1.0/",P="pluginVersionString",y=P+"Arr",W="version",N="properties"},3599:(st,l,C)=>{"use strict";C.d(l,{Gf:()=>E,vs:()=>$,x9:()=>Q,dH:()=>Z,Sn:()=>T,jM:()=>Y,IZ:()=>x,r7:()=>le,yj:()=>V,Vv:()=>fe,oF:()=>Ae,d8:()=>Ne,kT:()=>ae,ej:()=>we,Do:()=>D,cm:()=>Ve,l7:()=>ye,hK:()=>ve,oS:()=>G,JT:()=>Ge,if:()=>ie,Sy:()=>Ze,cQ:()=>ut,Tr:()=>yt,mJ:()=>I,ot:()=>U});var R=C(7630),v=C(6708),P=C(3242),y=C(5843),W=C(4392),N=C(4869),m=C(4878),w=C(2091),O=C(7984),B,E="3.2.10",$="1DS-Web-JS-"+E,F="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",j="withCredentials",q="timeout",_e=(B={},B[0]=0,B[2]=6,B[1]=1,B[3]=7,B[4096|2]=6,B[4096|1]=1,B[4096|3]=7,B),z=null,Q=Boolean((0,R.Me)()),Z=Boolean((0,R.Jj)());function T(ne){return!(ne===O.qS||(0,v.le)(ne))}o(T,"isValueAssigned");function Y(ne){if(ne){var de=ne.indexOf("-");if(de>-1)return ne.substring(0,de)}return O.qS}o(Y,"getTenantId");function x(){return z===null&&(z=!(0,v.o8)(Uint8Array)&&!Re()&&!(0,R.b$)()),z}o(x,"isUint8ArrayAvailable");function le(ne){return!!(ne&&(0,v.hj)(ne)&&ne>=1&&ne<=4)}o(le,"isLatency");function V(ne,de,Ue){if(!de&&!T(de)||typeof ne!="string")return null;var Ie=typeof de;if(Ie==="string"||Ie==="number"||Ie==="boolean"||(0,v.kJ)(de))de={value:de};else if(Ie==="object"&&!W.CY.call(de,"value"))de={value:Ue?JSON.stringify(de):de};else if((0,v.le)(de.value)||de.value===O.qS||!(0,v.HD)(de.value)&&!(0,v.hj)(de.value)&&!(0,v.jn)(de.value)&&!(0,v.kJ)(de.value))return null;if((0,v.kJ)(de.value)&&!Ge(de.value))return null;if(!(0,v.le)(de.kind)){if((0,v.kJ)(de.value)||!G(de.kind))return null;de.value=de.value.toString()}return de}o(V,"sanitizeProperty");function fe(ne,de,Ue){var Ie=-1;if(!(0,v.o8)(ne))if(de>0&&(de===32?Ie=1<<13:de<=13&&(Ie=de<<5)),se(Ue))Ie===-1&&(Ie=0),Ie|=Ue;else{var ce=_e[Ze(ne)]||-1;Ie!==-1&&ce!==-1?Ie|=ce:ce===6&&(Ie=ce)}return Ie}o(fe,"getCommonSchemaMetaData");function Ae(){(0,P.JP)(null).setEnabled(!1)}o(Ae,"disableCookies");function Ne(ne,de,Ue){(0,P.p7)(null)&&(0,P.JP)(null).set(ne,de,Ue*86400,null,"/")}o(Ne,"setCookie");function ae(ne){(0,P.p7)(null)&&(0,P.JP)(null).del(ne)}o(ae,"deleteCookie");function we(ne){return(0,P.p7)(null)?D((0,P.JP)(null),ne):O.qS}o(we,"getCookie");function D(ne,de,Ue){Ue===void 0&&(Ue=!0);var Ie;return ne&&(Ie=ne.get(de),Ue&&Ie&&decodeURIComponent&&(Ie=decodeURIComponent(Ie))),Ie||O.qS}o(D,"getCookieValue");function Ve(ne){ne===void 0&&(ne="D");var de=(0,y.GW)();return ne==="B"?de="{"+de+"}":ne==="P"?de="("+de+")":ne==="N"&&(de=de.replace(/-/g,O.qS)),de}o(Ve,"createGuid");function ye(ne,de,Ue,Ie,ce){var Ce={},Te=!1,Ye=0,pe=arguments.length,ke=Object[W.hB],et=arguments;for(ke.toString.call(et[0])==="[object Boolean]"&&(Te=et[0],Ye++);Ye<pe;Ye++){var ne=et[Ye];(0,v.rW)(ne,function(be,H){Te&&H&&(0,v.Kn)(H)?(0,v.kJ)(H)?(Ce[be]=Ce[be]||[],(0,v.tO)(H,function(K,Qe){K&&(0,v.Kn)(K)?Ce[be][Qe]=ye(!0,Ce[be][Qe],K):Ce[be][Qe]=K})):Ce[be]=ye(!0,Ce[be],H):Ce[be]=H})}return Ce}o(ye,"extend");var ve=y.Jj;function G(ne){return ne===0||ne>0&&ne<=13||ne===32}o(G,"isValueKind");function se(ne){return ne>=0&&ne<=9}o(se,"isDataType");function Re(){var ne=(0,R.jW)();if(!(0,v.o8)(ne)&&ne.userAgent){var de=ne.userAgent.toLowerCase();if((de.indexOf("safari")>=0||de.indexOf("firefox")>=0)&&de.indexOf("chrome")<0)return!0}return!1}o(Re,"isSafariOrFirefox");function Ge(ne){return ne.length>0}o(Ge,"isArrayValid");function ie(ne,de){var Ue=ne;Ue.timings=Ue.timings||{},Ue.timings.processTelemetryStart=Ue.timings.processTelemetryStart||{},Ue.timings.processTelemetryStart[de]=ve()}o(ie,"setProcessTelemetryTimings");function Ze(ne){var de=0;if(ne!=null){var Ue=typeof ne;Ue==="string"?de=1:Ue==="number"?de=2:Ue==="boolean"?de=3:Ue===W.fK&&(de=4,(0,v.kJ)(ne)?(de=4096,ne.length>0&&(de|=Ze(ne[0]))):W.CY.call(ne,"value")&&(de=8192|Ze(ne.value)))}return de}o(Ze,"getFieldValueType");var ut={Version:E,FullVersionString:$,strUndefined:W.jA,strObject:W.fK,Undefined:W.jA,arrForEach:v.tO,arrIndexOf:v.UA,arrMap:v.Mr,arrReduce:v.Xz,objKeys:v.FY,toISOString:v.Y6,isReactNative:R.b$,isString:v.HD,isNumber:v.hj,isBoolean:v.jn,isFunction:v.mf,isArray:v.kJ,isObject:v.Kn,strTrim:v.nd,isDocumentObjectAvailable:Q,isWindowObjectAvailable:Z,isValueAssigned:T,getTenantId:Y,isBeaconsSupported:R.MF,isUint8ArrayAvailable:x,isLatency:le,sanitizeProperty:V,getISOString:v.Y6,useXDomainRequest:R.cp,getCommonSchemaMetaData:fe,cookieAvailable:P.p7,disallowsSameSiteNone:P.UY,setCookie:Ne,deleteCookie:ae,getCookie:we,createGuid:Ve,extend:ye,getTime:ve,isValueKind:G,isArrayValid:Ge,objDefineAccessors:v.l_,addPageUnloadEventListener:N.c9,setProcessTelemetryTimings:ie,addEventHandler:N.Ib,getFieldValueType:Ze,strEndsWith:v.Id,objForEachKey:v.rW},yt={_canUseCookies:void 0,isTypeof:v.Ym,isUndefined:v.o8,isNullOrUndefined:v.le,hasOwnProperty:v.nr,isFunction:v.mf,isObject:v.Kn,isDate:v.J_,isArray:v.kJ,isError:v.VZ,isString:v.HD,isNumber:v.hj,isBoolean:v.jn,toISOString:v.Y6,arrForEach:v.tO,arrIndexOf:v.UA,arrMap:v.Mr,arrReduce:v.Xz,strTrim:v.nd,objCreate:w.pu,objKeys:v.FY,objDefineAccessors:v.l_,addEventHandler:N.Ib,dateNow:v.m6,isIE:R.w1,disableCookies:Ae,newGuid:y.GW,perfNow:y.Jj,newId:m.pZ,randomValue:m.az,random32:m._l,mwcRandomSeed:m.CN,mwcRandom32:m.F6,generateW3CId:y.DO};function I(){return!!(0,R.a8)("chrome")}o(I,"isChromium");function U(ne,de,Ue,Ie,ce,Ce){Ie===void 0&&(Ie=!1),ce===void 0&&(ce=!1);function Te(pe,ke,et){try{pe[ke]=et}catch(nt){}}o(Te,"_wrapSetXhrProp");var Ye=new XMLHttpRequest;return Ie&&Te(Ye,F,Ie),Ue&&Te(Ye,j,Ue),Ye.open(ne,de,!ce),Ue&&Te(Ye,j,Ue),!ce&&Ce&&Te(Ye,q,Ce),Ye}o(U,"openXhr")},5229:(st,l,C)=>{"use strict";C.r(l),C.d(l,{BE_PROFILE:()=>et,NRT_PROFILE:()=>ke,PostChannel:()=>la,RT_PROFILE:()=>pe});var R=C(1088);/*!
 * Microsoft Dynamic Proto Utility, 1.1.7
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */var v,P="undefined",y="constructor",W="prototype",N="function",m="_dynInstFuncs",w="_isDynProxy",O="_dynClass",B="_dynCls$",E="_dynInstChk",$=E,F="_dfOpts",j="_unknown_",q="__proto__",_e="_dyn"+q,z="__dynProto$Gbl",Q="_dynInstProto",Z="useBaseInst",T="setInstFuncs",Y=Object,x=Y.getPrototypeOf,le=Y.getOwnPropertyNames;function V(){var xe;return typeof globalThis!==P&&(xe=globalThis),!xe&&typeof self!==P&&(xe=self),!xe&&typeof window!==P&&(xe=window),!xe&&typeof C.g!==P&&(xe=C.g),xe||{}}o(V,"_getGlobal");var fe=V(),Ae=fe[z]||(fe[z]={o:(v={},v[T]=!0,v[Z]=!0,v),n:1e3});function Ne(xe,rt){return xe&&Y[W].hasOwnProperty.call(xe,rt)}o(Ne,"_hasOwnProperty");function ae(xe){return xe&&(xe===Y[W]||xe===Array[W])}o(ae,"_isObjectOrArrayPrototype");function we(xe){return ae(xe)||xe===Function[W]}o(we,"_isObjectArrayOrFunctionPrototype");function D(xe){var rt;if(xe){if(x)return x(xe);var wt=xe[q]||xe[W]||(xe[y]?xe[y][W]:null);rt=xe[_e]||wt,Ne(xe,_e)||(delete xe[Q],rt=xe[_e]=xe[Q]||xe[_e],xe[Q]=wt)}return rt}o(D,"_getObjProto");function Ve(xe,rt){var wt=[];if(le)wt=le(xe);else for(var at in xe)typeof at=="string"&&Ne(xe,at)&&wt.push(at);if(wt&&wt.length>0)for(var Ft=0;Ft<wt.length;Ft++)rt(wt[Ft])}o(Ve,"_forEachProp");function ye(xe,rt,wt){return rt!==y&&typeof xe[rt]===N&&(wt||Ne(xe,rt))}o(ye,"_isDynamicCandidate");function ve(xe){throw new TypeError("DynamicProto: "+xe)}o(ve,"_throwTypeError");function G(xe){var rt={};return Ve(xe,function(wt){!rt[wt]&&ye(xe,wt,!1)&&(rt[wt]=xe[wt])}),rt}o(G,"_getInstanceFuncs");function se(xe,rt){for(var wt=xe.length-1;wt>=0;wt--)if(xe[wt]===rt)return!0;return!1}o(se,"_hasVisited");function Re(xe,rt,wt,at){function Ft(Ut,vn,Cn){var rr=vn[Cn];if(rr[w]&&at){var Wn=Ut[m]||{};Wn[$]!==!1&&(rr=(Wn[vn[O]]||{})[Cn]||rr)}return function(){return rr.apply(Ut,arguments)}}o(Ft,"_instFuncProxy");var zt={};Ve(wt,function(Ut){zt[Ut]=Ft(rt,wt,Ut)});for(var St=D(xe),Xt=[];St&&!we(St)&&!se(Xt,St);)Ve(St,function(Ut){!zt[Ut]&&ye(St,Ut,!x)&&(zt[Ut]=Ft(rt,St,Ut))}),Xt.push(St),St=D(St);return zt}o(Re,"_getBaseFuncs");function Ge(xe,rt,wt,at){var Ft=null;if(xe&&Ne(wt,O)){var zt=xe[m]||{};if(Ft=(zt[wt[O]]||{})[rt],Ft||ve("Missing ["+rt+"] "+N),!Ft[E]&&zt[$]!==!1){for(var St=!Ne(xe,rt),Xt=D(xe),Ut=[];St&&Xt&&!we(Xt)&&!se(Ut,Xt);){var vn=Xt[rt];if(vn){St=vn===at;break}Ut.push(Xt),Xt=D(Xt)}try{St&&(xe[rt]=Ft),Ft[E]=1}catch(Cn){zt[$]=!1}}}return Ft}o(Ge,"_getInstFunc");function ie(xe,rt,wt){var at=rt[xe];return at===wt&&(at=D(rt)[xe]),typeof at!==N&&ve("["+xe+"] is not a "+N),at}o(ie,"_getProtoFunc");function Ze(xe,rt,wt,at,Ft){function zt(Ut,vn){var Cn=o(function(){var rr=Ge(this,vn,Ut,Cn)||ie(vn,Ut,Cn);return rr.apply(this,arguments)},"dynProtoProxy");return Cn[w]=1,Cn}if(o(zt,"_createDynamicPrototype"),!ae(xe)){var St=wt[m]=wt[m]||{},Xt=St[rt]=St[rt]||{};St[$]!==!1&&(St[$]=!!Ft),Ve(wt,function(Ut){ye(wt,Ut,!1)&&wt[Ut]!==at[Ut]&&(Xt[Ut]=wt[Ut],delete wt[Ut],(!Ne(xe,Ut)||xe[Ut]&&!xe[Ut][w])&&(xe[Ut]=zt(xe,Ut)))})}}o(Ze,"_populatePrototype");function ut(xe,rt){if(x){for(var wt=[],at=D(rt);at&&!we(at)&&!se(wt,at);){if(at===xe)return!0;wt.push(at),at=D(at)}return!1}return!0}o(ut,"_checkPrototype");function yt(xe,rt){return Ne(xe,W)?xe.name||rt||j:((xe||{})[y]||{}).name||rt||j}o(yt,"_getObjName");function I(xe,rt,wt,at){Ne(xe,W)||ve("theClass is an invalid class definition.");var Ft=xe[W];ut(Ft,rt)||ve("["+yt(xe)+"] not in hierarchy of ["+yt(rt)+"]");var zt=null;Ne(Ft,O)?zt=Ft[O]:(zt=B+yt(xe,"_")+"$"+Ae.n,Ae.n++,Ft[O]=zt);var St=I[F],Xt=!!St[Z];Xt&&at&&at[Z]!==void 0&&(Xt=!!at[Z]);var Ut=G(rt),vn=Re(Ft,rt,Ut,Xt);wt(rt,vn);var Cn=!!x&&!!St[T];Cn&&at&&(Cn=!!at[T]),Ze(Ft,zt,rt,Ut,Cn!==!1)}o(I,"dynamicProto"),I[F]=Ae.o;var U=C(9288),ne=C(4869),de=C(5883),Ue=C(3599),Ie=C(6708),ce=C(7630),Ce=C(5928),Te=C(5018),Ye=C(4063),pe="REAL_TIME",ke="NEAR_REAL_TIME",et="BEST_EFFORT",nt="",be="POST",H="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",K="drop",Qe="send",Jt="requeue",Rn="rspFail",Pn="oth",wn="no-cache, no-store",lr="application/x-json-stream",sr="cache-control",mr="content-type",cr="kill-tokens",yr="kill-duration",ht="kill-duration-seconds",Gt="time-delta-millis",on="client-version",sn="client-id",jt="time-delta-to-apply-millis",_n="upload-time",Jn="apikey",pr="AuthMsaDeviceTicket",Qn="AuthXToken",Rr="sdk-version",Kr="NoResponseBody",Cr="msfpc",wr="trace",Nr="user";function Ln(xe){var rt=(xe.ext||{}).intweb;return rt&&(0,Ue.Sn)(rt[Cr])?rt[Cr]:null}o(Ln,"_getEventMsfpc");function On(xe){for(var rt=null,wt=0;rt===null&&wt<xe.length;wt++)rt=Ln(xe[wt]);return rt}o(On,"_getMsfpc");var br=function(){function xe(rt,wt){var at=wt?[].concat(wt):[],Ft=this,zt=On(at);Ft.iKey=function(){return rt},Ft.Msfpc=function(){return zt||nt},Ft.count=function(){return at.length},Ft.events=function(){return at},Ft.addEvent=function(St){return St?(at.push(St),zt||(zt=Ln(St)),!0):!1},Ft.split=function(St,Xt){var Ut;if(St<at.length){var vn=at.length-St;(0,Ie.le)(Xt)||(vn=Xt<vn?Xt:vn),Ut=at.splice(St,vn),zt=On(at)}return new xe(rt,Ut)}}return o(xe,"EventBatch"),xe.create=function(rt,wt){return new xe(rt,wt)},xe}(),Gr=function(){function xe(){var rt=!0,wt=!0,at=!0,Ft="use-collector-delta",zt=!1;I(xe,this,function(St){St.allowRequestSending=function(){return rt},St.firstRequestSent=function(){at&&(at=!1,zt||(rt=!1))},St.shouldAddClockSkewHeaders=function(){return wt},St.getClockSkewHeaderValue=function(){return Ft},St.setClockSkew=function(Xt){zt||(Xt?(Ft=Xt,wt=!0,zt=!0):wt=!1,rt=!0)}})}return o(xe,"ClockSkewManager"),xe.__ieDyn=1,xe}();const Tr=Gr;var pi=1e3,_r=function(){function xe(){var rt={};function wt(at){var Ft=[];return at&&(0,Ie.tO)(at,function(zt){Ft.push((0,Ie.nd)(zt))}),Ft}o(wt,"_normalizeTenants"),I(xe,this,function(at){at.setKillSwitchTenants=function(Ft,zt){if(Ft&&zt)try{var St=wt(Ft.split(","));if(zt==="this-request-only")return St;for(var Xt=parseInt(zt,10)*pi,Ut=0;Ut<St.length;++Ut)rt[St[Ut]]=(0,Ie.m6)()+Xt}catch(vn){return[]}return[]},at.isTenantKilled=function(Ft){var zt=rt,St=(0,Ie.nd)(Ft);return zt[St]!==void 0&&zt[St]>(0,Ie.m6)()?!0:(delete zt[St],!1)}})}return o(xe,"KillSwitch"),xe.__ieDyn=1,xe}();const M=_r;var ue=C(4392),Ee=.8,Le=1.2,tt=3e3,qe=6e5;function dt(xe){return!(xe>=300&&xe<500&&xe!=408&&xe!=429||xe==501||xe==505)}o(dt,"retryPolicyShouldRetryForStatus");function Dt(xe){var rt=0,wt=tt*Ee,at=tt*Le,Ft=Math.floor(Math.random()*(at-wt))+wt;return rt=Math.pow(2,xe)*Ft,Math.min(rt,qe)}o(Dt,"retryPolicyGetMillisToBackoffForRetry");var Tt=20,_t=3984588,bt=65e3,Ot=2e6,Bt=Math.min(Ot,bt),Wt="metadata",Mt="f",Kn=/\./,En=function(){function xe(rt,wt,at,Ft){var zt="data",St="baseData",Xt="ext",Ut=!!Ft,vn=!0,Cn=wt,rr={};I(xe,this,function(Wn){Wn.createPayload=function(Yt,cn,mn,Zt,L,X){return{apiKeys:[],payloadBlob:nt,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:Yt,isTeardown:cn,isSync:mn,isBeacon:Zt,sendType:X,sendReason:L}},Wn.appendPayload=function(Yt,cn,mn){var Zt=Yt&&cn&&!Yt.overflow;return Zt&&(0,U.Lm)(rt,function(){return"Serializer:appendPayload"},function(){for(var L=cn.events(),X=Yt.payloadBlob,De=Yt.numEvents,lt=!1,At=[],Pt=[],hn=Yt.isBeacon,gn=hn?bt:_t,tn=hn?Bt:Ot,nn=0,pn=0;nn<L.length;){var Kt=L[nn];if(Kt){if(De>=mn){Yt.overflow=cn.split(nn);break}var Ct=Wn.getEventBlob(Kt);if(Ct&&Ct.length<=tn){var bn=Ct.length,xn=X.length;if(xn+bn>gn){Yt.overflow=cn.split(nn);break}X&&(X+=`
`),X+=Ct,pn++,pn>Tt&&(X.substr(0,1),pn=0),lt=!0,De++}else Ct?At.push(Kt):Pt.push(Kt),L.splice(nn,1),nn--}nn++}if(At&&At.length>0&&Yt.sizeExceed.push(br.create(cn.iKey(),At)),Pt&&Pt.length>0&&Yt.failedEvts.push(br.create(cn.iKey(),Pt)),lt){Yt.batches.push(cn),Yt.payloadBlob=X,Yt.numEvents=De;var Fn=cn.iKey();(0,Ie.UA)(Yt.apiKeys,Fn)===-1&&Yt.apiKeys.push(Fn)}},function(){return{payload:Yt,theBatch:{iKey:cn.iKey(),evts:cn.events()},max:mn}}),Zt},Wn.getEventBlob=function(Yt){try{return(0,U.Lm)(rt,function(){return"Serializer.getEventBlob"},function(){var cn={};cn.name=Yt.name,cn.time=Yt.time,cn.ver=Yt.ver,cn.iKey="o:"+(0,Ue.jM)(Yt.iKey);var mn={},Zt=Yt[Xt];Zt&&(cn[Xt]=mn,(0,Ie.rW)(Zt,function(De,lt){var At=mn[De]={};Hn(lt,At,"ext."+De,!0,null,null,!0)}));var L=cn[zt]={};L.baseType=Yt.baseType;var X=L[St]={};return Hn(Yt.baseData,X,St,!1,[St],function(De,lt,At){Sr(mn,De,lt,At)},vn),Hn(Yt.data,L,zt,!1,[],function(De,lt,At){Sr(mn,De,lt,At)},vn),JSON.stringify(cn)},function(){return{item:Yt}})}catch(cn){return null}};function ir(Yt,cn){var mn=rr[Yt];return mn===void 0&&(Yt.length>=7&&(mn=(0,Ie.xe)(Yt,"ext.metadata")||(0,Ie.xe)(Yt,"ext.web")),rr[Yt]=mn),mn}o(ir,"_isReservedField");function Hn(Yt,cn,mn,Zt,L,X,De){(0,Ie.rW)(Yt,function(lt,At){var Pt=null;if(At||(0,Ue.Sn)(At)){var hn=mn,gn=lt,tn=L,nn=cn;if(Ut&&!Zt&&Kn.test(lt)){var pn=lt.split("."),Kt=pn.length;if(Kt>1){tn&&(tn=tn.slice());for(var Ct=0;Ct<Kt-1;Ct++){var bn=pn[Ct];nn=nn[bn]=nn[bn]||{},hn+="."+bn,tn&&tn.push(bn)}gn=pn[Kt-1]}}var xn=Zt&&ir(hn,gn);if(!xn&&Cn&&Cn.handleField(hn,gn)?Pt=Cn.value(hn,gn,At,at):Pt=(0,Ue.yj)(gn,At,at),Pt){var Fn=Pt.value;if(nn[gn]=Fn,X&&X(tn,gn,Pt),De&&typeof Fn=="object"&&!(0,Ie.kJ)(Fn)){var kn=tn;kn&&(kn=kn.slice(),kn.push(gn)),Hn(At,Fn,hn+"."+gn,Zt,kn,X,De)}}}})}o(Hn,"_processPathKeys")})}return o(xe,"Serializer"),xe.__ieDyn=1,xe}();function Sr(xe,rt,wt,at){if(at&&xe){var Ft=(0,Ue.Vv)(at.value,at.kind,at.propertyType);if(Ft>-1){var zt=xe[Wt];zt||(zt=xe[Wt]={f:{}});var St=zt[Mt];if(St||(St=zt[Mt]={}),rt)for(var Xt=0;Xt<rt.length;Xt++){var Ut=rt[Xt];St[Ut]||(St[Ut]={f:{}});var vn=St[Ut][Mt];vn||(vn=St[Ut][Mt]={}),St=vn}St=St[wt]={},(0,Ie.kJ)(at.value)?St.a={t:Ft}:St.t=Ft}}}o(Sr,"_addJSONPropertyMetaData");var Xn,ur="sendAttempt",zr="&"+Kr+"=true",Vr=(Xn={},Xn[1]=Jt,Xn[100]=Jt,Xn[200]="sent",Xn[8004]=K,Xn[8003]=K,Xn),$n={},mi={};function Vt(xe,rt,wt){$n[xe]=rt,wt!==!1&&(mi[rt]=xe)}o(Vt,"_addCollectorHeaderQsMapping"),Vt(pr,pr,!1),Vt(on,on),Vt(sn,"Client-Id"),Vt(Jn,Jn),Vt(jt,jt),Vt(_n,_n),Vt(Qn,Qn);function tr(xe){try{return xe.responseText}catch(rt){}return nt}o(tr,"_getResponseText");function An(xe,rt){var wt=!1;if(xe&&rt){var at=(0,Ie.FY)(xe);if(at&&at.length>0)for(var Ft=rt.toLowerCase(),zt=0;zt<at.length;zt++){var St=at[zt];if(St&&(0,Ie.nr)(rt,St)&&St.toLowerCase()===Ft){wt=!0;break}}}return wt}o(An,"_hasHeader");function Sn(xe,rt,wt,at){rt&&wt&&wt.length>0&&(at&&$n[rt]?(xe.hdrs[$n[rt]]=wt,xe.useHdrs=!0):xe.url+="&"+rt+"="+wt)}o(Sn,"_addRequestDetails");function fn(xe,rt){return rt&&((0,Ie.hj)(rt)?xe=[rt].concat(xe):(0,Ie.kJ)(rt)&&(xe=rt.concat(xe))),xe}o(fn,"_prependTransports");var nr=function(){function xe(rt,wt,at,Ft,zt){this._responseHandlers=[];var St="?cors=true&"+mr.toLowerCase()+"="+lr,Xt=new M,Ut=!1,vn=new Tr,Cn=!1,rr=0,Wn,ir,Hn,Yt,cn=!0,mn=[],Zt={},L=[],X=null,De=!1,lt,At=!1,Pt=!1,hn,gn,tn,nn,pn;I(xe,this,function(Kt){var Ct=!0;Kt.initialize=function(he,Xe,ot,pt,It){var Ht;It||(It={}),St=he+St,Pt=(0,Ie.o8)(It.avoidOptions)?!0:!It.avoidOptions,Yt=Xe,lt=Xe.getCookieMgr(),De=!Yt.config.disableEventTimings;var un=!!Yt.config.enableCompoundKey;Wn=ot,ir=Wn.diagLog();var ge=It.valueSanitizer,We=It.stringifyObjects;(0,Ie.o8)(It.enableCompoundKey)||(un=!!It.enableCompoundKey),hn=It.xhrTimeout,gn=!!It.disableXhrSync,tn=!!It.disableFetchKeepAlive,pn=It.addNoResponse!==!1,Cn=!(0,ce.b$)(),X=new En(Yt,ge,We,un),(0,Ie.le)(It.useSendBeacon)||(Cn=!!It.useSendBeacon);var Ke=pt,ft=It.alwaysUseXhrOverride?pt:null,Rt=It.alwaysUseXhrOverride?pt:null,kt=[3,2];if(!pt){cn=!1;var Dn=(0,ce.k$)();Dn&&Dn.protocol&&Dn.protocol.toLowerCase()==="file:"&&(Ct=!1);var Tn=[];(0,ce.b$)()?(Tn=[2,1],kt=[2,1,3]):Tn=[1,2,3],Tn=fn(Tn,It.transports),pt=bn(Tn,!1),pt||(0,Te.jV)(ir,"No available transport to send events"),Ke=bn(Tn,!0)}ft||(kt=fn(kt,It.unloadTransports),ft=bn(kt,!0)),nn=!cn&&(Cn&&(0,ce.MF)()||!tn&&(0,ce.JO)(!0)),Hn=(Ht={},Ht[0]=pt,Ht[1]=Ke||bn([1,2,3],!0),Ht[2]=ft||Ke||bn([1],!0),Ht[3]=Rt||bn([2,3],!0)||Ke||bn([1],!0),Ht)};function bn(he,Xe){for(var ot=0,pt=null,It=0;pt==null&&It<he.length;)ot=he[It],ot===1?(0,ce.cp)()?pt=xn:(0,ce.Z3)()&&(pt=kn):ot===2&&(0,ce.JO)(Xe)&&(!Xe||Xe&&!tn)?pt=Fn:Cn&&ot===3&&(0,ce.MF)()&&(pt=Br),It++;return pt?{_transport:ot,_isSync:Xe,sendPOST:pt}:null}o(bn,"_getSenderInterface"),Kt._getDbgPlgTargets=function(){return[Hn[0],Xt,X,Hn]};function xn(he,Xe,ot){var pt=new XDomainRequest;pt.open(be,he.urlString),he.timeout&&(pt.timeout=he.timeout),pt.onload=function(){var It=tr(pt);qt(Xe,200,{},It),Qr(It)},pt.onerror=function(){qt(Xe,400,{})},pt.ontimeout=function(){qt(Xe,500,{})},pt.onprogress=function(){},ot?pt.send(he.data):zt.set(function(){pt.send(he.data)},0)}o(xn,"_xdrSendPost");function Fn(he,Xe,ot){var pt,It=he.urlString,Ht=!1,un=!1,ge=(pt={body:he.data,method:be},pt[H]=!0,pt);ot&&(ge.keepalive=!0,he._sendReason===2&&(Ht=!0,pn&&(It+=zr))),Ct&&(ge.credentials="include"),he.headers&&(0,Ie.FY)(he.headers).length>0&&(ge.headers=he.headers),fetch(It,ge).then(function(We){var Ke={},ft=nt,Rt=We.headers;Rt&&Rt.forEach(function(kt,Dn){Ke[Dn]=kt}),We.body&&We.text().then(function(kt){ft=kt}),un||(un=!0,qt(Xe,We.status,Ke,ft),Qr(ft))}).catch(function(We){un||(un=!0,qt(Xe,0,{}))}),Ht&&!un&&(un=!0,qt(Xe,200,{})),!un&&he.timeout>0&&zt.set(function(){un||(un=!0,qt(Xe,500,{}))},he.timeout)}o(Fn,"_fetchSendPost");function kn(he,Xe,ot){var pt=he.urlString;function It(We,Ke,ft){if(!We[ft]&&Ke&&Ke.getResponseHeader){var Rt=Ke.getResponseHeader(ft);Rt&&(We[ft]=(0,Ie.nd)(Rt))}return We}o(It,"_appendHeader");function Ht(We){var Ke={};return We.getAllResponseHeaders?Ke=Ei(We.getAllResponseHeaders()):(Ke=It(Ke,We,Gt),Ke=It(Ke,We,yr),Ke=It(Ke,We,ht)),Ke}o(Ht,"_getAllResponseHeaders");function un(We,Ke){qt(Xe,We.status,Ht(We),Ke)}o(un,"xhrComplete"),ot&&he.disableXhrSync&&(ot=!1);var ge=(0,Ue.ot)(be,pt,Ct,!0,ot,he.timeout);(0,Ie.rW)(he.headers,function(We,Ke){ge.setRequestHeader(We,Ke)}),ge.onload=function(){var We=tr(ge);un(ge,We),Qr(We)},ge.onerror=function(){un(ge)},ge.ontimeout=function(){un(ge)},ge.send(he.data)}o(kn,"_xhrSendPost");function qt(he,Xe,ot,pt){try{he(Xe,ot,pt)}catch(It){(0,Te.kP)(ir,2,518,(0,ce.eU)(It))}}o(qt,"_doOnComplete");function Br(he,Xe,ot){var pt=he,It=200,Ht=pt._thePayload,un=he.urlString+(pn?zr:nt);try{var ge=(0,ce.jW)();if(!ge.sendBeacon(un,he.data))if(Ht){var We=[];(0,Ie.tO)(Ht.batches,function(Ke){if(We&&Ke&&Ke.count()>0){for(var ft=Ke.events(),Rt=0;Rt<ft.length;Rt++)if(!ge.sendBeacon(un,X.getEventBlob(ft[Rt]))){We.push(Ke.split(Rt));break}}else We.push(Ke.split(0))}),or(We,8003,Ht.sendType,!0)}else It=0}catch(Ke){(0,Te.jV)(ir,"Failed to send telemetry using sendBeacon API. Ex:"+(0,ce.eU)(Ke)),It=0}finally{qt(Xe,It,{},nt)}}o(Br,"_beaconSendPost");function Er(he){return he===2||he===3}o(Er,"_isBeaconPayload");function Bn(he){return At&&Er(he)&&(he=2),he}o(Bn,"_adjustSendType"),Kt.addQueryStringParameter=function(he,Xe){for(var ot=0;ot<mn.length;ot++)if(mn[ot].name===he){mn[ot].value=Xe;return}mn.push({name:he,value:Xe})},Kt.addHeader=function(he,Xe){Zt[he]=Xe},Kt.canSendRequest=function(){return ar()&&vn.allowRequestSending()},Kt.sendQueuedRequests=function(he,Xe){(0,Ie.o8)(he)&&(he=0),At&&(he=Bn(he),Xe=2),Lr(L,he,0)&&ri(Gn(),0,!1,he,Xe||0)},Kt.isCompletelyIdle=function(){return!Ut&&rr===0&&L.length===0},Kt.setUnloading=function(he){At=he},Kt.addBatch=function(he){if(he&&he.count()>0){if(Xt.isTenantKilled(he.iKey()))return!1;L.push(he)}return!0},Kt.teardown=function(){L.length>0&&ri(Gn(),0,!0,2,2)},Kt.pause=function(){Ut=!0},Kt.resume=function(){Ut=!1,Kt.sendQueuedRequests(0,4)},Kt.sendSynchronousBatch=function(he,Xe,ot){he&&he.count()>0&&((0,Ie.le)(Xe)&&(Xe=1),At&&(Xe=Bn(Xe),ot=2),ri([he],0,!1,Xe,ot||0))};function ar(){return!Ut&&rr<wt}o(ar,"_hasIdleConnection");function Gn(){var he=L;return L=[],he}o(Gn,"_clearQueue");function Lr(he,Xe,ot){var pt=!1;return he&&he.length>0&&!Ut&&Hn[Xe]&&X&&(pt=Xe!==0||ar()&&(ot>0||vn.allowRequestSending())),pt}o(Lr,"_canSendPayload");function ui(he){var Xe={};return he&&(0,Ie.tO)(he,function(ot,pt){Xe[pt]={iKey:ot.iKey(),evts:ot.events()}}),Xe}o(ui,"_createDebugBatches");function ri(he,Xe,ot,pt,It){if(!(!he||he.length===0)){if(Ut){or(he,1,pt);return}pt=Bn(pt);try{var Ht=he,un=pt!==0;(0,U.Lm)(Yt,function(){return"HttpManager:_sendBatches"},function(ge){ge&&(he=he.slice(0));for(var We=[],Ke=null,ft=(0,Ue.hK)(),Rt=Hn[pt]||(un?Hn[1]:Hn[0]),kt=Rt&&Rt._transport,Dn=nn&&(At||Er(pt)||kt===3||Rt._isSync&&kt===2);Lr(he,pt,Xe);){var Tn=he.shift();Tn&&Tn.count()>0&&(Xt.isTenantKilled(Tn.iKey())?We.push(Tn):(Ke=Ke||X.createPayload(Xe,ot,un,Dn,It,pt),X.appendPayload(Ke,Tn,rt)?Ke.overflow!==null&&(he=[Ke.overflow].concat(he),Ke.overflow=null,bi(Ke,ft,(0,Ue.hK)(),It),ft=(0,Ue.hK)(),Ke=null):(bi(Ke,ft,(0,Ue.hK)(),It),ft=(0,Ue.hK)(),he=[Tn].concat(he),Ke=null)))}Ke&&bi(Ke,ft,(0,Ue.hK)(),It),he.length>0&&(L=he.concat(L)),or(We,8004,pt)},function(){return{batches:ui(Ht),retryCount:Xe,isTeardown:ot,isSynchronous:un,sendReason:It,useSendBeacon:Er(pt),sendType:pt}},!un)}catch(ge){(0,Te.kP)(ir,2,48,"Unexpected Exception sending batch: "+(0,ce.eU)(ge))}}}o(ri,"_sendBatches");function ii(he,Xe){var ot={url:St,hdrs:{},useHdrs:!1};Xe?(ot.hdrs=(0,Ue.l7)(ot.hdrs,Zt),ot.useHdrs=(0,Ie.FY)(ot.hdrs).length>0):(0,Ie.rW)(Zt,function(ge,We){mi[ge]?Sn(ot,mi[ge],We,!1):(ot.hdrs[ge]=We,ot.useHdrs=!0)}),Sn(ot,sn,"NO_AUTH",Xe),Sn(ot,on,Ue.vs,Xe);var pt=nt;(0,Ie.tO)(he.apiKeys,function(ge){pt.length>0&&(pt+=","),pt+=ge}),Sn(ot,Jn,pt,Xe),Sn(ot,_n,(0,Ie.m6)().toString(),Xe);var It=oi(he);if((0,Ue.Sn)(It)&&(ot.url+="&ext.intweb.msfpc="+It),vn.shouldAddClockSkewHeaders()&&Sn(ot,jt,vn.getClockSkewHeaderValue(),Xe),Yt.getWParam){var Ht=Yt.getWParam();Ht>=0&&(ot.url+="&w="+Ht)}for(var un=0;un<mn.length;un++)ot.url+="&"+mn[un].name+"="+mn[un].value;return ot}o(ii,"_buildRequestDetails");function Pr(he,Xe,ot){he[Xe]=he[Xe]||{},he[Xe][Wn.identifier]=ot}o(Pr,"_setTimingValue");function bi(he,Xe,ot,pt){if(he&&he.payloadBlob&&he.payloadBlob.length>0){var It=!!Kt.sendHook,Ht=Hn[he.sendType];!Er(he.sendType)&&he.isBeacon&&he.sendReason===2&&(Ht=Hn[2]||Hn[3]||Ht);var un=Pt;(he.isBeacon||Ht._transport===3)&&(un=!1);var ge=ii(he,un);un=un||ge.useHdrs;var We=(0,Ue.hK)();(0,U.Lm)(Yt,function(){return"HttpManager:_doPayloadSend"},function(){for(var Ke=0;Ke<he.batches.length;Ke++)for(var ft=he.batches[Ke],Rt=ft.events(),kt=0;kt<Rt.length;kt++){var Dn=Rt[kt];if(De){var Tn=Dn.timings=Dn.timings||{};Pr(Tn,"sendEventStart",We),Pr(Tn,"serializationStart",Xe),Pr(Tn,"serializationCompleted",ot)}Dn[ur]>0?Dn[ur]++:Dn[ur]=1}or(he.batches,1e3+(pt||0),he.sendType,!0);var zn={data:he.payloadBlob,urlString:ge.url,headers:ge.hdrs,_thePayload:he,_sendReason:pt,timeout:hn,disableXhrSync:gn,disableFetchKeepAlive:tn};un&&(An(zn.headers,sr)||(zn.headers[sr]=wn),An(zn.headers,mr)||(zn.headers[mr]=lr));var fi=null;Ht&&(fi=o(function(Bi){vn.firstRequestSent();var hi=o(function(Pi,gi){di(Pi,gi,he,pt)},"onComplete"),dr=he.isTeardown||he.isSync;try{Ht.sendPOST(Bi,hi,dr),Kt.sendListener&&Kt.sendListener(zn,Bi,dr,he.isBeacon)}catch(Pi){(0,Te.jV)(ir,"Unexpected exception sending payload. Ex:"+(0,ce.eU)(Pi)),qt(hi,0,{})}},"sender")),(0,U.Lm)(Yt,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(fi)if(he.sendType===0&&rr++,It&&!he.isBeacon&&Ht._transport!==3){var Bi={data:zn.data,urlString:zn.urlString,headers:(0,Ue.l7)({},zn.headers),timeout:zn.timeout,disableXhrSync:zn.disableXhrSync,disableFetchKeepAlive:zn.disableFetchKeepAlive},hi=!1;(0,U.Lm)(Yt,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{Kt.sendHook(Bi,function(dr){hi=!0,!cn&&!dr._thePayload&&(dr._thePayload=dr._thePayload||zn._thePayload,dr._sendReason=dr._sendReason||zn._sendReason),fi(dr)},he.isSync||he.isTeardown)}catch(dr){hi||fi(zn)}})}else fi(zn)})},function(){return{thePayload:he,serializationStart:Xe,serializationCompleted:ot,sendReason:pt}},he.isSync)}he.sizeExceed&&he.sizeExceed.length>0&&or(he.sizeExceed,8003,he.sendType),he.failedEvts&&he.failedEvts.length>0&&or(he.failedEvts,8002,he.sendType)}o(bi,"_doPayloadSend");function Ar(he,Xe){De&&(0,Ie.tO)(he,function(ot){var pt=ot.timings=ot.timings||{};Pr(pt,"sendEventCompleted",Xe)})}o(Ar,"_addEventCompletedTimings");function di(he,Xe,ot,pt){var It=9e3,Ht=null,un=!1,ge=!1;try{var We=!0;if(typeof he!==ue.jA){if(Xe){vn.setClockSkew(Xe[Gt]);var Ke=Xe[yr]||Xe["kill-duration-seconds"];(0,Ie.tO)(Xt.setKillSwitchTenants(Xe[cr],Ke),function(Rt){(0,Ie.tO)(ot.batches,function(kt){if(kt.iKey()===Rt){Ht=Ht||[];var Dn=kt.split(0);ot.numEvents-=Dn.count(),Ht.push(Dn)}})})}if(he==200||he==204){It=200;return}(!dt(he)||ot.numEvents<=0)&&(We=!1),It=9e3+he%1e3}if(We){It=100;var ft=ot.retryCnt;ot.sendType===0&&(ft<at?(un=!0,_i(function(){ot.sendType===0&&rr--,ri(ot.batches,ft+1,ot.isTeardown,At?2:ot.sendType,5)},At,Dt(ft))):(ge=!0,At&&(It=8001)))}}finally{un||(vn.setClockSkew(),ai(ot,It,pt,ge)),or(Ht,8004,ot.sendType)}}o(di,"_retryRequestIfNeeded");function ai(he,Xe,ot,pt){try{pt&&Wn._backOffTransmission(),Xe===200&&(!pt&&!he.isSync&&Wn._clearBackOff(),Ir(he.batches)),or(he.batches,Xe,he.sendType,!0)}finally{he.sendType===0&&(rr--,ot!==5&&Kt.sendQueuedRequests(he.sendType,ot))}}o(ai,"_handleRequestFinished");function Ir(he){if(De){var Xe=(0,Ue.hK)();(0,Ie.tO)(he,function(ot){ot&&ot.count()>0&&Ar(ot.events(),Xe)})}}o(Ir,"_addCompleteTimings");function _i(he,Xe,ot){Xe?he():zt.set(he,ot)}o(_i,"_doAction");function Ei(he){var Xe={};if((0,Ie.HD)(he)){var ot=(0,Ie.nd)(he).split(/[\r\n]+/);(0,Ie.tO)(ot,function(pt){if(pt){var It=pt.indexOf(": ");if(It!==-1){var Ht=(0,Ie.nd)(pt.substring(0,It)).toLowerCase(),un=(0,Ie.nd)(pt.substring(It+1));Xe[Ht]=un}else Xe[(0,Ie.nd)(pt)]=1}})}return Xe}o(Ei,"_convertAllHeadersToMap");function oi(he){for(var Xe=0;Xe<he.batches.length;Xe++){var ot=he.batches[Xe].Msfpc();if(ot)return encodeURIComponent(ot)}return nt}o(oi,"_getMsfpc");function Qr(he){var Xe=Kt._responseHandlers;try{for(var ot=0;ot<Xe.length;ot++)try{Xe[ot](he)}catch(It){(0,Te.kP)(ir,1,519,"Response handler failed: "+It)}if(he){var pt=JSON.parse(he);(0,Ue.Sn)(pt.webResult)&&(0,Ue.Sn)(pt.webResult[Cr])&&lt.set("MSFPC",pt.webResult[Cr],365*86400)}}catch(It){}}o(Qr,"_handleCollectorResponse");function or(he,Xe,ot,pt){if(he&&he.length>0&&Ft){var It=Ft[Jr(Xe)];if(It){var Ht=ot!==0;(0,U.Lm)(Yt,function(){return"HttpManager:_sendBatchesNotification"},function(){_i(function(){try{It.call(Ft,he,Xe,Ht,ot)}catch(un){(0,Te.kP)(ir,1,74,"send request notification failed: "+un)}},pt||Ht,0)},function(){return{batches:ui(he),reason:Xe,isSync:Ht,sendSync:pt,sendType:ot}},!Ht)}}}o(or,"_sendBatchesNotification");function Jr(he){var Xe=Vr[he];return(0,Ue.Sn)(Xe)||(Xe=Pn,he>=9e3&&he<=9999?Xe=Rn:he>=8e3&&he<=8999?Xe=K:he>=1e3&&he<=1999&&(Xe=Qe)),Xe}o(Jr,"_getNotificationAction")})}return o(xe,"HttpManager"),xe.__ieDyn=1,xe}();function Zn(xe,rt){for(var wt=[],at=2;at<arguments.length;at++)wt[at-2]=arguments[at];return setTimeout(xe,rt,wt)}o(Zn,"defaultSetTimeout");function Or(xe){clearTimeout(xe)}o(Or,"defaultClearTimeout");function yi(xe,rt){return{set:xe||Zn,clear:rt||Or}}o(yi,"createTimeoutWrapper");var wi=.25,Ni=500,Si=20,Hr=6,Ci=2,sa=4,ji=2,Oi=1,ei="eventsDiscarded",ti="overrideInstrumentationKey",ni="maxEventRetryAttempts",ra="maxUnloadEventRetryAttempts",Hi="addUnloadCb",ci=function(xe){(0,R.ne)(rt,xe);function rt(){var wt=xe.call(this)||this;wt.identifier="PostChannel",wt.priority=1011,wt.version="3.2.10";var at,Ft=!1,zt=[],St=null,Xt=!1,Ut=0,vn=500,Cn=0,rr=1e4,Wn={},ir=pe,Hn=null,Yt=null,cn=0,mn=0,Zt,L,X={},De,lt,At=-1,Pt,hn=!0,gn=!1,tn=Hr,nn=Ci,pn,Kt;return I(rt,wt,function(Ct,bn){ar(),Ct._getDbgPlgTargets=function(){return[L]},Ct.initialize=function(ge,We,Ke){(0,U.Lm)(We,function(){return"PostChannel:initialize"},function(){var ft=We;bn.initialize(ge,We,Ke);try{var Rt=!!We[Hi];pn=(0,ne.jU)((0,de.J)(Ct.identifier),We.evtNamespace&&We.evtNamespace());var kt=Ct._getTelCtx();ge.extensionConfig[Ct.identifier]=ge.extensionConfig[Ct.identifier]||{},at=kt.getExtCfg(Ct.identifier),Kt=yi(at.setTimeoutOverride,at.clearTimeoutOverride),hn=!at.disableOptimizeObj&&(0,Ue.mJ)(),xn(ft),at.eventsLimitInMem>0&&(rr=at.eventsLimitInMem),at.immediateEventLimit>0&&(vn=at.immediateEventLimit),at.autoFlushEventsLimit>0&&(De=at.autoFlushEventsLimit),(0,Ie.hj)(at[ni])&&(tn=at[ni]),(0,Ie.hj)(at[ra])&&(nn=at[ra]),un(),at.httpXHROverride&&at.httpXHROverride.sendPOST&&(Zt=at.httpXHROverride),(0,Ue.Sn)(ge.anonCookieName)&&L.addQueryStringParameter("anoncknm",ge.anonCookieName),L.sendHook=at.payloadPreprocessor,L.sendListener=at.payloadListener;var Dn=at.overrideEndpointUrl?at.overrideEndpointUrl:ge.endpointUrl;Ct._notificationManager=We.getNotifyMgr(),L.initialize(Dn,Ct.core,Ct,Zt,at);var Tn=ge.disablePageUnloadEvents||[];(0,ne.c9)(Fn,Tn,pn),(0,ne.TJ)(Fn,Tn,pn),(0,ne.nD)(kn,ge.disablePageShowEvents,pn)}catch(zn){throw Ct.setInitialized(!1),zn}},function(){return{coreConfig:ge,core:We,extensions:Ke}})},Ct.processTelemetry=function(ge,We){(0,Ue.if)(ge,Ct.identifier),We=Ct._getTelCtx(We);var Ke=We.getExtCfg(Ct.identifier),ft=!!at.disableTelemetry;Ke&&(ft=ft||!!Ke.disableTelemetry);var Rt=ge;!ft&&!Ft&&(at[ti]&&(Rt.iKey=at[ti]),Ke&&Ke[ti]&&(Rt.iKey=Ke[ti]),qt(Rt,!0),gn?ui(2,2):Bn()),Ct.processNext(Rt,We)},Ct._doTeardown=function(ge,We){ui(2,2),Ft=!0,L.teardown(),(0,ne.JA)(null,pn),(0,ne.C9)(null,pn),(0,ne.Yl)(null,pn),ar()};function xn(ge){var We=ge.getWParam;ge.getWParam=function(){var Ke=0;return at.ignoreMc1Ms0CookieProcessing&&(Ke=Ke|2),Ke|We()}}o(xn,"_hookWParam");function Fn(ge){var We=ge||(0,ce.Jj)().event;We.type!=="beforeunload"&&(gn=!0,L.setUnloading(gn)),ui(2,2)}o(Fn,"_handleUnloadEvents");function kn(ge){gn=!1,L.setUnloading(gn)}o(kn,"_handleShowEvents");function qt(ge,We){if(ge.sendAttempt||(ge.sendAttempt=0),ge.latency||(ge.latency=1),ge.ext&&ge.ext[wr]&&delete ge.ext[wr],ge.ext&&ge.ext[Nr]&&ge.ext[Nr].id&&delete ge.ext[Nr].id,hn&&(Ue.if,ge.ext=(0,Ie.Ax)(ge.ext),ge.baseData&&(ge.baseData=(0,Ie.Ax)(ge.baseData)),ge.data&&(ge.data=(0,Ie.Ax)(ge.data))),ge.sync){if(cn||Xt)ge.latency=3,ge.sync=!1;else if(L){hn&&(ge=(0,Ie.Ax)(ge)),L.sendSynchronousBatch(br.create(ge.iKey,[ge]),ge.sync===!0?1:ge.sync,3);return}}var Ke=ge.latency,ft=Cn,Rt=rr;Ke===4&&(ft=Ut,Rt=vn);var kt=!1;if(ft<Rt)kt=!bi(ge,We);else{var Dn=1,Tn=Si;Ke===4&&(Dn=4,Tn=1),kt=!0,Ar(ge.iKey,ge.latency,Dn,Tn)&&(kt=!bi(ge,We))}kt&&Jr(ei,[ge],Ce.h.QueueFull)}o(qt,"_addEventToQueues"),Ct.setEventQueueLimits=function(ge,We){rr=ge>0?ge:1e4,De=We>0?We:0,un();var Ke=Cn>ge;if(!Ke&&lt>0)for(var ft=1;!Ke&&ft<=3;ft++){var Rt=X[ft];Rt&&Rt.batches&&(0,Ie.tO)(Rt.batches,function(kt){kt&&kt.count()>=lt&&(Ke=!0)})}Pr(!0,Ke)},Ct.pause=function(){Lr(),Xt=!0,L.pause()},Ct.resume=function(){Xt=!1,L.resume(),Bn()},Ct.addResponseHandler=function(ge){L._responseHandlers.push(ge)},Ct._loadTransmitProfiles=function(ge){Ei(),(0,Ie.rW)(ge,function(We,Ke){var ft=Ke.length;if(ft>=2){var Rt=ft>2?Ke[2]:0;if(Ke.splice(0,ft-2),Ke[1]<0&&(Ke[0]=-1),Ke[1]>0&&Ke[0]>0){var kt=Ke[0]/Ke[1];Ke[0]=Math.ceil(kt)*Ke[1]}Rt>=0&&Ke[1]>=0&&Rt>Ke[1]&&(Rt=Ke[1]),Ke.push(Rt),Wn[We]=Ke}})},Ct.flush=function(ge,We,Ke){if(ge===void 0&&(ge=!0),!Xt)if(Ke=Ke||1,ge)St==null?(Lr(),ai(1,0,Ke),St=Gn(function(){St=null,Ir(We,Ke)},0)):zt.push(We);else{var ft=Lr();Br(1,1,Ke),We!=null&&We(),ft&&Bn()}},Ct.setMsaAuthTicket=function(ge){L.addHeader(pr,ge)},Ct.hasEvents=Er,Ct._setTransmitProfile=function(ge){ir!==ge&&Wn[ge]!==void 0&&(Lr(),ir=ge,Bn())};function Br(ge,We,Ke){var ft=ai(ge,We,Ke);return L.sendQueuedRequests(We,Ke),ft}o(Br,"_sendEventsForLatencyAndAbove");function Er(){return Cn>0}o(Er,"_hasEvents");function Bn(){if(At>=0&&ai(At,0,Pt)&&L.sendQueuedRequests(0,Pt),Ut>0&&!Yt&&!Xt){var ge=Wn[ir][2];ge>=0&&(Yt=Gn(function(){Yt=null,Br(4,0,1),Bn()},ge))}var We=Wn[ir][1];!Hn&&!St&&We>=0&&!Xt&&(Er()?Hn=Gn(function(){Hn=null,Br(mn===0?3:1,0,1),mn++,mn%=2,Bn()},We):mn=0)}o(Bn,"_scheduleTimer"),Ct._backOffTransmission=function(){cn<sa&&(cn++,Lr(),Bn())},Ct._clearBackOff=function(){cn&&(cn=0,Lr(),Bn())};function ar(){at=null,Ft=!1,zt=[],St=null,Xt=!1,Ut=0,vn=500,Cn=0,rr=1e4,Wn={},ir=pe,Hn=null,Yt=null,cn=0,mn=0,Zt=null,X={},De=void 0,lt=0,At=-1,Pt=null,hn=!0,gn=!1,tn=Hr,nn=Ci,pn=null,Kt=yi(),L=new nr(Ni,ji,Oi,{requeue:Qr,send:Xe,sent:ot,drop:pt,rspFail:It,oth:Ht},Kt),oi(),ri(),un()}o(ar,"_initDefaults");function Gn(ge,We){We===0&&cn&&(We=1);var Ke=1e3;return cn&&(Ke=Dt(cn-1)),Kt.set(ge,We*Ke)}o(Gn,"_createTimer");function Lr(){return Hn!==null?(Kt.clear(Hn),Hn=null,mn=0,!0):!1}o(Lr,"_clearScheduledTimer");function ui(ge,We){Lr(),St&&(Kt.clear(St),St=null),Xt||Br(1,ge,We)}o(ui,"_releaseAllQueues");function ri(){X[4]={batches:[],iKeyMap:{}},X[3]={batches:[],iKeyMap:{}},X[2]={batches:[],iKeyMap:{}},X[1]={batches:[],iKeyMap:{}}}o(ri,"_clearQueues");function ii(ge,We,Ke){var ft=X[We];ft||(We=1,ft=X[We]);var Rt=ft.iKeyMap[ge];return!Rt&&Ke&&(Rt=br.create(ge),ft.batches.push(Rt),ft.iKeyMap[ge]=Rt),Rt}o(ii,"_getEventBatch");function Pr(ge,We){L.canSendRequest()&&!cn&&(De>0&&Cn>De&&(We=!0),We&&St==null&&Ct.flush(ge,null,20))}o(Pr,"_performAutoFlush");function bi(ge,We){hn&&(ge=(0,Ie.Ax)(ge));var Ke=ge.latency,ft=ii(ge.iKey,Ke,!0);return ft.addEvent(ge)?(Ke!==4?(Cn++,We&&ge.sendAttempt===0&&Pr(!ge.sync,lt>0&&ft.count()>=lt)):Ut++,!0):!1}o(bi,"_addEventToProperQueue");function Ar(ge,We,Ke,ft){for(;Ke<=We;){var Rt=ii(ge,We,!0);if(Rt&&Rt.count()>0){var kt=Rt.split(0,ft),Dn=kt.count();if(Dn>0)return Ke===4?Ut-=Dn:Cn-=Dn,he(ei,[kt],Ce.h.QueueFull),!0}Ke++}return di(),!1}o(Ar,"_dropEventWithLatencyOrLess");function di(){for(var ge=0,We=0,Ke=o(function(Rt){var kt=X[Rt];kt&&kt.batches&&(0,Ie.tO)(kt.batches,function(Dn){Rt===4?ge+=Dn.count():We+=Dn.count()})},"_loop_1"),ft=1;ft<=4;ft++)Ke(ft);Cn=We,Ut=ge}o(di,"_resetQueueCounts");function ai(ge,We,Ke){var ft=!1,Rt=We===0;return!Rt||L.canSendRequest()?(0,U.Lm)(Ct.core,function(){return"PostChannel._queueBatches"},function(){for(var kt=[],Dn=4;Dn>=ge;){var Tn=X[Dn];Tn&&Tn.batches&&Tn.batches.length>0&&((0,Ie.tO)(Tn.batches,function(zn){L.addBatch(zn)?ft=ft||zn&&zn.count()>0:kt=kt.concat(zn.events()),Dn===4?Ut-=zn.count():Cn-=zn.count()}),Tn.batches=[],Tn.iKeyMap={}),Dn--}kt.length>0&&Jr(ei,kt,Ce.h.KillSwitch),ft&&At>=ge&&(At=-1,Pt=0)},function(){return{latency:ge,sendType:We,sendReason:Ke}},!Rt):(At=At>=0?Math.min(At,ge):ge,Pt=Math.max(Pt,Ke)),ft}o(ai,"_queueBatches");function Ir(ge,We){Br(1,0,We),di(),_i(function(){ge&&ge(),zt.length>0?St=Gn(function(){St=null,Ir(zt.shift(),We)},0):(St=null,Bn())})}o(Ir,"_flushImpl");function _i(ge){L.isCompletelyIdle()?ge():St=Gn(function(){St=null,_i(ge)},wi)}o(_i,"_waitForIdleManager");function Ei(){Lr(),oi(),ir=pe,Bn()}o(Ei,"_resetTransmitProfiles");function oi(){Wn={},Wn[pe]=[2,1,0],Wn[ke]=[6,3,0],Wn[et]=[18,9,0]}o(oi,"_initializeProfiles");function Qr(ge,We){var Ke=[],ft=tn;gn&&(ft=nn),(0,Ie.tO)(ge,function(Rt){Rt&&Rt.count()>0&&(0,Ie.tO)(Rt.events(),function(kt){kt&&(kt.sync&&(kt.latency=4,kt.sync=!1),kt.sendAttempt<ft?((0,Ue.if)(kt,Ct.identifier),qt(kt,!1)):Ke.push(kt))})}),Ke.length>0&&Jr(ei,Ke,Ce.h.NonRetryableStatus),gn&&ui(2,2)}o(Qr,"_requeueEvents");function or(ge,We){var Ke=Ct._notificationManager||{},ft=Ke[ge];if(ft)try{ft.apply(Ke,We)}catch(Rt){(0,Te.kP)(Ct.diagLog(),1,74,ge+" notification failed: "+Rt)}}o(or,"_callNotification");function Jr(ge,We){for(var Ke=[],ft=2;ft<arguments.length;ft++)Ke[ft-2]=arguments[ft];We&&We.length>0&&or(ge,[We].concat(Ke))}o(Jr,"_notifyEvents");function he(ge,We){for(var Ke=[],ft=2;ft<arguments.length;ft++)Ke[ft-2]=arguments[ft];We&&We.length>0&&(0,Ie.tO)(We,function(Rt){Rt&&Rt.count()>0&&or(ge,[Rt.events()].concat(Ke))})}o(he,"_notifyBatchEvents");function Xe(ge,We,Ke){ge&&ge.length>0&&or("eventsSendRequest",[We>=1e3&&We<=1999?We-1e3:0,Ke!==!0])}o(Xe,"_sendingEvent");function ot(ge,We){he("eventsSent",ge,We),Bn()}o(ot,"_eventsSentEvent");function pt(ge,We){he(ei,ge,We>=8e3&&We<=8999?We-8e3:Ce.h.Unknown)}o(pt,"_eventsDropped");function It(ge){he(ei,ge,Ce.h.NonRetryableStatus),Bn()}o(It,"_eventsResponseFail");function Ht(ge,We){he(ei,ge,Ce.h.Unknown),Bn()}o(Ht,"_otherEvent");function un(){!at||!at.disableAutoBatchFlushLimit?lt=Math.max(Ni*(ji+1),rr/6):lt=0}o(un,"_setAutoLimits"),(0,Ie.l_)(Ct,"_setTimeoutOverride",function(){return Kt.set},function(ge){Kt=yi(ge,Kt.clear)}),(0,Ie.l_)(Ct,"_clearTimeoutOverride",function(){return Kt.clear},function(ge){Kt=yi(Kt.set,ge)})}),wt}return o(rt,"PostChannel"),rt.__ieDyn=1,rt}(Ye.i);const la=ci},4873:(st,l,C)=>{"use strict";C.d(l,{By:()=>v,cc:()=>y});var R=C(6708);function v(W){var N={};return(0,R.rW)(W,function(m,w){N[m]=w,N[w]=m}),(0,R._A)(N)}o(v,"createEnumStyle");function P(W){var N={};return objForEachKey(W,function(m,w){N[m]=m,N[w]=m}),deepFreeze(N)}o(P,"createEnumMap");function y(W){var N={};return(0,R.rW)(W,function(m,w){N[m]=w[1],N[w[0]]=w[1]}),(0,R._A)(N)}o(y,"createValueMap")},5928:(st,l,C)=>{"use strict";C.d(l,{h:()=>v});var R=C(4873),v=(0,R.By)({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5})},7310:(st,l,C)=>{"use strict";C.d(l,{X:()=>Q,v:()=>Z});var R=C(4873),v,P="Failed",y=P+"MonitorAjax",W="Track",N="Start",m="Stop",w="Event",O="AuthContext",B="Exception",E="Local",$="Session",F="Storage",j="Browser",q="Cannot",_e="Buffer",z="InstrumentationKey",Q=(0,R.By)({CRITICAL:1,WARNING:2}),Z=(0,R.By)((v={},v[j+"DoesNotSupport"+E+F]=0,v[j+q+"Read"+E+F]=1,v[j+q+"Read"+$+F]=2,v[j+q+"Write"+E+F]=3,v[j+q+"Write"+$+F]=4,v[j+P+"RemovalFrom"+E+F]=5,v[j+P+"RemovalFrom"+$+F]=6,v[q+"SendEmptyTelemetry"]=7,v.ClientPerformanceMathError=8,v["ErrorParsingAI"+$+"Cookie"]=9,v.ErrorPVCalc=10,v[B+"WhileLoggingError"]=11,v[P+"AddingTelemetryTo"+_e]=12,v[y+"Abort"]=13,v[y+"Dur"]=14,v[y+"Open"]=15,v[y+"RSC"]=16,v[y+"Send"]=17,v[y+"GetCorrelationHeader"]=18,v[P+"ToAddHandlerForOnBeforeUnload"]=19,v[P+"ToSendQueuedTelemetry"]=20,v[P+"ToReportDataLoss"]=21,v["Flush"+P]=22,v.MessageLimitPerPVExceeded=23,v.MissingRequiredFieldSpecification=24,v.NavigationTimingNotSupported=25,v.OnError=26,v[$+"RenewalDateIsZero"]=27,v.SenderNotInitialized=28,v[N+W+w+P]=29,v[m+W+w+P]=30,v[N+W+P]=31,v[m+W+P]=32,v.TelemetrySampledAndNotSent=33,v[W+w+P]=34,v[W+B+P]=35,v[W+"Metric"+P]=36,v[W+"PV"+P]=37,v[W+"PV"+P+"Calc"]=38,v[W+"Trace"+P]=39,v["Transmission"+P]=40,v[P+"ToSet"+F+_e]=41,v[P+"ToRestore"+F+_e]=42,v.InvalidBackendResponse=43,v[P+"ToFixDepricatedValues"]=44,v.InvalidDurationValue=45,v.TelemetryEnvelopeInvalid=46,v.CreateEnvelopeError=47,v[q+"SerializeObject"]=48,v[q+"SerializeObjectNonSerializable"]=49,v.CircularReferenceDetected=50,v["Clear"+O+P]=51,v[B+"Truncated"]=52,v.IllegalCharsInName=53,v.ItemNotInArray=54,v.MaxAjaxPerPVExceeded=55,v.MessageTruncated=56,v.NameTooLong=57,v.SampleRateOutOfRange=58,v["Set"+O+P]=59,v["Set"+O+P+"AccountName"]=60,v.StringValueTooLong=61,v.StartCalledMoreThanOnce=62,v.StopCalledWithoutStart=63,v["TelemetryInitializer"+P]=64,v.TrackArgumentsNotSpecified=65,v.UrlTooLong=66,v[$+F+_e+"Full"]=67,v[q+"AccessCookie"]=68,v.IdTooLong=69,v.InvalidEvent=70,v[y+"SetRequestHeader"]=71,v["Send"+j+"InfoOnUserInit"]=72,v["Plugin"+B]=73,v["Notification"+B]=74,v.SnippetScriptLoadFailure=99,v["Invalid"+z]=100,v[q+"ParseAiBlobValue"]=101,v.InvalidContentBlob=102,v[W+"PageAction"+w+P]=103,v[P+"AddingCustomDefinedRequestContext"]=104,v["InMemory"+F+_e+"Full"]=105,v[z+"Deprecation"]=106,v))},5121:(st,l,C)=>{"use strict";C.d(l,{F:()=>B});var R=C(1088),v=C(1679),P=C(8096),y=C(6900),W=C(5018),N=C(6708),m=C(6041),w=C(1880),O=C(9288),B=function(E){(0,R.ne)($,E);function $(){var F=E.call(this)||this;return(0,v.Z)($,F,function(j,q){j[P.VL]=function(Q,Z,T,Y){q[P.VL](Q,Z,T||new W.AQ(Q),Y||new w.f(Q))},j.track=function(Q){(0,O.Lm)(j[m.kl](),function(){return"AppInsightsCore:track"},function(){Q===null&&(z(Q),(0,N._y)("Invalid telemetry item")),_e(Q),q.track(Q)},function(){return{item:Q}},!Q.sync)};function _e(Q){(0,N.le)(Q[P.I])&&(z(Q),(0,N._y)("telemetry name required"))}o(_e,"_validateTelemetryItem");function z(Q){var Z=j[P.tb]();Z&&Z[m.$F]([Q],2)}o(z,"_notifyInvalidEvent")}),F}return o($,"AppInsightsCore"),$.__ieDyn=1,$}(y.A)},6900:(st,l,C)=>{"use strict";C.d(l,{A:()=>ye});var R=C(1088),v=C(1679),P=C(2091),y=C(8096),W=C(6708),N=C(6041),m=C(1589),w=C(3833),O=500,B="Channel has invalid priority - ";function E(ve,G,se){G&&(0,W.kJ)(G)&&G[y.R5]>0&&(G=G.sort(function(Re,Ge){return Re[N.yi]-Ge[N.yi]}),(0,W.tO)(G,function(Re){Re[N.yi]<O&&(0,W._y)(B+Re[y.pZ])}),ve[y.MW]({queue:(0,W.FL)(G),chain:(0,m.jV)(G,se[y.TC],se)}))}o(E,"_addChannelQueue");function $(ve,G){function se(){return(0,m.CD)(null,G[y.TC],G,null)}o(se,"_getTelCtx");function Re(I,U,ne,de){var Ue=I?I[y.R5]+1:1;function Ie(){Ue--,Ue===0&&(de&&de(),de=null)}o(Ie,"_runChainOnComplete"),Ue>0&&(0,W.tO)(I,function(ce){if(ce&&ce.queue[y.R5]>0){var Ce=ce.chain,Te=U[y.zV](Ce);Te[y.Fc](Ie),ne(Te)}else Ue--}),Ie()}o(Re,"_processChannelQueue");function Ge(I,U){var ne=U||{reason:0};return Re(ve,I,function(de){de[y.uL](ne)},function(){I[y.uL](ne)}),!0}o(Ge,"_doUpdate");function ie(I,U){var ne=U||{reason:0,isAsync:!1};return Re(ve,I,function(de){de[y.uL](ne)},function(){I[y.uL](ne),ut=!1}),!0}o(ie,"_doTeardown");function Ze(I){var U=null;return ve&&ve[y.R5]>0&&(0,W.tO)(ve,function(ne){if(ne&&ne.queue[y.R5]>0&&((0,W.tO)(ne.queue,function(de){if(de[y.pZ]===I)return U=de,-1}),U))return-1}),U}o(Ze,"_getChannel");var ut=!1,yt={identifier:"ChannelControllerPlugin",priority:O,initialize:function(I,U,ne,de){ut=!0,(0,W.tO)(ve,function(Ue){Ue&&Ue.queue[y.R5]>0&&(0,w.bP)((0,m.CD)(Ue.chain,I,U),ne)})},isInitialized:function(){return ut},processTelemetry:function(I,U){Re(ve,U||se(),function(ne){ne[y.uL](I)},function(){U[y.uL](I)})},update:Ge,pause:function(){Re(ve,se(),function(I){I.iterate(function(U){U.pause&&U.pause()})},null)},resume:function(){Re(ve,se(),function(I){I.iterate(function(U){U.resume&&U.resume()})},null)},teardown:ie,getChannel:Ze,flush:function(I,U,ne,de){var Ue=1,Ie=!1,ce=null;de=de||5e3;function Ce(){Ue--,Ie&&Ue===0&&(ce&&(clearTimeout(ce),ce=null),U&&U(Ie),U=null)}return o(Ce,"doCallback"),Re(ve,se(),function(Te){Te.iterate(function(Ye){if(Ye[y.kL]){Ue++;var pe=!1;Ye[y.kL](I,function(){pe=!0,Ce()},ne)||pe||(I&&ce==null?ce=setTimeout(function(){ce=null,Ce()},de):Ce())}})},function(){Ie=!0,Ce()}),!0},_setQueue:function(I){ve=I}};return yt}o($,"createChannelControllerPlugin");function F(ve,G,se){var Re=[];if(ve&&(0,W.tO)(ve,function(ie){return E(Re,ie,se)}),G){var Ge=[];(0,W.tO)(G,function(ie){ie[N.yi]>O&&Ge[y.MW](ie)}),E(Re,Ge,se)}return Re}o(F,"createChannelQueues");var j=C(3242),q=C(5883),_e=C(7158),z=C(5018),Q=C(9288),Z=C(4063),T=C(7630),Y=function(ve){(0,R.ne)(G,ve);function G(){var se=ve.call(this)||this;se.identifier="TelemetryInitializerPlugin",se.priority=199;var Re,Ge;ie(),(0,v.Z)(G,se,function(Ze,ut){Ze.addTelemetryInitializer=function(yt){var I={id:Re++,fn:yt};Ge[y.MW](I);var U={remove:function(){(0,W.tO)(Ge,function(ne,de){if(ne.id===I.id)return Ge[y.cb](de,1),-1})}};return U},Ze[N.hL]=function(yt,I){for(var U=!1,ne=Ge[y.R5],de=0;de<ne;++de){var Ue=Ge[de];if(Ue)try{if(Ue.fn[y.ZV](null,[yt])===!1){U=!0;break}}catch(Ie){(0,z.kP)(I[y.mc](),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,W.jj)(Ie),{exception:(0,T.eU)(Ie)},!0)}}U||Ze[y.uL](yt,I)},Ze[y.F3]=function(){ie()}});function ie(){Re=0,Ge=[]}return o(ie,"_initDefaults"),se}return o(G,"TelemetryInitializerPlugin"),G.__ieDyn=1,G}(Z.i),x=C(310),le="Plugins must provide initialize method",V="_notificationManager",fe="SDK is still unloading...",Ae="SDK is not initialized",Ne={loggingLevelConsole:1};function ae(ve,G){return new Q.Jk(G)}o(ae,"_createPerfManager");function we(ve,G,se){var Re,Ge=[],ie={};return(0,W.tO)(se,function(Ze){((0,W.le)(Ze)||(0,W.le)(Ze[y.VL]))&&(0,W._y)(le);var ut=Ze[N.yi],yt=Ze[y.pZ];Ze&&ut&&((0,W.le)(ie[ut])?ie[ut]=yt:(0,z.jV)(ve,"Two extensions have same priority #"+ut+" - "+ie[ut]+", "+yt)),(!ut||ut<G)&&Ge[y.MW](Ze)}),Re={all:se},Re[N.oV]=Ge,Re}o(we,"_validateExtensions");function D(ve,G){var se=!1;return(0,W.tO)(G,function(Re){if(Re===ve)return se=!0,-1}),se}o(D,"_isPluginPresent");function Ve(){var ve;return(0,P.pu)((ve={},ve[y.g]=function(G){},ve[y.n7]=function(G){},ve[N.uC]=function(G){},ve[N.$F]=function(G,se){},ve[N.f_]=function(G,se){},ve))}o(Ve,"_createDummyNotificationManager");var ye=function(){function ve(){var G,se,Re,Ge,ie,Ze,ut,yt,I,U,ne,de,Ue,Ie,ce,Ce,Te,Ye,pe,ke,et=0;(0,v.Z)(ve,this,function(nt){be(),nt[y.yl]=function(){return se},nt[y.VL]=function(ht,Gt,on,sn){Ie&&(0,W._y)(fe),nt[y.yl]()&&(0,W._y)("Core should not be initialized more than once"),G=ht||{},nt[y.TC]=G,(0,W.le)(ht[y.p$])&&(0,W._y)("Please provide instrumentation key"),Ge=sn,nt[V]=sn,lr(),sr(),mr(),on&&(nt[y.eZ]=on);var jt=(0,W.qK)(G,N.js,[]);I=[],I[y.MW].apply(I,(0,R.$h)((0,R.$h)([],Gt,!1),jt,!1)),de=(0,W.qK)(G,N.Z,[]),K(null),(!Ue||Ue[y.R5]===0)&&(0,W._y)("No "+N.Z+" available"),se=!0,nt.releaseQueue()},nt.getTransmissionControls=function(){var ht=[];return Ue&&(0,W.tO)(Ue,function(Gt){ht[y.MW](Gt.queue)}),(0,W.FL)(ht)},nt.track=function(ht){ht.iKey=ht.iKey||G[y.p$],ht[y.Z_]=ht[y.Z_]||(0,W.Y6)(new Date),ht.ver=ht.ver||"4.0",!Ie&&nt[y.yl]()?H()[y.uL](ht):Re[y.MW](ht)},nt[y.SD]=H,nt[y.tb]=function(){return Ge||(Ge=Ve(),nt[V]=Ge),Ge},nt[y.g]=function(ht){Ge&&Ge[y.g](ht)},nt[y.n7]=function(ht){Ge&&Ge[y.n7](ht)},nt.getCookieMgr=function(){return ut||(ut=(0,j.Nz)(G,nt[y.eZ])),ut},nt.setCookieMgr=function(ht){ut=ht},nt[N.kl]=function(){if(!ie&&!Ze&&(0,W.v4)(G.enablePerfMgr)){var ht=(0,W.v4)(G[N.DN]);(0,W.mf)(ht)&&(Ze=ht(nt,nt[y.tb]()))}return ie||Ze||(0,Q.j5)()},nt.setPerfMgr=function(ht){ie=ht},nt.eventCnt=function(){return Re[y.R5]},nt.releaseQueue=function(){if(se&&Re[y.R5]>0){var ht=Re;Re=[],(0,W.tO)(ht,function(Gt){H()[y.uL](Gt)})}},nt.pollInternalLogs=function(ht){Ce=ht||null;var Gt=(0,W.v4)(G.diagnosticLogInterval);return(!Gt||!(Gt>0))&&(Gt=1e4),et&&clearInterval(et),et=setInterval(function(){Pn()},Gt),et},nt[y.LS]=function(){et&&(clearInterval(et),et=0,Pn())},(0,W.Vb)(nt,function(){return ce},["addTelemetryInitializer"]),nt.unload=function(ht,Gt,on){var sn;ht===void 0&&(ht=!0),se||(0,W._y)(Ae),Ie&&(0,W._y)(fe);var jt=(sn={reason:50},sn[y.d]=ht,sn.flushComplete=!1,sn),_n=(0,m.Bt)(Jt(),nt);_n[y.Fc](function(){be(),Gt&&Gt(jt)},nt);function Jn(pr){jt.flushComplete=pr,Ie=!0,Ye.run(_n,jt),nt[y.LS](),_n[y.uL](jt)}o(Jn,"_doUnload"),wn(ht,Jn,6,on)||Jn(!1)},nt[y.TO]=Qe,nt.addPlugin=function(ht,Gt,on,sn){if(!ht){sn&&sn(!1),yr(le);return}var jt=Qe(ht[y.pZ]);if(jt&&!Gt){sn&&sn(!1),yr("Plugin ["+ht[y.pZ]+"] is already loaded!");return}var _n={reason:16};function Jn(Rr){I[y.MW](ht),_n.added=[ht],K(_n),sn&&sn(!0)}if(o(Jn,"_addPlugin"),jt){var pr=[jt.plugin],Qn={reason:2,isAsync:!!on};Rn(pr,Qn,function(Rr){Rr?(_n.removed=pr,_n.reason|=32,Jn(!0)):sn&&sn(!1)})}else Jn(!1)},nt.evtNamespace=function(){return Te},nt[y.kL]=wn,nt.getTraceCtx=function(ht){return ke||(ke=(0,w.Yn)()),ke},nt.setTraceCtx=function(ht){ke=ht||null},(0,W.Oi)(nt,"addUnloadCb",function(){return Ye},"add");function be(){se=!1,G=(0,W.mm)(!0,{},Ne),nt[y.TC]=G,nt[y.eZ]=new z.AQ(G),nt[y.iC]=[],ce=new Y,Re=[],Ge=null,ie=null,Ze=null,ut=null,yt=null,U=null,I=[],ne=null,de=null,Ue=null,Ie=!1,Ce=null,Te=(0,q.J)("AIBaseCore",!0),Ye=(0,x.Y)(),ke=null}o(be,"_initDefaults");function H(){return(0,m.CD)(Jt(),G,nt)}o(H,"_createTelCtx");function K(ht){var Gt=we(nt[y.eZ],O,I);U=Gt[N.oV],yt=null;var on=Gt.all;if(Ue=(0,W.FL)(F(de,on,nt)),ne){var sn=(0,W.UA)(on,ne);sn!==-1&&on[y.cb](sn,1),sn=(0,W.UA)(U,ne),sn!==-1&&U[y.cb](sn,1),ne._setQueue(Ue)}else ne=$(Ue,nt);on[y.MW](ne),U[y.MW](ne),nt[y.iC]=(0,w.AA)(on),ne[y.VL](G,nt,on),(0,w.bP)(H(),on),nt[y.iC]=(0,W.FL)((0,w.AA)(U||[])).slice(),ht&&cr(ht)}o(K,"_initPluginChain");function Qe(ht){var Gt,on=null,sn=null;return(0,W.tO)(nt[y.iC],function(jt){if(jt[y.pZ]===ht&&jt!==ne&&jt!==ce)return sn=jt,-1}),!sn&&ne&&(sn=ne.getChannel(ht)),sn&&(on=(Gt={plugin:sn},Gt[y.$h]=function(jt){(0,w.OY)(sn)[N.mE]=!jt},Gt.isEnabled=function(){var jt=(0,w.OY)(sn);return!jt[y.fi]&&!jt[N.mE]},Gt.remove=function(jt,_n){var Jn;jt===void 0&&(jt=!0);var pr=[sn],Qn=(Jn={reason:1},Jn[y.d]=jt,Jn);Rn(pr,Qn,function(Rr){Rr&&K({reason:32,removed:pr}),_n&&_n(Rr)})},Gt)),on}o(Qe,"_getPlugin");function Jt(){if(!yt){var ht=(U||[]).slice();(0,W.UA)(ht,ce)===-1&&ht[y.MW](ce),yt=(0,m.jV)((0,w.AA)(ht),G,nt)}return yt}o(Jt,"_getPluginChain");function Rn(ht,Gt,on){if(ht&&ht[y.R5]>0){var sn=(0,m.jV)(ht,G,nt),jt=(0,m.Bt)(sn,nt);jt[y.Fc](function(){var _n=!1,Jn=[];(0,W.tO)(I,function(Qn,Rr){D(Qn,ht)?_n=!0:Jn[y.MW](Qn)}),I=Jn;var pr=[];de&&((0,W.tO)(de,function(Qn,Rr){var Kr=[];(0,W.tO)(Qn,function(Cr){D(Cr,ht)?_n=!0:Kr[y.MW](Cr)}),pr[y.MW](Kr)}),de=pr),on&&on(_n)}),jt[y.uL](Gt)}else on(!1)}o(Rn,"_removePlugins");function Pn(){var ht=nt[y.eZ]?nt[y.eZ].queue:[];ht&&((0,W.tO)(ht,function(Gt){var on,sn=(on={},on[y.I]=Ce||"InternalMessageId: "+Gt[y.Gc],on.iKey=(0,W.v4)(G[y.p$]),on.time=(0,W.Y6)(new Date),on.baseType=z.lQ.dataType,on.baseData={message:Gt[y.gU]},on);nt.track(sn)}),ht[y.R5]=0)}o(Pn,"_flushInternalLogs");function wn(ht,Gt,on,sn){return ne?ne[y.kL](ht,Gt,on||6,sn):(Gt&&Gt(!1),!0)}o(wn,"_flushChannels");function lr(){var ht=(0,W.v4)(G.disableDbgExt);ht===!0&&pe&&(Ge[y.n7](pe),pe=null),Ge&&!pe&&ht!==!0&&(pe=(0,_e.p)(G),Ge[y.g](pe))}o(lr,"_initDebugListener");function sr(){var ht=(0,W.v4)(G.enablePerfMgr);!ht&&Ze&&(Ze=null),ht&&(0,W.qK)(G,N.DN,ae)}o(sr,"_initPerfManager");function mr(){var ht=(0,W.qK)(G,N.Zh,{});ht.NotificationManager=Ge}o(mr,"_initExtConfig");function cr(ht){var Gt=(0,m.xy)(Jt(),nt);(!nt._updateHook||nt._updateHook(Gt,ht)!==!0)&&Gt[y.uL](ht)}o(cr,"_doUpdate");function yr(ht){var Gt=nt[y.eZ];Gt?(0,z.kP)(Gt,2,73,ht):(0,W._y)(ht)}o(yr,"_logOrThrowError")})}return o(ve,"BaseCore"),ve.__ieDyn=1,ve}()},4063:(st,l,C)=>{"use strict";C.d(l,{i:()=>w});var R=C(1679),v=C(8096),P=C(6708),y=C(6041),W=C(1589),N=C(310),m="getPlugin",w=function(){function O(){var B=this,E,$,F,j,q;Q(),(0,R.Z)(O,B,function(Z){Z[v.VL]=function(T,Y,x,le){z(T,Y,le),E=!0},Z[v.fi]=function(T,Y){var x,le=Z[y.oV];if(!le||T&&le!==T[y.oV]())return;var V,fe=!1,Ae=T||(0,W.Bt)(null,le,F&&F[m]?F[m]():F),Ne=Y||(x={reason:0},x[v.d]=!1,x);function ae(){if(!fe){fe=!0,j.run(Ae,Y);var we=q;q=[],(0,P.tO)(we,function(D){D.rm()}),V===!0&&Ae[v.uL](Ne),Q()}}return o(ae,"_unloadCallback"),!Z[v.F3]||Z[v.F3](Ae,Ne,ae)!==!0?ae():V=!0,V},Z[v.Tu]=function(T,Y){var x=Z[y.oV];if(!x||T&&x!==T[y.oV]())return;var le,V=!1,fe=T||(0,W.xy)(null,x,F&&F[m]?F[m]():F),Ae=Y||{reason:0};function Ne(){V||(V=!0,z(fe.getCfg(),fe.core(),fe[v.W2]()))}return o(Ne,"_updateCallback"),!Z._doUpdate||Z._doUpdate(fe,Ae,Ne)!==!0?Ne():le=!0,le},Z._addHook=function(T){T&&((0,P.kJ)(T)?q=q.concat(T):q[v.MW](T))},(0,P.Oi)(Z,"_addUnloadCb",function(){return j},"add")}),B[v.mc]=function(Z){return _e(Z)[v.mc]()},B[v.yl]=function(){return E},B.setInitialized=function(Z){E=Z},B[v.Jd]=function(Z){F=Z},B[v.uL]=function(Z,T){T?T[v.uL](Z):F&&(0,P.mf)(F[y.hL])&&F[y.hL](Z,null)},B._getTelCtx=_e;function _e(Z){Z===void 0&&(Z=null);var T=Z;if(!T){var Y=$||(0,W.CD)(null,{},B[y.oV]);F&&F[m]?T=Y[v.zV](null,F[m]):T=Y[v.zV](null,F)}return T}o(_e,"_getTelCtx");function z(Z,T,Y){Z&&(0,P.sO)(Z,y.Zh,[],null,P.le),!Y&&T&&(Y=T[v.SD]()[v.W2]());var x=F;F&&F[m]&&(x=F[m]()),B[y.oV]=T,$=(0,W.CD)(Y,Z,T,x)}o(z,"_setDefaults");function Q(){E=!1,B[y.oV]=null,$=null,F=null,q=[],j=(0,N.Y)()}o(Q,"_initDefaults")}return o(O,"BaseTelemetryPlugin"),O.__ieDyn=1,O}()},3242:(st,l,C)=>{"use strict";C.d(l,{kj:()=>T,JP:()=>fe,Nz:()=>Ae,p7:()=>Ne,UY:()=>ve});var R=C(8096),v=C(5018),P=C(7630),y=C(6708),W=C(6041),N="toGMTString",m="toUTCString",w="cookie",O="expires",B="enabled",E="isCookieUseDisabled",$="disableCookiesUsage",F="_ckMgr",j=null,q=null,_e=null,z=(0,P.Me)(),Q={},Z={};function T(G,se){var Re=Ae[F]||Z[F];return Re||(Re=Ae[F]=Ae(G,se),Z[F]=Re),Re}o(T,"_gblCookieMgr");function Y(G){return G?G.isEnabled():!0}o(Y,"_isMgrEnabled");function x(G){var se=G[R.Lk]=G[R.Lk]||{};if((0,y.sO)(se,"domain",G.cookieDomain,y.BX,y.le),(0,y.sO)(se,"path",G.cookiePath||"/",null,y.le),(0,y.le)(se[B])){var Re=void 0;(0,y.o8)(G[E])||(Re=!G[E]),(0,y.o8)(G[$])||(Re=!G[$]),se[B]=Re}return se}o(x,"_createCookieMgrConfig");function le(G,se){return se&&G&&(0,y.kJ)(G.ignoreCookies)?G.ignoreCookies[R.ou](se)!==-1:!1}o(le,"_isIgnoredCookie");function V(G,se){return se&&G&&(0,y.kJ)(G.blockedCookies)&&G.blockedCookies[R.ou](se)!==-1?!0:le(G,se)}o(V,"_isBlockedCookie");function fe(G,se){var Re;if(G)Re=G.getCookieMgr();else if(se){var Ge=se[R.Lk];Ge[F]?Re=Ge[F]:Re=Ae(se)}return Re||(Re=T(se,(G||{})[R.eZ])),Re}o(fe,"safeGetCookieMgr");function Ae(G,se){var Re,Ge=x(G||Z),ie=Ge.path||"/",Ze=Ge.domain,ut=Ge[B]!==!1,yt=(Re={isEnabled:function(){var I=ut&&Ne(se),U=Z[F];return I&&U&&yt!==U&&(I=Y(U)),I}},Re[R.$h]=function(I){ut=I!==!1},Re.set=function(I,U,ne,de,Ue){var Ie=!1;if(Y(yt)&&!V(Ge,I)){var ce={},Ce=(0,y.nd)(U||W.qS),Te=Ce[R.ou](";");if(Te!==-1&&(Ce=(0,y.nd)(U[R.zc](0,Te)),ce=ae(U[R.zc](Te+1))),(0,y.sO)(ce,"domain",de||Ze,y.fQ,y.o8),!(0,y.le)(ne)){var Ye=(0,P.w1)();if((0,y.o8)(ce[O])){var pe=(0,y.m6)(),ke=pe+ne*1e3;if(ke>0){var et=new Date;et.setTime(ke),(0,y.sO)(ce,O,we(et,Ye?N:m)||we(et,Ye?N:m)||W.qS,y.fQ)}}Ye||(0,y.sO)(ce,"max-age",W.qS+ne,null,y.o8)}var nt=(0,P.k$)();nt&&nt.protocol==="https:"&&((0,y.sO)(ce,"secure",null,null,y.o8),q===null&&(q=!ve(((0,P.jW)()||{})[R.qV])),q&&(0,y.sO)(ce,"SameSite","None",null,y.o8)),(0,y.sO)(ce,"path",Ue||ie,null,y.o8);var be=Ge.setCookie||ye;be(I,D(Ce,ce)),Ie=!0}return Ie},Re.get=function(I){var U=W.qS;return Y(yt)&&!le(Ge,I)&&(U=(Ge.getCookie||Ve)(I)),U},Re.del=function(I,U){var ne=!1;return Y(yt)&&(ne=yt.purge(I,U)),ne},Re.purge=function(I,U){var ne,de=!1;if(Ne(se)){var Ue=(ne={},ne.path=U||"/",ne[O]="Thu, 01 Jan 1970 00:00:01 GMT",ne);(0,P.w1)()||(Ue["max-age"]="0");var Ie=Ge.delCookie||ye;Ie(I,D(W.qS,Ue)),de=!0}return de},Re);return yt[F]=yt,yt}o(Ae,"createCookieMgr");function Ne(G){if(j===null){j=!1;try{var se=z||{};j=se[w]!==void 0}catch(Re){(0,v.kP)(G,2,68,"Cannot access document.cookie - "+(0,y.jj)(Re),{exception:(0,P.eU)(Re)})}}return j}o(Ne,"areCookiesSupported");function ae(G){var se={};if(G&&G[R.R5]){var Re=(0,y.nd)(G)[R.w6](";");(0,y.tO)(Re,function(Ge){if(Ge=(0,y.nd)(Ge||W.qS),Ge){var ie=Ge[R.ou]("=");ie===-1?se[Ge]=null:se[(0,y.nd)(Ge[R.zc](0,ie))]=(0,y.nd)(Ge[R.zc](ie+1))}})}return se}o(ae,"_extractParts");function we(G,se){return(0,y.mf)(G[se])?G[se]():null}o(we,"_formatDate");function D(G,se){var Re=G||W.qS;return(0,y.rW)(se,function(Ge,ie){Re+="; "+Ge+((0,y.le)(ie)?W.qS:"="+ie)}),Re}o(D,"_formatCookieValue");function Ve(G){var se=W.qS;if(z){var Re=z[w]||W.qS;_e!==Re&&(Q=ae(Re),_e=Re),se=(0,y.nd)(Q[G]||W.qS)}return se}o(Ve,"_getCookieValue");function ye(G,se){z&&(z[w]=G+"="+se)}o(ye,"_setCookieValue");function ve(G){return(0,y.HD)(G)?!!((0,y._Q)(G,"CPU iPhone OS 12")||(0,y._Q)(G,"iPad; CPU OS 12")||(0,y._Q)(G,"Macintosh; Intel Mac OS X 10_14")&&(0,y._Q)(G,"Version/")&&(0,y._Q)(G,"Safari")||(0,y._Q)(G,"Macintosh; Intel Mac OS X 10_14")&&(0,y.Id)(G,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||(0,y._Q)(G,"Chrome/5")||(0,y._Q)(G,"Chrome/6")||(0,y._Q)(G,"UnrealEngine")&&!(0,y._Q)(G,"Chrome")||(0,y._Q)(G,"UCBrowser/12")||(0,y._Q)(G,"UCBrowser/11")):!1}o(ve,"uaDisallowsSameSiteNone")},5843:(st,l,C)=>{"use strict";C.d(l,{GW:()=>$,Jj:()=>F,DO:()=>q,Tr:()=>_e,zB:()=>Q,oF:()=>T,vn:()=>Y,ej:()=>x,d8:()=>le,kT:()=>V});var R=C(2091),v=C(8096),P=C(3242),y=C(7630),W=C(4869),N=C(6708),m=C(6041),w=C(4878),O=null,B,E=null;function $(){var fe=q();return fe[v.zc](0,8)+"-"+fe[v.zc](8,12)+"-"+fe[v.zc](12,16)+"-"+fe[v.zc](16,20)+"-"+fe[v.zc](20)}o($,"newGuid");function F(){var fe=(0,y.r)();return fe&&fe.now?fe.now():(0,N.m6)()}o(F,"perfNow");function j(fe,Ae){if(fe&&Ae){var Ne=fe[_DYN_LENGTH],ae=Ne-Ae[_DYN_LENGTH];return fe[_DYN_SUBSTRING](ae>=0?ae:0,Ne)===Ae}return!1}o(j,"strEndsWith");function q(){for(var fe=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],Ae=m.qS,Ne,ae=0;ae<4;ae++)Ne=(0,w._l)(),Ae+=fe[Ne&15]+fe[Ne>>4&15]+fe[Ne>>8&15]+fe[Ne>>12&15]+fe[Ne>>16&15]+fe[Ne>>20&15]+fe[Ne>>24&15]+fe[Ne>>28&15];var we=fe[8+((0,w._l)()&3)|0];return Ae[v.Jn](0,8)+Ae[v.Jn](9,4)+"4"+Ae[v.Jn](13,3)+we+Ae[v.Jn](16,3)+Ae[v.Jn](19,12)}o(q,"generateW3CId");var _e={_canUseCookies:void 0,isTypeof:N.Ym,isUndefined:N.o8,isNullOrUndefined:N.le,hasOwnProperty:N.nr,isFunction:N.mf,isObject:N.Kn,isDate:N.J_,isArray:N.kJ,isError:N.VZ,isString:N.HD,isNumber:N.hj,isBoolean:N.jn,toISOString:N.Y6,arrForEach:N.tO,arrIndexOf:N.UA,arrMap:N.Mr,arrReduce:N.Xz,strTrim:N.nd,objCreate:R.pu,objKeys:N.FY,objDefineAccessors:N.l_,addEventHandler:W.Ib,dateNow:N.m6,isIE:y.w1,disableCookies:T,newGuid:$,perfNow:F,newId:w.pZ,randomValue:w.az,random32:w._l,mwcRandomSeed:w.CN,mwcRandom32:w.F6,generateW3CId:q},z=/[xy]/g,Q={Attach:W.pZ,AttachEvent:W.pZ,Detach:W.pD,DetachEvent:W.pD};function Z(fe,Ae){var Ne=(0,P.kj)(fe,Ae),ae=_e._canUseCookies;return O===null&&(O=[],B=ae,(0,N.l_)(_e,"_canUseCookies",function(){return B},function(we){B=we,(0,N.tO)(O,function(D){D[v.$h](we)})})),(0,N.UA)(O,Ne)===-1&&O[v.MW](Ne),(0,N.jn)(ae)&&Ne[v.$h](ae),(0,N.jn)(B)&&Ne[v.$h](B),Ne}o(Z,"_legacyCookieMgr");function T(){Z()[v.$h](!1)}o(T,"disableCookies");function Y(fe){return Z(null,fe).isEnabled()}o(Y,"canUseCookies");function x(fe,Ae){return Z(null,fe).get(Ae)}o(x,"getCookie");function le(fe,Ae,Ne,ae){Z(null,fe).set(Ae,Ne,null,ae)}o(le,"setCookie");function V(fe,Ae){return Z(null,fe).del(Ae)}o(V,"deleteCookie")},5883:(st,l,C)=>{"use strict";C.d(l,{J:()=>F,K:()=>j});var R=C(4392),v=C(8096),P=C(6708),y=C(6041),W=C(4878),N=R.RJ,m="2.8.12",w="."+(0,W.pZ)(6),O=0;function B(q,_e,z){if(N)try{return N(q,_e,{value:z,enumerable:!1,configurable:!0}),!0}catch(Q){}return!1}o(B,"_createAccessor");function E(q){return q[v.xv]===1||q[v.xv]===9||!+q[v.xv]}o(E,"_canAcceptData");function $(q,_e){var z=_e[q.id];if(!z){z={};try{E(_e)&&(B(_e,q.id,z)||(_e[q.id]=z))}catch(Q){}}return z}o($,"_getCache");function F(q,_e){return _e===void 0&&(_e=!1),(0,P.Gf)(q+O+++(_e?"."+m:y.qS)+w)}o(F,"createUniqueNamespace");function j(q){var _e={id:F("_aiData-"+(q||y.qS)+"."+m),accept:function(z){return E(z)},get:function(z,Q,Z,T){var Y=z[_e.id];return Y?Y[(0,P.Gf)(Q)]:(T&&(Y=$(_e,z),Y[(0,P.Gf)(Q)]=Z),Z)},kill:function(z,Q){if(z&&z[Q])try{delete z[Q]}catch(Z){}}};return _e}o(j,"createElmNodeData")},7158:(st,l,C)=>{"use strict";C.d(l,{j:()=>w,p:()=>O});var R=C(8096),v=C(7630),P=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],y=null,W;function N(B,E){return function(){var $=arguments,F=w(E);if(F){var j=F.listener;j&&j[B]&&j[B][R.ZV](j,$)}}}o(N,"_listenerProxyFunc");function m(){var B=(0,v.a8)("Microsoft");return B&&(y=B.ApplicationInsights),y}o(m,"_getExtensionNamespace");function w(B){var E=y;return!E&&B.disableDbgExt!==!0&&(E=y||m()),E?E.ChromeDbgExt:null}o(w,"getDebugExt");function O(B){if(!W){W={};for(var E=0;E<P[R.R5];E++)W[P[E]]=N(P[E],B)}return W}o(O,"getDebugListener")},5018:(st,l,C)=>{"use strict";C.d(l,{lQ:()=>$,vH:()=>F,AQ:()=>j,kP:()=>_e,jV:()=>z,L4:()=>Q});var R=C(1679),v=C(8096),P=C(7158),y=C(7630),W=C(6708),N=C(6041),m="AI (Internal): ",w="AI: ",O="AITR_";function B(Z){return Z?'"'+Z[v.i7](/\"/g,N.qS)+'"':N.qS}o(B,"_sanitizeDiagnosticText");function E(Z,T){var Y=(0,y.dr)();if(Y){var x="log";Y[Z]&&(x=Z),(0,W.mf)(Y[x])&&Y[x](T)}}o(E,"_logToConsole");var $=function(){function Z(T,Y,x,le){x===void 0&&(x=!1);var V=this;V[v.Gc]=T,V[v.gU]=(x?w:m)+T;var fe=N.qS;(0,y.nS)()&&(fe=(0,y.xA)().stringify(le));var Ae=(Y?" message:"+B(Y):N.qS)+(le?" props:"+B(fe):N.qS);V[v.gU]+=Ae}return o(Z,"_InternalLogMessage"),Z.dataType="MessageData",Z}();function F(Z,T){return(Z||{})[v.eZ]||new j(T)}o(F,"safeGetLogger");var j=function(){function Z(T){this.identifier="DiagnosticLogger",this.queue=[];var Y=0,x={},le,V,fe,Ae;(0,R.Z)(Z,this,function(Ne){we(T||{}),Ne.consoleLoggingLevel=function(){return le},Ne.telemetryLoggingLevel=function(){return V},Ne.maxInternalMessageLimit=function(){return fe},Ne[v.Fr]=function(){return Ae},Ne.throwInternal=function(ye,ve,G,se,Re){Re===void 0&&(Re=!1);var Ge=new $(ve,G,Re,se);if(Ae)throw(0,y.eU)(Ge);var ie=ye===1?N.ys:N.cL;if((0,W.o8)(Ge[v.gU]))Ve("throw"+(ye===1?"Critical":"Warning"),Ge);else{if(Re){var Ze=+Ge[v.Gc];!x[Ze]&&le>=ye&&(Ne[ie](Ge[v.gU]),x[Ze]=!0)}else le>=ye&&Ne[ie](Ge[v.gU]);ae(ye,Ge)}},Ne[N.cL]=function(ye){E("warn",ye),Ve("warning",ye)},Ne[N.ys]=function(ye){E("error",ye),Ve("error",ye)},Ne.resetInternalMessageCount=function(){Y=0,x={}},Ne[v.jk]=ae;function ae(ye,ve){if(!D()){var G=!0,se=O+ve[v.Gc];if(x[se]?G=!1:x[se]=!0,G&&(ye<=V&&(Ne.queue[v.MW](ve),Y++,Ve(ye===1?"error":"warn",ve)),Y===fe)){var Re="Internal events throttle limit per PageView reached for this app.",Ge=new $(23,Re,!1);Ne.queue[v.MW](Ge),ye===1?Ne[N.ys](Re):Ne[N.cL](Re)}}}o(ae,"_logInternalMessage");function we(ye){le=(0,W.v4)(ye.loggingLevelConsole,0),V=(0,W.v4)(ye.loggingLevelTelemetry,1),fe=(0,W.v4)(ye.maxMessageLimit,25),Ae=(0,W.v4)(ye.enableDebug,(0,W.v4)(ye[v.Fr],!1))}o(we,"_setDefaultsFromConfig");function D(){return Y>=fe}o(D,"_areInternalMessagesThrottled");function Ve(ye,ve){var G=(0,P.j)(T||{});G&&G[v.mc]&&G[v.mc](ye,ve)}o(Ve,"_debugExtMsg")})}return o(Z,"DiagnosticLogger"),Z.__ieDyn=1,Z}();function q(Z){return Z||new j}o(q,"_getLogger");function _e(Z,T,Y,x,le,V){V===void 0&&(V=!1),q(Z).throwInternal(T,Y,x,le,V)}o(_e,"_throwInternal");function z(Z,T){q(Z)[N.cL](T)}o(z,"_warnToConsole");function Q(Z,T,Y){q(Z)[v.jk](T,Y)}o(Q,"_logInternalMessage")},7630:(st,l,C)=>{"use strict";C.d(l,{dI:()=>Ne,a8:()=>ae,Ym:()=>we,Jj:()=>D,Nv:()=>Ve,Me:()=>ye,d6:()=>ve,jW:()=>G,fE:()=>se,s1:()=>Re,k$:()=>Ge,dr:()=>ie,r:()=>Ze,nS:()=>ut,xA:()=>yt,MX:()=>I,gz:()=>U,b$:()=>ne,w1:()=>de,sA:()=>Ue,eU:()=>Ie,MF:()=>Ce,JO:()=>Te,cp:()=>Ye,Z3:()=>pe,ed:()=>et,pI:()=>nt});var R=C(4392),v=C(2091),P=C(8096),y=C(6708),W=C(6041),N="window",m="document",w="documentMode",O="navigator",B="history",E="location",$="console",F="performance",j="JSON",q="crypto",_e="msCrypto",z="ReactNative",Q="msie",Z="trident/",T="XMLHttpRequest",Y=null,x=null,le=!1,V=null,fe=null;function Ae(be,H){var K=!1;if(be){try{if(K=H in be,!K){var Qe=be[R.hB];Qe&&(K=H in Qe)}}catch(Rn){}if(!K)try{var Jt=new be;K=!(0,y.o8)(Jt[H])}catch(Rn){}}return K}o(Ae,"_hasProperty");function Ne(be){le=be}o(Ne,"setEnableEnvMocks");function ae(be){var H=(0,v.Rd)();return H&&H[be]?H[be]:be===N&&we()?window:null}o(ae,"getGlobalInst");function we(){return Boolean(typeof window===R.fK&&window)}o(we,"hasWindow");function D(){return we()?window:ae(N)}o(D,"getWindow");function Ve(){return Boolean(typeof document===R.fK&&document)}o(Ve,"hasDocument");function ye(){return Ve()?document:ae(m)}o(ye,"getDocument");function ve(){return Boolean(typeof navigator===R.fK&&navigator)}o(ve,"hasNavigator");function G(){return ve()?navigator:ae(O)}o(G,"getNavigator");function se(){return Boolean(typeof history===R.fK&&history)}o(se,"hasHistory");function Re(){return se()?history:ae(B)}o(Re,"getHistory");function Ge(be){if(be&&le){var H=ae("__mockLocation");if(H)return H}return typeof location===R.fK&&location?location:ae(E)}o(Ge,"getLocation");function ie(){return typeof console!==R.jA?console:ae($)}o(ie,"getConsole");function Ze(){return ae(F)}o(Ze,"getPerformance");function ut(){return Boolean(typeof JSON===R.fK&&JSON||ae(j)!==null)}o(ut,"hasJSON");function yt(){return ut()?JSON||ae(j):null}o(yt,"getJSON");function I(){return ae(q)}o(I,"getCrypto");function U(){return ae(_e)}o(U,"getMsCrypto");function ne(){var be=G();return be&&be.product?be.product===z:!1}o(ne,"isReactNative");function de(){var be=G();if(be&&(be[P.qV]!==x||Y===null)){x=be[P.qV];var H=(x||W.qS)[P.T1]();Y=(0,y._Q)(H,Q)||(0,y._Q)(H,Z)}return Y}o(de,"isIE");function Ue(be){if(be===void 0&&(be=null),!be){var H=G()||{};be=H?(H[P.qV]||W.qS)[P.T1]():W.qS}var K=(be||W.qS)[P.T1]();if((0,y._Q)(K,Q)){var Qe=ye()||{};return Math.max(parseInt(K[P.w6](Q)[1]),Qe[w]||0)}else if((0,y._Q)(K,Z)){var Jt=parseInt(K[P.w6](Z)[1]);if(Jt)return Jt+4}return null}o(Ue,"getIEVersion");function Ie(be){var H=Object[R.hB].toString[P._S](be),K=W.qS;return H==="[object Error]"?K="{ stack: '"+be.stack+"', message: '"+be.message+"', name: '"+be[P.I]+"'":ut()&&(K=yt().stringify(be)),H+K}o(Ie,"dumpObj");function ce(be){if(!be||!isString(be)){var H=G()||{};be=H?(H[_DYN_USER_AGENT]||STR_EMPTY)[_DYN_TO_LOWER_CASE]():STR_EMPTY}var K=(be||STR_EMPTY)[_DYN_TO_LOWER_CASE]();return K[_DYN_INDEX_OF]("safari")>=0}o(ce,"isSafari");function Ce(){return fe===null&&(fe=ve()&&Boolean(G().sendBeacon)),fe}o(Ce,"isBeaconsSupported");function Te(be){var H=!1;try{H=!!ae("fetch");var K=ae("Request");H&&be&&K&&(H=Ae(K,"keepalive"))}catch(Qe){}return H}o(Te,"isFetchSupported");function Ye(){return V===null&&(V=typeof XDomainRequest!==R.jA,V&&pe()&&(V=V&&!Ae(ae(T),"withCredentials"))),V}o(Ye,"useXDomainRequest");function pe(){var be=!1;try{var H=ae(T);be=!!H}catch(K){}return be}o(pe,"isXhrSupported");function ke(be,H){if(be)for(var K=0;K<be[P.R5];K++){var Qe=be[K];if(Qe[P.I]&&Qe[P.I]===H)return Qe}return{}}o(ke,"_getNamedValue");function et(be){var H=ye();return H&&be?ke(H.querySelectorAll("meta"),be).content:null}o(et,"findMetaTag");function nt(be){var H,K=Ze();if(K){var Qe=K.getEntriesByType("navigation")||[];H=ke((Qe[P.R5]>0?Qe[0]:{}).serverTiming,be).description}return H}o(nt,"findNamedServerTiming")},4869:(st,l,C)=>{"use strict";C.d(l,{um:()=>Ae,jU:()=>ye,XO:()=>ve,QY:()=>G,pZ:()=>se,pD:()=>Re,Ib:()=>Ge,C1:()=>ie,yw:()=>ut,nJ:()=>yt,c9:()=>I,JA:()=>U,TJ:()=>ne,C9:()=>de,nD:()=>Ue,Yl:()=>Ie});var R=C(8096),v=C(5883),P=C(7630),y=C(6708),W=C(6041),N="on",m="attachEvent",w="addEventListener",O="detachEvent",B="removeEventListener",E="events",$="visibilitychange",F="pagehide",j="pageshow",q="unload",_e="beforeunload",z=(0,v.J)("aiEvtPageHide"),Q=(0,v.J)("aiEvtPageShow"),Z=/\.[\.]+/g,T=/[\.]+$/,Y=1,x=(0,v.K)("events"),le=/^([^.]*)(?:\.(.+)|)/;function V(ce){return ce&&ce[R.i7]?ce[R.i7](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,W.qS):ce}o(V,"_normalizeNamespace");function fe(ce,Ce){var Te;if(Ce){var Ye=W.qS;(0,y.kJ)(Ce)?(Ye=W.qS,(0,y.tO)(Ce,function(ke){ke=V(ke),ke&&(ke[0]!=="."&&(ke="."+ke),Ye+=ke)})):Ye=V(Ce),Ye&&(Ye[0]!=="."&&(Ye="."+Ye),ce=(ce||W.qS)+Ye)}var pe=le.exec(ce||W.qS)||[];return Te={},Te[R.P6]=pe[1],Te.ns=(pe[2]||W.qS).replace(Z,".").replace(T,W.qS)[R.w6](".").sort().join("."),Te}o(fe,"_getEvtNamespace");function Ae(ce,Ce,Te){var Ye=[],pe=x.get(ce,E,{},!1),ke=fe(Ce,Te);return(0,y.rW)(pe,function(et,nt){(0,y.tO)(nt,function(be){var H;(!ke[R.P6]||ke[R.P6]===be.evtName[R.P6])&&(!ke.ns||ke.ns===ke.ns)&&Ye[R.MW]((H={},H[R.I]=be.evtName[R.P6]+(be.evtName.ns?"."+be.evtName.ns:W.qS),H.handler=be[R.Kn],H))})}),Ye}o(Ae,"__getRegisteredEvents");function Ne(ce,Ce,Te){Te===void 0&&(Te=!0);var Ye=x.get(ce,E,{},Te),pe=Ye[Ce];return pe||(pe=Ye[Ce]=[]),pe}o(Ne,"_getRegisteredEvents");function ae(ce,Ce,Te,Ye){ce&&Ce&&Ce[R.P6]&&(ce[B]?ce[B](Ce[R.P6],Te,Ye):ce[O]&&ce[O](N+Ce[R.P6],Te))}o(ae,"_doDetach");function we(ce,Ce,Te,Ye){var pe=!1;return ce&&Ce&&Ce[R.P6]&&Te&&(ce[w]?(ce[w](Ce[R.P6],Te,Ye),pe=!0):ce[m]&&(ce[m](N+Ce[R.P6],Te),pe=!0)),pe}o(we,"_doAttach");function D(ce,Ce,Te,Ye){for(var pe=Ce[R.R5];pe--;){var ke=Ce[pe];ke&&(!Te.ns||Te.ns===ke.evtName.ns)&&(!Ye||Ye(ke))&&(ae(ce,ke.evtName,ke[R.Kn],ke.capture),Ce[R.cb](pe,1))}}o(D,"_doUnregister");function Ve(ce,Ce,Te){if(Ce[R.P6])D(ce,Ne(ce,Ce[R.P6]),Ce,Te);else{var Ye=x.get(ce,E,{});(0,y.rW)(Ye,function(pe,ke){D(ce,ke,Ce,Te)}),(0,y.FY)(Ye)[R.R5]===0&&x.kill(ce,E)}}o(Ve,"_unregisterEvents");function ye(ce,Ce){var Te;return Ce?((0,y.kJ)(Ce)?Te=[ce].concat(Ce):Te=[ce,Ce],Te=fe("xx",Te).ns[R.w6](".")):Te=ce,Te}o(ye,"mergeEvtNamespace");function ve(ce,Ce,Te,Ye,pe){var ke;pe===void 0&&(pe=!1);var et=!1;if(ce)try{var nt=fe(Ce,Ye);if(et=we(ce,nt,Te,pe),et&&x.accept(ce)){var be=(ke={guid:Y++,evtName:nt},ke[R.Kn]=Te,ke.capture=pe,ke);Ne(ce,nt.type)[R.MW](be)}}catch(H){}return et}o(ve,"eventOn");function G(ce,Ce,Te,Ye,pe){if(pe===void 0&&(pe=!1),ce)try{var ke=fe(Ce,Ye),et=!1;Ve(ce,ke,function(nt){return ke.ns&&!Te||nt[R.Kn]===Te?(et=!0,!0):!1}),et||ae(ce,ke,Te,pe)}catch(nt){}}o(G,"eventOff");function se(ce,Ce,Te,Ye){return Ye===void 0&&(Ye=!1),ve(ce,Ce,Te,null,Ye)}o(se,"attachEvent");function Re(ce,Ce,Te,Ye){Ye===void 0&&(Ye=!1),G(ce,Ce,Te,null,Ye)}o(Re,"detachEvent");function Ge(ce,Ce,Te){var Ye=!1,pe=(0,P.Jj)();pe&&(Ye=ve(pe,ce,Ce,Te),Ye=ve(pe.body,ce,Ce,Te)||Ye);var ke=(0,P.Me)();return ke&&(Ye=ve(ke,ce,Ce,Te)||Ye),Ye}o(Ge,"addEventHandler");function ie(ce,Ce,Te){var Ye=(0,P.Jj)();Ye&&(G(Ye,ce,Ce,Te),G(Ye.body,ce,Ce,Te));var pe=(0,P.Me)();pe&&G(pe,ce,Ce,Te)}o(ie,"removeEventHandler");function Ze(ce,Ce,Te,Ye){var pe=!1;return Ce&&ce&&ce[R.R5]>0&&(0,y.tO)(ce,function(ke){ke&&(!Te||(0,y.UA)(Te,ke)===-1)&&(pe=Ge(ke,Ce,Ye)||pe)}),pe}o(Ze,"_addEventListeners");function ut(ce,Ce,Te,Ye){var pe=!1;return Ce&&ce&&(0,y.kJ)(ce)&&(pe=Ze(ce,Ce,Te,Ye),!pe&&Te&&Te[R.R5]>0&&(pe=Ze(ce,Ce,null,Ye))),pe}o(ut,"addEventListeners");function yt(ce,Ce,Te){ce&&(0,y.kJ)(ce)&&(0,y.tO)(ce,function(Ye){Ye&&ie(Ye,Ce,Te)})}o(yt,"removeEventListeners");function I(ce,Ce,Te){return ut([_e,q,F],ce,Ce,Te)}o(I,"addPageUnloadEventListener");function U(ce,Ce){yt([_e,q,F],ce,Ce)}o(U,"removePageUnloadEventListener");function ne(ce,Ce,Te){function Ye(et){var nt=(0,P.Me)();ce&&nt&&nt.visibilityState==="hidden"&&ce(et)}o(Ye,"_handlePageVisibility");var pe=ye(z,Te),ke=Ze([F],ce,Ce,pe);return(!Ce||(0,y.UA)(Ce,$)===-1)&&(ke=Ze([$],Ye,Ce,pe)||ke),!ke&&Ce&&(ke=ne(ce,null,Te)),ke}o(ne,"addPageHideEventListener");function de(ce,Ce){var Te=ye(z,Ce);yt([F],ce,Te),yt([$],null,Te)}o(de,"removePageHideEventListener");function Ue(ce,Ce,Te){function Ye(et){var nt=(0,P.Me)();ce&&nt&&nt.visibilityState==="visible"&&ce(et)}o(Ye,"_handlePageVisibility");var pe=ye(Q,Te),ke=Ze([j],ce,Ce,pe);return ke=Ze([$],Ye,Ce,pe)||ke,!ke&&Ce&&(ke=Ue(ce,null,Te)),ke}o(Ue,"addPageShowEventListener");function Ie(ce,Ce){var Te=ye(Q,Ce);yt([j],ce,Te),yt([$],null,Te)}o(Ie,"removePageShowEventListener")},6708:(st,l,C)=>{"use strict";C.d(l,{Ym:()=>se,o8:()=>Re,le:()=>ie,BX:()=>Ze,nr:()=>ut,Kn:()=>yt,mf:()=>I,Gf:()=>ne,rW:()=>de,Id:()=>Ue,xe:()=>ce,_Q:()=>Te,J_:()=>Ye,kJ:()=>pe,VZ:()=>et,HD:()=>nt,hj:()=>be,jn:()=>H,Y6:()=>Jt,tO:()=>Pn,UA:()=>wn,Mr:()=>lr,Xz:()=>sr,nd:()=>mr,FY:()=>ht,l_:()=>Gt,_A:()=>sn,FL:()=>jt,Xi:()=>_n,m6:()=>Jn,jj:()=>pr,sO:()=>Qn,qK:()=>Rr,v4:()=>Kr,F:()=>Cr,fQ:()=>wr,_y:()=>Nr,cf:()=>On,Oi:()=>br,Vb:()=>Gr,hl:()=>Tr,Ax:()=>pi,mm:()=>_r});var R=C(4392),v=C(2091),P=C(8096),y=C(6041),W="toISOString",N="endsWith",m="startsWith",w="indexOf",O="map",B="reduce",E="trim",$="toString",F="__proto__",j="constructor",q=R.RJ,_e=R.Pw.freeze,z=R.Pw.seal,Q=R.Pw.keys,Z=String[R.hB],T=Z[E],Y=Z[N],x=Z[m],le=Date[R.hB],V=le[W],fe=Array.isArray,Ae=R.V4[$],Ne=R.CY[$],ae=Ne[P._S](R.Pw),we=/-([a-z])/g,D=/([^\w\d_$])/g,Ve=/^(\d+[\w\d_$])/,ye=Object.getPrototypeOf;function ve(M){if(M){if(ye)return ye(M);var ue=M[F]||M[R.hB]||M[j];if(ue)return ue}return null}o(ve,"_getObjProto");function G(M){return Ae[_DYN_CALL](M)}o(G,"objToString");function se(M,ue){return typeof M===ue}o(se,"isTypeof");function Re(M){return M===void 0||typeof M===R.jA}o(Re,"isUndefined");function Ge(M){return!Re(M)}o(Ge,"isNotUndefined");function ie(M){return M===null||Re(M)}o(ie,"isNullOrUndefined");function Ze(M){return!ie(M)}o(Ze,"isNotNullOrUndefined");function ut(M,ue){return!!(M&&R.CY[P._S](M,ue))}o(ut,"hasOwnProperty");function yt(M){return!!(M&&typeof M===R.fK)}o(yt,"isObject");function I(M){return!!(M&&typeof M===R.cb)}o(I,"isFunction");function U(M){return M&&I(M.then)}o(U,"isPromiseLike");function ne(M){var ue=M;return ue&&nt(ue)&&(ue=ue[P.i7](we,function(Ee,Le){return Le.toUpperCase()}),ue=ue[P.i7](D,"_"),ue=ue[P.i7](Ve,function(Ee,Le){return"_"+Le})),ue}o(ne,"normalizeJsName");function de(M,ue){if(M)for(var Ee in M)R.CY[P._S](M,Ee)&&ue[P._S](M,Ee,M[Ee])}o(de,"objForEachKey");function Ue(M,ue){var Ee=!1;return M&&ue&&!(Ee=M===ue)&&(Ee=Y?M[N](ue):Ie(M,ue)),Ee}o(Ue,"strEndsWith");function Ie(M,ue){var Ee=!1,Le=ue?ue[P.R5]:0,tt=M?M[P.R5]:0;if(Le&&tt&&tt>=Le&&!(Ee=M===ue)){for(var qe=tt-1,dt=Le-1;dt>=0;dt--){if(M[qe]!=ue[dt])return!1;qe--}Ee=!0}return Ee}o(Ie,"_strEndsWithPoly");function ce(M,ue){var Ee=!1;return M&&ue&&!(Ee=M===ue)&&(Ee=x?M[m](ue):Ce(M,ue)),Ee}o(ce,"strStartsWith");function Ce(M,ue){var Ee=!1,Le=ue?ue[P.R5]:0;if(M&&Le&&M[P.R5]>=Le&&!(Ee=M===ue)){for(var tt=0;tt<Le;tt++)if(M[tt]!==ue[tt])return!1;Ee=!0}return Ee}o(Ce,"_strStartsWithPoly");function Te(M,ue){return M&&ue?M[P.ou](ue)!==-1:!1}o(Te,"strContains");function Ye(M){return!!(M&&Ae[P._S](M)==="[object Date]")}o(Ye,"isDate");var pe=fe||ke;function ke(M){return!!(M&&Ae[P._S](M)==="[object Array]")}o(ke,"_isArrayPoly");function et(M){return!!(M&&Ae[P._S](M)==="[object Error]")}o(et,"isError");function nt(M){return typeof M=="string"}o(nt,"isString");function be(M){return typeof M=="number"}o(be,"isNumber");function H(M){return typeof M=="boolean"}o(H,"isBoolean");function K(M){return typeof M=="symbol"}o(K,"isSymbol");function Qe(M){var ue=!1;if(M&&typeof M=="object"){var Ee=ye?ye(M):ve(M);Ee?(Ee[j]&&R.CY[P._S](Ee,j)&&(Ee=Ee[j]),ue=typeof Ee===R.cb&&Ne[P._S](Ee)===ae):ue=!0}return ue}o(Qe,"isPlainObject");function Jt(M){if(M)return V?M[W]():Rn(M)}o(Jt,"toISOString");function Rn(M){if(M&&M.getUTCFullYear){var ue=o(function(Ee){var Le=String(Ee);return Le[P.R5]===1&&(Le="0"+Le),Le},"pad");return M.getUTCFullYear()+"-"+ue(M.getUTCMonth()+1)+"-"+ue(M.getUTCDate())+"T"+ue(M.getUTCHours())+":"+ue(M.getUTCMinutes())+":"+ue(M.getUTCSeconds())+"."+String((M.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}o(Rn,"_toISOStringPoly");function Pn(M,ue,Ee){var Le=M[P.R5];try{for(var tt=0;tt<Le&&!(tt in M&&ue[P._S](Ee||M,M[tt],tt,M)===-1);tt++);}catch(qe){}}o(Pn,"arrForEach");function wn(M,ue,Ee){if(M){if(M[w])return M[w](ue,Ee);var Le=M[P.R5],tt=Ee||0;try{for(var qe=Math.max(tt>=0?tt:Le-Math.abs(tt),0);qe<Le;qe++)if(qe in M&&M[qe]===ue)return qe}catch(dt){}}return-1}o(wn,"arrIndexOf");function lr(M,ue,Ee){var Le;if(M){if(M[O])return M[O](ue,Ee);var tt=M[P.R5],qe=Ee||M;Le=new Array(tt);try{for(var dt=0;dt<tt;dt++)dt in M&&(Le[dt]=ue[P._S](qe,M[dt],M))}catch(Dt){}}return Le}o(lr,"arrMap");function sr(M,ue,Ee){var Le;if(M){if(M[B])return M[B](ue,Ee);var tt=M[P.R5],qe=0;if(arguments[P.R5]>=3)Le=arguments[2];else{for(;qe<tt&&!(qe in M);)qe++;Le=M[qe++]}for(;qe<tt;)qe in M&&(Le=ue(Le,M[qe],qe,M)),qe++}return Le}o(sr,"arrReduce");function mr(M){return M&&(M=T&&M[E]?M[E]():M[P.i7]?M[P.i7](/^\s+|(?=\s)\s+$/g,y.qS):M),M}o(mr,"strTrim");var cr=!{toString:null}.propertyIsEnumerable("toString"),yr=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function ht(M){var ue=typeof M;if(ue!==R.cb&&(ue!==R.fK||M===null)&&(0,v.ZU)("objKeys called on non-object"),!cr&&Q)return Q(M);var Ee=[];for(var Le in M)M&&R.CY[P._S](M,Le)&&Ee[P.MW](Le);if(cr)for(var tt=yr[P.R5],qe=0;qe<tt;qe++)M&&R.CY[P._S](M,yr[qe])&&Ee[P.MW](yr[qe]);return Ee}o(ht,"objKeys");function Gt(M,ue,Ee,Le){if(q)try{var tt={enumerable:!0,configurable:!0};return Ee&&(tt.get=Ee),Le&&(tt.set=Le),q(M,ue,tt),!0}catch(qe){}return!1}o(Gt,"objDefineAccessors");function on(M){return M}o(on,"_doNothing");function sn(M){return _e&&de(M,function(ue,Ee){(pe(Ee)||yt(Ee))&&_e(Ee)}),jt(M)}o(sn,"deepFreeze");var jt=_e||on,_n=z||on;function Jn(){var M=Date;return M.now?M.now():new M().getTime()}o(Jn,"dateNow");function pr(M){return et(M)?M[P.I]:y.qS}o(pr,"getExceptionName");function Qn(M,ue,Ee,Le,tt){var qe=Ee;return M&&(qe=M[ue],qe!==Ee&&(!tt||tt(qe))&&(!Le||Le(Ee))&&(qe=Ee,M[ue]=qe)),qe}o(Qn,"setValue");function Rr(M,ue,Ee){var Le;return M?(Le=M[ue],!Le&&ie(Le)&&(Le=Re(Ee)?{}:Ee,M[ue]=Le)):Le=Re(Ee)?{}:Ee,Le}o(Rr,"getSetValue");function Kr(M,ue){return ie(M)?ue:M}o(Kr,"getCfgValue");function Cr(M){return!M}o(Cr,"isNotTruthy");function wr(M){return!!M}o(wr,"isTruthy");function Nr(M){throw new Error(M)}o(Nr,"throwError");function Ln(M,ue){var Ee=null,Le=null;return I(M)?Ee=M:Le=M,function(){var tt=arguments;if(Ee&&(Le=Ee()),Le)return Le[ue][P.ZV](Le,tt)}}o(Ln,"_createProxyFunction");function On(M,ue,Ee){if(M&&ue&&yt(M)&&yt(ue)){var Le=o(function(qe){if(nt(qe)){var dt=ue[qe];I(dt)?(!Ee||Ee(qe,!0,ue,M))&&(M[qe]=Ln(ue,qe)):(!Ee||Ee(qe,!1,ue,M))&&(ut(M,qe)&&delete M[qe],Gt(M,qe,function(){return ue[qe]},function(Dt){ue[qe]=Dt})||(M[qe]=dt))}},"_loop_1");for(var tt in ue)Le(tt)}return M}o(On,"proxyAssign");function br(M,ue,Ee,Le,tt){M&&ue&&Ee&&(tt!==!1||Re(M[ue]))&&(M[ue]=Ln(Ee,Le))}o(br,"proxyFunctionAs");function Gr(M,ue,Ee,Le){return M&&ue&&yt(M)&&pe(Ee)&&Pn(Ee,function(tt){nt(tt)&&br(M,tt,ue,tt,Le)}),M}o(Gr,"proxyFunctions");function Tr(M){return function(){function ue(){var Ee=this;M&&de(M,function(Le,tt){Ee[Le]=tt})}return o(ue,"class_1"),ue}()}o(Tr,"createClassFromInterface");function pi(M){return M&&R.rl&&(M=(0,R.Pw)((0,R.rl)({},M))),M}o(pi,"optimizeObject");function _r(M,ue,Ee,Le,tt,qe){var dt=arguments,Dt=dt[0]||{},Tt=dt[P.R5],_t=!1,bt=1;for(Tt>0&&H(Dt)&&(_t=Dt,Dt=dt[bt]||{},bt++),yt(Dt)||(Dt={});bt<Tt;bt++){var Ot=dt[bt],Bt=pe(Ot),Wt=yt(Ot);for(var Mt in Ot){var Kn=Bt&&Mt in Ot||Wt&&R.CY[P._S](Ot,Mt);if(!!Kn){var En=Ot[Mt],Sr=void 0;if(_t&&En&&((Sr=pe(En))||Qe(En))){var Xn=Dt[Mt];Sr?pe(Xn)||(Xn=[]):Qe(Xn)||(Xn={}),En=_r(_t,Xn,En)}En!==void 0&&(Dt[Mt]=En)}}}return Dt}o(_r,"objExtend")},6041:(st,l,C)=>{"use strict";C.d(l,{qS:()=>R,Z:()=>v,oV:()=>P,DN:()=>y,mE:()=>W,Zh:()=>N,js:()=>m,hL:()=>w,yi:()=>O,uC:()=>B,$F:()=>E,f_:()=>$,C$:()=>F,ys:()=>j,cL:()=>q,kl:()=>_e});var R="",v="channels",P="core",y="createPerfMgr",W="disabled",N="extensionConfig",m="extensions",w="processTelemetry",O="priority",B="eventsSent",E="eventsDiscarded",$="eventsSendRequest",F="perfEvent",j="errorToConsole",q="warnToConsole",_e="getPerfMgr"},1880:(st,l,C)=>{"use strict";C.d(l,{f:()=>N});var R=C(1679),v=C(8096),P=C(6708),y=C(6041);function W(m,w,O,B){(0,P.tO)(m,function(E){if(E&&E[w])if(O)setTimeout(function(){return B(E)},0);else try{B(E)}catch($){}})}o(W,"_runListeners");var N=function(){function m(w){this.listeners=[];var O=!!(w||{}).perfEvtsSendAll;(0,R.Z)(m,this,function(B){B[v.g]=function(E){B.listeners[v.MW](E)},B[v.n7]=function(E){for(var $=(0,P.UA)(B[v.dE],E);$>-1;)B.listeners[v.cb]($,1),$=(0,P.UA)(B[v.dE],E)},B[y.uC]=function(E){W(B[v.dE],y.uC,!0,function($){$[y.uC](E)})},B[y.$F]=function(E,$){W(B[v.dE],y.$F,!0,function(F){F[y.$F](E,$)})},B[y.f_]=function(E,$){W(B[v.dE],y.f_,$,function(F){F[y.f_](E,$)})},B[y.C$]=function(E){E&&(O||!E[v.PL]())&&W(B[v.dE],y.C$,!1,function($){E[v.d]?setTimeout(function(){return $[y.C$](E)},0):$[y.C$](E)})}})}return o(m,"NotificationManager"),m.__ieDyn=1,m}()},9288:(st,l,C)=>{"use strict";C.d(l,{zn:()=>O,Jk:()=>B,Lm:()=>$,j5:()=>j});var R=C(1679),v=C(8096),P=C(6708),y=C(6041),W="ctx",N="ParentContextKey",m="ChildrenContextKey",w=null,O=function(){function q(_e,z,Q){var Z=this,T=!1;if(Z.start=(0,P.m6)(),Z[v.I]=_e,Z[v.d]=Q,Z[v.PL]=function(){return!1},(0,P.mf)(z)){var Y;T=(0,P.l_)(Z,"payload",function(){return!Y&&(0,P.mf)(z)&&(Y=z(),z=null),Y})}Z[v.T]=function(x){return x?x===q[N]||x===q[m]?Z[x]:(Z[W]||{})[x]:null},Z[v.wu]=function(x,le){if(x)if(x===q[N])Z[x]||(Z[v.PL]=function(){return!0}),Z[x]=le;else if(x===q[m])Z[x]=le;else{var V=Z[W]=Z[W]||{};V[x]=le}},Z[v.Km]=function(){var x=0,le=Z[v.T](q[m]);if((0,P.kJ)(le))for(var V=0;V<le[v.R5];V++){var fe=le[V];fe&&(x+=fe[v.Z_])}Z[v.Z_]=(0,P.m6)()-Z.start,Z.exTime=Z[v.Z_]-x,Z[v.Km]=function(){},!T&&(0,P.mf)(z)&&(Z.payload=z())}}return o(q,"PerfEvent"),q.ParentContextKey="parent",q.ChildrenContextKey="childEvts",q}(),B=function(){function q(_e){this.ctx={},(0,R.Z)(q,this,function(z){z.create=function(Q,Z,T){return new O(Q,Z,T)},z.fire=function(Q){Q&&(Q[v.Km](),_e&&(0,P.mf)(_e[y.C$])&&_e[y.C$](Q))},z[v.wu]=function(Q,Z){if(Q){var T=z[W]=z[W]||{};T[Q]=Z}},z[v.T]=function(Q){return(z[W]||{})[Q]}})}return o(q,"PerfManager"),q.__ieDyn=1,q}(),E="CoreUtils.doPerf";function $(q,_e,z,Q,Z){if(q){var T=q;if(T[y.kl]&&(T=T[y.kl]()),T){var Y=void 0,x=T[v.T](E);try{if(Y=T.create(_e(),Q,Z),Y){if(x&&Y[v.wu]&&(Y[v.wu](O[N],x),x[v.T]&&x[v.wu])){var le=x[v.T](O[m]);le||(le=[],x[v.wu](O[m],le)),le[v.MW](Y)}return T[v.wu](E,Y),z(Y)}}catch(V){Y&&Y[v.wu]&&Y[v.wu]("exception",V)}finally{Y&&T.fire(Y),T[v.wu](E,x)}}}return z()}o($,"doPerf");function F(q){w=q}o(F,"setGblPerfMgr");function j(){return w}o(j,"getGblPerfMgr")},1589:(st,l,C)=>{"use strict";C.d(l,{CD:()=>j,Bt:()=>q,xy:()=>_e,jV:()=>z,Vi:()=>Z});var R=C(8096),v=C(5018),P=C(7630),y=C(6708),W=C(6041),N=C(9288),m=C(3833),w="TelemetryPluginChain",O="_hasRun",B="_getTelCtx",E=0;function $(T,Y,x){for(;T;){if(T[R.TO]()===x)return T;T=T[R.W2]()}return z([x],Y[R.TC]||{},Y)}o($,"_getNextProxyStart");function F(T,Y,x,le){var V=null,fe=[];le!==null&&(V=le?$(T,x,le):T);var Ae={_next:ae,ctx:{core:function(){return x},diagLog:function(){return(0,v.vH)(x,Y)},getCfg:function(){return Y},getExtCfg:we,getConfig:D,hasNext:function(){return!!V},getNext:function(){return V},setNext:function(ye){V=ye},iterate:Ve,onComplete:Ne}};function Ne(ye,ve){for(var G=[],se=2;se<arguments.length;se++)G[se-2]=arguments[se];ye&&fe[R.MW]({func:ye,self:(0,y.o8)(ve)?Ae.ctx:ve,args:G})}o(Ne,"_addOnComplete");function ae(){var ye=V;if(V=ye?ye[R.W2]():null,!ye){var ve=fe;ve&&ve[R.R5]>0&&((0,y.tO)(ve,function(G){try{G.func[R._S](G.self,G.args)}catch(se){(0,v.kP)(x[R.eZ],2,73,"Unexpected Exception during onComplete - "+(0,P.eU)(se))}}),fe=[])}return ye}o(ae,"_moveNext");function we(ye,ve,G){ve===void 0&&(ve={}),G===void 0&&(G=0);var se;if(Y){var Re=Y[W.Zh];Re&&ye&&(se=Re[ye])}if(!se)se=ve;else if((0,y.Kn)(ve)&&G!==0){var Ge=(0,y.mm)(!0,ve,se);Y&&G===2&&(0,y.rW)(ve,function(ie){if((0,y.le)(Ge[ie])){var Ze=Y[ie];(0,y.le)(Ze)||(Ge[ie]=Ze)}}),se=Ge}return se}o(we,"_getExtCfg");function D(ye,ve,G){G===void 0&&(G=!1);var se,Re=we(ye,null);return Re&&!(0,y.le)(Re[ve])?se=Re[ve]:Y&&!(0,y.le)(Y[ve])&&(se=Y[ve]),(0,y.le)(se)?G:se}o(D,"_getConfig");function Ve(ye){for(var ve;ve=Ae._next();){var G=ve[R.TO]();G&&ye(G)}}return o(Ve,"_iterateChain"),Ae}o(F,"_createInternalContext");function j(T,Y,x,le){var V=F(T,Y,x,le),fe=V.ctx;function Ae(ae){var we=V._next();return we&&we[W.hL](ae,fe),!we}o(Ae,"_processNext");function Ne(ae,we){return ae===void 0&&(ae=null),(0,y.kJ)(ae)&&(ae=z(ae,Y,x,we)),j(ae||fe[R.W2](),Y,x,we)}return o(Ne,"_createNew"),fe[R.uL]=Ae,fe[R.zV]=Ne,fe}o(j,"createProcessTelemetryContext");function q(T,Y,x){var le=Y[R.TC]||{},V=F(T,le,Y,x),fe=V.ctx;function Ae(ae){var we=V._next();return we&&we.unload(fe,ae),!we}o(Ae,"_processNext");function Ne(ae,we){return ae===void 0&&(ae=null),(0,y.kJ)(ae)&&(ae=z(ae,le,Y,we)),q(ae||fe[R.W2](),Y,we)}return o(Ne,"_createNew"),fe[R.uL]=Ae,fe[R.zV]=Ne,fe}o(q,"createProcessTelemetryUnloadContext");function _e(T,Y,x){var le=Y[R.TC]||{},V=F(T,le,Y,x),fe=V.ctx;function Ae(ae){return fe.iterate(function(we){(0,y.mf)(we[R.Tu])&&we[R.Tu](fe,ae)})}o(Ae,"_processNext");function Ne(ae,we){return ae===void 0&&(ae=null),(0,y.kJ)(ae)&&(ae=z(ae,le,Y,we)),_e(ae||fe[R.W2](),Y,we)}return o(Ne,"_createNew"),fe[R.uL]=Ae,fe[R.zV]=Ne,fe}o(_e,"createProcessTelemetryUpdateContext");function z(T,Y,x,le){var V=null,fe=!le;if((0,y.kJ)(T)&&T[R.R5]>0){var Ae=null;(0,y.tO)(T,function(Ne){if(!fe&&le===Ne&&(fe=!0),fe&&Ne&&(0,y.mf)(Ne[W.hL])){var ae=Q(Ne,Y,x);V||(V=ae),Ae&&Ae._setNext(ae),Ae=ae}})}return le&&!V?z([le],Y,x):V}o(z,"createTelemetryProxyChain");function Q(T,Y,x){var le=null,V=(0,y.mf)(T[W.hL]),fe=(0,y.mf)(T[R.Jd]),Ae;T?Ae=T[R.pZ]+"-"+T[W.yi]+"-"+E++:Ae="Unknown-0-"+E++;var Ne={getPlugin:function(){return T},getNext:function(){return le},processTelemetry:D,unload:Ve,update:ye,_id:Ae,_setNext:function(ve){le=ve}};function ae(){var ve;return T&&(0,y.mf)(T[B])&&(ve=T[B]()),ve||(ve=j(Ne,Y,x)),ve}o(ae,"_getTelCtx");function we(ve,G,se,Re,Ge){var ie=!1,Ze=T?T[R.pZ]:w,ut=ve[O];return ut||(ut=ve[O]={}),ve.setNext(le),T&&(0,N.Lm)(ve[W.oV](),function(){return Ze+":"+se},function(){ut[Ae]=!0;try{var yt=le?le._id:W.qS;yt&&(ut[yt]=!1),ie=G(ve)}catch(U){var I=le?ut[le._id]:!0;I&&(ie=!0),(!le||!I)&&(0,v.kP)(ve[R.mc](),1,73,"Plugin ["+Ze+"] failed during "+se+" - "+(0,P.eU)(U)+", run flags: "+(0,P.eU)(ut))}},Re,Ge),ie}o(we,"_processChain");function D(ve,G){G=G||ae();function se(Re){if(!T||!V)return!1;var Ge=(0,m.OY)(T);return Ge[R.fi]||Ge[W.mE]?!1:(fe&&T[R.Jd](le),T[W.hL](ve,Re),!0)}o(se,"_callProcessTelemetry"),we(G,se,"processTelemetry",function(){return{item:ve}},!ve.sync)||G[R.uL](ve)}o(D,"_processTelemetry");function Ve(ve,G){function se(){var Re=!1;if(T){var Ge=(0,m.OY)(T),ie=T[W.oV]||Ge[W.oV];T&&(!ie||ie===ve.core())&&!Ge[R.fi]&&(Ge[W.oV]=null,Ge[R.fi]=!0,Ge[R.yl]=!1,T[R.fi]&&T[R.fi](ve,G)===!0&&(Re=!0))}return Re}o(se,"_callTeardown"),we(ve,se,"unload",function(){},G[R.d])||ve[R.uL](G)}o(Ve,"_unloadPlugin");function ye(ve,G){function se(){var Re=!1;if(T){var Ge=(0,m.OY)(T),ie=T[W.oV]||Ge[W.oV];T&&(!ie||ie===ve.core())&&!Ge[R.fi]&&T[R.Tu]&&T[R.Tu](ve,G)===!0&&(Re=!0)}return Re}o(se,"_callUpdate"),we(ve,se,"update",function(){},!1)||ve[R.uL](G)}return o(ye,"_updatePlugin"),(0,y.FL)(Ne)}o(Q,"createTelemetryPluginProxy");var Z=function(){function T(Y,x,le,V){var fe=this,Ae=j(Y,x,le,V);(0,y.Vb)(fe,Ae,(0,y.FY)(Ae))}return o(T,"ProcessTelemetryContext"),T}()},4878:(st,l,C)=>{"use strict";C.d(l,{az:()=>$,_l:()=>F,CN:()=>j,F6:()=>q,pZ:()=>_e});var R=C(8096),v=C(7630),P=C(6708),y=C(6041),W=4294967296,N=4294967295,m=!1,w=123456789,O=987654321;function B(z){z<0&&(z>>>=0),w=123456789+z&N,O=987654321-z&N,m=!0}o(B,"_mwcSeed");function E(){try{var z=(0,P.m6)()&2147483647;B((Math.random()*W^z)+z)}catch(Q){}}o(E,"_autoSeedMwc");function $(z){return z>0?Math.floor(F()/N*(z+1))>>>0:0}o($,"randomValue");function F(z){var Q=0,Z=(0,v.MX)()||(0,v.gz)();return Z&&Z.getRandomValues&&(Q=Z.getRandomValues(new Uint32Array(1))[0]&N),Q===0&&(0,v.w1)()&&(m||E(),Q=q()&N),Q===0&&(Q=Math.floor(W*Math.random()|0)),z||(Q>>>=0),Q}o(F,"random32");function j(z){z?B(z):E()}o(j,"mwcRandomSeed");function q(z){O=36969*(O&65535)+(O>>16)&N,w=18e3*(w&65535)+(w>>16)&N;var Q=(O<<16)+(w&65535)>>>0&N|0;return z||(Q>>>=0),Q}o(q,"mwcRandom32");function _e(z){z===void 0&&(z=22);for(var Q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Z=F()>>>0,T=0,Y=y.qS;Y[R.R5]<z;)T++,Y+=Q.charAt(Z&63),Z>>>=6,T===5&&(Z=(F()<<2&4294967295|Z&3)>>>0,T=0);return Y}o(_e,"newId")},3833:(st,l,C)=>{"use strict";C.d(l,{OY:()=>m,bP:()=>w,AA:()=>O,Yn:()=>E});var R=C(8096),v=C(5883),P=C(6708),y=C(6041),W=C(4206),N=(0,v.K)("plugin");function m($){return N.get($,"state",{},!0)}o(m,"_getPluginState");function w($,F){for(var j=[],q=null,_e=$[R.W2](),z;_e;){var Q=_e[R.TO]();if(Q){q&&(0,P.mf)(q[R.Jd])&&(0,P.mf)(Q[y.hL])&&q[R.Jd](Q);var Z=!1;(0,P.mf)(Q[R.yl])?Z=Q[R.yl]():(z=m(Q),Z=z[R.yl]),Z||j[R.MW](Q),q=Q,_e=_e[R.W2]()}}(0,P.tO)(j,function(T){var Y=$[y.oV]();T[R.VL]($.getCfg(),Y,F,$[R.W2]()),z=m(T),!T[y.oV]&&!z[y.oV]&&(z[y.oV]=Y),z[R.yl]=!0,delete z[R.fi]})}o(w,"initializePlugins");function O($){return $.sort(function(F,j){var q=0;if(j){var _e=(0,P.mf)(j[y.hL]);(0,P.mf)(F[y.hL])?q=_e?F[y.yi]-j[y.yi]:1:_e&&(q=-1)}else q=F?1:-1;return q})}o(O,"sortPlugins");function B($,F,j,q){var _e=0;function z(){for(;_e<$[_DYN_LENGTH];){var Q=$[_e++];if(Q){var Z=Q._doUnload||Q[_DYN__DO_TEARDOWN];if(isFunction(Z)&&Z[_DYN_CALL](Q,F,j,z)===!0)return!0}}}return o(z,"_doUnload"),z()}o(B,"unloadComponents");function E($){var F={};return{getName:function(){return F[R.I]},setName:function(j){$&&$.setName(j),F[R.I]=j},getTraceId:function(){return F[R.nY]},setTraceId:function(j){$&&$.setTraceId(j),(0,W.jN)(j)&&(F[R.nY]=j)},getSpanId:function(){return F[R._d]},setSpanId:function(j){$&&$.setSpanId(j),(0,W.Lc)(j)&&(F[R._d]=j)},getTraceFlags:function(){return F[R.T0]},setTraceFlags:function(j){$&&$.setTraceFlags(j),F[R.T0]=j}}}o(E,"createDistributedTraceContext")},310:(st,l,C)=>{"use strict";C.d(l,{Y:()=>W});var R=C(8096),v=C(5018),P=C(7630),y=C(6708);function W(){var N=[];function m(O){O&&N[R.MW](O)}o(m,"_addHandler");function w(O,B){(0,y.tO)(N,function(E){try{E(O,B)}catch($){(0,v.kP)(O[R.mc](),2,73,"Unexpected error calling unload handler - "+(0,P.eU)($))}}),N=[]}return o(w,"_runHandlers"),{add:m,run:w}}o(W,"createUnloadHandlerContainer")},4206:(st,l,C)=>{"use strict";C.d(l,{SU:()=>j,j_:()=>q,jN:()=>_e,Lc:()=>z,J6:()=>Q,Pn:()=>Z,aR:()=>T,lq:()=>Y});var R=C(8096),v=C(5843),P=C(7630),y=C(6708),W=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]*)?$/,N="00",m="ff",w="00000000000000000000000000000000",O="0000000000000000",B=1;function E(x,le,V){return x&&x[R.R5]===le&&x!==V?!!x.match(/^[\da-f]*$/):!1}o(E,"_isValid");function $(x,le,V){return E(x,le)?x:V}o($,"_formatValue");function F(x){(isNaN(x)||x<0||x>255)&&(x=1);for(var le=x.toString(16);le[R.R5]<2;)le="0"+le;return le}o(F,"_formatFlags");function j(x,le,V,fe){var Ae;return Ae={},Ae[R.PA]=E(fe,2,m)?fe:N,Ae[R.nY]=_e(x)?x:(0,v.DO)(),Ae.spanId=z(le)?le:(0,v.DO)()[R.Jn](0,16),Ae.traceFlags=V>=0&&V<=255?V:1,Ae}o(j,"createTraceParent");function q(x){var le;if(!x||((0,y.kJ)(x)&&(x=x[0]||""),!x||!(0,y.HD)(x)||x[R.R5]>8192))return null;var V=W.exec((0,y.nd)(x));return!V||V[1]===m||V[2]===w||V[3]===O?null:(le={},le[R.PA]=V[1],le[R.nY]=V[2],le[R._d]=V[3],le[R.T0]=parseInt(V[4],16),le)}o(q,"parseTraceParent");function _e(x){return E(x,32,w)}o(_e,"isValidTraceId");function z(x){return E(x,16,O)}o(z,"isValidSpanId");function Q(x){return!(!x||!E(x[R.PA],2,m)||!E(x[R.nY],32,w)||!E(x[R._d],16,O)||!E(F(x[R.T0]),2))}o(Q,"isValidTraceParent");function Z(x){return Q(x)?(x[R.T0]&B)===B:!1}o(Z,"isSampledFlag");function T(x){if(x){var le=F(x[R.T0]);E(le,2)||(le="01");var V=x[R.PA]||N;return V!=="00"&&V!=="ff"&&(V=N),"".concat(V,"-").concat($(x.traceId,32,w),"-").concat($(x.spanId,16,O),"-").concat(le)}return""}o(T,"formatTraceParent");function Y(){var x="traceparent",le=q((0,P.ed)(x));return le||(le=q((0,P.pI)(x))),le}o(Y,"findW3cTraceParent")},8096:(st,l,C)=>{"use strict";C.d(l,{VL:()=>R,I:()=>v,tb:()=>P,pZ:()=>y,MW:()=>W,yl:()=>N,TC:()=>m,p$:()=>w,eZ:()=>O,R5:()=>B,Z_:()=>E,uL:()=>$,SD:()=>F,g:()=>j,n7:()=>q,LS:()=>_e,Fc:()=>z,TO:()=>Q,kL:()=>Z,iC:()=>T,cb:()=>Y,fi:()=>x,Gc:()=>le,gU:()=>V,d:()=>fe,F3:()=>Ae,Tu:()=>Ne,W2:()=>ae,mc:()=>we,Jd:()=>D,zV:()=>Ve,Lk:()=>ye,ou:()=>ve,zc:()=>G,qV:()=>se,w6:()=>Re,$h:()=>Ge,Jn:()=>ie,xv:()=>Ze,ZV:()=>ut,i7:()=>yt,Fr:()=>I,jk:()=>U,T1:()=>ne,_S:()=>de,P6:()=>Ue,Kn:()=>Ie,dE:()=>ce,PL:()=>Ce,T:()=>Te,wu:()=>Ye,Km:()=>pe,nY:()=>ke,_d:()=>et,T0:()=>nt,PA:()=>be});var R="initialize",v="name",P="getNotifyMgr",y="identifier",W="push",N="isInitialized",m="config",w="instrumentationKey",O="logger",B="length",E="time",$="processNext",F="getProcessTelContext",j="addNotificationListener",q="removeNotificationListener",_e="stopPollingInternalLogs",z="onComplete",Q="getPlugin",Z="flush",T="_extensions",Y="splice",x="teardown",le="messageId",V="message",fe="isAsync",Ae="_doTeardown",Ne="update",ae="getNext",we="diagLog",D="setNextPlugin",Ve="createNew",ye="cookieCfg",ve="indexOf",G="substring",se="userAgent",Re="split",Ge="setEnabled",ie="substr",Ze="nodeType",ut="apply",yt="replace",I="enableDebugExceptions",U="logInternalMessage",ne="toLowerCase",de="call",Ue="type",Ie="handler",ce="listeners",Ce="isChildEvt",Te="getCtx",Ye="setCtx",pe="complete",ke="traceId",et="spanId",nt="traceFlags",be="version"},4392:(st,l,C)=>{"use strict";C.d(l,{cb:()=>R,fK:()=>v,jA:()=>P,hB:()=>y,bO:()=>W,Pw:()=>m,V4:()=>w,rl:()=>O,yu:()=>B,RJ:()=>E,CY:()=>$});var R="function",v="object",P="undefined",y="prototype",W="hasOwnProperty",N="default",m=Object,w=m[y],O=m.assign,B=m.create,E=m.defineProperty,$=w[W]},2091:(st,l,C)=>{"use strict";C.d(l,{Rd:()=>P,ZU:()=>y,pu:()=>W});var R=C(4392),v=null;function P(N){N===void 0&&(N=!0);var m=N===!1?null:v;return m||(typeof globalThis!==R.jA&&(m=globalThis),!m&&typeof self!==R.jA&&(m=self),!m&&typeof window!==R.jA&&(m=window),!m&&typeof C.g!==R.jA&&(m=C.g),v=m),m}o(P,"getGlobal");function y(N){throw new TypeError(N)}o(y,"throwTypeError");function W(N){var m=R.yu;if(m)return m(N);if(N==null)return{};var w=typeof N;w!==R.fK&&w!==R.cb&&y("Object prototype may only be an Object:"+N);function O(){}return o(O,"tmpFunc"),O[R.hB]=N,new O}o(W,"objCreateFn")},1088:(st,l,C)=>{"use strict";C.d(l,{uc:()=>$,ne:()=>j,$h:()=>V});var R=C(4392),v=C(2091),P=((0,v.Rd)()||{}).Symbol,y=((0,v.Rd)()||{}).Reflect,W=!!P,N=!!y,m="decorate",w="metadata",O="getOwnPropertySymbols",B="iterator",E=o(function(ae){for(var we,D=1,Ve=arguments.length;D<Ve;D++){we=arguments[D];for(var ye in we)R.V4[R.bO].call(we,ye)&&(ae[ye]=we[ye])}return ae},"__objAssignFnImpl"),$=R.rl||E,F=o(function(ae,we){return F=R.Pw.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,Ve){D.__proto__=Ve}||function(D,Ve){for(var ye in Ve)Ve[R.bO](ye)&&(D[ye]=Ve[ye])},F(ae,we)},"extendStaticsFn");function j(ae,we){typeof we!==R.cb&&we!==null&&(0,v.ZU)("Class extends value "+String(we)+" is not a constructor or null"),F(ae,we);function D(){this.constructor=ae}o(D,"__"),ae[R.hB]=we===null?(0,v.pu)(we):(D[R.hB]=we[R.hB],new D)}o(j,"__extendsFn");function q(ae,we){var D={};for(var Ve in ae)ObjHasOwnProperty.call(ae,Ve)&&we.indexOf(Ve)<0&&(D[Ve]=ae[Ve]);if(ae!=null&&typeof ObjClass[O]===strShimFunction)for(var ye=0,ve=ObjClass[O](ae);ye<ve.length;ye++)we.indexOf(ve[ye])<0&&ObjProto.propertyIsEnumerable.call(ae,ve[ye])&&(D[ve[ye]]=ae[ve[ye]]);return D}o(q,"__restFn");function _e(ae,we,D,Ve){var ye=arguments.length,ve=ye<3?we:Ve===null?Ve=ObjClass.getOwnPropertyDescriptor(we,D):Ve,G;if(N&&typeof y[m]===strShimFunction)ve=y[m](ae,we,D,Ve);else for(var se=ae.length-1;se>=0;se--)(G=ae[se])&&(ve=(ye<3?G(ve):ye>3?G(we,D,ve):G(we,D))||ve);return ye>3&&ve&&ObjDefineProperty(we,D,ve),ve}o(_e,"__decorateFn");function z(ae,we){return function(D,Ve){we(D,Ve,ae)}}o(z,"__paramFn");function Q(ae,we){if(N&&y[w]===strShimFunction)return y[w](ae,we)}o(Q,"__metadataFn");function Z(ae,we){for(var D in ae)D!==strDefault&&!ObjHasOwnProperty.call(we,D)&&T(we,ae,D)}o(Z,"__exportStarFn");function T(ae,we,D,Ve){Ve===void 0&&(Ve=D),ObjCreate?ObjDefineProperty(ae,Ve,{enumerable:!0,get:function(){return we[D]}}):ae[Ve]=we[D]}o(T,"__createBindingFn");function Y(ae){var we=typeof P===strShimFunction&&P[B],D=we&&ae[we],Ve=0;if(D)return D.call(ae);if(ae&&typeof ae.length=="number")return{next:function(){return ae&&Ve>=ae.length&&(ae=void 0),{value:ae&&ae[Ve++],done:!ae}}};throwTypeError(we?"Object is not iterable.":"Symbol.iterator is not defined.")}o(Y,"__valuesFn");function x(ae,we){var D=typeof P===strShimFunction&&ae[P[B]];if(!D)return ae;var Ve=D.call(ae),ye,ve=[],G;try{for(;(we===void 0||we-- >0)&&!(ye=Ve.next()).done;)ve.push(ye.value)}catch(se){G={error:se}}finally{try{ye&&!ye.done&&(D=Ve.return)&&D.call(Ve)}finally{if(G)throw G.error}}return ve}o(x,"__readFn");function le(){for(var ae=arguments,we=0,D=0,Ve=ae.length;D<Ve;D++)we+=ae[D].length;for(var ye=Array(we),ve=0,D=0;D<Ve;D++)for(var G=ae[D],se=0,Re=G.length;se<Re;se++,ve++)ye[ve]=G[se];return ye}o(le,"__spreadArraysFn");function V(ae,we){for(var D=0,Ve=we.length,ye=ae.length;D<Ve;D++,ye++)ae[ye]=we[D];return ae}o(V,"__spreadArrayFn");function fe(ae,we){return ObjDefineProperty?ObjDefineProperty(ae,"raw",{value:we}):ae.raw=we,ae}o(fe,"__makeTemplateObjectFn");function Ae(ae){if(ae&&ae.__esModule)return ae;var we={};if(ae!=null)for(var D in ae)D!==strDefault&&Object.prototype.hasOwnProperty.call(ae,D)&&T(we,ae,D);return ObjCreate?ObjDefineProperty(we,strDefault,{enumerable:!0,value:ae}):we[strDefault]=ae,we}o(Ae,"__importStarFn");function Ne(ae){return ae&&ae.__esModule?ae:{strDefault:ae}}o(Ne,"__importDefaultFn")},3268:(st,l,C)=>{"use strict";C.r(l),C.d(l,{AppInsightsCore:()=>Ia.F,ApplicationInsights:()=>Ri,CoreUtils:()=>En.Tr,Sender:()=>Ma,SeverityLevel:()=>co,_InternalMessageId:()=>ka.v,arrForEach:()=>H.tO,isNullOrUndefined:()=>H.le,proxyFunctions:()=>H.Vb,throwError:()=>H._y});var R=C(1679),v=C(1088),P="AppInsightsPropertiesPlugin",y="AppInsightsChannelPlugin",W="ApplicationInsightsAnalytics",N="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",m="sampleRate",w="ProcessLegacy",O="http.method",B="https://dc.services.visualstudio.com",E="/v2/track",$="not_specified",F="iKey",j="split",q="length",_e="toLowerCase",z="ingestionendpoint",Q="toString",Z="removeItem",T="name",Y="message",x="count",le="preTriggerDate",V="disabled",fe="interval",Ae="daysOfMonth",Ne="date",ae="getUTCDate",we="stringify",D="pathname",Ve="correlationHeaderExcludePatterns",ye="indexOf",ve="extensionConfig",G="exceptions",se="parsedStack",Re="properties",Ge="measurements",ie="sizeInBytes",Ze="typeName",ut="severityLevel",yt="problemGroup",I="isManual",U="CreateFromInterface",ne="assembly",de="hasFullStack",Ue="level",Ie="method",ce="fileName",Ce="line",Te="duration",Ye="receivedResponse",pe="substring",ke="sanitizeKeyAndAddUniqueness",et="sanitizeException",nt="sanitizeProperties",be="sanitizeMeasurements",H=C(6708),K=C(5018),Qe=C(7630),Jt;function Rn(S,g,_){var k=g[q],oe=Pn(S,g);if(oe[q]!==k){for(var Se=0,Oe=oe;_[Oe]!==void 0;)Se++,Oe=oe[pe](0,150-3)+on(Se);oe=Oe}return oe}o(Rn,"dataSanitizeKeyAndAddUniqueness");function Pn(S,g){var _;return g&&(g=(0,H.nd)(g[Q]()),g[q]>150&&(_=g[pe](0,150),(0,K.kP)(S,2,57,"name is too long.  It has been truncated to "+150+" characters.",{name:g},!0))),_||g}o(Pn,"dataSanitizeKey");function wn(S,g,_){_===void 0&&(_=1024);var k;return g&&(_=_||1024,g=(0,H.nd)(g),g.toString()[q]>_&&(k=g[Q]()[pe](0,_),(0,K.kP)(S,2,61,"string value is too long. It has been truncated to "+_+" characters.",{value:g},!0))),k||g}o(wn,"dataSanitizeString");function lr(S,g){return Gt(S,g,2048,66)}o(lr,"dataSanitizeUrl");function sr(S,g){var _;return g&&g[q]>32768&&(_=g[pe](0,32768),(0,K.kP)(S,2,56,"message is too long, it has been truncated to "+32768+" characters.",{message:g},!0)),_||g}o(sr,"dataSanitizeMessage");function mr(S,g){var _;if(g){var k=""+g;k[q]>32768&&(_=k[pe](0,32768),(0,K.kP)(S,2,52,"exception is too long, it has been truncated to "+32768+" characters.",{exception:g},!0))}return _||g}o(mr,"dataSanitizeException");function cr(S,g){if(g){var _={};(0,H.rW)(g,function(k,oe){if((0,H.Kn)(oe)&&(0,Qe.nS)())try{oe=(0,Qe.xA)()[we](oe)}catch(Se){(0,K.kP)(S,2,49,"custom property is not valid",{exception:Se},!0)}oe=wn(S,oe,8192),k=Rn(S,k,_),_[k]=oe}),g=_}return g}o(cr,"dataSanitizeProperties");function yr(S,g){if(g){var _={};(0,H.rW)(g,function(k,oe){k=Rn(S,k,_),_[k]=oe}),g=_}return g}o(yr,"dataSanitizeMeasurements");function ht(S,g){return g&&Gt(S,g,128,69)[Q]()}o(ht,"dataSanitizeId");function Gt(S,g,_,k){var oe;return g&&(g=(0,H.nd)(g),g[q]>_&&(oe=g[pe](0,_),(0,K.kP)(S,2,k,"input is too long, it has been truncated to "+_+" characters.",{data:g},!0))),oe||g}o(Gt,"dataSanitizeInput");function on(S){var g="00"+S;return g.substr(g[q]-3)}o(on,"dsPadNumber");var sn=(Jt={MAX_NAME_LENGTH:150,MAX_ID_LENGTH:128,MAX_PROPERTY_LENGTH:8192,MAX_STRING_LENGTH:1024,MAX_URL_LENGTH:2048,MAX_MESSAGE_LENGTH:32768,MAX_EXCEPTION_LENGTH:32768},Jt[ke]=Rn,Jt.sanitizeKey=Pn,Jt.sanitizeString=wn,Jt.sanitizeUrl=lr,Jt.sanitizeMessage=sr,Jt[et]=mr,Jt[nt]=cr,Jt[be]=yr,Jt.sanitizeId=ht,Jt.sanitizeInput=Gt,Jt.padNumber=on,Jt.trim=H.nd,Jt),jt=function(){function S(g,_,k,oe){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var Se=this;Se.ver=2,Se[T]=wn(g,_)||$,Se[Re]=cr(g,k),Se[Ge]=yr(g,oe)}return o(S,"Event"),S.envelopeType="Microsoft.ApplicationInsights.{0}.Event",S.dataType="EventData",S}(),_n=function(){function S(g,_,k,oe,Se){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var Oe=this;Oe.ver=2,_=_||$,Oe[Y]=sr(g,_),Oe[Re]=cr(g,oe),Oe[Ge]=yr(g,Se),k&&(Oe[ut]=k)}return o(S,"Trace"),S.envelopeType="Microsoft.ApplicationInsights.{0}.Message",S.dataType="MessageData",S}(),Jn="";function pr(S,g){return g===void 0&&(g=!1),S==null?g:S.toString()[_e]()==="true"}o(pr,"stringToBoolOrDefault");function Qn(S){(isNaN(S)||S<0)&&(S=0),S=Math.round(S);var g=Jn+S%1e3,_=Jn+Math.floor(S/1e3)%60,k=Jn+Math.floor(S/(1e3*60))%60,oe=Jn+Math.floor(S/(1e3*60*60))%24,Se=Math.floor(S/(1e3*60*60*24));return g=g[q]===1?"00"+g:g[q]===2?"0"+g:g,_=_[q]<2?"0"+_:_,k=k[q]<2?"0"+k:k,oe=oe[q]<2?"0"+oe:oe,(Se>0?Se+".":Jn)+oe+":"+k+":"+_+"."+g}o(Qn,"msToTimeSpan");function Rr(S,g){var _=null;return(0,H.tO)(S,function(k){if(k.identifier===g)return _=k,-1}),_}o(Rr,"getExtensionByName");function Kr(S,g,_,k,oe){return!oe&&(0,H.HD)(S)&&(S==="Script error."||S==="Script error")}o(Kr,"isCrossOriginError");var Cr=function(){function S(g,_,k,oe,Se,Oe,Be){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var gt=this;gt.ver=2,gt.id=ht(g,Be),gt.url=lr(g,k),gt[T]=wn(g,_)||$,isNaN(oe)||(gt[Te]=Qn(oe)),gt[Re]=cr(g,Se),gt[Ge]=yr(g,Oe)}return o(S,"PageView"),S.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",S.dataType="PageviewData",S}(),wr=function(){function S(g,_,k,oe,Se,Oe,Be){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var gt=this;gt.ver=2,gt.url=lr(g,k),gt[T]=wn(g,_)||$,gt[Re]=cr(g,Se),gt[Ge]=yr(g,Oe),Be&&(gt.domProcessing=Be.domProcessing,gt[Te]=Be[Te],gt.networkConnect=Be.networkConnect,gt.perfTotal=Be.perfTotal,gt[Ye]=Be[Ye],gt.sentRequest=Be.sentRequest)}return o(S,"PageViewPerformance"),S.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",S.dataType="PageviewPerformanceData",S}(),Nr="<no_method>",Ln="error",On="stack",br="stackDetails",Gr="errorSrc",Tr="message",pi="description";function _r(S,g){var _=S;return _&&!(0,H.HD)(_)&&(JSON&&JSON[we]?(_=JSON[we](S),g&&(!_||_==="{}")&&((0,H.mf)(S[Q])?_=S[Q]():_=""+S)):_=""+S+" - (Missing JSON.stringify)"),_||""}o(_r,"_stringify");function M(S,g){var _=S;return S&&(_&&!(0,H.HD)(_)&&(_=S[Tr]||S[pi]||_),_&&!(0,H.HD)(_)&&(_=_r(_,!0)),S.filename&&(_=_+" @"+(S.filename||"")+":"+(S.lineno||"?")+":"+(S.colno||"?"))),g&&g!=="String"&&g!=="Object"&&g!=="Error"&&(_||"")[ye](g)===-1&&(_=g+": "+_),_||""}o(M,"_formatMessage");function ue(S){try{if((0,H.Kn)(S))return"hasFullStack"in S&&"typeName"in S}catch(g){}return!1}o(ue,"_isExceptionDetailsInternal");function Ee(S){try{if((0,H.Kn)(S))return"ver"in S&&"exceptions"in S&&"properties"in S}catch(g){}return!1}o(Ee,"_isExceptionInternal");function Le(S){return S&&S.src&&(0,H.HD)(S.src)&&S.obj&&(0,H.kJ)(S.obj)}o(Le,"_isStackDetails");function tt(S){var g=S||"";(0,H.HD)(g)||((0,H.HD)(g[On])?g=g[On]:g=""+g);var _=g[j](`
`);return{src:g,obj:_}}o(tt,"_convertStackObj");function qe(S){for(var g=[],_=S[j](`
`),k=0;k<_[q];k++){var oe=_[k];_[k+1]&&(oe+="@"+_[k+1],k++),g.push(oe)}return{src:S,obj:g}}o(qe,"_getOperaStack");function dt(S){var g=null;if(S)try{if(S[On])g=tt(S[On]);else if(S[Ln]&&S[Ln][On])g=tt(S[Ln][On]);else if(S.exception&&S.exception[On])g=tt(S.exception[On]);else if(Le(S))g=S;else if(Le(S[br]))g=S[br];else if(window&&window.opera&&S[Tr])g=qe(S[Y]);else if(S.reason&&S.reason[On])g=tt(S.reason[On]);else if((0,H.HD)(S))g=tt(S);else{var _=S[Tr]||S[pi]||"";(0,H.HD)(S[Gr])&&(_&&(_+=`
`),_+=" from "+S[Gr]),_&&(g=tt(_))}}catch(k){g=tt(k)}return g||{src:"",obj:null}}o(dt,"_getStackFromErrorObj");function Dt(S){var g="";return S&&(S.obj?(0,H.tO)(S.obj,function(_){g+=_+`
`}):g=S.src||""),g}o(Dt,"_formatStackTrace");function Tt(S){var g,_=S.obj;if(_&&_[q]>0){g=[];var k=0,oe=0;(0,H.tO)(_,function(In){var er=In[Q]();if(Wt.regex.test(er)){var He=new Wt(er,k++);oe+=He[ie],g.push(He)}});var Se=32*1024;if(oe>Se)for(var Oe=0,Be=g[q]-1,gt=0,ct=Oe,Nt=Be;Oe<Be;){var rn=g[Oe][ie],Yn=g[Be][ie];if(gt+=rn+Yn,gt>Se){var ln=Nt-ct+1;g.splice(ct,ln);break}ct=Oe,Nt=Be,Oe++,Be--}}return g}o(Tt,"_parseStack");function _t(S){var g="";if(S&&(g=S.typeName||S[T]||"",!g))try{var _=/function (.{1,200})\(/,k=_.exec(S.constructor[Q]());g=k&&k[q]>1?k[1]:""}catch(oe){}return g}o(_t,"_getErrorType");function bt(S){if(S)try{if(!(0,H.HD)(S)){var g=_t(S),_=_r(S,!1);return(!_||_==="{}")&&(S[Ln]&&(S=S[Ln],g=_t(S)),_=_r(S,!0)),_[ye](g)!==0&&g!=="String"?g+":"+_:_}}catch(k){}return""+(S||"")}o(bt,"_formatErrorCode");var Ot=function(){function S(g,_,k,oe,Se,Oe){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var Be=this;Be.ver=2,Ee(_)?(Be[G]=_[G]||[],Be[Re]=_[Re],Be[Ge]=_[Ge],_[ut]&&(Be[ut]=_[ut]),_.id&&(Be.id=_.id),_[yt]&&(Be[yt]=_[yt]),(0,H.le)(_[I])||(Be[I]=_[I])):(k||(k={}),Be[G]=[new Bt(g,_,k)],Be[Re]=cr(g,k),Be[Ge]=yr(g,oe),Se&&(Be[ut]=Se),Oe&&(Be.id=Oe))}return o(S,"Exception"),S.CreateAutoException=function(g,_,k,oe,Se,Oe,Be,gt){var ct,Nt=_t(Se||Oe||g);return ct={},ct[Y]=M(g,Nt),ct.url=_,ct.lineNumber=k,ct.columnNumber=oe,ct.error=bt(Se||Oe||g),ct.evt=bt(Oe||g),ct[Ze]=Nt,ct.stackDetails=dt(Be||Se||Oe),ct.errorSrc=gt,ct},S.CreateFromInterface=function(g,_,k,oe){var Se=_[G]&&(0,H.Mr)(_[G],function(Be){return Bt[U](g,Be)}),Oe=new S(g,(0,v.uc)((0,v.uc)({},_),{exceptions:Se}),k,oe);return Oe},S.prototype.toInterface=function(){var g,_=this,k=_.exceptions,oe=_.properties,Se=_.measurements,Oe=_.severityLevel,Be=_.problemGroup,gt=_.id,ct=_.isManual,Nt=k instanceof Array&&(0,H.Mr)(k,function(rn){return rn.toInterface()})||void 0;return g={ver:"4.0"},g[G]=Nt,g.severityLevel=Oe,g.properties=oe,g.measurements=Se,g.problemGroup=Be,g.id=gt,g.isManual=ct,g},S.CreateSimpleException=function(g,_,k,oe,Se,Oe){var Be;return{exceptions:[(Be={},Be[de]=!0,Be.message=g,Be.stack=Se,Be.typeName=_,Be)]}},S.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",S.dataType="ExceptionData",S.formatError=bt,S}(),Bt=function(){function S(g,_,k){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var oe=this;if(ue(_))oe[Ze]=_[Ze],oe[Y]=_[Y],oe[On]=_[On],oe[se]=_[se]||[],oe[de]=_[de];else{var Se=_,Oe=Se&&Se.evt;(0,H.VZ)(Se)||(Se=Se[Ln]||Oe||Se),oe[Ze]=wn(g,_t(Se))||$,oe[Y]=sr(g,M(_||Se,oe[Ze]))||$;var Be=_[br]||dt(_);oe[se]=Tt(Be),(0,H.kJ)(oe[se])&&(0,H.Mr)(oe[se],function(gt){return gt[ne]=wn(g,gt[ne])}),oe[On]=mr(g,Dt(Be)),oe.hasFullStack=(0,H.kJ)(oe.parsedStack)&&oe.parsedStack[q]>0,k&&(k[Ze]=k[Ze]||oe[Ze])}}return o(S,"_ExceptionDetails"),S.prototype.toInterface=function(){var g,_=this,k=_[se]instanceof Array&&(0,H.Mr)(_[se],function(Se){return Se.toInterface()}),oe=(g={id:_.id,outerId:_.outerId,typeName:_[Ze],message:_[Y],hasFullStack:_[de],stack:_[On]},g[se]=k||void 0,g);return oe},S.CreateFromInterface=function(g,_){var k=_[se]instanceof Array&&(0,H.Mr)(_[se],function(Se){return Wt[U](Se)})||_[se],oe=new S(g,(0,v.uc)((0,v.uc)({},_),{parsedStack:k}));return oe},S}(),Wt=function(){function S(g,_){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var k=this;if(k[ie]=0,typeof g=="string"){var oe=g;k[Ue]=_,k[Ie]=Nr,k[ne]=(0,H.nd)(oe),k[ce]="",k[Ce]=0;var Se=oe.match(S.regex);Se&&Se[q]>=5&&(k[Ie]=(0,H.nd)(Se[2])||k[Ie],k[ce]=(0,H.nd)(Se[4]),k[Ce]=parseInt(Se[5])||0)}else k[Ue]=g[Ue],k[Ie]=g[Ie],k[ne]=g[ne],k[ce]=g[ce],k[Ce]=g[Ce],k[ie]=0;k.sizeInBytes+=k.method[q],k.sizeInBytes+=k.fileName[q],k.sizeInBytes+=k.assembly[q],k[ie]+=S.baseSize,k.sizeInBytes+=k.level.toString()[q],k.sizeInBytes+=k.line.toString()[q]}return o(S,"_StackFrame"),S.CreateFromInterface=function(g){return new S(g,null)},S.prototype.toInterface=function(){var g=this;return{level:g[Ue],method:g[Ie],assembly:g[ne],fileName:g[ce],line:g[Ce]}},S.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,S.baseSize=58,S}(),Mt=function(){function S(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return o(S,"DataPoint"),S}(),Kn=function(){function S(g,_,k,oe,Se,Oe,Be,gt,ct){this.aiDataContract={ver:1,metrics:1,properties:0};var Nt=this;Nt.ver=2;var rn=new Mt;rn[x]=oe>0?oe:void 0,rn.max=isNaN(Oe)||Oe===null?void 0:Oe,rn.min=isNaN(Se)||Se===null?void 0:Se,rn[T]=wn(g,_)||$,rn.value=k,rn.stdDev=isNaN(Be)||Be===null?void 0:Be,Nt.metrics=[rn],Nt[Re]=cr(g,gt),Nt[Ge]=yr(g,ct)}return o(S,"Metric"),S.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",S.dataType="MetricData",S}(),En=C(5843),Sr=C(3242),Xn=C(4878),ur=C(4869);function zr(S){var g=null;if((0,H.mf)(Event))g=new Event(S);else{var _=(0,Qe.Me)();_&&_.createEvent&&(g=_.createEvent("Event"),g.initEvent(S,!0,!0))}return g}o(zr,"createDomEvent");var Vr=C(4873),$n=(0,Vr.cc)({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),mi=C(2091),Vt=(0,Vr.By)({LocalStorage:0,SessionStorage:1}),tr=(0,Vr.By)({AI:0,AI_AND_W3C:1,W3C:2}),An=void 0,Sn=void 0;function fn(){return wi()?nr(Vt.LocalStorage):null}o(fn,"_getLocalStorageObject");function nr(S){try{if((0,H.le)((0,mi.Rd)()))return null;var g=new Date()[Q](),_=(0,Qe.a8)(S===Vt.LocalStorage?"localStorage":"sessionStorage");_.setItem(g,g);var k=_.getItem(g)!==g;if(_[Z](g),!k)return _}catch(oe){}return null}o(nr,"_getVerifiedStorageObject");function Zn(){return Ci()?nr(Vt.SessionStorage):null}o(Zn,"_getSessionStorageObject");function Or(){An=!1,Sn=!1}o(Or,"utlDisableStorage");function yi(){An=wi(!0),Sn=Ci(!0)}o(yi,"utlEnableStorage");function wi(S){return(S||An===void 0)&&(An=!!nr(Vt.LocalStorage)),An}o(wi,"utlCanUseLocalStorage");function Ni(S,g){var _=fn();if(_!==null)try{return _.getItem(g)}catch(k){An=!1,(0,K.kP)(S,2,1,"Browser failed read of local storage. "+(0,H.jj)(k),{exception:(0,Qe.eU)(k)})}return null}o(Ni,"utlGetLocalStorage");function Si(S,g,_){var k=fn();if(k!==null)try{return k.setItem(g,_),!0}catch(oe){An=!1,(0,K.kP)(S,2,3,"Browser failed write to local storage. "+(0,H.jj)(oe),{exception:(0,Qe.eU)(oe)})}return!1}o(Si,"utlSetLocalStorage");function Hr(S,g){var _=fn();if(_!==null)try{return _[Z](g),!0}catch(k){An=!1,(0,K.kP)(S,2,5,"Browser failed removal of local storage item. "+(0,H.jj)(k),{exception:(0,Qe.eU)(k)})}return!1}o(Hr,"utlRemoveStorage");function Ci(S){return(S||Sn===void 0)&&(Sn=!!nr(Vt.SessionStorage)),Sn}o(Ci,"utlCanUseSessionStorage");function sa(){var S=[];return Ci()&&(0,H.rW)((0,Qe.a8)("sessionStorage"),function(g){S.push(g)}),S}o(sa,"utlGetSessionStorageKeys");function ji(S,g){var _=Zn();if(_!==null)try{return _.getItem(g)}catch(k){Sn=!1,(0,K.kP)(S,2,2,"Browser failed read of session storage. "+(0,H.jj)(k),{exception:(0,Qe.eU)(k)})}return null}o(ji,"utlGetSessionStorage");function Oi(S,g,_){var k=Zn();if(k!==null)try{return k.setItem(g,_),!0}catch(oe){Sn=!1,(0,K.kP)(S,2,4,"Browser failed write to session storage. "+(0,H.jj)(oe),{exception:(0,Qe.eU)(oe)})}return!1}o(Oi,"utlSetSessionStorage");function ei(S,g){var _=Zn();if(_!==null)try{return _[Z](g),!0}catch(k){Sn=!1,(0,K.kP)(S,2,6,"Browser failed removal of session storage item. "+(0,H.jj)(k),{exception:(0,Qe.eU)(k)})}return!1}o(ei,"utlRemoveSessionStorage");var ti=(0,Qe.Me)()||{},ni=0,ra=[null,null,null,null,null];function Hi(S){var g=ni,_=ra,k=_[g];return ti.createElement?_[g]||(k=_[g]=ti.createElement("a")):k={host:rt(S,!0)},k.href=S,g++,g>=_[q]&&(g=0),ni=g,k}o(Hi,"urlParseUrl");function ci(S){var g,_=Hi(S);return _&&(g=_.href),g}o(ci,"urlGetAbsoluteUrl");function la(S){var g,_=Hi(S);return _&&(g=_[D]),g}o(la,"urlGetPathName");function xe(S,g){return S?S.toUpperCase()+" "+g:g}o(xe,"urlGetCompleteUrl");function rt(S,g){var _=wt(S,g)||"";if(_){var k=_.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(k!=null&&k[q]>3&&(0,H.HD)(k[2])&&k[2][q]>0)return k[2]+(k[3]||"")}return _}o(rt,"urlParseHost");function wt(S,g){var _=null;if(S){var k=S.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(k!=null&&k[q]>2&&(0,H.HD)(k[2])&&k[2][q]>0&&(_=k[2]||"",g&&k[q]>2)){var oe=(k[1]||"")[_e](),Se=k[3]||"";(oe==="http"&&Se===":80"||oe==="https"&&Se===":443")&&(Se=""),_+=Se}}return _}o(wt,"urlParseFullHost");var at=[B+E,"https://breeze.aimon.applicationinsights.io"+E,"https://dc-int.services.visualstudio.com"+E];function Ft(S){return(0,H.UA)(at,S[_e]())!==-1}o(Ft,"isInternalApplicationInsightsEndpoint");var zt={NotSpecified:$,createDomEvent:zr,disableStorage:Or,isInternalApplicationInsightsEndpoint:Ft,canUseLocalStorage:wi,getStorage:Ni,setStorage:Si,removeStorage:Hr,canUseSessionStorage:Ci,getSessionStorageKeys:sa,getSessionStorage:ji,setSessionStorage:Oi,removeSessionStorage:ei,disableCookies:En.oF,canUseCookies:En.vn,disallowsSameSiteNone:Sr.UY,setCookie:En.d8,stringToBoolOrDefault:pr,getCookie:En.ej,deleteCookie:En.kT,trim:H.nd,newId:Xn.pZ,random32:function(){return(0,Xn._l)(!0)},generateW3CId:En.DO,isArray:H.kJ,isError:H.VZ,isDate:H.J_,toISOStringForIE8:H.Y6,getIEVersion:Qe.sA,msToTimeSpan:Qn,isCrossOriginError:Kr,dump:Qe.eU,getExceptionName:H.jj,addEventHandler:ur.pZ,IsBeaconApiSupported:Qe.MF,getExtension:Rr},St={parseUrl:Hi,getAbsoluteUrl:ci,getPathName:la,getCompleteUrl:xe,parseHost:rt,parseFullHost:wt},Xt={correlationIdPrefix:"cid-v1:",canIncludeCorrelationHeader:function(S,g,_){if(!g||S&&S.disableCorrelationHeaders)return!1;if(S&&S[Ve]){for(var k=0;k<S.correlationHeaderExcludePatterns[q];k++)if(S[Ve][k].test(g))return!1}var oe=Hi(g).host[_e]();if(oe&&(oe[ye](":443")!==-1||oe[ye](":80")!==-1)&&(oe=(wt(g,!0)||"")[_e]()),(!S||!S.enableCorsCorrelation)&&oe&&oe!==_)return!1;var Se=S&&S.correlationHeaderDomains;if(Se){var Oe;if((0,H.tO)(Se,function(ct){var Nt=new RegExp(ct.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));Oe=Oe||Nt.test(oe)}),!Oe)return!1}var Be=S&&S.correlationHeaderExcludedDomains;if(!Be||Be[q]===0)return!0;for(var k=0;k<Be[q];k++){var gt=new RegExp(Be[k].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(gt.test(oe))return!1}return oe&&oe[q]>0},getCorrelationContext:function(S){if(S){var g=Xt.getCorrelationContextValue(S,$n[1]);if(g&&g!==Xt.correlationIdPrefix)return g}},getCorrelationContextValue:function(S,g){if(S)for(var _=S[j](","),k=0;k<_[q];++k){var oe=_[k][j]("=");if(oe[q]===2&&oe[0]===g)return oe[1]}}};function Ut(S,g,_,k){var oe,Se=k,Oe=k;if(g&&g[q]>0){var Be=Hi(g);if(oe=Be.host,!Se)if(Be[D]!=null){var gt=Be.pathname[q]===0?"/":Be[D];gt.charAt(0)!=="/"&&(gt="/"+gt),Oe=Be[D],Se=wn(S,_?_+" "+gt:gt)}else Se=wn(S,g)}else oe=k,Se=k;return{target:oe,name:Se,data:Oe}}o(Ut,"AjaxHelperParseDependencyPath");function vn(){var S=(0,Qe.r)();if(S&&S.now&&S.timing){var g=S.now()+S.timing.navigationStart;if(g>0)return g}return(0,H.m6)()}o(vn,"dateTimeUtilsNow");function Cn(S,g){var _=null;return S!==0&&g!==0&&!(0,H.le)(S)&&!(0,H.le)(g)&&(_=g-S),_}o(Cn,"dateTimeUtilsDuration");var rr={Now:vn,GetDuration:Cn};function Wn(S,g){var _=S||{};return{getName:function(){return _[_DYN_NAME]},setName:function(k){g&&g.setName(k),_[_DYN_NAME]=k},getTraceId:function(){return _.traceID},setTraceId:function(k){g&&g.setTraceId(k),isValidTraceId(k)&&(_.traceID=k)},getSpanId:function(){return _.parentID},setSpanId:function(k){g&&g.setSpanId(k),isValidSpanId(k)&&(_.parentID=k)},getTraceFlags:function(){return _.traceFlags},setTraceFlags:function(k){g&&g.setTraceFlags(k),_.traceFlags=k}}}o(Wn,"createDistributedTraceContextFromTrace");var ir=function(){function S(g,_,k,oe,Se,Oe,Be,gt,ct,Nt,rn,Yn){ct===void 0&&(ct="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var ln=this;ln.ver=2,ln.id=_,ln[Te]=Qn(Se),ln.success=Oe,ln.resultCode=Be+"",ln.type=wn(g,ct);var In=Ut(g,k,gt,oe);ln.data=lr(g,oe)||In.data,ln.target=wn(g,In.target),Nt&&(ln.target="".concat(ln.target," | ").concat(Nt)),ln[T]=wn(g,In[T]),ln[Re]=cr(g,rn),ln[Ge]=yr(g,Yn)}return o(S,"RemoteDependencyData"),S.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",S.dataType="RemoteDependencyData",S}(),Hn=C(5883),Yt=C(4063);function cn(S){var g="ai."+S+".";return function(_){return g+_}}o(cn,"_aiNameFunc");var mn=cn("application"),Zt=cn("device"),L=cn("location"),X=cn("operation"),De=cn("session"),lt=cn("user"),At=cn("cloud"),Pt=cn("internal"),hn=function(S){(0,v.ne)(g,S);function g(){return S.call(this)||this}return o(g,"ContextTagKeys"),g}((0,H.hl)({applicationVersion:mn("ver"),applicationBuild:mn("build"),applicationTypeId:mn("typeId"),applicationId:mn("applicationId"),applicationLayer:mn("layer"),deviceId:Zt("id"),deviceIp:Zt("ip"),deviceLanguage:Zt("language"),deviceLocale:Zt("locale"),deviceModel:Zt("model"),deviceFriendlyName:Zt("friendlyName"),deviceNetwork:Zt("network"),deviceNetworkName:Zt("networkName"),deviceOEMName:Zt("oemName"),deviceOS:Zt("os"),deviceOSVersion:Zt("osVersion"),deviceRoleInstance:Zt("roleInstance"),deviceRoleName:Zt("roleName"),deviceScreenResolution:Zt("screenResolution"),deviceType:Zt("type"),deviceMachineName:Zt("machineName"),deviceVMName:Zt("vmName"),deviceBrowser:Zt("browser"),deviceBrowserVersion:Zt("browserVersion"),locationIp:L("ip"),locationCountry:L("country"),locationProvince:L("province"),locationCity:L("city"),operationId:X("id"),operationName:X("name"),operationParentId:X("parentId"),operationRootId:X("rootId"),operationSyntheticSource:X("syntheticSource"),operationCorrelationVector:X("correlationVector"),sessionId:De("id"),sessionIsFirst:De("isFirst"),sessionIsNew:De("isNew"),userAccountAcquisitionDate:lt("accountAcquisitionDate"),userAccountId:lt("accountId"),userAgent:lt("userAgent"),userId:lt("id"),userStoreRegion:lt("storeRegion"),userAuthUserId:lt("authUserId"),userAnonymousUserAcquisitionDate:lt("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:lt("authUserAcquisitionDate"),cloudName:At("name"),cloudRole:At("role"),cloudRoleVer:At("roleVer"),cloudRoleInstance:At("roleInstance"),cloudEnvironment:At("environment"),cloudLocation:At("location"),cloudDeploymentUnit:At("deploymentUnit"),internalNodeName:Pt("nodeName"),internalSdkVersion:Pt("sdkVersion"),internalAgentVersion:Pt("agentVersion"),internalSnippet:Pt("snippet"),internalSdkSrc:Pt("sdkSrc")})),gn={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},tn=new hn,nn=function(){function S(g,_,k){var oe=this,Se=this;Se.ver=1,Se.sampleRate=100,Se.tags={},Se[T]=wn(g,k)||$,Se.data=_,Se.time=(0,H.Y6)(new Date),Se.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return oe.sampleRate===100?4:1},tags:1,data:1}}return o(S,"Envelope"),S}(),pn=function(){function S(g,_){this.aiDataContract={baseType:1,baseData:1},this.baseType=g,this.baseData=_}return o(S,"Data"),S}(),Kt="duration",Ct="tags",bn="deviceType",xn="data",Fn="name",kn="traceID",qt="length",Br="stringify",Er="measurements",Bn="dataType",ar="envelopeType",Gn="toString",Lr="onLine",ui="isOnline",ri="enqueue",ii="count",Pr="push",bi="emitLineDelimitedJson",Ar="clear",di="batchPayloads",ai="markAsSent",Ir="clearSent",_i="bufferOverride",Ei="BUFFER_KEY",oi="SENT_BUFFER_KEY",Qr="MAX_BUFFER_SIZE",or="namePrefix",Jr="maxBatchSizeInBytes",he="triggerSend",Xe="diagLog",ot="onunloadDisableBeacon",pt="isBeaconApiDisabled",It="_sender",Ht="_senderConfig",un="enableSessionStorageBuffer",ge="_buffer",We="samplingPercentage",Ke="instrumentationKey",ft="endpointUrl",Rt="customHeaders",kt="disableXhr",Dn="onunloadDisableFetch",Tn="disableTelemetry",zn="baseType",fi="sampleRate",Bi="convertUndefined",hi="_xhrReadyStateChange",dr="_onError",Pi="_onPartialSuccess",gi="_onSuccess",Yi="itemsAccepted",Ea="itemsReceived",Ui="isRetryDisabled",qi="setRequestHeader",Ii="maxBatchInterval",Qi="eventsSendRequest",kr="disableInstrumentationKeyValidation",Li="getSamplingScore",ca="getHashCodeScore",Wi="baseType",jn="baseData",fr="properties",ma="true";function hr(S,g,_){return(0,H.sO)(S,g,_,H.fQ)}o(hr,"_setValueIf");function Ja(S,g,_){var k=_[Ct]=_[Ct]||{},oe=g.ext=g.ext||{},Se=g[Ct]=g[Ct]||[],Oe=oe.user;Oe&&(hr(k,tn.userAuthUserId,Oe.authId),hr(k,tn.userId,Oe.id||Oe.localId));var Be=oe.app;Be&&hr(k,tn.sessionId,Be.sesId);var gt=oe.device;gt&&(hr(k,tn.deviceId,gt.id||gt.localId),hr(k,tn[bn],gt.deviceClass),hr(k,tn.deviceIp,gt.ip),hr(k,tn.deviceModel,gt.model),hr(k,tn[bn],gt[bn]));var ct=g.ext.web;if(ct){hr(k,tn.deviceLanguage,ct.browserLang),hr(k,tn.deviceBrowserVersion,ct.browserVer),hr(k,tn.deviceBrowser,ct.browser);var Nt=_[xn]=_[xn]||{},rn=Nt[jn]=Nt[jn]||{},Yn=rn[fr]=rn[fr]||{};hr(Yn,"domain",ct.domain),hr(Yn,"isManual",ct.isManual?ma:null),hr(Yn,"screenRes",ct.screenRes),hr(Yn,"userConsent",ct.userConsent?ma:null)}var ln=oe.os;ln&&hr(k,tn.deviceOS,ln[Fn]);var In=oe.trace;In&&(hr(k,tn.operationParentId,In.parentID),hr(k,tn.operationName,wn(S,In[Fn])),hr(k,tn.operationId,In[kn]));for(var er={},He=Se[qt]-1;He>=0;He--){var Un=Se[He];(0,H.rW)(Un,function(Dr,gr){er[Dr]=gr}),Se.splice(He,1)}(0,H.rW)(Se,function(Dr,gr){er[Dr]=gr});var qn=(0,v.uc)((0,v.uc)({},k),er);qn[tn.internalSdkVersion]||(qn[tn.internalSdkVersion]="javascript:".concat(ja.Version)),_[Ct]=(0,H.Ax)(qn)}o(Ja,"_extractPartAExtensions");function Xi(S,g,_){(0,H.le)(S)||(0,H.rW)(S,function(k,oe){(0,H.hj)(oe)?_[k]=oe:(0,H.HD)(oe)?g[k]=oe:(0,Qe.nS)()&&(g[k]=(0,Qe.xA)()[Br](oe))})}o(Xi,"_extractPropsAndMeasurements");function $i(S,g){(0,H.le)(S)||(0,H.rW)(S,function(_,k){S[_]=k||g})}o($i,"_convertPropsUndefinedToCustomDefinedValue");function Ki(S,g,_,k){var oe=new nn(S,k,g);hr(oe,"sampleRate",_[m]),(_[jn]||{}).startTime&&(oe.time=(0,H.Y6)(_[jn].startTime)),oe.iKey=_.iKey;var Se=_.iKey.replace(/-/g,"");return oe[Fn]=oe[Fn].replace("{0}",Se),Ja(S,_,oe),_[Ct]=_[Ct]||[],(0,H.Ax)(oe)}o(Ki,"_createEnvelope");function Ai(S,g){(0,H.le)(g[jn])&&(0,K.kP)(S,1,46,"telemetryItem.baseData cannot be null.")}o(Ai,"EnvelopeCreatorInit");var ja={Version:"2.8.12"};function ki(S,g,_){Ai(S,g);var k=g[jn][Er]||{},oe=g[jn][fr]||{};Xi(g[xn],oe,k),(0,H.le)(_)||$i(oe,_);var Se=g[jn];if((0,H.le)(Se))return(0,K.jV)(S,"Invalid input for dependency data"),null;var Oe=Se[fr]&&Se[fr][O]?Se[fr][O]:"GET",Be=new ir(S,Se.id,Se.target,Se[Fn],Se[Kt],Se.success,Se.responseCode,Oe,Se.type,Se.correlationContext,oe,k),gt=new pn(ir[Bn],Be);return Ki(S,ir[ar],g,gt)}o(ki,"DependencyEnvelopeCreator");function ya(S,g,_){Ai(S,g);var k={},oe={};g[Wi]!==jt[Bn]&&(k.baseTypeSource=g[Wi]),g[Wi]===jt[Bn]?(k=g[jn][fr]||{},oe=g[jn][Er]||{}):g[jn]&&Xi(g[jn],k,oe),Xi(g[xn],k,oe),(0,H.le)(_)||$i(k,_);var Se=g[jn][Fn],Oe=new jt(S,Se,k,oe),Be=new pn(jt[Bn],Oe);return Ki(S,jt[ar],g,Be)}o(ya,"EventEnvelopeCreator");function Ya(S,g,_){Ai(S,g);var k=g[jn][Er]||{},oe=g[jn][fr]||{};Xi(g[xn],oe,k),(0,H.le)(_)||$i(oe,_);var Se=g[jn],Oe=Ot.CreateFromInterface(S,Se,oe,k),Be=new pn(Ot[Bn],Oe);return Ki(S,Ot[ar],g,Be)}o(Ya,"ExceptionEnvelopeCreator");function qa(S,g,_){Ai(S,g);var k=g[jn],oe=k[fr]||{},Se=k[Er]||{};Xi(g[xn],oe,Se),(0,H.le)(_)||$i(oe,_);var Oe=new Kn(S,k[Fn],k.average,k.sampleCount,k.min,k.max,k.stdDev,oe,Se),Be=new pn(Kn[Bn],Oe);return Ki(S,Kn[ar],g,Be)}o(qa,"MetricEnvelopeCreator");function Qa(S,g,_){Ai(S,g);var k,oe=g[jn];!(0,H.le)(oe)&&!(0,H.le)(oe[fr])&&!(0,H.le)(oe[fr][Kt])?(k=oe[fr][Kt],delete oe[fr][Kt]):!(0,H.le)(g[xn])&&!(0,H.le)(g[xn][Kt])&&(k=g[xn][Kt],delete g[xn][Kt]);var Se=g[jn],Oe;((g.ext||{}).trace||{})[kn]&&(Oe=g.ext.trace[kn]);var Be=Se.id||Oe,gt=Se[Fn],ct=Se.uri,Nt=Se[fr]||{},rn=Se[Er]||{};if((0,H.le)(Se.refUri)||(Nt.refUri=Se.refUri),(0,H.le)(Se.pageType)||(Nt.pageType=Se.pageType),(0,H.le)(Se.isLoggedIn)||(Nt.isLoggedIn=Se.isLoggedIn[Gn]()),!(0,H.le)(Se[fr])){var Yn=Se[fr];(0,H.rW)(Yn,function(er,He){Nt[er]=He})}Xi(g[xn],Nt,rn),(0,H.le)(_)||$i(Nt,_);var ln=new Cr(S,gt,ct,k,Nt,rn,Be),In=new pn(Cr[Bn],ln);return Ki(S,Cr[ar],g,In)}o(Qa,"PageViewEnvelopeCreator");function Xa(S,g,_){Ai(S,g);var k=g[jn],oe=k[Fn],Se=k.uri||k.url,Oe=k[fr]||{},Be=k[Er]||{};Xi(g[xn],Oe,Be),(0,H.le)(_)||$i(Oe,_);var gt=new wr(S,oe,Se,void 0,Oe,Be,k),ct=new pn(wr[Bn],gt);return Ki(S,wr[ar],g,ct)}o(Xa,"PageViewPerformanceEnvelopeCreator");function Za(S,g,_){Ai(S,g);var k=g[jn].message,oe=g[jn].severityLevel,Se=g[jn][fr]||{},Oe=g[jn][Er]||{};Xi(g[xn],Se,Oe),(0,H.le)(_)||$i(Se,_);var Be=new _n(S,k,oe,Se,Oe),gt=new pn(_n[Bn],Be);return Ki(S,_n[ar],g,gt)}o(Za,"TraceEnvelopeCreator");function Aa(S,g){(0,ur.QY)(S,null,null,g)}o(Aa,"_disableEvents");function eo(S){var g,_=(0,Qe.Me)(),k=(0,Qe.jW)(),oe=!1,Se=!0,Oe=(0,ur.jU)((0,Hn.J)("OfflineListener"),S);try{if(gt((0,Qe.Jj)())&&(oe=!0),_){var Be=_.body||_;Be.ononline&&gt(Be)&&(oe=!0)}oe&&k&&!(0,H.le)(k[Lr])&&(Se=k[Lr])}catch(ln){oe=!1}function gt(ln){var In=!1;return ln&&(In=(0,ur.XO)(ln,"online",ct,Oe),In&&(0,ur.XO)(ln,"offline",Nt,Oe)),In}o(gt,"_enableEvents");function ct(){Se=!0}o(ct,"_setOnline");function Nt(){Se=!1}o(Nt,"_setOffline");function rn(){var ln=!0;return oe?ln=Se:k&&!(0,H.le)(k[Lr])&&(ln=k[Lr]),ln}o(rn,"_isOnline");function Yn(){var ln=(0,Qe.Jj)();if(ln&&oe){if(Aa(ln,Oe),_){var In=_.body||_;(0,H.o8)(In.ononline)||Aa(In,Oe)}oe=!1}}return o(Yn,"_unload"),g={},g[ui]=rn,g.isListening=function(){return oe},g.unload=Yn,g}o(eo,"createOfflineListener");var ua=function(){function S(g,_){var k=[],oe=!1;this._get=function(){return k},this._set=function(Se){return k=Se,k},(0,R.Z)(S,this,function(Se){Se[ri]=function(Oe){if(Se[ii]()>=_.eventsLimitInMem()){oe||((0,K.kP)(g,2,105,"Maximum in-memory buffer size reached: "+Se[ii](),!0),oe=!0);return}k[Pr](Oe)},Se[ii]=function(){return k[qt]},Se.size=function(){for(var Oe=k[qt],Be=0;Be<k[qt];Be++)Oe+=k[Be][qt];return _[bi]()||(Oe+=2),Oe},Se[Ar]=function(){k=[],oe=!1},Se.getItems=function(){return k.slice(0)},Se[di]=function(Oe){if(Oe&&Oe[qt]>0){var Be=_[bi]()?Oe.join(`
`):"["+Oe.join(",")+"]";return Be}return null}})}return o(S,"BaseSendBuffer"),S.__ieDyn=1,S}(),to=function(S){(0,v.ne)(g,S);function g(_,k){var oe=S.call(this,_,k)||this;return(0,R.Z)(g,oe,function(Se,Oe){Se[ai]=function(Be){Oe[Ar]()},Se[Ir]=function(Be){}}),oe}return o(g,"ArraySendBuffer"),g.__ieDyn=1,g}(ua),no=function(S){(0,v.ne)(g,S);function g(_,k){var oe=S.call(this,_,k)||this,Se=!1,Oe=k[_i]()||{getItem:ji,setItem:Oi},Be=Oe.getItem,gt=Oe.setItem;return(0,R.Z)(g,oe,function(ct,Nt){var rn=er(g[Ei]),Yn=er(g[oi]),ln=ct._set(rn.concat(Yn));ln[qt]>g[Qr]&&(ln[qt]=g[Qr]),He(g[oi],[]),He(g[Ei],ln),ct[ri]=function(Un){if(ct[ii]()>=g[Qr]){Se||((0,K.kP)(_,2,67,"Maximum buffer size reached: "+ct[ii](),!0),Se=!0);return}Nt[ri](Un),He(g[Ei],ct._get())},ct[Ar]=function(){Nt[Ar](),He(g[Ei],ct._get()),He(g[oi],[]),Se=!1},ct[ai]=function(Un){He(g[Ei],ct._set(In(Un,ct._get())));var qn=er(g[oi]);qn instanceof Array&&Un instanceof Array&&(qn=qn.concat(Un),qn[qt]>g[Qr]&&((0,K.kP)(_,1,67,"Sent buffer reached its maximum size: "+qn[qt],!0),qn[qt]=g[Qr]),He(g[oi],qn))},ct[Ir]=function(Un){var qn=er(g[oi]);qn=In(Un,qn),He(g[oi],qn)};function In(Un,qn){var Dr=[];return(0,H.tO)(qn,function(gr){!(0,H.mf)(gr)&&(0,H.UA)(Un,gr)===-1&&Dr[Pr](gr)}),Dr}o(In,"_removePayloadsFromBuffer");function er(Un){var qn=Un;try{qn=k[or]&&k[or]()?k[or]()+"_"+qn:qn;var Dr=Be(_,qn);if(Dr){var gr=(0,Qe.xA)().parse(Dr);if((0,H.HD)(gr)&&(gr=(0,Qe.xA)().parse(gr)),gr&&(0,H.kJ)(gr))return gr}}catch(Zi){(0,K.kP)(_,1,42," storage key: "+qn+", "+(0,H.jj)(Zi),{exception:(0,Qe.eU)(Zi)})}return[]}o(er,"_getBuffer");function He(Un,qn){var Dr=Un;try{Dr=k[or]&&k[or]()?k[or]()+"_"+Dr:Dr;var gr=JSON[Br](qn);gt(_,Dr,gr)}catch(Zi){gt(_,Dr,JSON[Br]([])),(0,K.kP)(_,2,41," storage key: "+Dr+", "+(0,H.jj)(Zi)+". Buffer cleared",{exception:(0,Qe.eU)(Zi)})}}o(He,"_setBuffer")}),oe}return o(g,"SessionStorageSendBuffer"),g.BUFFER_KEY="AI_buffer",g.SENT_BUFFER_KEY="AI_sentBuffer",g.MAX_BUFFER_SIZE=2e3,g}(ua),ro=function(){function S(g){(0,R.Z)(S,this,function(_){_.serialize=function(Oe){var Be=k(Oe,"root");try{return(0,Qe.xA)()[Br](Be)}catch(gt){(0,K.kP)(g,1,48,gt&&(0,H.mf)(gt[Gn])?gt[Gn]():"Error serializing object",null,!0)}};function k(Oe,Be){var gt="__aiCircularRefCheck",ct={};if(!Oe)return(0,K.kP)(g,1,48,"cannot serialize object because it is null or undefined",{name:Be},!0),ct;if(Oe[gt])return(0,K.kP)(g,2,50,"Circular reference detected while serializing object",{name:Be},!0),ct;if(!Oe.aiDataContract){if(Be==="measurements")ct=Se(Oe,"number",Be);else if(Be==="properties")ct=Se(Oe,"string",Be);else if(Be==="tags")ct=Se(Oe,"string",Be);else if((0,H.kJ)(Oe))ct=oe(Oe,Be);else{(0,K.kP)(g,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:Be},!0);try{(0,Qe.xA)()[Br](Oe),ct=Oe}catch(Nt){(0,K.kP)(g,1,48,Nt&&(0,H.mf)(Nt[Gn])?Nt[Gn]():"Error serializing object",null,!0)}}return ct}return Oe[gt]=!0,(0,H.rW)(Oe.aiDataContract,function(Nt,rn){var Yn=(0,H.mf)(rn)?rn()&1:rn&1,ln=(0,H.mf)(rn)?rn()&4:rn&4,In=rn&2,er=Oe[Nt]!==void 0,He=(0,H.Kn)(Oe[Nt])&&Oe[Nt]!==null;if(Yn&&!er&&!In)(0,K.kP)(g,1,24,"Missing required field specification. The field is required but not present on source",{field:Nt,name:Be});else if(!ln){var Un=void 0;He?In?Un=oe(Oe[Nt],Nt):Un=k(Oe[Nt],Nt):Un=Oe[Nt],Un!==void 0&&(ct[Nt]=Un)}}),delete Oe[gt],ct}o(k,"_serializeObject");function oe(Oe,Be){var gt;if(Oe)if(!(0,H.kJ)(Oe))(0,K.kP)(g,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:Be},!0);else{gt=[];for(var ct=0;ct<Oe[qt];ct++){var Nt=Oe[ct],rn=k(Nt,Be+"["+ct+"]");gt[Pr](rn)}}return gt}o(oe,"_serializeArray");function Se(Oe,Be,gt){var ct;return Oe&&(ct={},(0,H.rW)(Oe,function(Nt,rn){if(Be==="string")rn===void 0?ct[Nt]="undefined":rn===null?ct[Nt]="null":rn[Gn]?ct[Nt]=rn[Gn]():ct[Nt]="invalid field: toString() is not defined.";else if(Be==="number")if(rn===void 0)ct[Nt]="undefined";else if(rn===null)ct[Nt]="null";else{var Yn=parseFloat(rn);isNaN(Yn)?ct[Nt]="NaN":ct[Nt]=Yn}else ct[Nt]="invalid field: "+gt+" is of unknown type.",(0,K.kP)(g,1,ct[Nt],null,!0)})),ct}o(Se,"_serializeStringMap")})}return o(S,"Serializer"),S.__ieDyn=1,S}(),da=8,io=function(){function S(){}return o(S,"HashCodeScoreGenerator"),S.prototype.getHashCodeScore=function(g){var _=this.getHashCode(g)/S.INT_MAX_VALUE;return _*100},S.prototype.getHashCode=function(g){if(g==="")return 0;for(;g[qt]<da;)g=g.concat(g);for(var _=5381,k=0;k<g[qt];++k)_=(_<<5)+_+g.charCodeAt(k),_=_&_;return Math.abs(_)},S.INT_MAX_VALUE=2147483647,S}(),Da=function(){function S(){var g=this,_=new io,k=new hn;g[Li]=function(oe){var Se=0;return oe[Ct]&&oe[Ct][k.userId]?Se=_.getHashCodeScore(oe[Ct][k.userId]):oe.ext&&oe.ext.user&&oe.ext.user.id?Se=_[ca](oe.ext.user.id):oe[Ct]&&oe[Ct][k.operationId]?Se=_.getHashCodeScore(oe[Ct][k.operationId]):oe.ext&&oe.ext.telemetryTrace&&oe.ext.telemetryTrace[kn]?Se=_.getHashCodeScore(oe.ext.telemetryTrace[kn]):Se=Math.random()*100,Se}}return o(S,"SamplingScoreGenerator"),S}(),Ra=function(){function S(g,_){this.INT_MAX_VALUE=2147483647;var k=_||(0,K.vH)(null);(g>100||g<0)&&(k.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:g},!0),g=100),this[fi]=g,this.samplingScoreGenerator=new Da}return o(S,"Sample"),S.prototype.isSampledIn=function(g){var _=this[fi],k=!1;return _==null||_>=100||g.baseType===Kn[Bn]?!0:(k=this.samplingScoreGenerator[Li](g)<_,k)},S}(),Di,ao=65e3;function Xr(S){try{return S.responseText}catch(g){}return null}o(Xr,"_getResponseText");function Ta(){var S,g,_;return S={endpointUrl:function(){return B+E}},S[bi]=function(){return!1},S[Ii]=function(){return 15e3},S[Jr]=function(){return 102400},S[Tn]=function(){return!1},S[un]=function(){return!0},S[_i]=function(){return!1},S[Ui]=function(){return!1},S[pt]=function(){return!0},S[kt]=function(){return!1},S[Dn]=function(){return!1},S[ot]=function(){return!1},S[Ke]=function(){return g},S[or]=function(){return g},S[We]=function(){return 100},S[Rt]=function(){return _},S[Bi]=function(){return g},S.eventsLimitInMem=function(){return 1e4},S}o(Ta,"_getDefaultAppInsightsChannelConfig");var oo=(Di={},Di[jt.dataType]=ya,Di[_n.dataType]=Za,Di[Cr.dataType]=Qa,Di[wr.dataType]=Xa,Di[Ot.dataType]=Ya,Di[Kn.dataType]=qa,Di[ir.dataType]=ki,Di),Ma=function(S){(0,v.ne)(g,S);function g(){var _=S.call(this)||this;_.priority=1001,_.identifier=y,_._senderConfig=Ta();var k,oe,Se,Oe,Be,gt,ct,Nt,rn=0,Yn,ln,In,er;return(0,R.Z)(g,_,function(He,Un){po(),He.pause=function(){Na(),Oe=!0},He.resume=function(){Oe&&(Oe=!1,oe=null,He._buffer.size()>He._senderConfig[Jr]()&&He[he](!0,null,10),Fa())},He.flush=function(Me,Et,Lt){if(Me===void 0&&(Me=!0),!Oe){Na();try{He[he](Me,null,Lt||1)}catch(en){(0,K.kP)(He[Xe](),1,22,"flush failed, telemetry will not be collected: "+(0,H.jj)(en),{exception:(0,Qe.eU)(en)})}}},He.onunloadFlush=function(){if(!Oe)if((He._senderConfig[ot]()===!1||He[Ht][pt]()===!1)&&(0,Qe.MF)())try{He[he](!0,Zi,2)}catch(Me){(0,K.kP)(He[Xe](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+(0,H.jj)(Me),{exception:(0,Qe.eU)(Me)})}else He.flush()},He.addHeader=function(Me,Et){Nt[Me]=Et},He.initialize=function(Me,Et,Lt,en){He.isInitialized()&&(0,K.kP)(He[Xe](),1,28,"Sender is already initialized"),Un.initialize(Me,Et,Lt,en);var Mn=He._getTelCtx(),Nn=He.identifier;gt=new ro(Et.logger),k=0,oe=null,Se=0,He[It]=null,ct=0;var Vn=He[Xe]();er=(0,ur.jU)((0,Hn.J)("Sender"),Et.evtNamespace&&Et.evtNamespace()),In=eo(er);var Ur=Ta();(0,H.rW)(Ur,function(Zr,$r){He[Ht][Zr]=function(){var aa=Mn.getConfig(Nn,Zr,$r());return!aa&&Zr==="endpointUrl"&&(aa=$r()),aa}});var jr=He[Ht][un]()&&!!(He._senderConfig[_i]()||Ci());He[ge]=jr?new no(Vn,He[Ht]):new to(Vn,He[Ht]),He._sample=new Ra(He[Ht][We](),Vn),Lo(Me)||(0,K.kP)(Vn,1,100,"Invalid Instrumentation key "+Me[Ke]),!Ft(He._senderConfig.endpointUrl())&&He._senderConfig.customHeaders()&&He._senderConfig.customHeaders()[qt]>0&&(0,H.tO)(He[Ht][Rt](),function(Zr){_.addHeader(Zr.header,Zr.value)});var Wr=He[Ht],Yr=null;!Wr[kt]()&&(0,Qe.cp)()?Yr=ia:!Wr[kt]()&&(0,Qe.Z3)()&&(Yr=fa),!Yr&&(0,Qe.JO)()&&(Yr=si),Yn=Yr||fa,!Wr[pt]()&&(0,Qe.MF)()&&(Yr=vi),He[It]=Yr||fa,!Wr[Dn]()&&(0,Qe.JO)(!0)?ln=fo:(0,Qe.MF)()?ln=vi:!Wr[kt]()&&(0,Qe.cp)()?ln=ia:!Wr[kt]()&&(0,Qe.Z3)()?ln=fa:ln=Yn},He.processTelemetry=function(Me,Et){Et=He._getTelCtx(Et);var Lt=Et[Xe]();try{if(He[Ht][Tn]())return;if(!Me){(0,K.kP)(Lt,1,7,"Cannot send empty telemetry");return}if(Me.baseData&&!Me[zn]){(0,K.kP)(Lt,1,70,"Cannot send telemetry without baseData and baseType");return}if(Me[zn]||(Me[zn]="EventData"),!He[It]){(0,K.kP)(Lt,1,28,"Sender was not initialized");return}if(qn(Me))Me[m]=He._sample[fi];else{(0,K.kP)(Lt,2,33,"Telemetry item was sampled out and not sent",{SampleRate:He._sample[fi]});return}var en=He[Ht][Bi]()||void 0,Mn=Me.iKey||He[Ht][Ke](),Nn=g.constructEnvelope(Me,Mn,Lt,en);if(!Nn){(0,K.kP)(Lt,1,47,"Unable to create an AppInsights envelope");return}var Vn=!1;if(Me[Ct]&&Me[Ct][w]&&((0,H.tO)(Me[Ct][w],function(Yr){try{Yr&&Yr(Nn)===!1&&(Vn=!0,(0,K.jV)(Lt,"Telemetry processor check returns false"))}catch(Zr){(0,K.kP)(Lt,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,H.jj)(Zr),{exception:(0,Qe.eU)(Zr)},!0)}}),delete Me[Ct][w]),Vn)return;var Ur=gt.serialize(Nn),jr=He[ge],Wr=jr.size();Wr+Ur[qt]>He[Ht][Jr]()&&(!In||In[ui]())&&He[he](!0,null,10),jr[ri](Ur),Fa()}catch(Yr){(0,K.kP)(Lt,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+(0,H.jj)(Yr),{exception:(0,Qe.eU)(Yr)})}He.processNext(Me,Et)},He[hi]=function(Me,Et,Lt){Me.readyState===4&&Dr(Me.status,Et,Me.responseURL,Lt,ha(Me),Xr(Me)||Me.response)},He[he]=function(Me,Et,Lt){if(Me===void 0&&(Me=!0),!Oe)try{var en=He[ge];if(He[Ht][Tn]())en[Ar]();else{if(en[ii]()>0){var Mn=en.getItems();xi(Lt||0,Me),Et?Et.call(_,Mn,Me):He[It](Mn,Me)}Se=+new Date}Na()}catch(Vn){var Nn=(0,Qe.sA)();(!Nn||Nn>9)&&(0,K.kP)(He[Xe](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+(0,H.jj)(Vn),{exception:(0,Qe.eU)(Vn)})}},He._doTeardown=function(Me,Et){He.onunloadFlush(),In.unload(),po()},He[dr]=function(Me,Et,Lt){(0,K.kP)(He[Xe](),2,26,"Failed to send telemetry.",{message:Et}),He._buffer[Ir](Me)},He[Pi]=function(Me,Et){for(var Lt=[],en=[],Mn=Et.errors.reverse(),Nn=0,Vn=Mn;Nn<Vn.length;Nn++){var Ur=Vn[Nn],jr=Me.splice(Ur.index,1)[0];wa(Ur.statusCode)?en[Pr](jr):Lt[Pr](jr)}Me[qt]>0&&He[gi](Me,Et[Yi]),Lt[qt]>0&&He[dr](Lt,ha(null,["partial success",Et[Yi],"of",Et.itemsReceived].join(" "))),en[qt]>0&&(xr(en),(0,K.kP)(He[Xe](),2,40,"Partial success. Delivered: "+Me[qt]+", Failed: "+Lt[qt]+". Will retry to send "+en[qt]+" our of "+Et[Ea]+" items"))},He[gi]=function(Me,Et){He._buffer[Ir](Me)},He._xdrOnLoad=function(Me,Et){var Lt=Xr(Me);if(Me&&(Lt+""=="200"||Lt===""))k=0,He[gi](Et,0);else{var en=xa(Lt);en&&en.itemsReceived&&en.itemsReceived>en[Yi]&&!He[Ht][Ui]()?He[Pi](Et,en):He[dr](Et,Oa(Me))}};function qn(Me){return He._sample.isSampledIn(Me)}o(qn,"_isSampledIn");function Dr(Me,Et,Lt,en,Mn,Nn){var Vn=null;if(He._appId||(Vn=xa(Nn),Vn&&Vn.appId&&(He._appId=Vn.appId)),(Me<200||Me>=300)&&Me!==0){if((Me===301||Me===307||Me===308)&&!gr(Lt)){He[dr](Et,Mn);return}!He[Ht][Ui]()&&wa(Me)?(xr(Et),(0,K.kP)(He[Xe](),2,40,". Response code "+Me+". Will retry to send "+Et[qt]+" items.")):He[dr](Et,Mn)}else if(In&&!In[ui]()){if(!He[Ht][Ui]()){var Ur=10;xr(Et,Ur),(0,K.kP)(He[Xe](),2,40,". Offline - Response Code: ".concat(Me,". Offline status: ").concat(!In.isOnline(),". Will retry to send ").concat(Et.length," items."))}}else gr(Lt),Me===206?(Vn||(Vn=xa(Nn)),Vn&&!He[Ht][Ui]()?He[Pi](Et,Vn):He[dr](Et,Mn)):(k=0,He[gi](Et,en))}o(Dr,"_checkResponsStatus");function gr(Me){return ct>=10?!1:!(0,H.le)(Me)&&Me!==""&&Me!==He[Ht][ft]()?(He[Ht][ft]=function(){return Me},++ct,!0):!1}o(gr,"_checkAndUpdateEndPointUrl");function Zi(Me,Et){ln?ln(Me,!1):vi(Me,Et)}o(Zi,"_doUnloadSend");function uo(Me){var Et=(0,Qe.jW)(),Lt=He[ge],en=He[Ht][ft](),Mn=He._buffer[di](Me),Nn=new Blob([Mn],{type:"text/plain;charset=UTF-8"}),Vn=Et.sendBeacon(en,Nn);return Vn&&(Lt[ai](Me),He._onSuccess(Me,Me[qt])),Vn}o(uo,"_doBeaconSend");function vi(Me,Et){if((0,H.kJ)(Me)&&Me[qt]>0&&!uo(Me)){for(var Lt=[],en=0;en<Me[qt];en++){var Mn=Me[en];uo([Mn])||Lt[Pr](Mn)}Lt[qt]>0&&(Yn&&Yn(Lt,!0),(0,K.kP)(He[Xe](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}o(vi,"_beaconSender");function fa(Me,Et){var Lt=new XMLHttpRequest,en=He[Ht][ft]();try{Lt[N]=!0}catch(Nn){}Lt.open("POST",en,Et),Lt[qi]("Content-type","application/json"),Ft(en)&&Lt[qi]($n[6],$n[7]),(0,H.tO)((0,H.FY)(Nt),function(Nn){Lt[qi](Nn,Nt[Nn])}),Lt.onreadystatechange=function(){return He._xhrReadyStateChange(Lt,Me,Me[qt])},Lt.onerror=function(Nn){return He[dr](Me,ha(Lt),Nn)};var Mn=He._buffer[di](Me);Lt.send(Mn),He._buffer[ai](Me)}o(fa,"_xhrSender");function fo(Me,Et){if((0,H.kJ)(Me)){for(var Lt=Me[qt],en=0;en<Me[qt];en++)Lt+=Me[en][qt];rn+Lt<=ao?ho(Me,!1):(0,Qe.MF)()?vi(Me,Et):(Yn&&Yn(Me,!0),(0,K.kP)(He[Xe](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."))}}o(fo,"_fetchKeepAliveSender");function si(Me,Et){ho(Me,!0)}o(si,"_fetchSender");function ho(Me,Et){var Lt,en=He[Ht][ft](),Mn=He._buffer[di](Me),Nn=new Blob([Mn],{type:"application/json"}),Vn=new Headers,Ur=Mn[qt],jr=!1,Wr=!1;Ft(en)&&Vn.append($n[6],$n[7]),(0,H.tO)((0,H.FY)(Nt),function($r){Vn.append($r,Nt[$r])});var Yr=(Lt={method:"POST",headers:Vn,body:Nn},Lt[N]=!0,Lt);Et||(Yr.keepalive=!0,jr=!0,rn+=Ur);var Zr=new Request(en,Yr);try{Zr[N]=!0}catch($r){}He._buffer[ai](Me);try{fetch(Zr).then(function($r){Et||(rn-=Ur,Ur=0),Wr||(Wr=!0,$r.ok?$r.text().then(function(aa){Dr($r.status,Me,$r.url,Me[qt],$r.statusText,aa)}):He[dr](Me,$r.statusText))}).catch(function($r){Et||(rn-=Ur,Ur=0),Wr||(Wr=!0,He[dr](Me,$r.message))})}catch($r){Wr||He[dr](Me,(0,Qe.eU)($r))}jr&&!Wr&&(Wr=!0,He._onSuccess(Me,Me[qt]))}o(ho,"_doFetchSender");function xa(Me){try{if(Me&&Me!==""){var Et=(0,Qe.xA)().parse(Me);if(Et&&Et.itemsReceived&&Et.itemsReceived>=Et[Yi]&&Et.itemsReceived-Et.itemsAccepted===Et.errors[qt])return Et}}catch(Lt){(0,K.kP)(He[Xe](),1,43,"Cannot parse the response. "+(0,H.jj)(Lt),{response:Me})}return null}o(xa,"_parseResponse");function xr(Me,Et){if(Et===void 0&&(Et=1),!(!Me||Me[qt]===0)){var Lt=He[ge];Lt[Ir](Me),k++;for(var en=0,Mn=Me;en<Mn.length;en++){var Nn=Mn[en];Lt[ri](Nn)}go(Et),Fa()}}o(xr,"_resendPayload");function go(Me){var Et=10,Lt;if(k<=1)Lt=Et;else{var en=(Math.pow(2,k)-1)/2,Mn=Math.floor(Math.random()*en*Et)+1;Mn=Me*Mn,Lt=Math.max(Math.min(Mn,3600),Et)}var Nn=(0,H.m6)()+Lt*1e3;oe=Nn}o(go,"_setRetryTime");function Fa(){if(!Be&&!Oe){var Me=oe?Math.max(0,oe-(0,H.m6)()):0,Et=Math.max(He[Ht][Ii](),Me);Be=setTimeout(function(){Be=null,He[he](!0,null,1)},Et)}}o(Fa,"_setupTimer");function Na(){clearTimeout(Be),Be=null,oe=null}o(Na,"_clearScheduledTimer");function wa(Me){return Me===401||Me===403||Me===408||Me===429||Me===500||Me===502||Me===503||Me===504}o(wa,"_isRetriable");function ha(Me,Et){return Me?"XMLHttpRequest,Status:"+Me.status+",Response:"+Xr(Me)||0||0:Et}o(ha,"_formatErrorMessageXhr");function ia(Me,Et){var Lt=He[ge],en=(0,Qe.Jj)(),Mn=new XDomainRequest;Mn.onload=function(){return He._xdrOnLoad(Mn,Me)},Mn.onerror=function(jr){return He[dr](Me,Oa(Mn),jr)};var Nn=en&&en.location&&en.location.protocol||"";if(He[Ht][ft]().lastIndexOf(Nn,0)!==0){(0,K.kP)(He[Xe](),2,40,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),Lt[Ar]();return}var Vn=He[Ht][ft]().replace(/^(https?:)/,"");Mn.open("POST",Vn);var Ur=Lt[di](Me);Mn.send(Ur),Lt[ai](Me)}o(ia,"_xdrSender");function Oa(Me,Et){return Me?"XDomainRequest,Response:"+Xr(Me)||0:Et}o(Oa,"_formatErrorMessageXdr");function vo(){var Me="getNotifyMgr";return He.core[Me]?He.core[Me]():He.core._notificationManager}o(vo,"_getNotifyMgr");function xi(Me,Et){var Lt=vo();if(Lt&&Lt[Qi])try{Lt[Qi](Me,Et)}catch(en){(0,K.kP)(He[Xe](),1,74,"send request notification failed: "+(0,H.jj)(en),{exception:(0,Qe.eU)(en)})}}o(xi,"_notifySendRequest");function Lo(Me){var Et=(0,H.le)(Me[kr])?!1:Me[kr];if(Et)return!0;var Lt="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",en=new RegExp(Lt);return en.test(Me[Ke])}o(Lo,"_validateInstrumentationKey");function po(){He[It]=null,He[ge]=null,He._appId=null,He._sample=null,Nt={},In=null,k=0,oe=null,Se=null,Oe=!1,Be=null,gt=null,ct=0,rn=0,Yn=null,ln=null,er=null}o(po,"_initDefaults")}),_}return o(g,"Sender"),g.constructEnvelope=function(_,k,oe,Se){var Oe;k!==_.iKey&&!(0,H.le)(k)?Oe=(0,v.uc)((0,v.uc)({},_),{iKey:k}):Oe=_;var Be=oo[Oe.baseType]||ya;return Be(oe,Oe,Se)},g}(Yt.i),so=";",lo="=";function Pa(S){if(!S)return{};var g=S[j](so),_=(0,H.Xz)(g,function(oe,Se){var Oe=Se[j](lo);if(Oe[q]===2){var Be=Oe[0][_e](),gt=Oe[1];oe[Be]=gt}return oe},{});if((0,H.FY)(_)[q]>0){if(_.endpointsuffix){var k=_.location?_.location+".":"";_[z]=_[z]||"https://"+k+"dc."+_.endpointsuffix}_[z]=_[z]||B}return _}o(Pa,"parseConnectionString");var fl={parse:Pa},Ia=C(5121),La="instrumentationKey",ze="connectionString",Gi="diagnosticLogInterval",ka=C(7310),co=(0,Vr.By)({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),Ri=function(){function S(g){var _=new Ia.F;((0,H.le)(g)||(0,H.le)(g[La])&&(0,H.le)(g[ze]))&&(0,H._y)("Invalid input configuration"),(0,R.Z)(S,this,function(k){if(g[ze]){var oe=Pa(g[ze]),Se=oe.ingestionendpoint;g.endpointUrl=Se?Se+E:g.endpointUrl,g[La]=oe.instrumentationkey||g[La]}k.config=g,Oe(),k.initialize=Oe,k.getSKUDefaults=function(){k.config[Gi]=k.config[Gi]&&k.config[Gi]>0?k.config[Gi]:1e4},k.getSKUDefaults(),(0,H.Vb)(k,_,["track","flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb"]);function Oe(){_.initialize(k.config,[new Ma]),_.pollInternalLogs()}o(Oe,"_initialize")})}return o(S,"ApplicationInsights"),S.__ieDyn=1,S}()},1679:(st,l,C)=>{"use strict";C.d(l,{Z:()=>yt});/*!
 * Microsoft Dynamic Proto Utility, 1.1.9
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */var R,v="undefined",P="constructor",y="prototype",W="function",N="_dynInstFuncs",m="_isDynProxy",w="_dynClass",O="_dynCls$",B="_dynInstChk",E=B,$="_dfOpts",F="_unknown_",j="__proto__",q="_dyn"+j,_e="__dynProto$Gbl",z="_dynInstProto",Q="useBaseInst",Z="setInstFuncs",T=Object,Y=T.getPrototypeOf,x=T.getOwnPropertyNames;function le(){var I;return typeof globalThis!==v&&(I=globalThis),!I&&typeof self!==v&&(I=self),!I&&typeof window!==v&&(I=window),!I&&typeof C.g!==v&&(I=C.g),I||{}}o(le,"_getGlobal");var V=le(),fe=V[_e]||(V[_e]={o:(R={},R[Z]=!0,R[Q]=!0,R),n:1e3});function Ae(I,U){return I&&T[y].hasOwnProperty.call(I,U)}o(Ae,"_hasOwnProperty");function Ne(I){return I&&(I===T[y]||I===Array[y])}o(Ne,"_isObjectOrArrayPrototype");function ae(I){return Ne(I)||I===Function[y]}o(ae,"_isObjectArrayOrFunctionPrototype");function we(I){var U;if(I){if(Y)return Y(I);var ne=I[j]||I[y]||(I[P]?I[P][y]:null);U=I[q]||ne,Ae(I,q)||(delete I[z],U=I[q]=I[z]||I[q],I[z]=ne)}return U}o(we,"_getObjProto");function D(I,U){var ne=[];if(x)ne=x(I);else for(var de in I)typeof de=="string"&&Ae(I,de)&&ne.push(de);if(ne&&ne.length>0)for(var Ue=0;Ue<ne.length;Ue++)U(ne[Ue])}o(D,"_forEachProp");function Ve(I,U,ne){return U!==P&&typeof I[U]===W&&(ne||Ae(I,U))}o(Ve,"_isDynamicCandidate");function ye(I){throw new TypeError("DynamicProto: "+I)}o(ye,"_throwTypeError");function ve(I){var U={};return D(I,function(ne){!U[ne]&&Ve(I,ne,!1)&&(U[ne]=I[ne])}),U}o(ve,"_getInstanceFuncs");function G(I,U){for(var ne=I.length-1;ne>=0;ne--)if(I[ne]===U)return!0;return!1}o(G,"_hasVisited");function se(I,U,ne,de){function Ue(Te,Ye,pe){var ke=Ye[pe];if(ke[m]&&de){var et=Te[N]||{};et[E]!==!1&&(ke=(et[Ye[w]]||{})[pe]||ke)}return function(){return ke.apply(Te,arguments)}}o(Ue,"_instFuncProxy");var Ie={};D(ne,function(Te){Ie[Te]=Ue(U,ne,Te)});for(var ce=we(I),Ce=[];ce&&!ae(ce)&&!G(Ce,ce);)D(ce,function(Te){!Ie[Te]&&Ve(ce,Te,!Y)&&(Ie[Te]=Ue(U,ce,Te))}),Ce.push(ce),ce=we(ce);return Ie}o(se,"_getBaseFuncs");function Re(I,U,ne,de){var Ue=null;if(I&&Ae(ne,w)){var Ie=I[N]||{};if(Ue=(Ie[ne[w]]||{})[U],Ue||ye("Missing ["+U+"] "+W),!Ue[B]&&Ie[E]!==!1){for(var ce=!Ae(I,U),Ce=we(I),Te=[];ce&&Ce&&!ae(Ce)&&!G(Te,Ce);){var Ye=Ce[U];if(Ye){ce=Ye===de;break}Te.push(Ce),Ce=we(Ce)}try{ce&&(I[U]=Ue),Ue[B]=1}catch(pe){Ie[E]=!1}}}return Ue}o(Re,"_getInstFunc");function Ge(I,U,ne){var de=U[I];return de===ne&&(de=we(U)[I]),typeof de!==W&&ye("["+I+"] is not a "+W),de}o(Ge,"_getProtoFunc");function ie(I,U,ne,de,Ue){function Ie(Te,Ye){var pe=o(function(){var ke=Re(this,Ye,Te,pe)||Ge(Ye,Te,pe);return ke.apply(this,arguments)},"dynProtoProxy");return pe[m]=1,pe}if(o(Ie,"_createDynamicPrototype"),!Ne(I)){var ce=ne[N]=ne[N]||{},Ce=ce[U]=ce[U]||{};ce[E]!==!1&&(ce[E]=!!Ue),D(ne,function(Te){Ve(ne,Te,!1)&&ne[Te]!==de[Te]&&(Ce[Te]=ne[Te],delete ne[Te],(!Ae(I,Te)||I[Te]&&!I[Te][m])&&(I[Te]=Ie(I,Te)))})}}o(ie,"_populatePrototype");function Ze(I,U){if(Y){for(var ne=[],de=we(U);de&&!ae(de)&&!G(ne,de);){if(de===I)return!0;ne.push(de),de=we(de)}return!1}return!0}o(Ze,"_checkPrototype");function ut(I,U){return Ae(I,y)?I.name||U||F:((I||{})[P]||{}).name||U||F}o(ut,"_getObjName");function yt(I,U,ne,de){Ae(I,y)||ye("theClass is an invalid class definition.");var Ue=I[y];Ze(Ue,U)||ye("["+ut(I)+"] not in hierarchy of ["+ut(U)+"]");var Ie=null;Ae(Ue,w)?Ie=Ue[w]:(Ie=O+ut(I,"_")+"$"+fe.n,fe.n++,Ue[w]=Ie);var ce=yt[$],Ce=!!ce[Q];Ce&&de&&de[Q]!==void 0&&(Ce=!!de[Q]);var Te=ve(U),Ye=se(Ue,U,Te,Ce);ne(U,Ye);var pe=!!Y&&!!ce[Z];pe&&de&&(pe=!!de[Z]),ie(Ue,Ie,U,Te,pe!==!1)}o(yt,"dynamicProto"),yt[$]=fe.o},6232:(st,l,C)=>{"use strict";const R=C(8641),v=C(8692),P=C(1474),y=C(5870),W=o((N,m={})=>{let w=[];if(Array.isArray(N))for(let O of N){let B=W.create(O,m);Array.isArray(B)?w.push(...B):w.push(B)}else w=[].concat(W.create(N,m));return m&&m.expand===!0&&m.nodupes===!0&&(w=[...new Set(w)]),w},"braces");W.parse=(N,m={})=>y(N,m),W.stringify=(N,m={})=>R(typeof N=="string"?W.parse(N,m):N,m),W.compile=(N,m={})=>(typeof N=="string"&&(N=W.parse(N,m)),v(N,m)),W.expand=(N,m={})=>{typeof N=="string"&&(N=W.parse(N,m));let w=P(N,m);return m.noempty===!0&&(w=w.filter(Boolean)),m.nodupes===!0&&(w=[...new Set(w)]),w},W.create=(N,m={})=>N===""||N.length<3?[N]:m.expand!==!0?W.compile(N,m):W.expand(N,m),st.exports=W},8692:(st,l,C)=>{"use strict";const R=C(1516),v=C(3596),P=o((y,W={})=>{let N=o((m,w={})=>{let O=v.isInvalidBrace(w),B=m.invalid===!0&&W.escapeInvalid===!0,E=O===!0||B===!0,$=W.escapeInvalid===!0?"\\":"",F="";if(m.isOpen===!0||m.isClose===!0)return $+m.value;if(m.type==="open")return E?$+m.value:"(";if(m.type==="close")return E?$+m.value:")";if(m.type==="comma")return m.prev.type==="comma"?"":E?m.value:"|";if(m.value)return m.value;if(m.nodes&&m.ranges>0){let j=v.reduce(m.nodes),q=R(...j,{...W,wrap:!1,toRegex:!0});if(q.length!==0)return j.length>1&&q.length>1?`(${q})`:q}if(m.nodes)for(let j of m.nodes)F+=N(j,m);return F},"walk");return N(y)},"compile");st.exports=P},7007:st=>{"use strict";st.exports={MAX_LENGTH:1024*64,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}},1474:(st,l,C)=>{"use strict";const R=C(1516),v=C(8641),P=C(3596),y=o((N="",m="",w=!1)=>{let O=[];if(N=[].concat(N),m=[].concat(m),!m.length)return N;if(!N.length)return w?P.flatten(m).map(B=>`{${B}}`):m;for(let B of N)if(Array.isArray(B))for(let E of B)O.push(y(E,m,w));else for(let E of m)w===!0&&typeof E=="string"&&(E=`{${E}}`),O.push(Array.isArray(E)?y(B,E,w):B+E);return P.flatten(O)},"append"),W=o((N,m={})=>{let w=m.rangeLimit===void 0?1e3:m.rangeLimit,O=o((B,E={})=>{B.queue=[];let $=E,F=E.queue;for(;$.type!=="brace"&&$.type!=="root"&&$.parent;)$=$.parent,F=$.queue;if(B.invalid||B.dollar){F.push(y(F.pop(),v(B,m)));return}if(B.type==="brace"&&B.invalid!==!0&&B.nodes.length===2){F.push(y(F.pop(),["{}"]));return}if(B.nodes&&B.ranges>0){let z=P.reduce(B.nodes);if(P.exceedsLimit(...z,m.step,w))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let Q=R(...z,m);Q.length===0&&(Q=v(B,m)),F.push(y(F.pop(),Q)),B.nodes=[];return}let j=P.encloseBrace(B),q=B.queue,_e=B;for(;_e.type!=="brace"&&_e.type!=="root"&&_e.parent;)_e=_e.parent,q=_e.queue;for(let z=0;z<B.nodes.length;z++){let Q=B.nodes[z];if(Q.type==="comma"&&B.type==="brace"){z===1&&q.push(""),q.push("");continue}if(Q.type==="close"){F.push(y(F.pop(),q,j));continue}if(Q.value&&Q.type!=="open"){q.push(y(q.pop(),Q.value));continue}Q.nodes&&O(Q,B)}return q},"walk");return P.flatten(O(N))},"expand");st.exports=W},5870:(st,l,C)=>{"use strict";const R=C(8641),{MAX_LENGTH:v,CHAR_BACKSLASH:P,CHAR_BACKTICK:y,CHAR_COMMA:W,CHAR_DOT:N,CHAR_LEFT_PARENTHESES:m,CHAR_RIGHT_PARENTHESES:w,CHAR_LEFT_CURLY_BRACE:O,CHAR_RIGHT_CURLY_BRACE:B,CHAR_LEFT_SQUARE_BRACKET:E,CHAR_RIGHT_SQUARE_BRACKET:$,CHAR_DOUBLE_QUOTE:F,CHAR_SINGLE_QUOTE:j,CHAR_NO_BREAK_SPACE:q,CHAR_ZERO_WIDTH_NOBREAK_SPACE:_e}=C(7007),z=o((Q,Z={})=>{if(typeof Q!="string")throw new TypeError("Expected a string");let T=Z||{},Y=typeof T.maxLength=="number"?Math.min(v,T.maxLength):v;if(Q.length>Y)throw new SyntaxError(`Input length (${Q.length}), exceeds max characters (${Y})`);let x={type:"root",input:Q,nodes:[]},le=[x],V=x,fe=x,Ae=0,Ne=Q.length,ae=0,we=0,D,Ve={};const ye=o(()=>Q[ae++],"advance"),ve=o(G=>{if(G.type==="text"&&fe.type==="dot"&&(fe.type="text"),fe&&fe.type==="text"&&G.type==="text"){fe.value+=G.value;return}return V.nodes.push(G),G.parent=V,G.prev=fe,fe=G,G},"push");for(ve({type:"bos"});ae<Ne;)if(V=le[le.length-1],D=ye(),!(D===_e||D===q)){if(D===P){ve({type:"text",value:(Z.keepEscaping?D:"")+ye()});continue}if(D===$){ve({type:"text",value:"\\"+D});continue}if(D===E){Ae++;let G=!0,se;for(;ae<Ne&&(se=ye());){if(D+=se,se===E){Ae++;continue}if(se===P){D+=ye();continue}if(se===$&&(Ae--,Ae===0))break}ve({type:"text",value:D});continue}if(D===m){V=ve({type:"paren",nodes:[]}),le.push(V),ve({type:"text",value:D});continue}if(D===w){if(V.type!=="paren"){ve({type:"text",value:D});continue}V=le.pop(),ve({type:"text",value:D}),V=le[le.length-1];continue}if(D===F||D===j||D===y){let G=D,se;for(Z.keepQuotes!==!0&&(D="");ae<Ne&&(se=ye());){if(se===P){D+=se+ye();continue}if(se===G){Z.keepQuotes===!0&&(D+=se);break}D+=se}ve({type:"text",value:D});continue}if(D===O){we++;let G=fe.value&&fe.value.slice(-1)==="$"||V.dollar===!0;V=ve({type:"brace",open:!0,close:!1,dollar:G,depth:we,commas:0,ranges:0,nodes:[]}),le.push(V),ve({type:"open",value:D});continue}if(D===B){if(V.type!=="brace"){ve({type:"text",value:D});continue}let G="close";V=le.pop(),V.close=!0,ve({type:G,value:D}),we--,V=le[le.length-1];continue}if(D===W&&we>0){if(V.ranges>0){V.ranges=0;let G=V.nodes.shift();V.nodes=[G,{type:"text",value:R(V)}]}ve({type:"comma",value:D}),V.commas++;continue}if(D===N&&we>0&&V.commas===0){let G=V.nodes;if(we===0||G.length===0){ve({type:"text",value:D});continue}if(fe.type==="dot"){if(V.range=[],fe.value+=D,fe.type="range",V.nodes.length!==3&&V.nodes.length!==5){V.invalid=!0,V.ranges=0,fe.type="text";continue}V.ranges++,V.args=[];continue}if(fe.type==="range"){G.pop();let se=G[G.length-1];se.value+=fe.value+D,fe=se,V.ranges--;continue}ve({type:"dot",value:D});continue}ve({type:"text",value:D})}do if(V=le.pop(),V.type!=="root"){V.nodes.forEach(Re=>{Re.nodes||(Re.type==="open"&&(Re.isOpen=!0),Re.type==="close"&&(Re.isClose=!0),Re.nodes||(Re.type="text"),Re.invalid=!0)});let G=le[le.length-1],se=G.nodes.indexOf(V);G.nodes.splice(se,1,...V.nodes)}while(le.length>0);return ve({type:"eos"}),x},"parse");st.exports=z},8641:(st,l,C)=>{"use strict";const R=C(3596);st.exports=(v,P={})=>{let y=o((W,N={})=>{let m=P.escapeInvalid&&R.isInvalidBrace(N),w=W.invalid===!0&&P.escapeInvalid===!0,O="";if(W.value)return(m||w)&&R.isOpenOrClose(W)?"\\"+W.value:W.value;if(W.value)return W.value;if(W.nodes)for(let B of W.nodes)O+=y(B);return O},"stringify");return y(v)}},3596:(st,l)=>{"use strict";l.isInteger=C=>typeof C=="number"?Number.isInteger(C):typeof C=="string"&&C.trim()!==""?Number.isInteger(Number(C)):!1,l.find=(C,R)=>C.nodes.find(v=>v.type===R),l.exceedsLimit=(C,R,v=1,P)=>P===!1||!l.isInteger(C)||!l.isInteger(R)?!1:(Number(R)-Number(C))/Number(v)>=P,l.escapeNode=(C,R=0,v)=>{let P=C.nodes[R];!P||(v&&P.type===v||P.type==="open"||P.type==="close")&&P.escaped!==!0&&(P.value="\\"+P.value,P.escaped=!0)},l.encloseBrace=C=>C.type!=="brace"?!1:C.commas>>0+C.ranges>>0==0?(C.invalid=!0,!0):!1,l.isInvalidBrace=C=>C.type!=="brace"?!1:C.invalid===!0||C.dollar?!0:C.commas>>0+C.ranges>>0==0||C.open!==!0||C.close!==!0?(C.invalid=!0,!0):!1,l.isOpenOrClose=C=>C.type==="open"||C.type==="close"?!0:C.open===!0||C.close===!0,l.reduce=C=>C.reduce((R,v)=>(v.type==="text"&&R.push(v.value),v.type==="range"&&(v.type="text"),R),[]),l.flatten=(...C)=>{const R=[],v=o(P=>{for(let y=0;y<P.length;y++){let W=P[y];Array.isArray(W)?v(W,R):W!==void 0&&R.push(W)}return R},"flat");return v(C),R}},1516:(st,l,C)=>{"use strict";/*!
 * fill-range <https://github.com/jonschlinkert/fill-range>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */const R=C(6529),v=C(2999),P=o(T=>T!==null&&typeof T=="object"&&!Array.isArray(T),"isObject"),y=o(T=>Y=>T===!0?Number(Y):String(Y),"transform"),W=o(T=>typeof T=="number"||typeof T=="string"&&T!=="","isValidValue"),N=o(T=>Number.isInteger(+T),"isNumber"),m=o(T=>{let Y=`${T}`,x=-1;if(Y[0]==="-"&&(Y=Y.slice(1)),Y==="0")return!1;for(;Y[++x]==="0";);return x>0},"zeros"),w=o((T,Y,x)=>typeof T=="string"||typeof Y=="string"?!0:x.stringify===!0,"stringify"),O=o((T,Y,x)=>{if(Y>0){let le=T[0]==="-"?"-":"";le&&(T=T.slice(1)),T=le+T.padStart(le?Y-1:Y,"0")}return x===!1?String(T):T},"pad"),B=o((T,Y)=>{let x=T[0]==="-"?"-":"";for(x&&(T=T.slice(1),Y--);T.length<Y;)T="0"+T;return x?"-"+T:T},"toMaxLen"),E=o((T,Y)=>{T.negatives.sort((Ae,Ne)=>Ae<Ne?-1:Ae>Ne?1:0),T.positives.sort((Ae,Ne)=>Ae<Ne?-1:Ae>Ne?1:0);let x=Y.capture?"":"?:",le="",V="",fe;return T.positives.length&&(le=T.positives.join("|")),T.negatives.length&&(V=`-(${x}${T.negatives.join("|")})`),le&&V?fe=`${le}|${V}`:fe=le||V,Y.wrap?`(${x}${fe})`:fe},"toSequence"),$=o((T,Y,x,le)=>{if(x)return v(T,Y,{wrap:!1,...le});let V=String.fromCharCode(T);if(T===Y)return V;let fe=String.fromCharCode(Y);return`[${V}-${fe}]`},"toRange"),F=o((T,Y,x)=>{if(Array.isArray(T)){let le=x.wrap===!0,V=x.capture?"":"?:";return le?`(${V}${T.join("|")})`:T.join("|")}return v(T,Y,x)},"toRegex"),j=o((...T)=>new RangeError("Invalid range arguments: "+R.inspect(...T)),"rangeError"),q=o((T,Y,x)=>{if(x.strictRanges===!0)throw j([T,Y]);return[]},"invalidRange"),_e=o((T,Y)=>{if(Y.strictRanges===!0)throw new TypeError(`Expected step "${T}" to be a number`);return[]},"invalidStep"),z=o((T,Y,x=1,le={})=>{let V=Number(T),fe=Number(Y);if(!Number.isInteger(V)||!Number.isInteger(fe)){if(le.strictRanges===!0)throw j([T,Y]);return[]}V===0&&(V=0),fe===0&&(fe=0);let Ae=V>fe,Ne=String(T),ae=String(Y),we=String(x);x=Math.max(Math.abs(x),1);let D=m(Ne)||m(ae)||m(we),Ve=D?Math.max(Ne.length,ae.length,we.length):0,ye=D===!1&&w(T,Y,le)===!1,ve=le.transform||y(ye);if(le.toRegex&&x===1)return $(B(T,Ve),B(Y,Ve),!0,le);let G={negatives:[],positives:[]},se=o(ie=>G[ie<0?"negatives":"positives"].push(Math.abs(ie)),"push"),Re=[],Ge=0;for(;Ae?V>=fe:V<=fe;)le.toRegex===!0&&x>1?se(V):Re.push(O(ve(V,Ge),Ve,ye)),V=Ae?V-x:V+x,Ge++;return le.toRegex===!0?x>1?E(G,le):F(Re,null,{wrap:!1,...le}):Re},"fillNumbers"),Q=o((T,Y,x=1,le={})=>{if(!N(T)&&T.length>1||!N(Y)&&Y.length>1)return q(T,Y,le);let V=le.transform||(ye=>String.fromCharCode(ye)),fe=`${T}`.charCodeAt(0),Ae=`${Y}`.charCodeAt(0),Ne=fe>Ae,ae=Math.min(fe,Ae),we=Math.max(fe,Ae);if(le.toRegex&&x===1)return $(ae,we,!1,le);let D=[],Ve=0;for(;Ne?fe>=Ae:fe<=Ae;)D.push(V(fe,Ve)),fe=Ne?fe-x:fe+x,Ve++;return le.toRegex===!0?F(D,null,{wrap:!1,options:le}):D},"fillLetters"),Z=o((T,Y,x,le={})=>{if(Y==null&&W(T))return[T];if(!W(T)||!W(Y))return q(T,Y,le);if(typeof x=="function")return Z(T,Y,1,{transform:x});if(P(x))return Z(T,Y,0,x);let V={...le};return V.capture===!0&&(V.wrap=!0),x=x||V.step||1,N(x)?N(T)&&N(Y)?z(T,Y,x,V):Q(T,Y,Math.max(Math.abs(x),1),V):x!=null&&!P(x)?_e(x,V):Z(T,Y,1,x)},"fill");st.exports=Z},3338:st=>{"use strict";/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */st.exports=function(l){return typeof l=="number"?l-l==0:typeof l=="string"&&l.trim()!==""?Number.isFinite?Number.isFinite(+l):isFinite(+l):!1}},5179:(st,l,C)=>{st=C.nmd(st);var R=200,v="__lodash_hash_undefined__",P=1,y=2,W=9007199254740991,N="[object Arguments]",m="[object Array]",w="[object AsyncFunction]",O="[object Boolean]",B="[object Date]",E="[object Error]",$="[object Function]",F="[object GeneratorFunction]",j="[object Map]",q="[object Number]",_e="[object Null]",z="[object Object]",Q="[object Promise]",Z="[object Proxy]",T="[object RegExp]",Y="[object Set]",x="[object String]",le="[object Symbol]",V="[object Undefined]",fe="[object WeakMap]",Ae="[object ArrayBuffer]",Ne="[object DataView]",ae="[object Float32Array]",we="[object Float64Array]",D="[object Int8Array]",Ve="[object Int16Array]",ye="[object Int32Array]",ve="[object Uint8Array]",G="[object Uint8ClampedArray]",se="[object Uint16Array]",Re="[object Uint32Array]",Ge=/[\\^$.*+?()[\]{}|]/g,ie=/^\[object .+?Constructor\]$/,Ze=/^(?:0|[1-9]\d*)$/,ut={};ut[ae]=ut[we]=ut[D]=ut[Ve]=ut[ye]=ut[ve]=ut[G]=ut[se]=ut[Re]=!0,ut[N]=ut[m]=ut[Ae]=ut[O]=ut[Ne]=ut[B]=ut[E]=ut[$]=ut[j]=ut[q]=ut[z]=ut[T]=ut[Y]=ut[x]=ut[fe]=!1;var yt=typeof C.g=="object"&&C.g&&C.g.Object===Object&&C.g,I=typeof self=="object"&&self&&self.Object===Object&&self,U=yt||I||Function("return this")(),ne=l&&!l.nodeType&&l,de=ne&&!0&&st&&!st.nodeType&&st,Ue=de&&de.exports===ne,Ie=Ue&&yt.process,ce=function(){try{return Ie&&Ie.binding&&Ie.binding("util")}catch(L){}}(),Ce=ce&&ce.isTypedArray;function Te(L,X){for(var De=-1,lt=L==null?0:L.length,At=0,Pt=[];++De<lt;){var hn=L[De];X(hn,De,L)&&(Pt[At++]=hn)}return Pt}o(Te,"arrayFilter");function Ye(L,X){for(var De=-1,lt=X.length,At=L.length;++De<lt;)L[At+De]=X[De];return L}o(Ye,"arrayPush");function pe(L,X){for(var De=-1,lt=L==null?0:L.length;++De<lt;)if(X(L[De],De,L))return!0;return!1}o(pe,"arraySome");function ke(L,X){for(var De=-1,lt=Array(L);++De<L;)lt[De]=X(De);return lt}o(ke,"baseTimes");function et(L){return function(X){return L(X)}}o(et,"baseUnary");function nt(L,X){return L.has(X)}o(nt,"cacheHas");function be(L,X){return L==null?void 0:L[X]}o(be,"getValue");function H(L){var X=-1,De=Array(L.size);return L.forEach(function(lt,At){De[++X]=[At,lt]}),De}o(H,"mapToArray");function K(L,X){return function(De){return L(X(De))}}o(K,"overArg");function Qe(L){var X=-1,De=Array(L.size);return L.forEach(function(lt){De[++X]=lt}),De}o(Qe,"setToArray");var Jt=Array.prototype,Rn=Function.prototype,Pn=Object.prototype,wn=U["__core-js_shared__"],lr=Rn.toString,sr=Pn.hasOwnProperty,mr=function(){var L=/[^.]+$/.exec(wn&&wn.keys&&wn.keys.IE_PROTO||"");return L?"Symbol(src)_1."+L:""}(),cr=Pn.toString,yr=RegExp("^"+lr.call(sr).replace(Ge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ht=Ue?U.Buffer:void 0,Gt=U.Symbol,on=U.Uint8Array,sn=Pn.propertyIsEnumerable,jt=Jt.splice,_n=Gt?Gt.toStringTag:void 0,Jn=Object.getOwnPropertySymbols,pr=ht?ht.isBuffer:void 0,Qn=K(Object.keys,Object),Rr=ni(U,"DataView"),Kr=ni(U,"Map"),Cr=ni(U,"Promise"),wr=ni(U,"Set"),Nr=ni(U,"WeakMap"),Ln=ni(Object,"create"),On=Ft(Rr),br=Ft(Kr),Gr=Ft(Cr),Tr=Ft(wr),pi=Ft(Nr),_r=Gt?Gt.prototype:void 0,M=_r?_r.valueOf:void 0;function ue(L){var X=-1,De=L==null?0:L.length;for(this.clear();++X<De;){var lt=L[X];this.set(lt[0],lt[1])}}o(ue,"Hash");function Ee(){this.__data__=Ln?Ln(null):{},this.size=0}o(Ee,"hashClear");function Le(L){var X=this.has(L)&&delete this.__data__[L];return this.size-=X?1:0,X}o(Le,"hashDelete");function tt(L){var X=this.__data__;if(Ln){var De=X[L];return De===v?void 0:De}return sr.call(X,L)?X[L]:void 0}o(tt,"hashGet");function qe(L){var X=this.__data__;return Ln?X[L]!==void 0:sr.call(X,L)}o(qe,"hashHas");function dt(L,X){var De=this.__data__;return this.size+=this.has(L)?0:1,De[L]=Ln&&X===void 0?v:X,this}o(dt,"hashSet"),ue.prototype.clear=Ee,ue.prototype.delete=Le,ue.prototype.get=tt,ue.prototype.has=qe,ue.prototype.set=dt;function Dt(L){var X=-1,De=L==null?0:L.length;for(this.clear();++X<De;){var lt=L[X];this.set(lt[0],lt[1])}}o(Dt,"ListCache");function Tt(){this.__data__=[],this.size=0}o(Tt,"listCacheClear");function _t(L){var X=this.__data__,De=nr(X,L);if(De<0)return!1;var lt=X.length-1;return De==lt?X.pop():jt.call(X,De,1),--this.size,!0}o(_t,"listCacheDelete");function bt(L){var X=this.__data__,De=nr(X,L);return De<0?void 0:X[De][1]}o(bt,"listCacheGet");function Ot(L){return nr(this.__data__,L)>-1}o(Ot,"listCacheHas");function Bt(L,X){var De=this.__data__,lt=nr(De,L);return lt<0?(++this.size,De.push([L,X])):De[lt][1]=X,this}o(Bt,"listCacheSet"),Dt.prototype.clear=Tt,Dt.prototype.delete=_t,Dt.prototype.get=bt,Dt.prototype.has=Ot,Dt.prototype.set=Bt;function Wt(L){var X=-1,De=L==null?0:L.length;for(this.clear();++X<De;){var lt=L[X];this.set(lt[0],lt[1])}}o(Wt,"MapCache");function Mt(){this.size=0,this.__data__={hash:new ue,map:new(Kr||Dt),string:new ue}}o(Mt,"mapCacheClear");function Kn(L){var X=ti(this,L).delete(L);return this.size-=X?1:0,X}o(Kn,"mapCacheDelete");function En(L){return ti(this,L).get(L)}o(En,"mapCacheGet");function Sr(L){return ti(this,L).has(L)}o(Sr,"mapCacheHas");function Xn(L,X){var De=ti(this,L),lt=De.size;return De.set(L,X),this.size+=De.size==lt?0:1,this}o(Xn,"mapCacheSet"),Wt.prototype.clear=Mt,Wt.prototype.delete=Kn,Wt.prototype.get=En,Wt.prototype.has=Sr,Wt.prototype.set=Xn;function ur(L){var X=-1,De=L==null?0:L.length;for(this.__data__=new Wt;++X<De;)this.add(L[X])}o(ur,"SetCache");function zr(L){return this.__data__.set(L,v),this}o(zr,"setCacheAdd");function Vr(L){return this.__data__.has(L)}o(Vr,"setCacheHas"),ur.prototype.add=ur.prototype.push=zr,ur.prototype.has=Vr;function $n(L){var X=this.__data__=new Dt(L);this.size=X.size}o($n,"Stack");function mi(){this.__data__=new Dt,this.size=0}o(mi,"stackClear");function Vt(L){var X=this.__data__,De=X.delete(L);return this.size=X.size,De}o(Vt,"stackDelete");function tr(L){return this.__data__.get(L)}o(tr,"stackGet");function An(L){return this.__data__.has(L)}o(An,"stackHas");function Sn(L,X){var De=this.__data__;if(De instanceof Dt){var lt=De.__data__;if(!Kr||lt.length<R-1)return lt.push([L,X]),this.size=++De.size,this;De=this.__data__=new Wt(lt)}return De.set(L,X),this.size=De.size,this}o(Sn,"stackSet"),$n.prototype.clear=mi,$n.prototype.delete=Vt,$n.prototype.get=tr,$n.prototype.has=An,$n.prototype.set=Sn;function fn(L,X){var De=Xt(L),lt=!De&&St(L),At=!De&&!lt&&vn(L),Pt=!De&&!lt&&!At&&Yt(L),hn=De||lt||At||Pt,gn=hn?ke(L.length,String):[],tn=gn.length;for(var nn in L)(X||sr.call(L,nn))&&!(hn&&(nn=="length"||At&&(nn=="offset"||nn=="parent")||Pt&&(nn=="buffer"||nn=="byteLength"||nn=="byteOffset")||la(nn,tn)))&&gn.push(nn);return gn}o(fn,"arrayLikeKeys");function nr(L,X){for(var De=L.length;De--;)if(zt(L[De][0],X))return De;return-1}o(nr,"assocIndexOf");function Zn(L,X,De){var lt=X(L);return Xt(L)?lt:Ye(lt,De(L))}o(Zn,"baseGetAllKeys");function Or(L){return L==null?L===void 0?V:_e:_n&&_n in Object(L)?ra(L):at(L)}o(Or,"baseGetTag");function yi(L){return Hn(L)&&Or(L)==N}o(yi,"baseIsArguments");function wi(L,X,De,lt,At){return L===X?!0:L==null||X==null||!Hn(L)&&!Hn(X)?L!==L&&X!==X:Ni(L,X,De,lt,wi,At)}o(wi,"baseIsEqual");function Ni(L,X,De,lt,At,Pt){var hn=Xt(L),gn=Xt(X),tn=hn?m:ci(L),nn=gn?m:ci(X);tn=tn==N?z:tn,nn=nn==N?z:nn;var pn=tn==z,Kt=nn==z,Ct=tn==nn;if(Ct&&vn(L)){if(!vn(X))return!1;hn=!0,pn=!1}if(Ct&&!pn)return Pt||(Pt=new $n),hn||Yt(L)?sa(L,X,De,lt,At,Pt):ji(L,X,tn,De,lt,At,Pt);if(!(De&P)){var bn=pn&&sr.call(L,"__wrapped__"),xn=Kt&&sr.call(X,"__wrapped__");if(bn||xn){var Fn=bn?L.value():L,kn=xn?X.value():X;return Pt||(Pt=new $n),At(Fn,kn,De,lt,Pt)}}return Ct?(Pt||(Pt=new $n),Oi(L,X,De,lt,At,Pt)):!1}o(Ni,"baseIsEqualDeep");function Si(L){if(!ir(L)||rt(L))return!1;var X=rr(L)?yr:ie;return X.test(Ft(L))}o(Si,"baseIsNative");function Hr(L){return Hn(L)&&Wn(L.length)&&!!ut[Or(L)]}o(Hr,"baseIsTypedArray");function Ci(L){if(!wt(L))return Qn(L);var X=[];for(var De in Object(L))sr.call(L,De)&&De!="constructor"&&X.push(De);return X}o(Ci,"baseKeys");function sa(L,X,De,lt,At,Pt){var hn=De&P,gn=L.length,tn=X.length;if(gn!=tn&&!(hn&&tn>gn))return!1;var nn=Pt.get(L);if(nn&&Pt.get(X))return nn==X;var pn=-1,Kt=!0,Ct=De&y?new ur:void 0;for(Pt.set(L,X),Pt.set(X,L);++pn<gn;){var bn=L[pn],xn=X[pn];if(lt)var Fn=hn?lt(xn,bn,pn,X,L,Pt):lt(bn,xn,pn,L,X,Pt);if(Fn!==void 0){if(Fn)continue;Kt=!1;break}if(Ct){if(!pe(X,function(kn,qt){if(!nt(Ct,qt)&&(bn===kn||At(bn,kn,De,lt,Pt)))return Ct.push(qt)})){Kt=!1;break}}else if(!(bn===xn||At(bn,xn,De,lt,Pt))){Kt=!1;break}}return Pt.delete(L),Pt.delete(X),Kt}o(sa,"equalArrays");function ji(L,X,De,lt,At,Pt,hn){switch(De){case Ne:if(L.byteLength!=X.byteLength||L.byteOffset!=X.byteOffset)return!1;L=L.buffer,X=X.buffer;case Ae:return!(L.byteLength!=X.byteLength||!Pt(new on(L),new on(X)));case O:case B:case q:return zt(+L,+X);case E:return L.name==X.name&&L.message==X.message;case T:case x:return L==X+"";case j:var gn=H;case Y:var tn=lt&P;if(gn||(gn=Qe),L.size!=X.size&&!tn)return!1;var nn=hn.get(L);if(nn)return nn==X;lt|=y,hn.set(L,X);var pn=sa(gn(L),gn(X),lt,At,Pt,hn);return hn.delete(L),pn;case le:if(M)return M.call(L)==M.call(X)}return!1}o(ji,"equalByTag");function Oi(L,X,De,lt,At,Pt){var hn=De&P,gn=ei(L),tn=gn.length,nn=ei(X),pn=nn.length;if(tn!=pn&&!hn)return!1;for(var Kt=tn;Kt--;){var Ct=gn[Kt];if(!(hn?Ct in X:sr.call(X,Ct)))return!1}var bn=Pt.get(L);if(bn&&Pt.get(X))return bn==X;var xn=!0;Pt.set(L,X),Pt.set(X,L);for(var Fn=hn;++Kt<tn;){Ct=gn[Kt];var kn=L[Ct],qt=X[Ct];if(lt)var Br=hn?lt(qt,kn,Ct,X,L,Pt):lt(kn,qt,Ct,L,X,Pt);if(!(Br===void 0?kn===qt||At(kn,qt,De,lt,Pt):Br)){xn=!1;break}Fn||(Fn=Ct=="constructor")}if(xn&&!Fn){var Er=L.constructor,Bn=X.constructor;Er!=Bn&&"constructor"in L&&"constructor"in X&&!(typeof Er=="function"&&Er instanceof Er&&typeof Bn=="function"&&Bn instanceof Bn)&&(xn=!1)}return Pt.delete(L),Pt.delete(X),xn}o(Oi,"equalObjects");function ei(L){return Zn(L,cn,Hi)}o(ei,"getAllKeys");function ti(L,X){var De=L.__data__;return xe(X)?De[typeof X=="string"?"string":"hash"]:De.map}o(ti,"getMapData");function ni(L,X){var De=be(L,X);return Si(De)?De:void 0}o(ni,"getNative");function ra(L){var X=sr.call(L,_n),De=L[_n];try{L[_n]=void 0;var lt=!0}catch(Pt){}var At=cr.call(L);return lt&&(X?L[_n]=De:delete L[_n]),At}o(ra,"getRawTag");var Hi=Jn?function(L){return L==null?[]:(L=Object(L),Te(Jn(L),function(X){return sn.call(L,X)}))}:mn,ci=Or;(Rr&&ci(new Rr(new ArrayBuffer(1)))!=Ne||Kr&&ci(new Kr)!=j||Cr&&ci(Cr.resolve())!=Q||wr&&ci(new wr)!=Y||Nr&&ci(new Nr)!=fe)&&(ci=o(function(L){var X=Or(L),De=X==z?L.constructor:void 0,lt=De?Ft(De):"";if(lt)switch(lt){case On:return Ne;case br:return j;case Gr:return Q;case Tr:return Y;case pi:return fe}return X},"getTag"));function la(L,X){return X=X==null?W:X,!!X&&(typeof L=="number"||Ze.test(L))&&L>-1&&L%1==0&&L<X}o(la,"isIndex");function xe(L){var X=typeof L;return X=="string"||X=="number"||X=="symbol"||X=="boolean"?L!=="__proto__":L===null}o(xe,"isKeyable");function rt(L){return!!mr&&mr in L}o(rt,"isMasked");function wt(L){var X=L&&L.constructor,De=typeof X=="function"&&X.prototype||Pn;return L===De}o(wt,"isPrototype");function at(L){return cr.call(L)}o(at,"objectToString");function Ft(L){if(L!=null){try{return lr.call(L)}catch(X){}try{return L+""}catch(X){}}return""}o(Ft,"toSource");function zt(L,X){return L===X||L!==L&&X!==X}o(zt,"eq");var St=yi(function(){return arguments}())?yi:function(L){return Hn(L)&&sr.call(L,"callee")&&!sn.call(L,"callee")},Xt=Array.isArray;function Ut(L){return L!=null&&Wn(L.length)&&!rr(L)}o(Ut,"isArrayLike");var vn=pr||Zt;function Cn(L,X){return wi(L,X)}o(Cn,"isEqual");function rr(L){if(!ir(L))return!1;var X=Or(L);return X==$||X==F||X==w||X==Z}o(rr,"isFunction");function Wn(L){return typeof L=="number"&&L>-1&&L%1==0&&L<=W}o(Wn,"isLength");function ir(L){var X=typeof L;return L!=null&&(X=="object"||X=="function")}o(ir,"isObject");function Hn(L){return L!=null&&typeof L=="object"}o(Hn,"isObjectLike");var Yt=Ce?et(Ce):Hr;function cn(L){return Ut(L)?fn(L):Ci(L)}o(cn,"keys");function mn(){return[]}o(mn,"stubArray");function Zt(){return!1}o(Zt,"stubFalse"),st.exports=Cn},919:(st,l,C)=>{"use strict";const R=C(6391),v=C(6232),P=C(6796),y=C(292),W=o(m=>m===""||m==="./","isEmptyString"),N=o((m,w,O)=>{w=[].concat(w),m=[].concat(m);let B=new Set,E=new Set,$=new Set,F=0,j=o(z=>{$.add(z.output),O&&O.onResult&&O.onResult(z)},"onResult");for(let z=0;z<w.length;z++){let Q=P(String(w[z]),{...O,onResult:j},!0),Z=Q.state.negated||Q.state.negatedExtglob;Z&&F++;for(let T of m){let Y=Q(T,!0);!(Z?!Y.isMatch:Y.isMatch)||(Z?B.add(Y.output):(B.delete(Y.output),E.add(Y.output)))}}let _e=(F===w.length?[...$]:[...E]).filter(z=>!B.has(z));if(O&&_e.length===0){if(O.failglob===!0)throw new Error(`No matches found for "${w.join(", ")}"`);if(O.nonull===!0||O.nullglob===!0)return O.unescape?w.map(z=>z.replace(/\\/g,"")):w}return _e},"micromatch");N.match=N,N.matcher=(m,w)=>P(m,w),N.isMatch=(m,w,O)=>P(w,O)(m),N.any=N.isMatch,N.not=(m,w,O={})=>{w=[].concat(w).map(String);let B=new Set,E=[],$=o(j=>{O.onResult&&O.onResult(j),E.push(j.output)},"onResult"),F=new Set(N(m,w,{...O,onResult:$}));for(let j of E)F.has(j)||B.add(j);return[...B]},N.contains=(m,w,O)=>{if(typeof m!="string")throw new TypeError(`Expected a string: "${R.inspect(m)}"`);if(Array.isArray(w))return w.some(B=>N.contains(m,B,O));if(typeof w=="string"){if(W(m)||W(w))return!1;if(m.includes(w)||m.startsWith("./")&&m.slice(2).includes(w))return!0}return N.isMatch(m,w,{...O,contains:!0})},N.matchKeys=(m,w,O)=>{if(!y.isObject(m))throw new TypeError("Expected the first argument to be an object");let B=N(Object.keys(m),w,O),E={};for(let $ of B)E[$]=m[$];return E},N.some=(m,w,O)=>{let B=[].concat(m);for(let E of[].concat(w)){let $=P(String(E),O);if(B.some(F=>$(F)))return!0}return!1},N.every=(m,w,O)=>{let B=[].concat(m);for(let E of[].concat(w)){let $=P(String(E),O);if(!B.every(F=>$(F)))return!1}return!0},N.all=(m,w,O)=>{if(typeof m!="string")throw new TypeError(`Expected a string: "${R.inspect(m)}"`);return[].concat(w).every(B=>P(B,O)(m))},N.capture=(m,w,O)=>{let B=y.isWindows(O),$=P.makeRe(String(m),{...O,capture:!0}).exec(B?y.toPosixSlashes(w):w);if($)return $.slice(1).map(F=>F===void 0?"":F)},N.makeRe=(...m)=>P.makeRe(...m),N.scan=(...m)=>P.scan(...m),N.parse=(m,w)=>{let O=[];for(let B of[].concat(m||[]))for(let E of v(String(B),w))O.push(P.parse(E,w));return O},N.braces=(m,w)=>{if(typeof m!="string")throw new TypeError("Expected a string");return w&&w.nobrace===!0||!/\{.*\}/.test(m)?[m]:v(m,w)},N.braceExpand=(m,w)=>{if(typeof m!="string")throw new TypeError("Expected a string");return N.braces(m,{...w,expand:!0})},st.exports=N},6796:(st,l,C)=>{"use strict";st.exports=C(5761)},3889:(st,l,C)=>{"use strict";const R=C(6470),v="\\\\/",P=`[^${v}]`,y="\\.",W="\\+",N="\\?",m="\\/",w="(?=.)",O="[^/]",B=`(?:${m}|$)`,E=`(?:^|${m})`,$=`${y}{1,2}${B}`,F=`(?!${y})`,j=`(?!${E}${$})`,q=`(?!${y}{0,1}${B})`,_e=`(?!${$})`,z=`[^.${m}]`,Q=`${O}*?`,Z={DOT_LITERAL:y,PLUS_LITERAL:W,QMARK_LITERAL:N,SLASH_LITERAL:m,ONE_CHAR:w,QMARK:O,END_ANCHOR:B,DOTS_SLASH:$,NO_DOT:F,NO_DOTS:j,NO_DOT_SLASH:q,NO_DOTS_SLASH:_e,QMARK_NO_DOT:z,STAR:Q,START_ANCHOR:E},T={...Z,SLASH_LITERAL:`[${v}]`,QMARK:P,STAR:`${P}*?`,DOTS_SLASH:`${y}{1,2}(?:[${v}]|$)`,NO_DOT:`(?!${y})`,NO_DOTS:`(?!(?:^|[${v}])${y}{1,2}(?:[${v}]|$))`,NO_DOT_SLASH:`(?!${y}{0,1}(?:[${v}]|$))`,NO_DOTS_SLASH:`(?!${y}{1,2}(?:[${v}]|$))`,QMARK_NO_DOT:`[^.${v}]`,START_ANCHOR:`(?:^|[${v}])`,END_ANCHOR:`(?:[${v}]|$)`},Y={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};st.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:Y,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:R.sep,extglobChars(x){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${x.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(x){return x===!0?T:Z}}},3969:(st,l,C)=>{"use strict";const R=C(3889),v=C(292),{MAX_LENGTH:P,POSIX_REGEX_SOURCE:y,REGEX_NON_SPECIAL_CHARS:W,REGEX_SPECIAL_CHARS_BACKREF:N,REPLACEMENTS:m}=R,w=o((E,$)=>{if(typeof $.expandRange=="function")return $.expandRange(...E,$);E.sort();const F=`[${E.join("-")}]`;try{new RegExp(F)}catch(j){return E.map(q=>v.escapeRegex(q)).join("..")}return F},"expandRange"),O=o((E,$)=>`Missing ${E}: "${$}" - use "\\\\${$}" to match literal characters`,"syntaxError"),B=o((E,$)=>{if(typeof E!="string")throw new TypeError("Expected a string");E=m[E]||E;const F={...$},j=typeof F.maxLength=="number"?Math.min(P,F.maxLength):P;let q=E.length;if(q>j)throw new SyntaxError(`Input length: ${q}, exceeds maximum allowed length: ${j}`);const _e={type:"bos",value:"",output:F.prepend||""},z=[_e],Q=F.capture?"":"?:",Z=v.isWindows($),T=R.globChars(Z),Y=R.extglobChars(T),{DOT_LITERAL:x,PLUS_LITERAL:le,SLASH_LITERAL:V,ONE_CHAR:fe,DOTS_SLASH:Ae,NO_DOT:Ne,NO_DOT_SLASH:ae,NO_DOTS_SLASH:we,QMARK:D,QMARK_NO_DOT:Ve,STAR:ye,START_ANCHOR:ve}=T,G=o(be=>`(${Q}(?:(?!${ve}${be.dot?Ae:x}).)*?)`,"globstar"),se=F.dot?"":Ne,Re=F.dot?D:Ve;let Ge=F.bash===!0?G(F):ye;F.capture&&(Ge=`(${Ge})`),typeof F.noext=="boolean"&&(F.noextglob=F.noext);const ie={input:E,index:-1,start:0,dot:F.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:z};E=v.removePrefix(E,ie),q=E.length;const Ze=[],ut=[],yt=[];let I=_e,U;const ne=o(()=>ie.index===q-1,"eos"),de=ie.peek=(be=1)=>E[ie.index+be],Ue=ie.advance=()=>E[++ie.index]||"",Ie=o(()=>E.slice(ie.index+1),"remaining"),ce=o((be="",H=0)=>{ie.consumed+=be,ie.index+=H},"consume"),Ce=o(be=>{ie.output+=be.output!=null?be.output:be.value,ce(be.value)},"append"),Te=o(()=>{let be=1;for(;de()==="!"&&(de(2)!=="("||de(3)==="?");)Ue(),ie.start++,be++;return be%2==0?!1:(ie.negated=!0,ie.start++,!0)},"negate"),Ye=o(be=>{ie[be]++,yt.push(be)},"increment"),pe=o(be=>{ie[be]--,yt.pop()},"decrement"),ke=o(be=>{if(I.type==="globstar"){const H=ie.braces>0&&(be.type==="comma"||be.type==="brace"),K=be.extglob===!0||Ze.length&&(be.type==="pipe"||be.type==="paren");be.type!=="slash"&&be.type!=="paren"&&!H&&!K&&(ie.output=ie.output.slice(0,-I.output.length),I.type="star",I.value="*",I.output=Ge,ie.output+=I.output)}if(Ze.length&&be.type!=="paren"&&(Ze[Ze.length-1].inner+=be.value),(be.value||be.output)&&Ce(be),I&&I.type==="text"&&be.type==="text"){I.value+=be.value,I.output=(I.output||"")+be.value;return}be.prev=I,z.push(be),I=be},"push"),et=o((be,H)=>{const K={...Y[H],conditions:1,inner:""};K.prev=I,K.parens=ie.parens,K.output=ie.output;const Qe=(F.capture?"(":"")+K.open;Ye("parens"),ke({type:be,value:H,output:ie.output?"":fe}),ke({type:"paren",extglob:!0,value:Ue(),output:Qe}),Ze.push(K)},"extglobOpen"),nt=o(be=>{let H=be.close+(F.capture?")":""),K;if(be.type==="negate"){let Qe=Ge;if(be.inner&&be.inner.length>1&&be.inner.includes("/")&&(Qe=G(F)),(Qe!==Ge||ne()||/^\)+$/.test(Ie()))&&(H=be.close=`)$))${Qe}`),be.inner.includes("*")&&(K=Ie())&&/^\.[^\\/.]+$/.test(K)){const Jt=B(K,{...$,fastpaths:!1}).output;H=be.close=`)${Jt})${Qe})`}be.prev.type==="bos"&&(ie.negatedExtglob=!0)}ke({type:"paren",extglob:!0,value:U,output:H}),pe("parens")},"extglobClose");if(F.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(E)){let be=!1,H=E.replace(N,(K,Qe,Jt,Rn,Pn,wn)=>Rn==="\\"?(be=!0,K):Rn==="?"?Qe?Qe+Rn+(Pn?D.repeat(Pn.length):""):wn===0?Re+(Pn?D.repeat(Pn.length):""):D.repeat(Jt.length):Rn==="."?x.repeat(Jt.length):Rn==="*"?Qe?Qe+Rn+(Pn?Ge:""):Ge:Qe?K:`\\${K}`);return be===!0&&(F.unescape===!0?H=H.replace(/\\/g,""):H=H.replace(/\\+/g,K=>K.length%2==0?"\\\\":K?"\\":"")),H===E&&F.contains===!0?(ie.output=E,ie):(ie.output=v.wrapOutput(H,ie,$),ie)}for(;!ne();){if(U=Ue(),U==="\0")continue;if(U==="\\"){const K=de();if(K==="/"&&F.bash!==!0||K==="."||K===";")continue;if(!K){U+="\\",ke({type:"text",value:U});continue}const Qe=/^\\+/.exec(Ie());let Jt=0;if(Qe&&Qe[0].length>2&&(Jt=Qe[0].length,ie.index+=Jt,Jt%2!=0&&(U+="\\")),F.unescape===!0?U=Ue():U+=Ue(),ie.brackets===0){ke({type:"text",value:U});continue}}if(ie.brackets>0&&(U!=="]"||I.value==="["||I.value==="[^")){if(F.posix!==!1&&U===":"){const K=I.value.slice(1);if(K.includes("[")&&(I.posix=!0,K.includes(":"))){const Qe=I.value.lastIndexOf("["),Jt=I.value.slice(0,Qe),Rn=I.value.slice(Qe+2),Pn=y[Rn];if(Pn){I.value=Jt+Pn,ie.backtrack=!0,Ue(),!_e.output&&z.indexOf(I)===1&&(_e.output=fe);continue}}}(U==="["&&de()!==":"||U==="-"&&de()==="]")&&(U=`\\${U}`),U==="]"&&(I.value==="["||I.value==="[^")&&(U=`\\${U}`),F.posix===!0&&U==="!"&&I.value==="["&&(U="^"),I.value+=U,Ce({value:U});continue}if(ie.quotes===1&&U!=='"'){U=v.escapeRegex(U),I.value+=U,Ce({value:U});continue}if(U==='"'){ie.quotes=ie.quotes===1?0:1,F.keepQuotes===!0&&ke({type:"text",value:U});continue}if(U==="("){Ye("parens"),ke({type:"paren",value:U});continue}if(U===")"){if(ie.parens===0&&F.strictBrackets===!0)throw new SyntaxError(O("opening","("));const K=Ze[Ze.length-1];if(K&&ie.parens===K.parens+1){nt(Ze.pop());continue}ke({type:"paren",value:U,output:ie.parens?")":"\\)"}),pe("parens");continue}if(U==="["){if(F.nobracket===!0||!Ie().includes("]")){if(F.nobracket!==!0&&F.strictBrackets===!0)throw new SyntaxError(O("closing","]"));U=`\\${U}`}else Ye("brackets");ke({type:"bracket",value:U});continue}if(U==="]"){if(F.nobracket===!0||I&&I.type==="bracket"&&I.value.length===1){ke({type:"text",value:U,output:`\\${U}`});continue}if(ie.brackets===0){if(F.strictBrackets===!0)throw new SyntaxError(O("opening","["));ke({type:"text",value:U,output:`\\${U}`});continue}pe("brackets");const K=I.value.slice(1);if(I.posix!==!0&&K[0]==="^"&&!K.includes("/")&&(U=`/${U}`),I.value+=U,Ce({value:U}),F.literalBrackets===!1||v.hasRegexChars(K))continue;const Qe=v.escapeRegex(I.value);if(ie.output=ie.output.slice(0,-I.value.length),F.literalBrackets===!0){ie.output+=Qe,I.value=Qe;continue}I.value=`(${Q}${Qe}|${I.value})`,ie.output+=I.value;continue}if(U==="{"&&F.nobrace!==!0){Ye("braces");const K={type:"brace",value:U,output:"(",outputIndex:ie.output.length,tokensIndex:ie.tokens.length};ut.push(K),ke(K);continue}if(U==="}"){const K=ut[ut.length-1];if(F.nobrace===!0||!K){ke({type:"text",value:U,output:U});continue}let Qe=")";if(K.dots===!0){const Jt=z.slice(),Rn=[];for(let Pn=Jt.length-1;Pn>=0&&(z.pop(),Jt[Pn].type!=="brace");Pn--)Jt[Pn].type!=="dots"&&Rn.unshift(Jt[Pn].value);Qe=w(Rn,F),ie.backtrack=!0}if(K.comma!==!0&&K.dots!==!0){const Jt=ie.output.slice(0,K.outputIndex),Rn=ie.tokens.slice(K.tokensIndex);K.value=K.output="\\{",U=Qe="\\}",ie.output=Jt;for(const Pn of Rn)ie.output+=Pn.output||Pn.value}ke({type:"brace",value:U,output:Qe}),pe("braces"),ut.pop();continue}if(U==="|"){Ze.length>0&&Ze[Ze.length-1].conditions++,ke({type:"text",value:U});continue}if(U===","){let K=U;const Qe=ut[ut.length-1];Qe&&yt[yt.length-1]==="braces"&&(Qe.comma=!0,K="|"),ke({type:"comma",value:U,output:K});continue}if(U==="/"){if(I.type==="dot"&&ie.index===ie.start+1){ie.start=ie.index+1,ie.consumed="",ie.output="",z.pop(),I=_e;continue}ke({type:"slash",value:U,output:V});continue}if(U==="."){if(ie.braces>0&&I.type==="dot"){I.value==="."&&(I.output=x);const K=ut[ut.length-1];I.type="dots",I.output+=U,I.value+=U,K.dots=!0;continue}if(ie.braces+ie.parens===0&&I.type!=="bos"&&I.type!=="slash"){ke({type:"text",value:U,output:x});continue}ke({type:"dot",value:U,output:x});continue}if(U==="?"){if(!(I&&I.value==="(")&&F.noextglob!==!0&&de()==="("&&de(2)!=="?"){et("qmark",U);continue}if(I&&I.type==="paren"){const Qe=de();let Jt=U;if(Qe==="<"&&!v.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(I.value==="("&&!/[!=<:]/.test(Qe)||Qe==="<"&&!/<([!=]|\w+>)/.test(Ie()))&&(Jt=`\\${U}`),ke({type:"text",value:U,output:Jt});continue}if(F.dot!==!0&&(I.type==="slash"||I.type==="bos")){ke({type:"qmark",value:U,output:Ve});continue}ke({type:"qmark",value:U,output:D});continue}if(U==="!"){if(F.noextglob!==!0&&de()==="("&&(de(2)!=="?"||!/[!=<:]/.test(de(3)))){et("negate",U);continue}if(F.nonegate!==!0&&ie.index===0){Te();continue}}if(U==="+"){if(F.noextglob!==!0&&de()==="("&&de(2)!=="?"){et("plus",U);continue}if(I&&I.value==="("||F.regex===!1){ke({type:"plus",value:U,output:le});continue}if(I&&(I.type==="bracket"||I.type==="paren"||I.type==="brace")||ie.parens>0){ke({type:"plus",value:U});continue}ke({type:"plus",value:le});continue}if(U==="@"){if(F.noextglob!==!0&&de()==="("&&de(2)!=="?"){ke({type:"at",extglob:!0,value:U,output:""});continue}ke({type:"text",value:U});continue}if(U!=="*"){(U==="$"||U==="^")&&(U=`\\${U}`);const K=W.exec(Ie());K&&(U+=K[0],ie.index+=K[0].length),ke({type:"text",value:U});continue}if(I&&(I.type==="globstar"||I.star===!0)){I.type="star",I.star=!0,I.value+=U,I.output=Ge,ie.backtrack=!0,ie.globstar=!0,ce(U);continue}let be=Ie();if(F.noextglob!==!0&&/^\([^?]/.test(be)){et("star",U);continue}if(I.type==="star"){if(F.noglobstar===!0){ce(U);continue}const K=I.prev,Qe=K.prev,Jt=K.type==="slash"||K.type==="bos",Rn=Qe&&(Qe.type==="star"||Qe.type==="globstar");if(F.bash===!0&&(!Jt||be[0]&&be[0]!=="/")){ke({type:"star",value:U,output:""});continue}const Pn=ie.braces>0&&(K.type==="comma"||K.type==="brace"),wn=Ze.length&&(K.type==="pipe"||K.type==="paren");if(!Jt&&K.type!=="paren"&&!Pn&&!wn){ke({type:"star",value:U,output:""});continue}for(;be.slice(0,3)==="/**";){const lr=E[ie.index+4];if(lr&&lr!=="/")break;be=be.slice(3),ce("/**",3)}if(K.type==="bos"&&ne()){I.type="globstar",I.value+=U,I.output=G(F),ie.output=I.output,ie.globstar=!0,ce(U);continue}if(K.type==="slash"&&K.prev.type!=="bos"&&!Rn&&ne()){ie.output=ie.output.slice(0,-(K.output+I.output).length),K.output=`(?:${K.output}`,I.type="globstar",I.output=G(F)+(F.strictSlashes?")":"|$)"),I.value+=U,ie.globstar=!0,ie.output+=K.output+I.output,ce(U);continue}if(K.type==="slash"&&K.prev.type!=="bos"&&be[0]==="/"){const lr=be[1]!==void 0?"|$":"";ie.output=ie.output.slice(0,-(K.output+I.output).length),K.output=`(?:${K.output}`,I.type="globstar",I.output=`${G(F)}${V}|${V}${lr})`,I.value+=U,ie.output+=K.output+I.output,ie.globstar=!0,ce(U+Ue()),ke({type:"slash",value:"/",output:""});continue}if(K.type==="bos"&&be[0]==="/"){I.type="globstar",I.value+=U,I.output=`(?:^|${V}|${G(F)}${V})`,ie.output=I.output,ie.globstar=!0,ce(U+Ue()),ke({type:"slash",value:"/",output:""});continue}ie.output=ie.output.slice(0,-I.output.length),I.type="globstar",I.output=G(F),I.value+=U,ie.output+=I.output,ie.globstar=!0,ce(U);continue}const H={type:"star",value:U,output:Ge};if(F.bash===!0){H.output=".*?",(I.type==="bos"||I.type==="slash")&&(H.output=se+H.output),ke(H);continue}if(I&&(I.type==="bracket"||I.type==="paren")&&F.regex===!0){H.output=U,ke(H);continue}(ie.index===ie.start||I.type==="slash"||I.type==="dot")&&(I.type==="dot"?(ie.output+=ae,I.output+=ae):F.dot===!0?(ie.output+=we,I.output+=we):(ie.output+=se,I.output+=se),de()!=="*"&&(ie.output+=fe,I.output+=fe)),ke(H)}for(;ie.brackets>0;){if(F.strictBrackets===!0)throw new SyntaxError(O("closing","]"));ie.output=v.escapeLast(ie.output,"["),pe("brackets")}for(;ie.parens>0;){if(F.strictBrackets===!0)throw new SyntaxError(O("closing",")"));ie.output=v.escapeLast(ie.output,"("),pe("parens")}for(;ie.braces>0;){if(F.strictBrackets===!0)throw new SyntaxError(O("closing","}"));ie.output=v.escapeLast(ie.output,"{"),pe("braces")}if(F.strictSlashes!==!0&&(I.type==="star"||I.type==="bracket")&&ke({type:"maybe_slash",value:"",output:`${V}?`}),ie.backtrack===!0){ie.output="";for(const be of ie.tokens)ie.output+=be.output!=null?be.output:be.value,be.suffix&&(ie.output+=be.suffix)}return ie},"parse");B.fastpaths=(E,$)=>{const F={...$},j=typeof F.maxLength=="number"?Math.min(P,F.maxLength):P,q=E.length;if(q>j)throw new SyntaxError(`Input length: ${q}, exceeds maximum allowed length: ${j}`);E=m[E]||E;const _e=v.isWindows($),{DOT_LITERAL:z,SLASH_LITERAL:Q,ONE_CHAR:Z,DOTS_SLASH:T,NO_DOT:Y,NO_DOTS:x,NO_DOTS_SLASH:le,STAR:V,START_ANCHOR:fe}=R.globChars(_e),Ae=F.dot?x:Y,Ne=F.dot?le:Y,ae=F.capture?"":"?:",we={negated:!1,prefix:""};let D=F.bash===!0?".*?":V;F.capture&&(D=`(${D})`);const Ve=o(se=>se.noglobstar===!0?D:`(${ae}(?:(?!${fe}${se.dot?T:z}).)*?)`,"globstar"),ye=o(se=>{switch(se){case"*":return`${Ae}${Z}${D}`;case".*":return`${z}${Z}${D}`;case"*.*":return`${Ae}${D}${z}${Z}${D}`;case"*/*":return`${Ae}${D}${Q}${Z}${Ne}${D}`;case"**":return Ae+Ve(F);case"**/*":return`(?:${Ae}${Ve(F)}${Q})?${Ne}${Z}${D}`;case"**/*.*":return`(?:${Ae}${Ve(F)}${Q})?${Ne}${D}${z}${Z}${D}`;case"**/.*":return`(?:${Ae}${Ve(F)}${Q})?${z}${Z}${D}`;default:{const Re=/^(.*?)\.(\w+)$/.exec(se);if(!Re)return;const Ge=ye(Re[1]);return Ge?Ge+z+Re[2]:void 0}}},"create"),ve=v.removePrefix(E,we);let G=ye(ve);return G&&F.strictSlashes!==!0&&(G+=`${Q}?`),G},st.exports=B},5761:(st,l,C)=>{"use strict";const R=C(6470),v=C(9826),P=C(3969),y=C(292),W=C(3889),N=o(w=>w&&typeof w=="object"&&!Array.isArray(w),"isObject"),m=o((w,O,B=!1)=>{if(Array.isArray(w)){const Q=w.map(T=>m(T,O,B));return o(T=>{for(const Y of Q){const x=Y(T);if(x)return x}return!1},"arrayMatcher")}const E=N(w)&&w.tokens&&w.input;if(w===""||typeof w!="string"&&!E)throw new TypeError("Expected pattern to be a non-empty string");const $=O||{},F=y.isWindows(O),j=E?m.compileRe(w,O):m.makeRe(w,O,!1,!0),q=j.state;delete j.state;let _e=o(()=>!1,"isIgnored");if($.ignore){const Q={...O,ignore:null,onMatch:null,onResult:null};_e=m($.ignore,Q,B)}const z=o((Q,Z=!1)=>{const{isMatch:T,match:Y,output:x}=m.test(Q,j,O,{glob:w,posix:F}),le={glob:w,state:q,regex:j,posix:F,input:Q,output:x,match:Y,isMatch:T};return typeof $.onResult=="function"&&$.onResult(le),T===!1?(le.isMatch=!1,Z?le:!1):_e(Q)?(typeof $.onIgnore=="function"&&$.onIgnore(le),le.isMatch=!1,Z?le:!1):(typeof $.onMatch=="function"&&$.onMatch(le),Z?le:!0)},"matcher");return B&&(z.state=q),z},"picomatch");m.test=(w,O,B,{glob:E,posix:$}={})=>{if(typeof w!="string")throw new TypeError("Expected input to be a string");if(w==="")return{isMatch:!1,output:""};const F=B||{},j=F.format||($?y.toPosixSlashes:null);let q=w===E,_e=q&&j?j(w):w;return q===!1&&(_e=j?j(w):w,q=_e===E),(q===!1||F.capture===!0)&&(F.matchBase===!0||F.basename===!0?q=m.matchBase(w,O,B,$):q=O.exec(_e)),{isMatch:Boolean(q),match:q,output:_e}},m.matchBase=(w,O,B,E=y.isWindows(B))=>(O instanceof RegExp?O:m.makeRe(O,B)).test(R.basename(w)),m.isMatch=(w,O,B)=>m(O,B)(w),m.parse=(w,O)=>Array.isArray(w)?w.map(B=>m.parse(B,O)):P(w,{...O,fastpaths:!1}),m.scan=(w,O)=>v(w,O),m.compileRe=(w,O,B=!1,E=!1)=>{if(B===!0)return w.output;const $=O||{},F=$.contains?"":"^",j=$.contains?"":"$";let q=`${F}(?:${w.output})${j}`;w&&w.negated===!0&&(q=`^(?!${q}).*$`);const _e=m.toRegex(q,O);return E===!0&&(_e.state=w),_e},m.makeRe=(w,O={},B=!1,E=!1)=>{if(!w||typeof w!="string")throw new TypeError("Expected a non-empty string");let $={negated:!1,fastpaths:!0};return O.fastpaths!==!1&&(w[0]==="."||w[0]==="*")&&($.output=P.fastpaths(w,O)),$.output||($=P(w,O)),m.compileRe($,O,B,E)},m.toRegex=(w,O)=>{try{const B=O||{};return new RegExp(w,B.flags||(B.nocase?"i":""))}catch(B){if(O&&O.debug===!0)throw B;return/$^/}},m.constants=W,st.exports=m},9826:(st,l,C)=>{"use strict";const R=C(292),{CHAR_ASTERISK:v,CHAR_AT:P,CHAR_BACKWARD_SLASH:y,CHAR_COMMA:W,CHAR_DOT:N,CHAR_EXCLAMATION_MARK:m,CHAR_FORWARD_SLASH:w,CHAR_LEFT_CURLY_BRACE:O,CHAR_LEFT_PARENTHESES:B,CHAR_LEFT_SQUARE_BRACKET:E,CHAR_PLUS:$,CHAR_QUESTION_MARK:F,CHAR_RIGHT_CURLY_BRACE:j,CHAR_RIGHT_PARENTHESES:q,CHAR_RIGHT_SQUARE_BRACKET:_e}=C(3889),z=o(T=>T===w||T===y,"isPathSeparator"),Q=o(T=>{T.isPrefix!==!0&&(T.depth=T.isGlobstar?1/0:1)},"depth"),Z=o((T,Y)=>{const x=Y||{},le=T.length-1,V=x.parts===!0||x.scanToEnd===!0,fe=[],Ae=[],Ne=[];let ae=T,we=-1,D=0,Ve=0,ye=!1,ve=!1,G=!1,se=!1,Re=!1,Ge=!1,ie=!1,Ze=!1,ut=!1,yt=!1,I=0,U,ne,de={value:"",depth:0,isGlob:!1};const Ue=o(()=>we>=le,"eos"),Ie=o(()=>ae.charCodeAt(we+1),"peek"),ce=o(()=>(U=ne,ae.charCodeAt(++we)),"advance");for(;we<le;){ne=ce();let ke;if(ne===y){ie=de.backslashes=!0,ne=ce(),ne===O&&(Ge=!0);continue}if(Ge===!0||ne===O){for(I++;Ue()!==!0&&(ne=ce());){if(ne===y){ie=de.backslashes=!0,ce();continue}if(ne===O){I++;continue}if(Ge!==!0&&ne===N&&(ne=ce())===N){if(ye=de.isBrace=!0,G=de.isGlob=!0,yt=!0,V===!0)continue;break}if(Ge!==!0&&ne===W){if(ye=de.isBrace=!0,G=de.isGlob=!0,yt=!0,V===!0)continue;break}if(ne===j&&(I--,I===0)){Ge=!1,ye=de.isBrace=!0,yt=!0;break}}if(V===!0)continue;break}if(ne===w){if(fe.push(we),Ae.push(de),de={value:"",depth:0,isGlob:!1},yt===!0)continue;if(U===N&&we===D+1){D+=2;continue}Ve=we+1;continue}if(x.noext!==!0&&(ne===$||ne===P||ne===v||ne===F||ne===m)===!0&&Ie()===B){if(G=de.isGlob=!0,se=de.isExtglob=!0,yt=!0,ne===m&&we===D&&(ut=!0),V===!0){for(;Ue()!==!0&&(ne=ce());){if(ne===y){ie=de.backslashes=!0,ne=ce();continue}if(ne===q){G=de.isGlob=!0,yt=!0;break}}continue}break}if(ne===v){if(U===v&&(Re=de.isGlobstar=!0),G=de.isGlob=!0,yt=!0,V===!0)continue;break}if(ne===F){if(G=de.isGlob=!0,yt=!0,V===!0)continue;break}if(ne===E){for(;Ue()!==!0&&(ke=ce());){if(ke===y){ie=de.backslashes=!0,ce();continue}if(ke===_e){ve=de.isBracket=!0,G=de.isGlob=!0,yt=!0;break}}if(V===!0)continue;break}if(x.nonegate!==!0&&ne===m&&we===D){Ze=de.negated=!0,D++;continue}if(x.noparen!==!0&&ne===B){if(G=de.isGlob=!0,V===!0){for(;Ue()!==!0&&(ne=ce());){if(ne===B){ie=de.backslashes=!0,ne=ce();continue}if(ne===q){yt=!0;break}}continue}break}if(G===!0){if(yt=!0,V===!0)continue;break}}x.noext===!0&&(se=!1,G=!1);let Ce=ae,Te="",Ye="";D>0&&(Te=ae.slice(0,D),ae=ae.slice(D),Ve-=D),Ce&&G===!0&&Ve>0?(Ce=ae.slice(0,Ve),Ye=ae.slice(Ve)):G===!0?(Ce="",Ye=ae):Ce=ae,Ce&&Ce!==""&&Ce!=="/"&&Ce!==ae&&z(Ce.charCodeAt(Ce.length-1))&&(Ce=Ce.slice(0,-1)),x.unescape===!0&&(Ye&&(Ye=R.removeBackslashes(Ye)),Ce&&ie===!0&&(Ce=R.removeBackslashes(Ce)));const pe={prefix:Te,input:T,start:D,base:Ce,glob:Ye,isBrace:ye,isBracket:ve,isGlob:G,isExtglob:se,isGlobstar:Re,negated:Ze,negatedExtglob:ut};if(x.tokens===!0&&(pe.maxDepth=0,z(ne)||Ae.push(de),pe.tokens=Ae),x.parts===!0||x.tokens===!0){let ke;for(let et=0;et<fe.length;et++){const nt=ke?ke+1:D,be=fe[et],H=T.slice(nt,be);x.tokens&&(et===0&&D!==0?(Ae[et].isPrefix=!0,Ae[et].value=Te):Ae[et].value=H,Q(Ae[et]),pe.maxDepth+=Ae[et].depth),(et!==0||H!=="")&&Ne.push(H),ke=be}if(ke&&ke+1<T.length){const et=T.slice(ke+1);Ne.push(et),x.tokens&&(Ae[Ae.length-1].value=et,Q(Ae[Ae.length-1]),pe.maxDepth+=Ae[Ae.length-1].depth)}pe.slashes=fe,pe.parts=Ne}return pe},"scan");st.exports=Z},292:(st,l,C)=>{"use strict";var R=C(6038);const v=C(6470),P=R.platform==="win32",{REGEX_BACKSLASH:y,REGEX_REMOVE_BACKSLASH:W,REGEX_SPECIAL_CHARS:N,REGEX_SPECIAL_CHARS_GLOBAL:m}=C(3889);l.isObject=w=>w!==null&&typeof w=="object"&&!Array.isArray(w),l.hasRegexChars=w=>N.test(w),l.isRegexChar=w=>w.length===1&&l.hasRegexChars(w),l.escapeRegex=w=>w.replace(m,"\\$1"),l.toPosixSlashes=w=>w.replace(y,"/"),l.removeBackslashes=w=>w.replace(W,O=>O==="\\"?"":O),l.supportsLookbehinds=()=>{const w=R.version.slice(1).split(".").map(Number);return w.length===3&&w[0]>=9||w[0]===8&&w[1]>=10},l.isWindows=w=>w&&typeof w.windows=="boolean"?w.windows:P===!0||v.sep==="\\",l.escapeLast=(w,O,B)=>{const E=w.lastIndexOf(O,B);return E===-1?w:w[E-1]==="\\"?l.escapeLast(w,O,E-1):`${w.slice(0,E)}\\${w.slice(E)}`},l.removePrefix=(w,O={})=>{let B=w;return B.startsWith("./")&&(B=B.slice(2),O.prefix="./"),B},l.wrapOutput=(w,O={},B={})=>{const E=B.contains?"":"^",$=B.contains?"":"$";let F=`${E}(?:${w})${$}`;return O.negated===!0&&(F=`(?:^(?!${F}).*$)`),F}},6038:st=>{var l=st.exports={},C,R;function v(){throw new Error("setTimeout has not been defined")}o(v,"defaultSetTimout");function P(){throw new Error("clearTimeout has not been defined")}o(P,"defaultClearTimeout"),function(){try{typeof setTimeout=="function"?C=setTimeout:C=v}catch(j){C=v}try{typeof clearTimeout=="function"?R=clearTimeout:R=P}catch(j){R=P}}();function y(j){if(C===setTimeout)return setTimeout(j,0);if((C===v||!C)&&setTimeout)return C=setTimeout,setTimeout(j,0);try{return C(j,0)}catch(q){try{return C.call(null,j,0)}catch(_e){return C.call(this,j,0)}}}o(y,"runTimeout");function W(j){if(R===clearTimeout)return clearTimeout(j);if((R===P||!R)&&clearTimeout)return R=clearTimeout,clearTimeout(j);try{return R(j)}catch(q){try{return R.call(null,j)}catch(_e){return R.call(this,j)}}}o(W,"runClearTimeout");var N=[],m=!1,w,O=-1;function B(){!m||!w||(m=!1,w.length?N=w.concat(N):O=-1,N.length&&E())}o(B,"cleanUpNextTick");function E(){if(!m){var j=y(B);m=!0;for(var q=N.length;q;){for(w=N,N=[];++O<q;)w&&w[O].run();O=-1,q=N.length}w=null,m=!1,W(j)}}o(E,"drainQueue"),l.nextTick=function(j){var q=new Array(arguments.length-1);if(arguments.length>1)for(var _e=1;_e<arguments.length;_e++)q[_e-1]=arguments[_e];N.push(new $(j,q)),N.length===1&&!m&&y(E)};function $(j,q){this.fun=j,this.array=q}o($,"Item"),$.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={};function F(){}o(F,"noop"),l.on=F,l.addListener=F,l.once=F,l.off=F,l.removeListener=F,l.removeAllListeners=F,l.emit=F,l.prependListener=F,l.prependOnceListener=F,l.listeners=function(j){return[]},l.binding=function(j){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(j){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},2999:(st,l,C)=>{"use strict";/*!
 * to-regex-range <https://github.com/micromatch/to-regex-range>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */const R=C(3338),v=o((z,Q,Z)=>{if(R(z)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(Q===void 0||z===Q)return String(z);if(R(Q)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let T={relaxZeros:!0,...Z};typeof T.strictZeros=="boolean"&&(T.relaxZeros=T.strictZeros===!1);let Y=String(T.relaxZeros),x=String(T.shorthand),le=String(T.capture),V=String(T.wrap),fe=z+":"+Q+"="+Y+x+le+V;if(v.cache.hasOwnProperty(fe))return v.cache[fe].result;let Ae=Math.min(z,Q),Ne=Math.max(z,Q);if(Math.abs(Ae-Ne)===1){let ye=z+"|"+Q;return T.capture?`(${ye})`:T.wrap===!1?ye:`(?:${ye})`}let ae=q(z)||q(Q),we={min:z,max:Q,a:Ae,b:Ne},D=[],Ve=[];if(ae&&(we.isPadded=ae,we.maxLen=String(we.max).length),Ae<0){let ye=Ne<0?Math.abs(Ne):1;Ve=N(ye,Math.abs(Ae),we,T),Ae=we.a=0}return Ne>=0&&(D=N(Ae,Ne,we,T)),we.negatives=Ve,we.positives=D,we.result=P(Ve,D,T),T.capture===!0?we.result=`(${we.result})`:T.wrap!==!1&&D.length+Ve.length>1&&(we.result=`(?:${we.result})`),v.cache[fe]=we,we.result},"toRegexRange");function P(z,Q,Z){let T=m(z,Q,"-",!1,Z)||[],Y=m(Q,z,"",!1,Z)||[],x=m(z,Q,"-?",!0,Z)||[];return T.concat(x).concat(Y).join("|")}o(P,"collatePatterns");function y(z,Q){let Z=1,T=1,Y=E(z,Z),x=new Set([Q]);for(;z<=Y&&Y<=Q;)x.add(Y),Z+=1,Y=E(z,Z);for(Y=$(Q+1,T)-1;z<Y&&Y<=Q;)x.add(Y),T+=1,Y=$(Q+1,T)-1;return x=[...x],x.sort(O),x}o(y,"splitToRanges");function W(z,Q,Z){if(z===Q)return{pattern:z,count:[],digits:0};let T=w(z,Q),Y=T.length,x="",le=0;for(let V=0;V<Y;V++){let[fe,Ae]=T[V];fe===Ae?x+=fe:fe!=="0"||Ae!=="9"?x+=j(fe,Ae,Z):le++}return le&&(x+=Z.shorthand===!0?"\\d":"[0-9]"),{pattern:x,count:[le],digits:Y}}o(W,"rangeToPattern");function N(z,Q,Z,T){let Y=y(z,Q),x=[],le=z,V;for(let fe=0;fe<Y.length;fe++){let Ae=Y[fe],Ne=W(String(le),String(Ae),T),ae="";if(!Z.isPadded&&V&&V.pattern===Ne.pattern){V.count.length>1&&V.count.pop(),V.count.push(Ne.count[0]),V.string=V.pattern+F(V.count),le=Ae+1;continue}Z.isPadded&&(ae=_e(Ae,Z,T)),Ne.string=ae+Ne.pattern+F(Ne.count),x.push(Ne),le=Ae+1,V=Ne}return x}o(N,"splitToPatterns");function m(z,Q,Z,T,Y){let x=[];for(let le of z){let{string:V}=le;!T&&!B(Q,"string",V)&&x.push(Z+V),T&&B(Q,"string",V)&&x.push(Z+V)}return x}o(m,"filterPatterns");function w(z,Q){let Z=[];for(let T=0;T<z.length;T++)Z.push([z[T],Q[T]]);return Z}o(w,"zip");function O(z,Q){return z>Q?1:Q>z?-1:0}o(O,"compare");function B(z,Q,Z){return z.some(T=>T[Q]===Z)}o(B,"contains");function E(z,Q){return Number(String(z).slice(0,-Q)+"9".repeat(Q))}o(E,"countNines");function $(z,Q){return z-z%Math.pow(10,Q)}o($,"countZeros");function F(z){let[Q=0,Z=""]=z;return Z||Q>1?`{${Q+(Z?","+Z:"")}}`:""}o(F,"toQuantifier");function j(z,Q,Z){return`[${z}${Q-z==1?"":"-"}${Q}]`}o(j,"toCharacterClass");function q(z){return/^-?(0+)\d/.test(z)}o(q,"hasPadding");function _e(z,Q,Z){if(!Q.isPadded)return z;let T=Math.abs(Q.maxLen-String(z).length),Y=Z.relaxZeros!==!1;switch(T){case 0:return"";case 1:return Y?"0?":"0";case 2:return Y?"0{0,2}":"00";default:return Y?`0{0,${T}}`:`0{${T}}`}}o(_e,"padZeros"),v.cache={},v.clearCache=()=>v.cache={},st.exports=v},6724:()=>{},6470:(st,l,C)=>{"use strict";var R=C(4155);function v(N){if(typeof N!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(N))}o(v,"assertPath");function P(N,m){for(var w="",O=0,B=-1,E=0,$,F=0;F<=N.length;++F){if(F<N.length)$=N.charCodeAt(F);else{if($===47)break;$=47}if($===47){if(!(B===F-1||E===1))if(B!==F-1&&E===2){if(w.length<2||O!==2||w.charCodeAt(w.length-1)!==46||w.charCodeAt(w.length-2)!==46){if(w.length>2){var j=w.lastIndexOf("/");if(j!==w.length-1){j===-1?(w="",O=0):(w=w.slice(0,j),O=w.length-1-w.lastIndexOf("/")),B=F,E=0;continue}}else if(w.length===2||w.length===1){w="",O=0,B=F,E=0;continue}}m&&(w.length>0?w+="/..":w="..",O=2)}else w.length>0?w+="/"+N.slice(B+1,F):w=N.slice(B+1,F),O=F-B-1;B=F,E=0}else $===46&&E!==-1?++E:E=-1}return w}o(P,"normalizeStringPosix");function y(N,m){var w=m.dir||m.root,O=m.base||(m.name||"")+(m.ext||"");return w?w===m.root?w+O:w+N+O:O}o(y,"_format");var W={resolve:o(function(){for(var m="",w=!1,O,B=arguments.length-1;B>=-1&&!w;B--){var E;B>=0?E=arguments[B]:(O===void 0&&(O=R.cwd()),E=O),v(E),E.length!==0&&(m=E+"/"+m,w=E.charCodeAt(0)===47)}return m=P(m,!w),w?m.length>0?"/"+m:"/":m.length>0?m:"."},"resolve"),normalize:o(function(m){if(v(m),m.length===0)return".";var w=m.charCodeAt(0)===47,O=m.charCodeAt(m.length-1)===47;return m=P(m,!w),m.length===0&&!w&&(m="."),m.length>0&&O&&(m+="/"),w?"/"+m:m},"normalize"),isAbsolute:o(function(m){return v(m),m.length>0&&m.charCodeAt(0)===47},"isAbsolute"),join:o(function(){if(arguments.length===0)return".";for(var m,w=0;w<arguments.length;++w){var O=arguments[w];v(O),O.length>0&&(m===void 0?m=O:m+="/"+O)}return m===void 0?".":W.normalize(m)},"join"),relative:o(function(m,w){if(v(m),v(w),m===w||(m=W.resolve(m),w=W.resolve(w),m===w))return"";for(var O=1;O<m.length&&m.charCodeAt(O)===47;++O);for(var B=m.length,E=B-O,$=1;$<w.length&&w.charCodeAt($)===47;++$);for(var F=w.length,j=F-$,q=E<j?E:j,_e=-1,z=0;z<=q;++z){if(z===q){if(j>q){if(w.charCodeAt($+z)===47)return w.slice($+z+1);if(z===0)return w.slice($+z)}else E>q&&(m.charCodeAt(O+z)===47?_e=z:z===0&&(_e=0));break}var Q=m.charCodeAt(O+z),Z=w.charCodeAt($+z);if(Q!==Z)break;Q===47&&(_e=z)}var T="";for(z=O+_e+1;z<=B;++z)(z===B||m.charCodeAt(z)===47)&&(T.length===0?T+="..":T+="/..");return T.length>0?T+w.slice($+_e):($+=_e,w.charCodeAt($)===47&&++$,w.slice($))},"relative"),_makeLong:o(function(m){return m},"_makeLong"),dirname:o(function(m){if(v(m),m.length===0)return".";for(var w=m.charCodeAt(0),O=w===47,B=-1,E=!0,$=m.length-1;$>=1;--$)if(w=m.charCodeAt($),w===47){if(!E){B=$;break}}else E=!1;return B===-1?O?"/":".":O&&B===1?"//":m.slice(0,B)},"dirname"),basename:o(function(m,w){if(w!==void 0&&typeof w!="string")throw new TypeError('"ext" argument must be a string');v(m);var O=0,B=-1,E=!0,$;if(w!==void 0&&w.length>0&&w.length<=m.length){if(w.length===m.length&&w===m)return"";var F=w.length-1,j=-1;for($=m.length-1;$>=0;--$){var q=m.charCodeAt($);if(q===47){if(!E){O=$+1;break}}else j===-1&&(E=!1,j=$+1),F>=0&&(q===w.charCodeAt(F)?--F==-1&&(B=$):(F=-1,B=j))}return O===B?B=j:B===-1&&(B=m.length),m.slice(O,B)}else{for($=m.length-1;$>=0;--$)if(m.charCodeAt($)===47){if(!E){O=$+1;break}}else B===-1&&(E=!1,B=$+1);return B===-1?"":m.slice(O,B)}},"basename"),extname:o(function(m){v(m);for(var w=-1,O=0,B=-1,E=!0,$=0,F=m.length-1;F>=0;--F){var j=m.charCodeAt(F);if(j===47){if(!E){O=F+1;break}continue}B===-1&&(E=!1,B=F+1),j===46?w===-1?w=F:$!==1&&($=1):w!==-1&&($=-1)}return w===-1||B===-1||$===0||$===1&&w===B-1&&w===O+1?"":m.slice(w,B)},"extname"),format:o(function(m){if(m===null||typeof m!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof m);return y("/",m)},"format"),parse:o(function(m){v(m);var w={root:"",dir:"",base:"",ext:"",name:""};if(m.length===0)return w;var O=m.charCodeAt(0),B=O===47,E;B?(w.root="/",E=1):E=0;for(var $=-1,F=0,j=-1,q=!0,_e=m.length-1,z=0;_e>=E;--_e){if(O=m.charCodeAt(_e),O===47){if(!q){F=_e+1;break}continue}j===-1&&(q=!1,j=_e+1),O===46?$===-1?$=_e:z!==1&&(z=1):$!==-1&&(z=-1)}return $===-1||j===-1||z===0||z===1&&$===j-1&&$===F+1?j!==-1&&(F===0&&B?w.base=w.name=m.slice(1,j):w.base=w.name=m.slice(F,j)):(F===0&&B?(w.name=m.slice(1,$),w.base=m.slice(1,j)):(w.name=m.slice(F,$),w.base=m.slice(F,j)),w.ext=m.slice($,j)),F>0?w.dir=m.slice(0,F-1):B&&(w.dir="/"),w},"parse"),sep:"/",delimiter:":",win32:null,posix:null};W.posix=W,st.exports=W},4155:st=>{var l=st.exports={},C,R;function v(){throw new Error("setTimeout has not been defined")}o(v,"defaultSetTimout");function P(){throw new Error("clearTimeout has not been defined")}o(P,"defaultClearTimeout"),function(){try{typeof setTimeout=="function"?C=setTimeout:C=v}catch(j){C=v}try{typeof clearTimeout=="function"?R=clearTimeout:R=P}catch(j){R=P}}();function y(j){if(C===setTimeout)return setTimeout(j,0);if((C===v||!C)&&setTimeout)return C=setTimeout,setTimeout(j,0);try{return C(j,0)}catch(q){try{return C.call(null,j,0)}catch(_e){return C.call(this,j,0)}}}o(y,"runTimeout");function W(j){if(R===clearTimeout)return clearTimeout(j);if((R===P||!R)&&clearTimeout)return R=clearTimeout,clearTimeout(j);try{return R(j)}catch(q){try{return R.call(null,j)}catch(_e){return R.call(this,j)}}}o(W,"runClearTimeout");var N=[],m=!1,w,O=-1;function B(){!m||!w||(m=!1,w.length?N=w.concat(N):O=-1,N.length&&E())}o(B,"cleanUpNextTick");function E(){if(!m){var j=y(B);m=!0;for(var q=N.length;q;){for(w=N,N=[];++O<q;)w&&w[O].run();O=-1,q=N.length}w=null,m=!1,W(j)}}o(E,"drainQueue"),l.nextTick=function(j){var q=new Array(arguments.length-1);if(arguments.length>1)for(var _e=1;_e<arguments.length;_e++)q[_e-1]=arguments[_e];N.push(new $(j,q)),N.length===1&&!m&&y(E)};function $(j,q){this.fun=j,this.array=q}o($,"Item"),$.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={};function F(){}o(F,"noop"),l.on=F,l.addListener=F,l.once=F,l.off=F,l.removeListener=F,l.removeAllListeners=F,l.emit=F,l.prependListener=F,l.prependOnceListener=F,l.listeners=function(j){return[]},l.binding=function(j){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(j){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},6529:()=>{},6391:()=>{}},Va={};function vr(st){var l=Va[st];if(l!==void 0)return l.exports;var C=Va[st]={id:st,loaded:!1,exports:{}};return Po[st](C,C.exports,vr),C.loaded=!0,C.exports}o(vr,"__webpack_require__"),(()=>{vr.n=st=>{var l=st&&st.__esModule?()=>st.default:()=>st;return vr.d(l,{a:l}),l}})(),(()=>{vr.d=(st,l)=>{for(var C in l)vr.o(l,C)&&!vr.o(st,C)&&Object.defineProperty(st,C,{enumerable:!0,get:l[C]})}})(),(()=>{vr.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(st){if(typeof window=="object")return window}}()})(),(()=>{vr.o=(st,l)=>Object.prototype.hasOwnProperty.call(st,l)})(),(()=>{vr.r=st=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(st,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(st,"__esModule",{value:!0})}})(),(()=>{vr.nmd=st=>(st.paths=[],st.children||(st.children=[]),st)})();var Io={};(()=>{"use strict";vr.r(Io),vr.d(Io,{AllowedProviderExtensionIds:()=>qo,StateKeys:()=>pa,activate:()=>Ec,ensureProvidersRegistered:()=>Fr,getOpenActionsService:()=>Ro,getState:()=>tl,isPreRelease:()=>_c,updateState:()=>Yo});var st={};vr.r(st),vr.d(st,{max:()=>Il,min:()=>Pl});const l=require("vscode"),C=new TextDecoder,R=new TextEncoder,v=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function P(t){const e=R.encode(t),n=new Array(e.length);for(let r=0;r<e.length;++r)n[r]=v[e[r]];return n.join("")}o(P,"encodeUtf8Hex");function y(t){const e=t.match(/(\w{2})/g);if(e===null)return"";const n=new Uint8Array(e.map(r=>parseInt(r,16)));return C.decode(n)}o(y,"decodeUtf8Hex");const W=/^[0-9a-f]{40}$/i;function N(t){return t!==void 0&&W.test(t)}o(N,"isSha");const m=/^[^/](?!.*\/\.)(?!.*\.\.)(?!.*\/\/)(?!.*@\{)[^\000-\037\177 ~^:?*[\\]+[^./]$/;function w(t){return m.test(t)}o(w,"isValidBranchName");function O(t){return t===""||t==="~"||t==="HEAD"?t:t.endsWith("^")?`${t.substr(0,7)}^`:t.substr(0,7)}o(O,"shortenRef");const B=47;function E(t){if(t===void 0)return;const e=t.path.endsWith("/");return!e&&!t.fragment?t.toString():t.with({path:e?t.path.slice(0,-1):t.path,fragment:""}).toString()}o(E,"asKey");function $(t){if(t===void 0)return;const e=t.path.endsWith("/");return!e&&!t.query&&!t.fragment?t.toString():t.with({path:e?t.path.slice(0,-1):t.path,query:"",fragment:""}).toString()}o($,"asFileKey");function F(t,e){return`${(e==null?void 0:e.excludeScheme)?"":`${t.scheme}-`}${t.authority}${t.path.endsWith("/")?t.path.slice(0,-1):t.path}`}o(F,"asFileStorageKey");function j(t){const e=typeof t=="string"?t:t.path;let n=0,r=-1,i=!0;for(let a=e.length-1;a>=0;--a)if(e.charCodeAt(a)===B){if(!i){n=a+1;break}}else r===-1&&(i=!1,r=a+1);return r===-1?"":e.slice(n,r)}o(j,"basename");function q(t){const e=t.path;if(e.length===1)return"/";let n,r=-1,i=!0;for(let a=e.length-1;a>=1;--a)if(n=e.charCodeAt(a),n===B){if(!i){r=a;break}}else i=!1;return r===-1?"/":e.slice(0,r)}o(q,"dirname");function _e(t){const e=t.path.lastIndexOf("/");return e===-1?t.with({path:"/"}):t.with({path:t.path.substring(0,e)})}o(_e,"getParent");function z(t,e){const n=typeof e=="string"?e:e.path;return n.startsWith(t.path)?l.Uri.joinPath(t,n.substr(t.path.length)):l.Uri.joinPath(t,n)}o(z,"joinRelativePath");function Q(t,e){return typeof e=="string"?(e.startsWith("/")||(e=`/${e}`),Z(t,e)&&t.path.substr(e.length+(e.endsWith("/")?0:1)).split("/").length===1):Z(t,e)&&t.path.substr(e.path.length+(e.path.endsWith("/")?0:1)).split("/").length===1}o(Q,"isChild");function Z(t,e){if(typeof t=="string")return e=typeof e=="string"?e:e.path,e.startsWith("/")||(e=`/${e}`),e.length===1||t.startsWith(e.endsWith("/")?e:`${e}/`);if(typeof e=="string"){e.startsWith("/")||(e=`/${e}`);const n=typeof t=="string"?t:t.path;return e.length===1||n.startsWith(e.endsWith("/")?e:`${e}/`)}return e.scheme===t.scheme&&e.authority===t.authority&&(e.path.length===1||t.path.startsWith(e.path.endsWith("/")?e.path:`${e.path}/`))}o(Z,"isDescendent");function T(t){return t&&typeof t=="object"&&"scheme"in t}o(T,"isSerializedUri");function Y(t){return t.split("/").map(e=>encodeURIComponent(e)).join("/")}o(Y,"encodeURIComponentExceptSlashes");var x;(function(t){t.authoritySeparator="+",t.scheme="vscode-vfs",t.baseVirtualWorkspaceUri=l.Uri.parse(`${t.scheme}://`);function e(d){const{authority:f}=d,h=f.indexOf(t.authoritySeparator);return h!==-1?f.substr(0,h):f}o(e,"getProviderId"),t.getProviderId=e;function n(d){return d.scheme!==t.scheme?d:d.with({scheme:e(d)})}o(n,"getProviderUri"),t.getProviderUri=n;function r(d,f){const h=new Map,p=l.workspace.textDocuments;if(p.length===0)return h;for(const b of p)b.uri.scheme===d&&f.some(te=>Z(b.uri,te))&&h.set(E(b.uri),b.uri);return h}o(r,"getOpenUris"),t.getOpenUris=r;function i(d){return d.scheme===t.scheme?d:d.with({scheme:t.scheme})}o(i,"getVirtualUri"),t.getVirtualUri=i;function a(d,f){const[h,p]=d.authority.split(t.authoritySeparator);let b;if(p)try{const te=JSON.parse(y(p));b=f?f(te):te}catch{}return{scheme:h,metadata:b}}o(a,"decodeAuthority"),t.decodeAuthority=a;function s(d,f){const h=f?`${t.authoritySeparator}${P(JSON.stringify(f))}`:"";return`${d}${h}`}o(s,"encodeAuthority"),t.encodeAuthority=s;function c(d){return d.authority.indexOf(t.authoritySeparator)===-1}o(c,"isCanonicalUri"),t.isCanonicalUri=c;function u(){var d,f;return(f=(d=l.workspace.workspaceFolders)==null?void 0:d.every(h=>h.uri.scheme===t.scheme))!=null?f:!1}o(u,"isVirtualWorkspace"),t.isVirtualWorkspace=u})(x||(x={}));var le;(function(t){t[t.Admin=100]="Admin",t[t.Maintain=40]="Maintain",t[t.WriteToPullRequest=31]="WriteToPullRequest",t[t.Write=30]="Write",t[t.Triage=20]="Triage",t[t.Read=10]="Read",t[t.None=0]="None"})(le||(le={}));var V;(function(t){t[t.Branch=0]="Branch",t[t.RemoteBranch=1]="RemoteBranch",t[t.Tag=2]="Tag",t[t.Commit=3]="Commit"})(V||(V={}));var fe;(function(t){function e(n){return n!==void 0&&n.type===ae.Active}o(e,"isActive"),t.isActive=e})(fe||(fe={}));var Ae;(function(t){function e(n){const r=x.decodeAuthority(n).metadata;if(!(r===void 0||r.idx===void 0)){if(r.idx==="latest")return{type:Ne.Latest};if(N(r.idx))return{type:Ne.SHA,sha:r.idx}}}o(e,"decode"),t.decode=e})(Ae||(Ae={}));var Ne;(function(t){t[t.Latest=1]="Latest",t[t.SHA=2]="SHA"})(Ne||(Ne={}));var ae;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.Indexed=1]="Indexed",t[t.Match=2]="Match",t[t.Active=3]="Active"})(ae||(ae={})),function(t){function e(n){return n!==void 0&&(n===t.Indexed||n===t.Match||n===t.Active)}o(e,"hasIndex"),t.hasIndex=e}(ae||(ae={}));var we;(function(t){t[t.Open=0]="Open",t[t.Closed=1]="Closed",t[t.Merged=2]="Merged"})(we||(we={}));var D;(function(t){t[t.Changed=1]="Changed",t[t.Created=2]="Created",t[t.Deleted=3]="Deleted"})(D||(D={}));var Ve;(function(t){t.CurrentWindow="currentWindow",t.NewWindow="newWindow",t.AddToWorkspace="addToWorkspace"})(Ve||(Ve={}));var ye;(function(t){t[t.Branch=0]="Branch",t[t.Tag=1]="Tag",t[t.Commit=2]="Commit",t[t.PullRequest=3]="PullRequest",t[t.Tree=4]="Tree"})(ye||(ye={}));var ve;(function(t){t[t.Abort=0]="Abort",t[t.KeepCurrent=1]="KeepCurrent",t[t.DiscardCurrent=2]="DiscardCurrent",t[t.Merge=3]="Merge"})(ve||(ve={}));var G;(function(t){t[t.Repository=0]="Repository",t[t.PullRequest=1]="PullRequest",t[t.Branch=2]="Branch",t[t.Commit=3]="Commit",t[t.File=4]="File",t[t.Tag=5]="Tag"})(G||(G={}));var se;(function(t){t.Branch="branch",t.RemoteBranch="remoteBranch",t.PullRequestBranch="pullRequestBranch",t.PullRequestRemoteBranch="pullRequestRemoteBranch",t.Tag="tag",t.Commit="commit"})(se||(se={}));var Re;(function(t){t.None="none",t.Latest="latest",t.Match="match",t.TipPlusLatest="tip+latest"})(Re||(Re={}));var Ge;(function(t){t.Browse="browse",t.Edit="edit"})(Ge||(Ge={}));var ie;(function(t){t.CommitFailedError="CommitFailedError",t.DetachedHEADError="DetachedHEADError",t.CommitToProtectedBranchError="CommitToProtectedBranchError",t.CommitToArchivedRepositoryError="CommitToArchivedRepositoryError",t.InvalidBranchNameError="InvalidBranchNameError",t.InvalidCredentialsError="InvalidCredentialsError",t.MergeConflictError="MergeConflictError",t.NothingToCommitError="NothingToCommitError",t.SyncConflictsError="SyncConflictsError",t.SyncOrFetchError="SyncOrFetchError",t.UnresolvedConflictsError="UnresolvedConflictsError",t.InvalidRepositoryError="InvalidRepositoryError",t.Unknown="Unknown"})(ie||(ie={}));class Ze extends Error{constructor(e,n,r){super(typeof e=="string"?e:e.message);this.messageOrError=e,this.errorCode=n,this.action=r}static CommitFailedError(){return new Ze("Failed to create and push commit",ie.CommitFailedError)}static DetachedHEADError(e){return new Ze(e,ie.DetachedHEADError)}static CommitToProtectedBranchError(e){return new Ze(e,ie.CommitToProtectedBranchError)}static CommitToArchivedRepositoryError(e){return new Ze(e,ie.CommitToArchivedRepositoryError)}static InvalidBranchNameError(e,n=!1){const r=n?`Branch '${e}' already exists`:`Invalid branch name '${e}'`;return new Ze(r,ie.InvalidBranchNameError)}static InvalidCredentialsError(e,n){return new Ze(e,ie.InvalidCredentialsError,n)}static MergeConflictError(e){return new Ze(e,ie.MergeConflictError)}static NothingToCommitError(e){return new Ze(e,ie.NothingToCommitError)}static SyncOrFetchError(e=!1){const n=e?"Unable to sync the repository":"Unable to fetch the repository";return new Ze(n,ie.SyncOrFetchError)}static SyncConflictsError(){const e="Sync operation will result in conflicts";return new Ze(e,ie.SyncConflictsError)}static UnresolvedConflictsError(){return new Ze("You have unresolved merge conflicts.",ie.UnresolvedConflictsError)}static InvalidRepositoryError(){return new Ze("The current repository is invalid",ie.InvalidRepositoryError)}static asVirtualProviderErrorCode(e){return e instanceof Error&&"messageOrError"in e&&"errorCode"in e?e.errorCode:ie.Unknown}}o(Ze,"VirtualProviderError");const ut=6;var yt;(function(t){t.Off="off",t.Auto="auto",t.Always="always"})(yt||(yt={}));var I;(function(t){t.None="none",t.Latest="latest",t.Match="match",t.TipPlusLatest="tip+latest"})(I||(I={})),function(t){function e(n){return n===t.None||n===t.Latest||n===t.Match||n===t.TipPlusLatest?n:t.None}o(e,"sanitize"),t.sanitize=e}(I||(I={}));var U;(function(t){t.Browse="browse",t.Edit="edit"})(U||(U={})),function(t){function e(r){return r===t.Browse||r===t.Edit?r:t.Edit}o(e,"sanitize"),t.sanitize=e;function n(r){return r===t.Browse?t.Edit:t.Browse}o(n,"toggle"),t.toggle=n}(U||(U={}));var ne;(function(t){function e(n,r){return n.display===r.display&&n.index===r.index}o(e,"equals"),t.equals=e})(ne||(ne={}));var de;(function(t){const e=new Map([[se.Branch,I.None],[se.RemoteBranch,I.None],[se.PullRequestBranch,I.Match],[se.PullRequestRemoteBranch,I.Match],[se.Commit,I.Match],[se.Tag,I.Match]]),n=new Map([[se.Branch,U.Edit],[se.RemoteBranch,U.Edit],[se.PullRequestBranch,U.Browse],[se.PullRequestRemoteBranch,U.Browse],[se.Commit,U.Browse],[se.Tag,U.Browse]]);function r(a){var s,c;return{display:(s=n.get(a))!=null?s:U.Edit,index:(c=e.get(a))!=null?c:I.None}}o(r,"getDefault"),t.getDefault=r;function i(a){switch(a){case se.Branch:case se.RemoteBranch:return{display:U.Browse,index:I.Latest};case se.PullRequestBranch:case se.PullRequestRemoteBranch:return{display:U.Browse,index:I.Match};case se.Commit:case se.Tag:return{display:U.Browse,index:I.Match};default:return{display:U.Edit,index:I.None}}}o(i,"getIndexDefault"),t.getIndexDefault=i})(de||(de={}));const Ue=null;var Ie=vr(5179),ce=vr.n(Ie);const Ce="modes",Te="indexMemento";class Ye{constructor(){this._onDidChange=new l.EventEmitter,this._onDidChangeAny=new l.EventEmitter,this.memoryState=new Map}static configure(e,n){pe.configPrefix=e,pe.state=n.workspaceState,n.subscriptions.push(l.workspace.onDidChangeConfiguration(pe.onConfigurationChanged,pe))}get onDidChange(){return this._onDidChange.event}get onDidChangeAny(){return this._onDidChangeAny.event}onConfigurationChanged(e){if(!e.affectsConfiguration(this.configPrefix)){this._onDidChangeAny.fire(e);return}this._onDidChangeAny.fire(e),this._onDidChange.fire(e)}set state(e){if(this._state=e,this.modes=this._state.get(Ce),this.modes===void 0&&(this.modes=Object.create(null)),this.memoryState.size!==0){for(const n of this.memoryState.entries())this.modes[n[0]]=n[1];this._state.update(Ce,this.modes).then(()=>{this.memoryState.clear()},void 0)}this.indexMemento=this._state.get(Te),this.indexMemento===void 0&&(this.indexMemento=Object.create(null))}getEffective(e,n,r){const i=this.inspect(e,n);return i===void 0&&r!==void 0?r:(i==null?void 0:i.workspaceFolderValue)!==void 0?i.workspaceFolderValue:(i==null?void 0:i.workspaceValue)!==void 0?i.workspaceValue:i==null?void 0:i.globalValue}get(e,n,r){return r===void 0?l.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).get(e===void 0?this.configPrefix:e):l.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).get(e===void 0?this.configPrefix:e,r)}getMode(e,n,r){var i;const a=e.toString();let s=this.modes!==void 0?this.modes[a]:void 0;if(s!==void 0)return{display:U.sanitize(s.display),index:I.sanitize(s.index)};if(s=this.memoryState.get(a),s!==void 0)return s;if(n===se.Branch||n===se.RemoteBranch)switch((i=l.workspace.getConfiguration("remoteHub.richNavigation.indexMode",e))==null?void 0:i.get("branch")){case"none":return{display:U.Edit,index:I.None};case"latest":return{display:U.Browse,index:I.Latest};case"tipPlusLatest":return{display:U.Edit,index:I.TipPlusLatest}}if(!r)return de.getDefault(n)}setMode(e,n){const r=e.toString();return this._state===void 0||this.modes===void 0?(this.memoryState.set(r,n),Promise.resolve()):(this.modes[r]=n,this._state.update(Ce,this.modes))}getIndexMemento(e){if(this.indexMemento!==void 0)return this.indexMemento[e.toString()]}setIndexMemento(e,n){return this.indexMemento===void 0||this._state===void 0?Promise.resolve():(this.indexMemento[e.toString()]=n,this._state.update(Te,this.indexMemento))}getAny(e,n,r){return r===void 0?l.workspace.getConfiguration(void 0,n).get(e):l.workspace.getConfiguration(void 0,n).get(e,r)}changed(e,n,r){var i;return(i=e==null?void 0:e.affectsConfiguration(`${this.configPrefix}.${n}`,r))!=null?i:!0}inspect(e,n){return l.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).inspect(e===void 0?this.configPrefix:e)}inspectAny(e,n){return l.workspace.getConfiguration(void 0,n).inspect(e)}async migrate(e,n,r){const i=pe.inspect(e);if(i===void 0)return!1;let a=!1;return i.globalValue!==void 0&&(await this.update(n,r.migrationFn!=null?r.migrationFn(i.globalValue):i.globalValue,l.ConfigurationTarget.Global),a=!0),i.workspaceValue!==void 0&&(await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceValue):i.workspaceValue,l.ConfigurationTarget.Workspace),a=!0),i.workspaceFolderValue!==void 0&&(await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceFolderValue):i.workspaceFolderValue,l.ConfigurationTarget.WorkspaceFolder),a=!0),!a&&r.fallbackValue!==void 0&&(await this.update(n,r.fallbackValue,l.ConfigurationTarget.Global),a=!0),a}async migrateIfMissing(e,n,r){const i=pe.inspect(e);if(i===void 0)return;const a=pe.inspect(n);i.globalValue!==void 0&&(a===void 0||a.globalValue===void 0)&&await this.update(n,r.migrationFn!=null?r.migrationFn(i.globalValue):i.globalValue,l.ConfigurationTarget.Global),i.workspaceValue!==void 0&&(a===void 0||a.workspaceValue===void 0)&&await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceValue):i.workspaceValue,l.ConfigurationTarget.Workspace),i.workspaceFolderValue!==void 0&&(a===void 0||a.workspaceFolderValue===void 0)&&await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceFolderValue):i.workspaceFolderValue,l.ConfigurationTarget.WorkspaceFolder)}name(e){return e}update(e,n,r){return l.workspace.getConfiguration(this.configPrefix).update(e,n,r)}updateAny(e,n,r,i){return l.workspace.getConfiguration(void 0,r===l.ConfigurationTarget.Global?void 0:i).update(e,n,r)}updateEffective(e,n){const r=pe.inspect(e);return r.workspaceFolderValue!==void 0?n===r.workspaceFolderValue?Promise.resolve(void 0):pe.update(e,n,l.ConfigurationTarget.WorkspaceFolder):r.workspaceValue!==void 0?n===r.workspaceValue?Promise.resolve(void 0):pe.update(e,n,l.ConfigurationTarget.Workspace):r.globalValue===n||r.globalValue===void 0&&n===r.defaultValue?Promise.resolve(void 0):pe.update(e,ce()(n,r.defaultValue)?void 0:n,l.ConfigurationTarget.Global)}}o(Ye,"Configuration");const pe=new Ye,ke="";var et;(function(t){t.Off="off",t.Error="error",t.Warn="warn",t.Info="info",t.Debug="debug"})(et||(et={}));var nt;(function(t){t[t.Off=0]="Off",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Info=3]="Info",t[t.Debug=4]="Debug"})(nt||(nt={}));const be="[RemoteHub]",H=o(class{static configure(t,e,n){this._isDebugging=t.extensionMode===l.ExtensionMode.Development,this.outputChannelName=e,this.logLevel=n}static enabled(t){return this.level>=this.toOrderedLevel(t)}static get logLevel(){return this._logLevel}static set logLevel(t){var e,n;this._logLevel=t,this.level=this.toOrderedLevel(t),t===et.Off?((e=this.output)==null||e.dispose(),this.output=void 0):this.output=(n=this.output)!=null?n:l.window.createOutputChannel(this.outputChannelName)}static toOrderedLevel(t){switch(t){case et.Off:return 0;case et.Error:return 1;case et.Warn:return 2;case et.Info:return 3;case et.Debug:return 4}}static get isDebugging(){return this._isDebugging}static debug(t,...e){H.isDebugging&&console.log(this.timestamp,be,t!=null?t:ke,...e),!(this.output===void 0||this.level<4)&&this.output.appendLine(`${this.timestamp} ${t!=null?t:ke}${this.toLoggableParams(!0,e)}`)}static error(t,e,...n){if(!(this.level<1&&!H.isDebugging)){if(e===void 0){const r=t instanceof Error?t.stack:void 0;if(r){const i=/.*\s*?at\s(.+?)\s/.exec(r);i!==null&&(e=i[1])}}H.isDebugging&&console.error(this.timestamp,be,e!=null?e:ke,...n,t),!(this.output===void 0||this.level<1)&&this.output.appendLine(`${this.timestamp} ${e!=null?e:ke}${this.toLoggableParams(!1,n)}
${String(t)}`)}}static log(t,...e){H.isDebugging&&console.log(this.timestamp,be,t!=null?t:ke,...e),!(this.output===void 0||this.level<3)&&this.output.appendLine(`${this.timestamp} ${t!=null?t:ke}${this.toLoggableParams(!1,e)}`)}static warn(t,...e){H.isDebugging&&console.warn(this.timestamp,be,t!=null?t:ke,...e),!(this.output===void 0||this.level<2)&&this.output.appendLine(`${this.timestamp} ${t!=null?t:ke}${this.toLoggableParams(!1,e)}`)}static showOutputChannel(){var t;(t=this.output)==null||t.show()}static toLoggable(t,e){if(typeof t!="object")return String(t);if(t instanceof l.Uri)return`Uri(${t.toString(!0)})`;try{return JSON.stringify(t,e)}catch{return"<error>"}}static toLoggableName(t){var e,n,r;let i;if(typeof t=="function"){if(t.prototype===void 0||t.prototype.constructor===void 0)return t.name;i=(e=t.prototype.constructor.name)!=null?e:ke}else i=(r=(n=t.constructor)==null?void 0:n.name)!=null?r:ke;const a=i.indexOf("_");return a===-1?i:i.substr(a+1)}static get timestamp(){const t=new Date;return`[${t.toISOString().replace(/T/," ").replace(/\..+/,ke)}:${`00${t.getUTCMilliseconds()}`.slice(-3)}]`}static toLoggableParams(t,e){if(e.length===0||t&&this.level<4&&!H.isDebugging)return ke;const n=e.map(r=>this.toLoggable(r)).join(", ");return n.length!==0?` \u2014 ${n}`:ke}},"_Logger");let K=H;K.level=0,K._logLevel=et.Off;const Qe=new TextDecoder,Jt=new TextEncoder;async function Rn(t){const e=typeof t=="string"?Jt.encode(t):t;let n;if(globalThis.crypto.subtle)n=await globalThis.crypto.subtle.digest({name:"sha-1"},e);else{const r=new cr;r.update(e),n=r.digest()}return globalThis.btoa(encodeURIComponent(Qe.decode(n)))}o(Rn,"sha1");async function Pn(t){const e=await globalThis.crypto.subtle.digest({name:"sha-256"},t);return Array.from(new Uint8Array(e)).map(r=>r.toString(16).padStart(2,"0")).join("")}o(Pn,"sha256");var wn;(function(t){t[t.BLOCK_SIZE=64]="BLOCK_SIZE"})(wn||(wn={}));function lr(t,e,n=32){const r=n-e,i=~((1<<r)-1);return(t<<e|(i&t)>>>r)>>>0}o(lr,"leftRotate");function sr(t,e=0,n=t.byteLength,r=0){for(let i=0;i<n;i++)t[e+i]=r}o(sr,"fill");const mr=o(class{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._finished=!1}update(t){const e=this._buff;let n=this._buffLen,r=0;const i=t.byteLength;for(;r<i;){const a=Math.min(64-n,i-r);for(let s=0;s<a;s++)e[n++]=t[r++];n>=64&&(this._step(),n-=64,this._totalLen+=64)}this._buffLen=n}digest(){this._finished||(this._finished=!0,this._totalLen+=this._buffLen,this._wrapUp());const t=new ArrayBuffer(20),e=new DataView(t);return e.setUint32(0,this._h0,!1),e.setUint32(4,this._h1,!1),e.setUint32(8,this._h2,!1),e.setUint32(12,this._h3,!1),e.setUint32(16,this._h4,!1),t}_wrapUp(){this._buff[this._buffLen++]=128,sr(this._buff,this._buffLen),this._buffLen>56&&(this._step(),sr(this._buff));const t=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(t/4294967296),!1),this._buffDV.setUint32(60,t%4294967296,!1),this._step()}_step(){const t=mr._bigBlock32,e=this._buffDV;for(let f=0;f<64;f+=4)t.setUint32(f,e.getUint32(f,!1),!1);for(let f=64;f<320;f+=4)t.setUint32(f,lr(t.getUint32(f-12,!1)^t.getUint32(f-32,!1)^t.getUint32(f-56,!1)^t.getUint32(f-64,!1),1),!1);let n=this._h0,r=this._h1,i=this._h2,a=this._h3,s=this._h4,c,u,d;for(let f=0;f<80;f++)f<20?(c=r&i|~r&a,u=1518500249):f<40?(c=r^i^a,u=1859775393):f<60?(c=r&i|r&a|i&a,u=2400959708):(c=r^i^a,u=3395469782),d=lr(n,5)+c+s+u+t.getUint32(f*4,!1)&4294967295,s=a,a=i,i=lr(r,30),r=n,n=d;this._h0=this._h0+n&4294967295,this._h1=this._h1+r&4294967295,this._h2=this._h2+i&4294967295,this._h3=this._h3+a&4294967295,this._h4=this._h4+s&4294967295}},"_SHA1Computer");let cr=mr;cr._bigBlock32=new DataView(new ArrayBuffer(320));function yr(t){const e=globalThis.atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return r}o(yr,"fromBase64");const{fromCharCode:ht}=String;function Gt(t){let e;if(typeof t=="string")e=t;else{e="";for(let n=0,{length:r}=t;n<r;n++)e+=ht(t[n])}return globalThis.btoa(e)}o(Gt,"toBase64");function on(t,e){if(t===e)return-1;let n=0;for(;t[n]===e[n];)n++;return n}o(on,"indexOfDifference");function sn(t){return t.replace(/[\\{}*+?|^$.[\]()]/g,"\\$&")}o(sn,"escapeRegExpCharacters");let jt;var _n;(function(t){function e(n){const r=pr(n);return jt=l.env.uiKind===l.UIKind.Web,K.warn(`Running on the ${jt?"web":"desktop"}${n.extensionRuntime!==l.ExtensionRuntime.Node?" in a webworker":""}; workspaceId=${r}; storageUri=${n.globalStorageUri.toString(!0)}`),r}o(e,"configure"),t.configure=e})(_n||(_n={}));const Jn=/\/workspaceStorage\/(?<id>[^/]+)/i;function pr(t){var e;if(t.storageUri===void 0)return"";const n=Jn.exec(t.storageUri.path);let r;if((e=n==null?void 0:n.groups)==null?void 0:e.id)r=n.groups.id;else{r=t.storageUri.path;const i=on(t.globalStorageUri.path,r),a=`/${t.extension.id}`;r.endsWith(a)?r=r.slice(i,-a.length):r=r.substr(i)}return/-[0-9]$/.test(r)?r.slice(0,-2):r}o(pr,"getWorkspaceId");var Qn;(function(t){t.HasVirtualFolders="remoteHub:hasVirtualFolders",t.VirtualFolderProviders="remoteHub:virtualFolderProviders",t.HasRecentRepositories="remoteHub:hasRecentRepositories",t.ActiveResourceHasChanges="remoteHub:activeResourceHasChanges",t.HasSearchIndexes="gitHub:hasSearchIndexes",t.EnabledSomeSearchIndexes="gitHub:enabledSomeSearchIndexes",t.EnabledAllSearchIndexes="gitHub:enabledAllSearchIndexes",t.HasPullRequestExtension="gitHub:hasPullRequestExtension"})(Qn||(Qn={}));const Rr=new Map;function Kr(t){return t==="isWeb"?isWeb:t==="remoteName"?env.remoteName:t==="virtualWorkspace"?VirtualProviderUtils.isVirtualWorkspace():t.startsWith("config.")?configuration.getAny(t.substring(7)):Rr.get(t)}o(Kr,"getContext");function Cr(t){return t==="isWeb"||t==="remoteName"||t==="virtualWorkspace"||t.startsWith("config.")||t.startsWith("remoteHub:")||t.startsWith("continueOn:")}o(Cr,"isSupportedContextKey");async function wr(t,e){Rr.set(t,e),!t.startsWith("continueOn:")&&await l.commands.executeCommand("setContext",t,e)}o(wr,"setContext");const Nr=o(async(t,e,n)=>{const r=await Promise.resolve().then(vr.bind(vr,850)),i=await Promise.resolve().then(vr.bind(vr,5229)),a=new r.AppInsightsCore,s=new i.PostChannel,c={instrumentationKey:t,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[s]]};if(n){c.extensionConfig={};const f={alwaysUseXhrOverride:!0,httpXHROverride:n};c.extensionConfig[s.identifier]=f}const d=e.workspace.getConfiguration("telemetry").get("internalTesting");return a.initialize(c,[]),a.addTelemetryInitializer(f=>{var h,p;!d||(f.ext=(h=f.ext)!=null?h:{},f.ext.utc=(p=f.ext.utc)!=null?p:{},f.ext.utc.flags=8462029)}),a},"getAICore"),Ln=o(async(t,e,n)=>{const r=await Nr(t,e,n);return{logEvent:(a,s)=>{try{r==null||r.track({name:a,baseData:{name:a,properties:s==null?void 0:s.properties,measurements:s==null?void 0:s.measurements}})}catch(c){throw new Error(`Failed to log event to app insights!
`+c.message)}},flush:async()=>{try{r==null||r.unload()}catch(a){throw new Error(`Failed to flush app insights!
`+a.message)}}}},"oneDataSystemClientFactory");var On;(function(t){t[t.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",t[t.INSTANTIATING=1]="INSTANTIATING",t[t.INSTANTIATED=2]="INSTANTIATED"})(On||(On={}));class br{constructor(e,n){this._instantiationStatus=On.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=n,this._key=e}sendEventData(e,n){if(!this._telemetryClient){this._instantiationStatus!==On.INSTANTIATED&&this._eventQueue.push({eventName:e,data:n});return}this._telemetryClient.logEvent(e,n)}sendErrorData(e,n){if(!this._telemetryClient){this._instantiationStatus!==On.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:n});return}}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:n})=>this.sendEventData(e,n)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:n})=>this.sendErrorData(e,n)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===On.NOT_INSTANTIATED&&(this._instantiationStatus=On.INSTANTIATING,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=On.INSTANTIATED,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=On.INSTANTIATED}))}}o(br,"BaseTelemetrySender");class Gr{constructor(e,n,r){this.telemetrySender=e,this.vscodeAPI=n,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,r),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,n,r,i){i?this.telemetrySender.sendEventData(e,{properties:n,measurements:r}):this.telemetryLogger.logUsage(e,{properties:n,measurements:r})}sendTelemetryEvent(e,n,r){this.internalSendTelemetryEvent(e,n,r,!1)}sendDangerousTelemetryEvent(e,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,n,r,!0)}internalSendTelemetryErrorEvent(e,n,r,i){i?this.telemetrySender.sendEventData(e,{properties:n,measurements:r}):this.telemetryLogger.logError(e,{properties:n,measurements:r})}sendTelemetryErrorEvent(e,n,r){this.internalSendTelemetryErrorEvent(e,n,r,!1)}sendDangerousTelemetryErrorEvent(e,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,n,r,!0)}internalSendTelemetryException(e,n,r,i){i?this.telemetrySender.sendErrorData(e,{properties:n,measurements:r}):this.telemetryLogger.logError(e,{properties:n,measurements:r})}sendTelemetryException(e,n,r){this.internalSendTelemetryException(e,n,r,!1)}sendDangerousTelemetryException(e,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryException(e,n,r,!0)}dispose(){return this.telemetryLogger.dispose(),Promise.all(this.disposables.map(e=>e.dispose()))}}o(Gr,"BaseTelemetryReporter");class Tr{static applyReplacements(e,n){for(const r of Object.keys(e))for(const i of n)i.lookup.test(r)&&(i.replacementString!==void 0?e[r]=i.replacementString:delete e[r])}static shouldUseOneDataSystemSDK(e){return e.length===74&&e[32]==="-"&&e[41]==="-"&&e[46]==="-"&&e[51]==="-"&&e[56]==="-"&&e[69]==="-"}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.7.7"}}static getInstance(){return Tr._instance||(Tr._instance=new Tr),Tr._instance}}o(Tr,"TelemetryUtil");const pi=o(async(t,e)=>{let n;try{const i=await Promise.resolve().then(vr.bind(vr,3268));n=new i.ApplicationInsights({instrumentationKey:t,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0})}catch(i){return Promise.reject(i)}return{logEvent:(i,a)=>{const s={...a==null?void 0:a.properties,...a==null?void 0:a.measurements};(e==null?void 0:e.length)&&Tr.applyReplacements(s,e),n==null||n.track({name:i,data:s})},flush:async()=>{n==null||n.flush()}}},"webAppInsightsClientFactory");function _r(t){if(t.userAgentData){const e=t.userAgentData.brands[t.userAgentData.brands.length-1];return`${t.userAgentData.platform} - ${e==null?void 0:e.brand} v${e==null?void 0:e.version}}`}else return t.appVersion}o(_r,"getBrowserRelease");class M extends Gr{constructor(e,n){let r=o(s=>pi(s,n),"clientFactory");Tr.shouldUseOneDataSystemSDK(e)&&(r=o(s=>Ln(s,l),"clientFactory"));const i={release:_r(navigator),platform:"web",architecture:"web"},a=new br(e,r);if(e&&e.indexOf("AIF")===0)throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(a,l,{additionalCommonProperties:Tr.getAdditionalCommonProperties(i)})}}o(M,"TelemetryReporter");const ue="Type of classified event does not match event properties",Ee=o(class{constructor(t){this.context=t,this.sharedProperties={},Ee._instance=this,this.reporter=new M(Ee.ingestionKey)}static get instance(){return this._instance}dispose(){this.reporter.dispose()}publicLog2(t,e){e!==ue&&this.reporter.sendTelemetryEvent(t,{...this.sharedProperties,...e})}sendEvent(t,e,n){this.reporter.sendTelemetryEvent(t,{...this.sharedProperties,...e},n)}sendErrorEvent(t,e,n){this.reporter.sendTelemetryErrorEvent(t,{...this.sharedProperties,...e},n)}sendException(t,e,n){this.reporter.sendTelemetryException(t,{...this.sharedProperties,...e},n)}setSharedProperty(t,e){this.sharedProperties[t]=e}reportWorkbenchLoadResult(t){const e="_codespaces.webeditor.connectWorkspace";l.env.appHost==="github.dev"&&(K.debug(`Executing ${e}`),t={...t,errorDetail:t.errorDetail instanceof Error?t.errorDetail.name:void 0},l.commands.executeCommand(e,t).then(n=>{},n=>{K.debug(`Failed to execute ${e}`,n)}))}},"_TelemetryService");let Le=Ee;Le.ingestionKey="0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255";function tt(t,e){const n=l.l10n.t("Report Issue"),r=l.l10n.t("Reload");l.window.showErrorMessage(l.l10n.t("The {0} extension failed to activate.",t.extension.packageJSON.displayName),{modal:!0,detail:l.l10n.t("Please try reloading the window, or report an issue.")},r,n).then(i=>{i===n?l.commands.executeCommand("workbench.action.openIssueReporter",{extensionId:t.extension.id,issueTitle:"Extension activation failed",issueBody:e instanceof Error?e.toString():void 0}):i===r&&l.commands.executeCommand("workbench.action.reloadWindow")})}o(tt,"handleExtensionActivationError");function qe(t){const e=performance.now()*.001;let n=Math.floor(e),r=Math.floor(e%1*1e9);return t!==void 0&&(n=n-t[0],r=r-t[1],r<0&&(n--,r+=1e9)),[n,r]}o(qe,"hrtime");let dt=0;function Dt(){return dt===Number.MAX_SAFE_INTEGER&&(dt=0),++dt}o(Dt,"getNextInstanceId");const Tt=o(class{constructor(t,e,...n){this.context=t,this.instance=`[${Dt().toString().padStart(5)}] `;var r,i,a,s,c,u;let d;if(typeof(e==null?void 0:e.log)=="boolean"?d=e.log?{}:void 0:d=(r=e==null?void 0:e.log)!=null?r:{},this.logLevel=(i=e==null?void 0:e.logLevel)!=null?i:et.Info,this.time=qe(),d){if(!K.enabled(this.logLevel))return;n.length?bt(this.logLevel,`${this.instance}${(a=d.prefix)!=null?a:""}${t}${(s=d.message)!=null?s:""}`,...n):bt(this.logLevel,`${this.instance}${(c=d.prefix)!=null?c:""}${t}${(u=d.message)!=null?u:""}`)}}log(t){this.logCore(this.context,t,!1)}logStep(t,e){(!t||e)&&this.logCore(this.context,e,!1),this.step=t?{time:qe(),label:t}:void 0}restart(t){this.logCore(this.context,t,!0),this.step=void 0,this.time=qe()}stop(t){this.restart(t)}logCore(t,e,n){var r,i,a,s,c,u,d;if(!K.enabled(this.logLevel))return;let f="";if(this.step){const[te,A]=qe(this.step.time),ee=te*1e3+Math.floor(A/1e6);f=`${this.step.label?`${this.step.label} took `:""}${ee} ms`}if(!n){bt(this.logLevel,`${this.instance}${(r=e==null?void 0:e.prefix)!=null?r:""}${t}${(i=e==null?void 0:e.message)!=null?i:""}${f?` ${f}`:""}${(a=e==null?void 0:e.suffix)!=null?a:""}`);return}const[h,p]=qe(this.time),b=h*1e3+Math.floor(p/1e6);bt(b>500?et.Warn:this.logLevel,`${this.instance}${(s=e==null?void 0:e.prefix)!=null?s:""}${t}${(c=e==null?void 0:e.message)!=null?c:""}${(u=e==null?void 0:e.took)!=null?u:" took "}${b} ms${f?` (${f})`:""}${(d=e==null?void 0:e.suffix)!=null?d:""}`)}static start(t,e,...n){var r;(r=Tt.watches.get(t))==null||r.log(),Tt.watches.set(t,new Tt(t,e,...n))}static log(t,e){var n;(n=Tt.watches.get(t))==null||n.log(e)}static stop(t,e){var n;(n=Tt.watches.get(t))==null||n.stop(e),Tt.watches.delete(t)}},"_Stopwatch");let _t=Tt;_t.watches=new Map;function bt(t,e,...n){switch(t){case et.Warn:K.warn(e,...n);break;case et.Info:K.log(e,...n);break;default:K.debug(e,...n);break}}o(bt,"log");class Ot{constructor(e){this.providerService=e}async provideCanonicalUri(e,n){var r,i;if(n.targetScheme==="https")switch(e.scheme){case x.scheme:{const a=this.providerService.getRepository(e);if(!a)return;const s=await this.providerService.getRepositoryContext(a,"http");return s.uri?l.Uri.parse(s.uri.endsWith(".git")?s.uri.slice(0,-4):s.uri):void 0}default:return(i=(r=this.providerService).getHttpsCloneUri)==null?void 0:i.call(r,e)}}}o(Ot,"CanonicalUriProvider"),Ot.SupportedSchemes=["https","ssh",x.scheme];class Bt{constructor(e){this.providerService=e,this.providers=[],this.handledRepositories=new Set,this.services=new Map,this.disposable=l.Disposable.from(e.onDidChangeRepositories(n=>{for(const r of n.added)this.repositoryOpened(r);for(const r of n.removed)this.repositoryClosed(r)}),pe.onDidChange(n=>{for(const r of this.services.values()){const i=r.service.getRepository();n.affectsConfiguration("remoteHub.richNavigation.indexMode",i.uri)&&r.service.updateIndexMode().catch(a=>{K.error(a)})}}));for(const n of this.providerService.repositories)this.repositoryOpened(n)}dispose(){this.disposable.dispose()}register(e){const n=this.providers.length;return this.providers.push(e),{dispose:()=>this.providers.splice(n,1)}}async repositoryOpened(e){const n=E(e.uri);if(!this.handledRepositories.has(n)){this.handledRepositories.add(n);for(const r of this.providers){const i=await r.createNavigationService(this.providerService,e);if(i!==void 0){const a=i();this.services.set(n,{service:a});break}}}}repositoryClosed(e){const n=E(e.uri);this.handledRepositories.delete(n);const r=this.services.get(n);r!==void 0&&(r.service.dispose(),this.services.delete(E(e.uri)))}}o(Bt,"CodeNavigationServices");const Wt=globalThis.fetch;async function Mt(t,e,n){const r=new AbortController;n.onCancellationRequested(()=>r.abort());try{return await globalThis.fetch(t,{...e,signal:r.signal})}catch(i){throw n.isCancellationRequested?new l.CancellationError:i}}o(Mt,"fetchWithCancellation");async function Kn(t,e,n,r,i){if(n===0)throw new CancellationError;const a=new CancellationTokenSource;r.onCancellationRequested(()=>a.cancel());try{const s=await Mt(t,e,a.token);if(s.body){const c=[];let u=0;const d=s.body.getReader();let f=3;for(;;){let{done:h,value:p}=await d.read();if(h){const te=c.reduce((me,re)=>me+re.length,0),A=new Uint8Array(te);let ee=0;for(const me of c)A.set(me,ee),ee+=me.length;return A}p&&(c.push(p),u+=p.length);const b=Math.floor(u/(1024*1024));if(f<b){f=b;const te={message:b+" MB"};i.report(te)}if(n!==void 0&&u>n)throw d.cancel(),a.cancel(),new Error("LIMIT_HIT")}}}catch(s){throw r.isCancellationRequested?new CancellationError:s}throw new CancellationError}o(Kn,"fetchUInt8ArrayWithMaxSizeAndCancellation");const En=globalThis.crypto;function Sr(){return En.randomUUID()}o(Sr,"uuid");/*! (c) Andrea Giammarchi - ISC */var Xn={};try{(function(t,e){if(new t("q=%2B").get("q")!==e||new t({q:e}).get("q")!==e||new t([["q",e]]).get("q")!==e||new t(`q=
`).toString()!=="q=%0A"||new t({q:" &"}).toString()!=="q=+%26"||new t({q:"%zx"}).toString()!=="q=%25zx")throw t;Xn.URLSearchParams=t})(URLSearchParams,"+")}catch(t){(function(e,n,r){"use strict";var i=e.create,a=e.defineProperty,s=/[!'\(\)~]|%20|%00/g,c=/%(?![0-9a-fA-F]{2})/g,u=/\+/g,d={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},f={append:function(re,Pe){te(this._ungap,re,Pe)},delete:function(re){delete this._ungap[re]},get:function(re){return this.has(re)?this._ungap[re][0]:null},getAll:function(re){return this.has(re)?this._ungap[re].slice(0):[]},has:function(re){return re in this._ungap},set:function(re,Pe){this._ungap[re]=[n(Pe)]},forEach:function(re,Pe){var Fe=this;for(var $e in Fe._ungap)Fe._ungap[$e].forEach(je,$e);function je(it){re.call(Pe,it,n($e),Fe)}o(je,"invoke")},toJSON:function(){return{}},toString:function(){var re=[];for(var Pe in this._ungap)for(var Fe=ee(Pe),$e=0,je=this._ungap[Pe];$e<je.length;$e++)re.push(Fe+"="+ee(je[$e]));return re.join("&")}};for(var h in f)a(p.prototype,h,{configurable:!0,writable:!0,value:f[h]});Xn.URLSearchParams=p;function p(re){var Pe=i(null);switch(a(this,"_ungap",{value:Pe}),!0){case!re:break;case typeof re=="string":re.charAt(0)==="?"&&(re=re.slice(1));for(var Fe=re.split("&"),$e=0,je=Fe.length;$e<je;$e++){var it=Fe[$e],Je=it.indexOf("=");-1<Je?te(Pe,A(it.slice(0,Je)),A(it.slice(Je+1))):it.length&&te(Pe,A(it),"")}break;case r(re):for(var $e=0,je=re.length;$e<je;$e++){var it=re[$e];te(Pe,it[0],it[1])}break;case"forEach"in re:re.forEach(b,Pe);break;default:for(var xt in re)te(Pe,xt,re[xt])}}o(p,"URLSearchParams");function b(re,Pe){te(this,Pe,re)}o(b,"addEach");function te(re,Pe,Fe){var $e=r(Fe)?Fe.join(","):Fe;Pe in re?re[Pe].push($e):re[Pe]=[$e]}o(te,"appendTo");function A(re){return decodeURIComponent(re.replace(c,"%25").replace(u," "))}o(A,"decode");function ee(re){return encodeURIComponent(re).replace(s,me)}o(ee,"encode");function me(re){return d[re]}o(me,"replacer")})(Object,String,Array.isArray)}(function(t){var e=!1;try{e=!!Symbol.iterator}catch(r){}"forEach"in t||(t.forEach=o(function(i,a){var s=this,c=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach(function(u){!u.length||u in c||(c[u]=s.getAll(u)).forEach(function(d){i.call(a,d,u,s)})})},"forEach")),"keys"in t||(t.keys=o(function(){return n(this,function(i,a){this.push(a)})},"keys")),"values"in t||(t.values=o(function(){return n(this,function(i,a){this.push(i)})},"values")),"entries"in t||(t.entries=o(function(){return n(this,function(i,a){this.push([a,i])})},"entries")),e&&!(Symbol.iterator in t)&&(t[Symbol.iterator]=t.entries),"sort"in t||(t.sort=o(function(){for(var i=this.entries(),a=i.next(),s=a.done,c=[],u=Object.create(null),d,f,h;!s;)h=a.value,f=h[0],c.push(f),f in u||(u[f]=[]),u[f].push(h[1]),a=i.next(),s=a.done;for(c.sort(),d=0;d<c.length;d++)this.delete(c[d]);for(d=0;d<c.length;d++)f=c[d],this.append(f,u[f].shift())},"sort"));function n(r,i){var a=[];return r.forEach(i,a),e?a[Symbol.iterator]():{next:function(){var s=a.shift();return{done:s===void 0,value:s}}}}o(n,"iterator"),function(r){var i=r.defineProperty,a=r.getOwnPropertyDescriptor,s=o(function(h){function p(A,ee){t.append.call(this,A,ee),A=this.toString(),h.set.call(this._usp,A?"?"+A:"")}o(p,"append");function b(A){t.delete.call(this,A),A=this.toString(),h.set.call(this._usp,A?"?"+A:"")}o(b,"del");function te(A,ee){t.set.call(this,A,ee),A=this.toString(),h.set.call(this._usp,A?"?"+A:"")}return o(te,"set"),function(A,ee){return A.append=p,A.delete=b,A.set=te,i(A,"_usp",{configurable:!0,writable:!0,value:ee})}},"createSearchParamsPollute"),c=o(function(h){return function(p,b){return i(p,"_searchParams",{configurable:!0,writable:!0,value:h(b,p)}),b}},"createSearchParamsCreate"),u=o(function(h){var p=h.append;h.append=t.append,URLSearchParams.call(h,h._usp.search.slice(1)),h.append=p},"updateSearchParams"),d=o(function(h,p){if(!(h instanceof p))throw new TypeError("'searchParams' accessed on an object that does not implement interface "+p.name)},"verifySearchParams"),f=o(function(h){var p=h.prototype,b=a(p,"searchParams"),te=a(p,"href"),A=a(p,"search"),ee;!b&&A&&A.set&&(ee=c(s(A)),r.defineProperties(p,{href:{get:function(){return te.get.call(this)},set:function(me){var re=this._searchParams;te.set.call(this,me),re&&u(re)}},search:{get:function(){return A.get.call(this)},set:function(me){var re=this._searchParams;A.set.call(this,me),re&&u(re)}},searchParams:{get:function(){return d(this,h),this._searchParams||ee(this,new URLSearchParams(this.search.slice(1)))},set:function(me){d(this,h),ee(this,me)}}}))},"upgradeClass");try{f(HTMLAnchorElement),/^function|object$/.test(typeof URL)&&URL.prototype&&f(URL)}catch(h){}}(Object)})(Xn.URLSearchParams.prototype,Object);const ur=Xn.URLSearchParams,zr=60,Vr=zr*60,$n=Vr*24,mi=$n*7,Vt=$n*30,tr=$n*365;function An(t,e){typeof t!="number"&&(t=t.getTime());const n=Math.round((new Date().getTime()-t)/1e3);if(n<-30)return l.l10n.t("in {0}",An(new Date().getTime()+n*1e3,{ago:!1,short:e==null?void 0:e.short}));if(n<30)return(e==null?void 0:e.ago)?(e==null?void 0:e.short)?l.l10n.t("secs ago"):l.l10n.t("A few seconds ago"):(e==null?void 0:e.short)?l.l10n.t("now"):l.l10n.t("Just now");let r;return n<zr?(r=n,(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} sec ago",r):l.l10n.t("{0} second ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} secs ago",r):l.l10n.t("{0} seconds ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} sec",r):l.l10n.t("{0} second",r):(e==null?void 0:e.short)?l.l10n.t("{0} secs",r):l.l10n.t("{0} seconds",r)):n<Vr?(r=Math.floor(n/zr),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} min ago",r):l.l10n.t("{0} minute ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} mins ago",r):l.l10n.t("{0} minutes ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} min",r):l.l10n.t("{0} minute",r):(e==null?void 0:e.short)?l.l10n.t("{0} mins",r):l.l10n.t("{0} minutes",r)):n<$n?(r=Math.floor(n/Vr),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} hr ago",r):l.l10n.t("{0} hour ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} hrs ago",r):l.l10n.t("{0} hours ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} hr",r):l.l10n.t("{0} hour",r):(e==null?void 0:e.short)?l.l10n.t("{0} hrs",r):l.l10n.t("{0} hours",r)):n<mi?(r=Math.floor(n/$n),(e==null?void 0:e.ago)?r===1?l.l10n.t("{0} day ago",r):l.l10n.t("{0} days ago",r):r===1?l.l10n.t("{0} day",r):l.l10n.t("{0} days",r)):n<Vt?(r=Math.floor(n/mi),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} wk ago",r):l.l10n.t("{0} week ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} wks ago",r):l.l10n.t("{0} weeks ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} wk",r):l.l10n.t("{0} week",r):(e==null?void 0:e.short)?l.l10n.t("{0} wks",r):l.l10n.t("{0} weeks",r)):n<tr?(r=Math.floor(n/Vt),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} mo ago",r):l.l10n.t("{0} month ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} mos ago",r):l.l10n.t("{0} months ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} mo",r):l.l10n.t("{0} month",r):(e==null?void 0:e.short)?l.l10n.t("{0} mos",r):l.l10n.t("{0} months",r)):(r=Math.floor(n/tr),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} yr ago",r):l.l10n.t("{0} year ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} yrs ago",r):l.l10n.t("{0} years ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} yr",r):l.l10n.t("{0} year",r):(e==null?void 0:e.short)?l.l10n.t("{0} yrs",r):l.l10n.t("{0} years",r))}o(An,"fromNow");var Sn,fn;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(fn||(fn={}));class nr{constructor(){this[Sn]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)==null?void 0:e.value}get last(){var e;return(e=this._tail)==null?void 0:e.value}has(e){return this._map.has(e)}get(e,n=fn.None){const r=this._map.get(e);if(!!r)return n!==fn.None&&this.touch(r,n),r.value}set(e,n,r=fn.None){let i=this._map.get(e);if(i)i.value=n,r!==fn.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case fn.None:this.addItemLast(i);break;case fn.First:this.addItemFirst(i);break;case fn.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return Boolean(this.remove(e))}remove(e){const n=this._map.get(e);if(!!n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){const r=this._state;let i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const e=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:n.key,done:!1};return n=n.next,i}return{value:void 0,done:!0}}};return r}values(){const e=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:n.value,done:!1};return n=n.next,i}return{value:void 0,done:!0}}};return r}entries(){const e=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:[n.key,n.value],done:!1};return n=n.next,i}return{value:void 0,done:!0}}};return r}[(Sn=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==fn.First&&n!==fn.Last)){if(n===fn.First){if(e===this._head)return;const r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===fn.Last){if(e===this._tail)return;const r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(const[n,r]of e)this.set(n,r)}}o(nr,"LinkedMap");class Zn extends nr{constructor(e,n=1){super();this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=fn.AsNew){return super.get(e,n)}peek(e){return super.get(e,fn.None)}set(e,n){return super.set(e,n,fn.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}o(Zn,"LRUCache");class Or{constructor(e){this.defaultDelay=e}dispose(){this.cancelTimeout()}debounce(e,n=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((r,i)=>{this.resolver=r,this.rejecter=i}).then(()=>{if(this.completionPromise=void 0,this.resolver=void 0,this.task){const r=this.task;return this.task=void 0,r()}})),this.timeout=setTimeout(()=>{var r;this.timeout=void 0,(r=this.resolver)==null||r.call(this,void 0)},n),this.completionPromise}cancel(){var e;this.cancelTimeout(),this.completionPromise&&((e=this.rejecter)==null||e.call(this,new Error("Canceled")),this.completionPromise=void 0)}cancelTimeout(){this.timeout!==void 0&&(clearTimeout(this.timeout),this.timeout=void 0)}}o(Or,"TaskDebouncer");const yi=Symbol("QuickPickGoBack");var wi;(function(t){async function e(n,r,i,a,s){const c=[],u=n.getRemoteWorkspaceSourceProviders();c.push(...u.map(b=>new Ni(b)));const d=await n.getRecentWorkspaceSourceProviders();if(d){const b=await d.provideSources();if(b){const te=b.reduce((A,ee)=>("providerId"in ee&&A.push({label:`${ee.icon?`${ee.icon} `:""}${ee.name}`,description:ee.description,detail:ee.detail,url:ee.url,workspace:ee.url?void 0:ee.workspace,buttons:[Hr.OpenInNewWindow],showMore:void 0}),A),[]);c.push({label:l.l10n.t("recently opened"),kind:l.QuickPickItemKind.Separator},...te)}}const f=l.window.createQuickPick(),h=[];let p=r;try{for(;;){const b=await new Promise(te=>{h.push(f.onDidHide(()=>te(void 0)),f.onDidChangeValue(A=>{A=A.trim(),A.length===0?f.items=c:f.activeItems.length===0||f.activeItems[0]instanceof Si?f.items=[new Si(n,A),...c]:f.items=c}),f.onDidAccept(()=>{if(f.activeItems.length!==0){const[A]=f.activeItems;(!(A instanceof Si)||A.validate())&&te(A)}}),f.onDidChangeActive(()=>{if(p!==void 0||!(s==null?void 0:s.allowAddToWorkspace))return;const[A]=f.activeItems;let ee=!0;if(A===void 0?ee=Boolean(f.value):ee=A instanceof Si,ee){if(f.buttons.length===1)return;f.buttons=[Hr.AddToWorkspace]}else{if(f.buttons.length===0)return;f.buttons=[]}}),f.onDidTriggerButton(A=>{if(A===Hr.AddToWorkspace){const[ee]=f.activeItems;if(!(ee instanceof Si))return;ee.validate()&&(p=Ve.AddToWorkspace,te(ee))}}),f.onDidTriggerItemButton(A=>{switch(A.button){case Hr.OpenInNewWindow:p=Ve.NewWindow,te(A.item);break;default:break}})),f.title=a,f.placeholder=i,f.matchOnDescription=!0,f.items=c,f.sortByLabel=!1,f.show()});if(b instanceof Ni){const te=await b.show(p,b.placeholder,a,s);if(te===yi)continue;const[A,ee]=te;if(A&&"showMore"in A&&A.showMore!==void 0)continue;return[A,ee]}if(!(b&&"showMore"in b&&b.showMore!==void 0))return[b,p]}}finally{f.dispose(),h.forEach(b=>void b.dispose())}}o(e,"show"),t.show=e})(wi||(wi={}));class Ni{constructor(e){this.provider=e}get label(){return`${this.provider.icon?`${this.provider.icon} `:""}${this.provider.label}`}get placeholder(){return this.provider.placeholder}async show(e,n,r,i){const a=l.window.createQuickPick(),s=new Or(500),c=[s];async function u(ee,me,re,Pe,Fe){const $e=await ee.provideSources(me,re,Pe,Fe);return $e==null?void 0:$e.map(je=>"showMore"in je?{label:je.label,showMore:je.showMore}:"kind"in je?je:{label:`${je.icon?`${je.icon} `:""}${je.name}`,description:je.description,detail:je.detail,url:je.url,workspace:je.workspace,buttons:[Hr.OpenInNewWindow]})}o(u,"getItems");async function d(ee){var me;b=void 0;const re=a.activeItems;a.items=(me=ee!=null?ee:await A)!=null?me:[],p&&re.length!==0&&(a.activeItems=a.items.filter(Pe=>re.some(Fe=>Fe.url===Pe.url))),a.busy=!1}o(d,"setItems");let f,h;if(this.provider.provideOrganization&&this.provider.provideProject){if(f=await this.provider.provideOrganization(),!f)return[void 0,void 0];if(h=await this.provider.provideProject(f),!h)return[void 0,void 0]}let p=!1,b,te=e,A=u(this.provider,f,h,void 0,{sort:"updated"});try{const ee=await new Promise(me=>{c.push(a.onDidHide(()=>me(void 0)),a.onDidChangeValue(re=>{p=!1,re=re.trim(),a.busy=!0;const Pe=s.debounce(re?()=>u(this.provider,f,h,re,{sort:"stars"}):()=>A);b===void 0&&(b=Pe.then(Fe=>d(Fe)))}),a.onDidAccept(async()=>{var re;if(a.activeItems.length!==0){const[Pe]=a.activeItems;if("showMore"in Pe){await((re=Pe.showMore)==null?void 0:re.call(Pe)),A=u(this.provider,f,h,void 0,{sort:"updated"}),await d(await A);return}me(Pe)}}),a.onDidChangeActive(()=>{if(p=a.activeItems.length!==0,te!==void 0||!(i==null?void 0:i.allowAddToWorkspace))return;const[re]=a.activeItems;if(re===void 0){if(a.buttons.length===1)return;a.buttons=[l.QuickInputButtons.Back]}else{if(a.buttons.length===2)return;a.buttons=[l.QuickInputButtons.Back,Hr.AddToWorkspace]}}),a.onDidTriggerButton(re=>{if(re===l.QuickInputButtons.Back){me(yi);return}if(re===Hr.AddToWorkspace){const[Pe]=a.activeItems;if(Pe===void 0)return;te=Ve.AddToWorkspace,me(Pe)}}),a.onDidTriggerItemButton(re=>{switch(re.button){case Hr.OpenInNewWindow:te=Ve.NewWindow,me(re.item);break;default:break}})),a.title=r,a.placeholder=n,a.matchOnDetail=!0,a.sortByLabel=!1,a.buttons=[l.QuickInputButtons.Back],a.busy=!0,a.show(),b=s.debounce(()=>A,0).then(re=>d(re))});return ee===yi?ee:[ee,te]}finally{a.dispose(),c.forEach(ee=>void ee.dispose())}}}o(Ni,"RemoteSourceProviderPickerItem");class Si{constructor(e,n){this.url=n,this.alwaysShow=!0,this.canOpenResult=e.canOpenRemoteUrl(n)}get buttons(){return[Hr.OpenInNewWindow]}get label(){if(this.canOpenResult){const{provider:e,urlType:n}=this.canOpenResult;switch(n){case G.Branch:return l.l10n.t("Open Branch from {0} Repository",e.name);case G.Tag:return l.l10n.t("Open Tag from {0} Repository",e.name);case G.Commit:return l.l10n.t("Open Commit from {0} Repository",e.name);case G.File:return l.l10n.t("Open File from {0} Repository",e.name);case G.PullRequest:return l.l10n.t("Open Pull Request from {0} Repository",e.name);default:return l.l10n.t("Open {0} Repository",e.name)}}return l.l10n.t("Enter a Remote Url")}get description(){return this.url}validate(){return this.canOpenResult!==void 0}}o(Si,"RemoteUrlQuickPickItem");var Hr;(function(t){t.AddToWorkspace={iconPath:new l.ThemeIcon("plus"),tooltip:l.l10n.t("Add to Workspace")},t.OpenInNewWindow={iconPath:new l.ThemeIcon("empty-window"),tooltip:l.l10n.t("Open in New Window")}})(Hr||(Hr={}));function Ci(t,e){return t.reduce((r,i)=>{const a=e(i),s=r.get(a);return s===void 0?r.set(a,[i]):s.push(i),r},new Map)}o(Ci,"groupBy");function sa(t){let e=0;for(const n of t){if(n===0)return!0;if(e++,e>8e3)break}return!1}o(sa,"isBinary");function ji(t,e,n=r=>r){return[...t.reduce((i,a)=>{const s=e(a),c=i.get(s);if(c===void 0)i.set(s,a);else{const u=n(c,a);u!==void 0&&i.set(s,u)}return i},new Map).values()]}o(ji,"uniqueBy");function Oi(t,e){switch(t){case V.Branch:case V.RemoteBranch:return e?"$(git-pull-request)":"$(git-branch)";case V.Tag:return"$(tag)";case V.Commit:return"$(git-commit)"}}o(Oi,"headTypeToCodicon");function ei(t){switch(t){case ae.Active:return"$(layers-active)";case ae.Match:return"$(layers-dot)";case ae.Indexed:return"$(layers)"}}o(ei,"indexTypeToCodicon");function ti(t,e){switch(t){case V.Branch:case V.RemoteBranch:return e?new l.ThemeIcon("git-pull-request"):new l.ThemeIcon("git-branch");case V.Tag:return new l.ThemeIcon("tag");case V.Commit:return new l.ThemeIcon("git-commit")}}o(ti,"headTypeToThemeIcon");function*ni(t,e){for(const n of t)yield*e(n)}o(ni,"flatMap");function*ra(t,e){for(const n of t)e(n)&&(yield n)}o(ra,"filter");function*Hi(t,e){for(const n of t){const r=e(n);r!=null&&(yield r)}}o(Hi,"filterMap");function ci(t,e){for(const n of t)if(e(n))return n}o(ci,"find");function la(t,e){let n="";const r=t[Symbol.iterator]();let i=r.next();if(i.done)return n;for(;;){const a=i.value.toString();if(i=r.next(),i.done){n+=a;break}n+=a,n+=e}return n}o(la,"join");function*xe(t,e){for(const n of t)yield e(n)}o(xe,"map");function rt(t,e){for(const n of t)if(e(n))return!0;return!1}o(rt,"some");function*wt(...t){for(const e of t)for(const n of e)yield n}o(wt,"union");function*at(t){const e=new Set;for(const n of t)e.has(n)||(e.add(n),yield n)}o(at,"unique");const Ft="";function zt(...t){if(t.length===1){const e=t[0];return e===void 0?Ft:typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"||e instanceof Error?String(e):e instanceof l.Uri?e.toString():JSON.stringify(e)}return JSON.stringify(t)}o(zt,"defaultResolver");function St(t){return(e,n,r)=>{let i;if(typeof r.value=="function"?i=r.value:typeof r.get=="function"&&(i=r.get),i===void 0)throw new Error("Not supported");const a=`$serialize$${n}`;r.value=function(...s){const c=s.length===0?a:`${a}$${(t!=null?t:zt)(...s)}`;Object.prototype.hasOwnProperty.call(this,c)||Object.defineProperty(this,c,{configurable:!1,enumerable:!1,writable:!0,value:void 0});let u=this[c];const d=o(()=>i.apply(this,s),"run");return u===void 0?u=d():u=u.then(d,d),this[c]=u,u}}}o(St,"serialize");let Xt=0;function Ut(){return Xt===Number.MAX_SAFE_INTEGER&&(Xt=0),String(++Xt)}o(Ut,"getNextLockId");class vn{constructor(){this.id=Ut()}async synchronize(e){let n;const r=this.promise;this.promise=new Promise(i=>n=i),await r;try{return await e()}finally{n()}}}o(vn,"Lock");class Cn{constructor(e){this.lock=new vn,this.readers=new Set,this.counter=0,this._id=e!=null?e:this.lock.id}get id(){return this._id}getNextCounter(){return this.counter===Number.MAX_SAFE_INTEGER&&(this.counter=0),++this.counter}async synchronizeRead(e,n){let r;const i=new _t(`Reader(${this.getNextCounter()}|${this.id})`,{log:{prefix:"(A) ",message:n?` \u2022 ${n}`:""},logLevel:et.Debug});let a;await this.lock.synchronize(async()=>{this.writer&&await this.writer,a=new Promise(s=>r=s),this.readers.add(a)}),i.restart({prefix:"(L) ",suffix:n?` \u2022 ${n}`:"",took:" waited for "});try{return await e()}finally{i.stop({prefix:"(U) ",suffix:n?` \u2022 ${n}`:"",took:" locked for "}),a!==void 0&&this.readers.delete(a),r()}}async synchronizeWrite(e,n){let r;const i=new _t(`Writer(${this.getNextCounter()}|${this.id})`,{log:{prefix:"(A) ",message:n?` \u2022 ${n}`:""},logLevel:et.Debug});await this.lock.synchronize(async()=>{if(this.writer&&await this.writer,this.readers.size){const a=[...this.readers];this.readers.clear(),await Promise.all(a)}this.writer=new Promise(a=>r=a)}),i.restart({prefix:"(L) ",suffix:n?` \u2022 ${n}`:"",took:" waited for "});try{return await e()}finally{i.stop({prefix:"(U) ",suffix:n?` \u2022 ${n}`:"",took:" locked for "}),r(),this.writer=void 0}}}o(Cn,"ReaderWriterLock");class rr{constructor(){this.locks=new Map}async synchronizeRead(e,n,r){let i=this.locks.get(e);return i===void 0&&(i=new Cn(String(e)),this.locks.set(e,i)),i.synchronizeRead(n,r)}async synchronizeWrite(e,n,r){let i=this.locks.get(e);return i===void 0&&(i=new Cn(String(e)),this.locks.set(e,i)),i.synchronizeWrite(n,r)}}o(rr,"KeyedReaderWriterLock");const Wn=o(class{constructor(t,e,n,r,i){this.providerService=t,this.storageService=e,this.changeStore=n,this.workspaceId=r,this.context=i,this._onDidChange=new l.EventEmitter,this.cache=new Map,this.lock=new Cn("WorkspaceRepositories"),this.disposable=l.Disposable.from(this.providerService.onDidChangeRepositories(this.onRepositoriesChanged,this),this.providerService.onDidChangeRepository(this.onRepositoryChanged,this),this.changeStore.onDidChange(this.onChangeStoreChanged,this),pe.onDidChange(this.onConfigurationChanged,this))}get onDidChange(){return this._onDidChange.event}dispose(){this.disposable.dispose()}async exportDebugInfo(){const t=await l.workspace.openTextDocument({language:"json",content:`Remote Repositories

${this.toStorage(await this.getCore())}`});return void l.window.showTextDocument(t)}onConfigurationChanged(t){if(!pe.changed(t,"experimental.syncRecentList"))return;const e=pe.get("experimental.syncRecentList")===!0?[Wn.storageKey]:[];this.context.globalState.setKeysForSync(e)}onChangeStoreChanged(t){const e=ji(t.map(n=>n.rootUri),n=>E(n)).map(n=>this.providerService.getRepository(n)).filter(n=>Boolean(n));this.addOrUpdate(e)}onRepositoriesChanged(t){this.addOrUpdate(t.added)}onRepositoryChanged(t){this.addOrUpdate([t.repository])}async get(t){let e=await this.lock.synchronizeRead(async()=>{let n=this.cache.get("workspaceRepositories");return n===void 0&&(n=[...(await this.getCore()).values()].sort((r,i)=>i.timestamp-r.timestamp),this.cache.set("workspaceRepositories",n)),n},"WorkspaceRepositories.get");if(t){const n=E(t);e=e.filter(r=>E(r.canonicalUri)===n)}return e}async getCore(){return this.fromStorage(await this.storageService.get(Wn.storageKey))}async getRecents(t=10){return(await this.get()).slice(0,t)}async getRemoteWorkspaceSourceProvider(t){const e=await this.getRecents();if(e.length!==0)return e.filter(n=>n.provider.id===t)}refresh(){this.cache.clear()}async remove(t){await this.lock.synchronizeWrite(async()=>{const e=await this.getCore(),n=`${t.workspaceId}/${E(t.uri)}`,r=e.get(n);if(r===void 0)return;const i=this.changeStore.getScopedChangeStore(r),a=await i.getChanges(r.uri);if(a.length!==0){const s={title:l.l10n.t("Yes")},c={title:l.l10n.t("No"),isCloseAffordance:!0};if(await l.window.showWarningMessage(a.length===1?l.l10n.t(`This repository contains 1 file with uncommitted changes.

Removing it will cause those changes to be FOREVER LOST.
This is IRREVERSIBLE!

Are you sure you still want to remove it?`):l.l10n.t(`This repository contains {0} files with uncommitted changes.

Removing it will cause those changes to be FOREVER LOST.
This is IRREVERSIBLE!

Are you sure you still want to remove it?`,a.length),{modal:!0},s,c)!==s)return;await i.discardAll(r.uri)}this.cache.clear(),e.delete(n);try{await this.storageService.store(Wn.storageKey,this.toStorage(e))}catch(s){throw K.error(s,"Failed to save workspace repositories"),s}},"WorkspaceRepositories.remove"),this._onDidChange.fire()}async addOrUpdate(t){await this.lock.synchronizeWrite(async()=>{this.cache.clear();const e=await this.getCore();for(const n of t){const[{HEAD:r,pullRequest:i},a]=await Promise.all([n.getMetadata(),n.getIndexMetadata()]),s=await this.changeStore.getChanges(n.uri);e.set(`${this.workspaceId}/${E(n.uri)}`,{workspaceId:this.workspaceId,uri:n.uri,canonicalUri:n.canonicalUri,name:n.name,provider:n.provider,ref:{type:r.type,name:r.name},idx:(a==null?void 0:a.type)&&ae.hasIndex(a.type)?{type:a.type}:void 0,pullRequest:i?{id:i.id}:void 0,changes:cn(s),timestamp:Date.now()})}try{await this.storageService.store(Wn.storageKey,this.toStorage(e))}catch(n){throw K.error(n,"Failed to save workspace repositories"),n}},"WorkspaceRepositories.addOrUpdate"),this._onDidChange.fire()}fromStorage(t){if(!t)return new Map;try{const e=JSON.parse(t,(n,r)=>(n==="uri"||n.endsWith("Uri"))&&T(r)?l.Uri.from(r):r);return new Map(e.workspaceRepositories)}catch(e){return K.error(e,"Failed to deserialize workspace repositories"),new Map}}toStorage(t){const e={schemaVersion:Wn.storageSchemaVersion,workspaceRepositories:[...t]};return JSON.stringify(e)}},"_WorkspaceRepositories");let ir=Wn;ir.storageKey="workspaceRepositories",ir.storageSchemaVersion=1;function Hn(t){return t!==void 0&&(t.added!==0||t.changed!==0||t.deleted!==0)}o(Hn,"hasChanges");function Yt(t){return Hn(t.changes)}o(Yt,"hasUncommittedChanges");function cn(t){let e=0,n=0,r=0;for(const i of t)switch(i.type){case D.Created:e++;break;case D.Changed:n++;break;case D.Deleted:r++;break}return e||n||r?{added:e,changed:n,deleted:r,timestamp:Date.now()}:void 0}o(cn,"toChangesSummary");function mn(t,e,{compact:n=!0,preamble:r,separator:i=", ",short:a=!1,single:s=!1}={}){if(!Hn(e))return t===V.Branch||t===V.RemoteBranch?l.l10n.t("Everything up to date"):l.l10n.t("No uncommitted changes");const{added:c,changed:u,deleted:d}=e;if(s){const h=c+u+d;return h===1?l.l10n.t("{0} change",h):l.l10n.t("{0} changes",h)}let f=`${r!=null?r:""}`;return(c||!n)&&(f+=a?`+${c}`:c===1?l.l10n.t("{0} file added",c):l.l10n.t("{0} files added",c),(u||d||!n)&&(f+=i)),(u||!n)&&(f+=a?`~${u}`:u===1?l.l10n.t("{0} file changed",u):l.l10n.t("{0} files changed",u),(d||!n)&&(f+=i)),(d||!n)&&(f+=a?`-${d}`:d===1?l.l10n.t("{0} file deleted",d):l.l10n.t("{0} files deleted",d)),f}o(mn,"formatChangesSummary");class Zt extends Error{constructor(e){var n;const r=typeof e=="string"?e:Gn.getProviderId(e);super(`No provider registered with ${r}`);this.id=r,(n=Error.captureStackTrace)==null||n.call(Error,this,Zt)}}o(Zt,"ProviderNotFoundError");class L{constructor(e,n,r,i,a){this.providerService=e,this.uri=n,this.id=r,this.name=i,this.provider={id:a.id,name:a.name}}get canonicalUri(){return this.providerService.getVirtualCanonicalRootUri(this.uri)}createRelativeUri(e){return this.providerService.createRelativeUri(this.uri,e)}async getMetadata(){const e=await this.providerService.getMetadata(this.uri);if(!e)throw new Error(`Unable to find metadata for ${this.uri.toString()}`);return e}async getIndexMetadata(){return this.providerService.getIndexMetadata(this.uri)}getUriMetadata(){return this.providerService.getVirtualUriMetadata(this.uri)}}o(L,"VirtualRepository");var X;(function(t){t[t.Repository=0]="Repository",t[t.PullRequest=1]="PullRequest",t[t.Branch=2]="Branch",t[t.Commit=3]="Commit",t[t.Tag=4]="Tag"})(X||(X={}));var De;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.Indexed=1]="Indexed",t[t.Match=2]="Match",t[t.Active=3]="Active"})(De||(De={})),function(t){function e(n){return n!==void 0&&(n===t.Indexed||n===t.Match||n===t.Active)}o(e,"hasIndex"),t.hasIndex=e}(De||(De={}));var lt;(function(t){function e(n){return n!==void 0&&n.type===3}o(e,"isActive"),t.isActive=e})(lt||(lt={}));var At;(function(t){t[t.Latest=1]="Latest",t[t.SHA=2]="SHA"})(At||(At={}));var Pt;(function(t){function e(n){const r=x.decodeAuthority(n).metadata;if(!(r===void 0||r.idx===void 0)){if(r.idx==="latest")return{type:1};if(N(r.idx))return{type:2,sha:r.idx}}}o(e,"decode"),t.decode=e})(Pt||(Pt={}));function hn(t){return t!==void 0&&typeof t.then=="function"}o(hn,"isPromise");const gn="";function tn(...t){if(t.length===1){const e=t[0];return e===void 0?gn:typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"||e instanceof Error?String(e):e instanceof l.Uri?e.toString():JSON.stringify(e)}return JSON.stringify(t)}o(tn,"gate_defaultResolver");function nn(t){return(e,n,r)=>{let i;if(typeof r.value=="function"?i=r.value:typeof r.get=="function"&&(i=r.get),i===void 0)throw new Error("Not supported");const a=`$gate$${n}`;r.value=function(...s){const c=s.length===0?a:`${a}$${(t!=null?t:tn)(...s)}`;Object.prototype.hasOwnProperty.call(this,c)||Object.defineProperty(this,c,{configurable:!1,enumerable:!1,writable:!0,value:void 0});let u=this[c];if(u===void 0){let d;try{if(d=i.apply(this,s),d==null||!hn(d))return d;this[c]=u=d.then(f=>(this[c]=void 0,f)).catch(f=>{throw this[c]=void 0,f})}catch(f){throw this[c]=void 0,f}}return u}}}o(nn,"gate");var pn=Object.defineProperty,Kt=Object.getOwnPropertyDescriptor,Ct=o((t,e,n,r)=>{for(var i=r>1?void 0:r?Kt(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&pn(e,n,i),i},"__decorateClass");class bn{constructor(){this.hasShownRepositoryNotValidMessage=!1}async showRepositoryNotValidMessage(){if(this.hasShownRepositoryNotValidMessage)return;this.hasShownRepositoryNotValidMessage=!0;const e=l.l10n.t("Open Repository");await l.window.showErrorMessage(l.l10n.t("The current workspace is not a valid repository. Would you like to open another repository?"),{modal:!0},e)===e&&l.commands.executeCommand("remoteHub.openRepository")}showGitHubStatus500Message(){return l.window.showErrorMessage(l.l10n.t("GitHub failed to respond and might be experiencing issues. Visit the [GitHub status page](https://githubstatus.com) for more information."),l.l10n.t("OK")),Promise.resolve()}async showStatus401Message(e){if(!e)return void l.window.showErrorMessage(l.l10n.t("The provided credentials are either invalid or expired."),l.l10n.t("OK"));const n=l.l10n.t("Reauthenticate");await l.window.showErrorMessage(l.l10n.t("The provided credentials are either invalid or expired. Would you like to reauthenticate?"),n)===n&&e()}async showStatus403Message(e){if(!e)return void l.window.showErrorMessage(l.l10n.t("The provided credentials do not have the required access."),l.l10n.t("OK"));const n=l.l10n.t("Reauthenticate"),r=l.l10n.t("The provided credentials do not have the required access. Would you like to reauthenticate to grant additional access?");await l.window.showErrorMessage(r,n)===n&&e()}async showProviderNotFoundMessage(e){const n=xn.get(e.id);if(n&&l.extensions.getExtension(n[0])===void 0){const r=l.l10n.t("Install");if(await l.window.showInformationMessage(l.l10n.t("Extension '{0}' is not installed. Would you like to install the extension and reload the window to open this workspace?",n[1]),{modal:!0},r)!==r)return;await l.commands.executeCommand("workbench.extensions.installExtension",n[0]),await l.commands.executeCommand("workbench.action.reloadWindow")}}}o(bn,"Messages"),Ct([nn(()=>"")],bn.prototype,"showRepositoryNotValidMessage",1),Ct([nn(()=>"")],bn.prototype,"showGitHubStatus500Message",1),Ct([nn(()=>"")],bn.prototype,"showStatus401Message",1),Ct([nn(()=>"")],bn.prototype,"showStatus403Message",1),Ct([nn()],bn.prototype,"showProviderNotFoundMessage",1);const xn=new Map([["github",["GitHub.remotehub","GitHub Repositories"]],["azurerepos",["ms-vscode.azure-repos","Azure Repos"]]]),Fn=new bn;async function kn(t,e,n){var r,i,a,s,c;if(Le.instance.publicLog2("openWorkspace",{location:e.location}),e.location===Ve.AddToWorkspace){const d=(i=(r=l.workspace.workspaceFolders)==null?void 0:r.length)!=null?i:0;return void l.workspace.updateWorkspaceFolders(d,0,{uri:e.uri,name:e.name})}if(e.location===Ve.CurrentWindow&&!(n==null?void 0:n.skipChangesPrompt)){const d=await t.getWorkspaceProvidersWithChanges();if(d.length){const f={title:l.l10n.t("Continue")},h={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showWarningMessage(jt?l.l10n.t(`You have uncommitted changes which you can pick up anytime by reopening this workspace.

If you want to see your changes on {0} or from other browsers or machines, commit them before leaving this workspace.

Do you want to continue opening a new workspace?`,d.map(b=>b.name).join(", ")):l.l10n.t(`You have uncommitted changes which you can pick up anytime by reopening this workspace.

If you want to see your changes on {0} or from other machines, commit them before leaving this workspace.

Do you want to continue opening a new workspace?`,d.map(b=>b.name).join(", ")),{modal:!0},f,h)!==f){Le.instance.publicLog2("openWorkspace.abort",{reason:"abandoned uncommitted changes prompt"});return}}}const u=l.env.remoteName?!0:void 0;return e.filesToOpen&&(e.location===Ve.CurrentWindow&&u===void 0&&((a=l.workspace.workspaceFolders)==null?void 0:a.length)===1&&l.workspace.workspaceFolders[0].uri.toString()===e.uri.toString()?await((s=Ro())==null?void 0:s.openPendingFiles(e.uri,e.filesToOpen)):await((c=Ro())==null?void 0:c.setPendingFilesToOpen(e.uri,e.filesToOpen))),Le.instance.publicLog2("openWorkspace.success",{location:e.location,forceLocalWindow:String(u)}),void l.commands.executeCommand("vscode.openFolder",e.uri,{forceNewWindow:e.location===Ve.NewWindow,forceLocalWindow:u})}o(kn,"openWorkspace");var qt=vr(6724),Br=Object.defineProperty,Er=Object.getOwnPropertyDescriptor,Bn=o((t,e,n,r)=>{for(var i=r>1?void 0:r?Er(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&Br(e,n,i),i},"providers_decorateClass");const ar=o(class{constructor(t,e){this.telemetryService=t,this.workspaceState=e,this._providers=new Map,this._indexProviders=new Map,this._onDidChangeProviders=new l.EventEmitter,this._onDidChangeChangeStore=new l.EventEmitter,this._onDidChangeWorkspaceRepositories=new l.EventEmitter,this._repositories=new Map,this._onDidChangeRepositories=new l.EventEmitter,this._onDidChangeRepository=new l.EventEmitter,this._onDidSyncRepository=new l.EventEmitter,this._onDidRefresh=new l.EventEmitter,this._onWillRefresh=new l.EventEmitter,this.pendingMetadataRequests=new Map,this.disposable=l.Disposable.from(l.workspace.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged,this),l.workspace.onDidSaveTextDocument(this.onDocumentChanged,this),l.workspace.onDidSaveNotebookDocument(this.onDocumentChanged,this),l.window.onDidChangeActiveNotebookEditor(this.onDocumentChanged,this),l.window.onDidChangeActiveTextEditor(this.onDocumentChanged,this))}get onDidChangeProviders(){return this._onDidChangeProviders.event}get onDidChangeChangeStore(){return this._onDidChangeChangeStore.event}get onDidChangeWorkspaceRepositories(){return this._onDidChangeWorkspaceRepositories.event}get onDidChangeRepositories(){return this._onDidChangeRepositories.event}get onDidChangeRepository(){return this._onDidChangeRepository.event}get onDidSyncRepository(){return this._onDidSyncRepository.event}get onDidRefresh(){return this._onDidRefresh.event}get onWillRefresh(){return this._onWillRefresh.event}dispose(){this.disposable.dispose(),this._providers.clear(),this._repositories.clear()}onMetadataChanged(t){const e=this._repositories.get(E(t.uri));!e||(K.log(`VirtualProviderService.onMetadataChanged(${t.uri.toString()}, reason=${t.reason}): Firing onDidChangeRepository...`),this._onDidChangeRepository.fire({repository:e,reason:t.reason==="revision"?"HEAD":void 0}))}addRepository(t){const e=E(t.uri);if(t.uri.scheme!==ar.scheme||this._repositories.has(e))return;const n=this.getProvider(t.uri);if(!n)return;this._repositories.set(e,null);const{repo:r,name:i}=this.getVirtualUriMetadata(t.uri),a=new L(this,t.uri,r,i,n);this._repositories.set(e,a),this._onDidChangeRepositories.fire({added:[a],removed:[]}),this.telemetryService.publicLog2("repository.opened",{provider:n.id,repositories:this._repositories.size.toString()})}onDocumentChanged(t){var e,n;let r;t&&"uri"in t?r=t.uri:t&&"document"in t&&((e=l.window.activeTextEditor)==null?void 0:e.document.uri.toString())===t.document.uri.toString()?r=t.document.uri:t&&"notebook"in t&&((n=l.window.activeNotebookEditor)==null?void 0:n.notebook.uri.toString())===t.notebook.uri.toString()&&(r=t.notebook.uri);const i=r?this.getVirtualRootUri(r):void 0;i&&this.changeStoreMaybeHasChanges(i,r)?wr(Qn.ActiveResourceHasChanges,!0):wr(Qn.ActiveResourceHasChanges,!1)}onWorkspaceFoldersChanged(t){if(t.added.length)for(const e of t.added)this.addRepository(e);if(t.removed.length)for(const e of t.removed){const n=E(e.uri);if(e.uri.scheme!==ar.scheme||!this._repositories.has(n))continue;const r=this._repositories.get(n);this._repositories.delete(n),r&&(this._onDidChangeRepositories.fire({added:[],removed:[r]}),this.telemetryService.publicLog2("repository.closed",{repositories:this._repositories.size.toString()}))}wr(Qn.HasVirtualFolders,this._repositories.size!==0),wr(Qn.VirtualFolderProviders,la(at(xe(this.getRepositories(),e=>e.provider.id)),","))}get hasProviders(){return this._providers.size!==0}get registeredProviders(){return[...xe(this._providers.values(),t=>({id:t.id,name:t.name}))]}get repositories(){return[...this.getRepositories()]}registerVirtualIndexProvider(t,e){if(this._indexProviders.has(t))throw new Error(`Virtual index provider '${t}' has already been registered`);return this._indexProviders.set(t,e),{dispose:()=>{this._indexProviders.delete(t)}}}register(t,e,n,r,i,a,s,c){var u;if(this._providers.has(t))throw new Error(`Provider '${t}' has already been registered`);const d={id:t,name:e,provider:n,fs:r,storage:i,changeStore:a,metadataStore:s,workspaceRepositories:c};this._providers.set(t,d);const f=l.Disposable.from(d.metadataStore.onDidChange(h=>this.onMetadataChanged(h)),d.changeStore.onDidChange(h=>this._onDidChangeChangeStore.fire(h)),d.workspaceRepositories.onDidChange(async()=>{const h=await this.workspaceRepositoriesGetRepositories();wr(Qn.HasRecentRepositories,h.length>0),this._onDidChangeWorkspaceRepositories.fire()}));return this._onDidChangeProviders.fire({added:[d],removed:[]}),this.telemetryService.publicLog2("provider.registered",{provider:t}),this.onWorkspaceFoldersChanged({added:(u=l.workspace.workspaceFolders)!=null?u:[],removed:[]}),{dispose:()=>{this._providers.delete(t);const h=[];for(const[p,b]of[...this._repositories])(b==null?void 0:b.provider.id)===t&&(this._repositories.delete(p),h.push(b));this._onDidChangeRepositories.fire({added:[],removed:h}),this._onDidChangeProviders.fire({added:[],removed:[d]}),f.dispose()}}}refresh(){if(this._providers.size===0)return;const t=[],e=[];for(const n of this._providers.values()){t.push(...xe(this.getRepositories(n.id),i=>i.uri));const r=this._indexProviders.get(n.id);r!==void 0&&e.push(r)}this._onWillRefresh.fire(t),t.forEach(n=>this.getMetadataStore(n).refresh()),e.forEach(n=>n.refresh(t)),this._onDidRefresh.fire(t)}getRegisteredProvider(t){const e=this.getProvider(t);return e?{id:e.id,name:e.name}:void 0}getRepository(t,e){var n;const r=l.workspace.getWorkspaceFolder(t);if(!r||r.uri.scheme!==ar.scheme)return;const i=(n=this._repositories.get(E(r.uri)))!=null?n:this.addRepository(r);if(!(e!==void 0&&(i==null?void 0:i.provider.id)!==e))return i!=null?i:void 0}getRepositories(t){return ra(this._repositories.values(),e=>e!==null&&(!t||e.provider.id===t))}hasProvider(t,e){const n=typeof t=="string"?t:ar.getProviderId(t),r=this._providers.get(n);return e!==void 0&&(r==null?void 0:r.id)!==e?!1:r!==void 0}getProvider(t){const e=typeof t=="string"?t:ar.getProviderId(t);return this._providers.get(e)}getRepositoryProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.provider;if(n)return n;throw new Zt(t)}getChangeStore(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.changeStore;if(n)return n;throw new Zt(t)}getMetadataStore(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.metadataStore;if(n)return n;throw new Zt(t)}getWorkspaceRepositories(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.workspaceRepositories;if(n)return n;throw new Zt(t)}getFileSystemProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.fs;if(n)return n;throw new Zt(t)}getStorageService(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.storage;if(n)return n;throw new Zt(t)}async getRecentWorkspaceSourceProviders(){const t=[];for(const[,e]of this._providers.entries()){const n=await e.workspaceRepositories.getRemoteWorkspaceSourceProvider(e.id);t.push(...n!=null?n:[])}if(t.length!==0)return{name:"Recents",label:"Open Recent Repository",icon:"$(history)",placeholder:l.l10n.t("Choose a recent repository"),provideSources:function(e,n,r,i){return t.sort((a,s)=>s.timestamp-a.timestamp).map(a=>({providerId:a.provider.id,name:a.name,icon:"$(repo)",description:An(a.timestamp,{ago:!0}),detail:`${a.provider.name}${a.pullRequest?`\xA0\xA0\u2022\xA0\xA0$(git-pull-request) Pull Request #${a.pullRequest.id}`:""}${x.isCanonicalUri(a.uri)?"":`\xA0\xA0\u2022\xA0\xA0${Oi(a.ref.type)} ${a.ref.name}`}\xA0\xA0\u2022\xA0\xA0${mn(a.ref.type,a.changes)}${a.idx?`\xA0\xA0\u2022\xA0\xA0${ei(a.idx.type)}`:""}`,workspace:{uri:a.uri,name:a.name,location:Ve.CurrentWindow}}))}}}getRemoteWorkspaceSourceProviders(t){var e,n,r,i;return t?(i=(r=(e=this.getProvider(t))==null?void 0:(n=e.provider).getRemoteWorkspaceSourceProviders)==null?void 0:r.call(n))!=null?i:[]:[...ni(this._providers.values(),a=>{var s,c,u;return(u=(c=(s=a.provider).getRemoteWorkspaceSourceProviders)==null?void 0:c.call(s))!=null?u:[]})]}async getWorkspaceProvidersWithChanges(){var t,e;const n=new Map;for(const r of(t=l.workspace.workspaceFolders)!=null?t:[])if(r.uri.scheme===x.scheme&&await this.getChangeStore(r.uri).hasChanges(r.uri)){const i=(e=this.getRepository(r.uri))==null?void 0:e.provider;if(!i)continue;n.set(i.id,i)}return[...n.values()]}isInWorkspace(t){return this.getVirtualWorkspaceUri(t)!==void 0}getAuthentication(t){const e=this.getProvider(t);if(!e)throw new Zt(t);return e==null?void 0:e.provider.getAuthentication(t)}getHttpsCloneUri(t){var e,n;const r=this.canOpenRemoteUrl(t.toString());return(n=r==null?void 0:(e=r.provider.provider).getHttpsCloneUri)==null?void 0:n.call(e,t)}canOpenRemoteUrl(t,e){if(e){const n=this.getProvider(e),r=n==null?void 0:n.provider.canOpenRemoteUrl(t);return r!==void 0?{provider:n,urlType:r}:void 0}for(const n of this._providers.values()){const r=n.provider.canOpenRemoteUrl(t);if(r!==void 0)return{provider:n,urlType:r}}}async createWorkspaceForRemoteUrl(t,e,n=Ve.CurrentWindow){var r;const i=this.canOpenRemoteUrl(t,e);return(r=i==null?void 0:i.provider)==null?void 0:r.provider.createWorkspaceForRemoteUrl(t,n)}async openWorkspace(t,e){return kn(this,t,e)}createProviderUri(t,e,n){return x.getProviderUri(this.getRepositoryProvider(t).createVirtualUri(ar.baseVirtualWorkspaceUri,e,n))}createRelativeProviderUri(t,e){return x.getProviderUri(this.createRelativeUri(t,e))}createRelativeUri(t,e){const n=this.getProviderRootUri(t);let r=`${n.path}/`;r.endsWith("/")&&(r=r.slice(0,-1));const i=n.with({path:`${n.path}/${e.startsWith("/")?e.substr(1):e}`});return t.scheme===ar.scheme?x.getVirtualUri(i):i}createRelativeVirtualUri(t,e){return x.getVirtualUri(this.createRelativeUri(t,e))}createVirtualUri(t,e,n){return this.getRepositoryProvider(t).createVirtualUri(ar.baseVirtualWorkspaceUri,e,n)}async getBestRemoteUri(t,e,n,r){const{provider:i,repo:a,ref:s}=this.getVirtualUriMetadata(t);if(e===X.Repository)return this.getRemoteUri(i.id,{repo:a,path:n,item:r});if(e===X.PullRequest||e===void 0&&(s==null?void 0:s.type)===ye.PullRequest){if((s==null?void 0:s.type)===ye.PullRequest)return this.getRemoteUri(i.id,{repo:a,pullRequest:{id:s.id},path:n,item:r});const{pullRequest:c}=await this.getMetadata(t);if(e===X.PullRequest&&c)return this.getRemoteUri(i.id,{repo:a,pullRequest:{id:c.id},path:n,item:r})}if(e===X.Branch||e===void 0&&(s==null?void 0:s.type)===ye.Branch){if((s==null?void 0:s.type)===ye.Branch)return this.getRemoteUri(i.id,{repo:a,branch:s.id,path:n,item:r});const{HEAD:c}=await this.getMetadata(t);if(c.type===V.Branch||c.type===V.RemoteBranch&&e===X.Branch)return this.getRemoteUri(i.id,{repo:a,branch:c.branch.name,path:n,item:r})}if(e===X.Tag||e===void 0&&(s==null?void 0:s.type)===ye.Tag){if((s==null?void 0:s.type)===ye.Tag)return this.getRemoteUri(i.id,{repo:a,tag:s.id,path:n,item:r});const{HEAD:c}=await this.getMetadata(t);if(c.type===V.Tag)return this.getRemoteUri(i.id,{repo:a,tag:c.detached.name,path:n,item:r})}if(e===X.Commit||e===void 0&&((s==null?void 0:s.type)===ye.Commit||(s==null?void 0:s.type)===ye.Tree&&N(s.id))){if((s==null?void 0:s.type)===ye.Commit||(s==null?void 0:s.type)===ye.Tree&&N(s.id))return this.getRemoteUri(i.id,{repo:a,sha:s.id,path:n,item:r});const{HEAD:c}=await this.getMetadata(t);if(e===X.Commit||c.type===V.Commit)return this.getRemoteUri(i.id,{repo:a,sha:c.sha,path:n,item:r})}if(e===void 0&&(s==null?void 0:s.type)===ye.Tree&&!N(s.id))return this.getRemoteUri(i.id,{repo:a,branch:s.id,path:n,item:r});if(e===void 0)return this.getRemoteUri(i.id,{repo:a,path:n,item:r})}getCanonicalUri(t){let{authority:e}=t;const n=e.indexOf(ar.authoritySeparator);return n!==-1&&(e=e.substr(0,n)),t.with({authority:e})}getRemoteUri(t,e){return this.getRepositoryProvider(t).getRemoteUri(e)}getProviderRootUri(t){return t=x.getProviderUri(t),this.getRepositoryProvider(t).getProviderRootUri(t)}getRelativeFilePath(t,e){return e=x.getProviderUri(e!=null?e:t),this.getRepositoryProvider(e).getRelativeFilePath(t,e)}getVirtualUriMetadata(t){return this.getRepositoryProvider(t).getVirtualUriMetadata(t)}getVirtualCanonicalRootUri(t){const e=x.getVirtualUri(this.getProviderRootUri(t));let{authority:n}=e;const r=n.indexOf(ar.authoritySeparator);return r!==-1&&(n=n.substr(0,r)),e.with({authority:n})}getVirtualRootUri(t){return x.getVirtualUri(this.getProviderRootUri(t))}getVirtualWorkspaceUri(t){var e;return(e=l.workspace.getWorkspaceFolder(x.getVirtualUri(t)))==null?void 0:e.uri}createIGitRepository(t,e,n){var r,i;const a=this.getChangeStore(t);return(i=(r=this.getRepositoryProvider(t)).createIGitRepository)==null?void 0:i.call(r,t,e,n,a)}async getCommitOperations(t,e){const n=this.getChangeStore(t);let r;return(e==null?void 0:e.staged)?(r=await n.getStagedChanges(t),r.length===0&&e.staged==="auto"&&(r=await n.getChanges(t))):r=await n.getChanges(t),r.map(a=>{const s=this.getRelativeFilePath(t,a.uri);switch(a.type){case D.Created:case D.Changed:return{type:a.type,path:s,fileType:a.fileType,content:n.readFile(a.uri).then(async c=>{if(!c)throw this.telemetryService.publicLog2("changeStore.readFailed",{reason:"content undefined"}),new Error("No working content for created or changed commit operation");if(await Rn(c)!==a.hash)throw this.telemetryService.publicLog2("changeStore.readFailed",{reason:"content hash mismatch"}),new Error("Working file content hash does not match expected file content hash");return c})};case D.Deleted:return{type:a.type,path:s,fileType:a.fileType,content:void 0}}})}async getMetadata(t){return{...await this.getMetadataCore(this.getVirtualRootUri(t)),path:this.getRelativeFilePath(t,t)}}async getIndexMetadata(t){const e=this.getIndexProvider(t);return e?e.getIndexMetadata(t):void 0}getModeConfig(t,e,n){return pe.getMode(this.getVirtualRootUri(t),e,Boolean(n))}async getModeRefType(t,e){return t=this.getVirtualRootUri(t),this.getRepositoryProvider(t).getModeRefType(t,e)}getIndexProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.id;return n?this._indexProviders.get(n):void 0}async getMetadataCore(t){const e=E(t);let n=this.pendingMetadataRequests.get(e);if(n)return n;let{revision:r,cachedMetadata:i}=await this.getMetadataStore(t).get(t);if(i!==void 0)return i;await this.getChangeStore(t).hasChanges(t)||(r=void 0);const a=this.getProvider(t);if(!a)throw new Zt(t);const s=Pt.decode(t);(s==null?void 0:s.type)===At.SHA&&(r=s.sha);try{n=a.provider.createMetadata(t,r),this.pendingMetadataRequests.set(e,n);const c=await n;return await this.updateMetadataCore(t,c,{silent:!0}),c}catch(c){throw Ze.asVirtualProviderErrorCode(c)===ie.InvalidRepositoryError&&Fn.showRepositoryNotValidMessage(),c}finally{this.pendingMetadataRequests.delete(e)}}async updateMetadata(t,e){const n=new _t(`VirtualProviderService.updateMetadata(${t.toString()})`,{},e.HEAD.sha);try{await this.getMetadataStore(t).set(x.getVirtualUri(t),e.HEAD.sha,e)}finally{n.stop()}}updateMetadataCore(t,e,n){return this.getMetadataStore(t).set(x.getVirtualUri(t),e.HEAD.sha,e,n)}async getRepositoryContext(t,e){var n,r;e=e!=null?e:pe.get("gitProtocol");let{HEAD:i,cloneUrl:a}=await this.getMetadata(t.uri);if(((n=i.branch)==null?void 0:n.remote)!==void 0){const s=this.getRemoteUri(t.provider.id,{repo:i.branch.remote.repo}),c=(r=await this.createWorkspaceForRemoteUrl(s.toString()))==null?void 0:r.uri;if(c===void 0)throw new Error(`Unable to determine repository context for remote url '${s.toString()}'`);return{cloneUrl:a}=await this.getMetadata(c),{uri:e==="http"?a.http:a.ssh,ref:i.branch.name,name:i.branch.remote.name}}return{uri:e==="http"?a.http:a.ssh,ref:i.name,name:t.name}}async clone(t){const{uri:e,ref:n}=await this.getRepositoryContext(t);if(!e)throw new Error("No url found for clone");let r=`${l.env.uriScheme}://vscode.git/clone?url=${encodeURIComponent(e)}`;if(n!==void 0&&(r+=`&ref=${encodeURIComponent(n)}`),jt)return l.Uri.parse(r);const i=o(async a=>{try{await a.activate(),await l.commands.executeCommand("git.clone",e,void 0,{ref:n})}catch(s){K.error(s,"Unable to clone repository");const c=l.l10n.t("Could not clone your repository as Git is not installed."),u=l.l10n.t("Download Git");await l.window.showErrorMessage(c,{modal:!0},u)===u&&await l.commands.executeCommand("vscode.open",l.Uri.parse("https://aka.ms/vscode-download-git"))}},"cloneRepository");if(l.workspace.isTrusted){const a=l.extensions.getExtension("vscode.git");if(a)await i(a);else throw new Error("Git extension not found")}else return l.Uri.parse(`${r}&windowId=_blank`)}createBranch(t,e,n,r){return this.getRepositoryProvider(t).createBranch(t,e,n,r)}createAndPushCommit(t,e,n,r,i,a){return this.getRepositoryProvider(t).createAndPushCommit(t,e,n,r,i,a)}createPullRequest(t,e,n,r,i,a){return this.getRepositoryProvider(t).createPullRequest(t,e,n,r,i,a)}fetch(t,e){return this.getRepositoryProvider(t).fetch(t,e)}async fetchOrSync(t){await this.getChangeStore(t).hasChanges(t)?await this.fetch(t):await this.sync(t,{reason:"invoked"})}fork(t){return this.getRepositoryProvider(t).fork(t)}getBranch(t,e){return this.getRepositoryProvider(t).getBranch(t,e)}getBranches(t,e){return this.getRepositoryProvider(t).getBranches(t,e)}getCommit(t,e){return this.getRepositoryProvider(t).getCommit(t,e)}getCommits(t,e){var n;return(n=this.getRepositoryProvider(t))==null?void 0:n.getCommits(t,e)}compareCommits(t,e){var n;return(n=this.getRepositoryProvider(t))==null?void 0:n.compareCommits(t,e)}getFileContent(t,e,n){return this.getRepositoryProvider(t).getFileContent(t,e,n)}getFork(t){return this.getRepositoryProvider(t).getFork(t)}async getIncomingChanges(t){var e,n,r;return(r=(n=(e=this.getRepositoryProvider(t)).getIncomingChanges)==null?void 0:n.call(e,t))!=null?r:[]}getPullRequest(t,e){return this.getRepositoryProvider(t).getPullRequest(t,e)}getTags(t,e){return this.getRepositoryProvider(t).getTags(t,e)}getSubmodules(t){var e,n;return(n=(e=this.getRepositoryProvider(t)).getSubmodules)==null?void 0:n.call(e,t)}getSnapshots(t,e){var n,r;return(r=(n=this.getIndexProvider(t))==null?void 0:n.getSnapshots(t,e))!=null?r:Promise.resolve([])}async getTarGz(t,e,n){var r,i;return(i=(r=this.getRepositoryProvider(t)).getTarGz)==null?void 0:i.call(r,t,e,n)}async loadWorkspaceContents(t){return await Fr(this,t),this.getRepositoryProvider(t).loadWorkspaceContents(t)}switchTo(t,e,n){return this.getRepositoryProvider(t).switchTo(t,e,n)}async sync(t,e){const n=this._repositories.get(E(t));n&&this._onDidSyncRepository.fire({repository:n,syncing:!0});try{const r=this.getProvider(t),i=this.getIndexProvider(t);if(r===void 0)throw new Zt(t);let{to:a,reason:s,...c}=e!=null?e:{};a===void 0&&i&&(a=await i.resolveIndexRef(t,s==="user"));const u=this.getChangeStore(t);if(await u.hasMergeConflicts(t))throw Ze.UnresolvedConflictsError();return await r.provider.sync(t,u,{conflictResolution:ve.Abort,...c,to:a})}finally{n&&this._onDidSyncRepository.fire({repository:n,syncing:!1})}}stat(t){return this.getFileSystemProvider(t).stat(t)}readDirectory(t){return this.getFileSystemProvider(t).readDirectory(t)}readFile(t){return this.getFileSystemProvider(t).readFile(t)}watch(t,e){return this.getFileSystemProvider(t).watch(t,e)}changeStoreApplyChangeset(t,e,n){return this.getChangeStore(t).applyChangeset(t,e,n)}changeStoreCreateFile(t,e){return this.getChangeStore(t).createFile(t,e)}changeStoreCreateDirectory(t){return this.getChangeStore(t).createDirectory(t)}changeStoreDeleteDirectory(t){return this.getChangeStore(t).deleteDirectory(t)}changeStoreDeleteFile(t){return this.getChangeStore(t).deleteFile(t)}changeStoreExportDebugInfo(){var t;for(const e of(t=l.workspace.workspaceFolders)!=null?t:[])this.getChangeStore(e.uri).exportDebugInfo(e.uri)}changeStoreGetChange(t){return this.getChangeStore(t).getChange(t)}changeStoreGetChanges(t,e){return this.getChangeStore(t).getChanges(this.stripUriScope(t),e)}changeStoreGetScopedChangeStore(t,e){const n=typeof e=="string"?e:e.workspaceId;return this.getChangeStore(t).getScopedChangeStore(n)}changeStoreGetScopedUri(t,e){const n=typeof e=="string"?e:e.workspaceId;return this.getChangeStore(t).getScopedUri(t,n)}changeStoreHasChanges(t){return this.getChangeStore(t).hasChanges(this.stripUriScope(t))}changeStoreMaybeHasChanges(t,e){return this.getChangeStore(t).maybeHasChanges(this.stripUriScope(t),this.stripUriScope(e))}changeStoreReadFile(t){return this.getChangeStore(t).readFile(t)}changeStoreResolveDiffCommand(t,e,n,r){return this.getChangeStore(t).resolveDiffCommand(t,e,n,r)}changeStoreStat(t){return this.getChangeStore(t).stat(t)}changeStoreUpdateDirectoryEntries(t,e){return this.getChangeStore(t).updateDirectoryEntries(t,e)}changeStoreWriteFile(t,e,n,r){return this.getChangeStore(t).writeFile(t,e,n,r)}stripUriScope(t){return t===void 0||!t.fragment?t:t.with({fragment:""})}getFromStorage(t,e){return this.getStorageService(t).get(e)}async storeInStorage(t,e,n){return this.getStorageService(t).store(e,n)}async deleteFromStorage(t,e){return this.getStorageService(t).delete(e)}async workspaceRepositoriesGetRepositoriesByCanonicalUri(){const t=await this.workspaceRepositoriesGetRepositories();return Ci(t.sort((e,n)=>n.timestamp-e.timestamp),e=>E(e.canonicalUri))}workspaceRepositoriesRemoveRepository(t){return this.getWorkspaceRepositories(t.uri).remove(t)}workspaceRepositoriesRefresh(){for(const[,t]of this._providers.entries())t.workspaceRepositories.refresh()}async workspaceRepositoriesGetRepositories(){const t=[];for(const[,e]of this._providers.entries()){const n=await e.workspaceRepositories.get();t.push(...n.filter(r=>r.provider.id===e.id))}return t}provideFileSearchResults(t,e,n){return this.getFileSystemProvider(e.folder).provideFileSearchResults(t,e,n)}provideTextSearchResults(t,e,n,r){return this.getFileSystemProvider(e.folder).provideTextSearchResults(t,e,n,r)}static getProviderId(t){const{authority:e}=t,n=e.indexOf(ar.authoritySeparator);return n!==-1?e.substr(0,n):e}static isCanonicalUri(t){return t.authority.indexOf(ar.authoritySeparator)===-1}},"_VirtualProviderService");let Gn=ar;Gn.scheme="vscode-vfs",Gn.authoritySeparator="+",Gn.baseVirtualWorkspaceUri=l.Uri.parse(`${ar.scheme}://`),Bn([St()],Gn.prototype,"getMetadataCore",1);var Lr;(function(t){t[t.File=1]="File",t[t.Notebook=2]="Notebook"})(Lr||(Lr={}));function ui(t){return t instanceof l.Uri?{fileUri:t,lineNumber:void 0}:t!==void 0&&"lineNumber"in t&&"uri"in t?{fileUri:t.uri,lineNumber:t.lineNumber}:{fileUri:void 0,lineNumber:void 0}}o(ui,"extractContext");function ri(t){var e,n,r;let i;const{fileUri:a,lineNumber:s}=ui(t),c=a!=null?a:(e=l.window.activeTextEditor)==null?void 0:e.document.uri;if(c){if(c.scheme==="vscode-notebook-cell"&&((n=l.window.activeNotebookEditor)==null?void 0:n.notebook.uri.fsPath)===c.fsPath){const u=l.window.activeNotebookEditor.notebook.getCells().find(f=>f.document.uri.fragment===(c==null?void 0:c.fragment)),d=(r=u==null?void 0:u.index)!=null?r:l.window.activeNotebookEditor.selection.start;return i=ii(s),{type:2,uri:c,cellIndex:d,range:i}}return i=ii(s),{type:1,uri:c,range:i}}if(l.window.activeNotebookEditor)return{type:2,uri:l.window.activeNotebookEditor.notebook.uri,cellIndex:l.window.activeNotebookEditor.selection.start,range:void 0}}o(ri,"getFileAndPosition");function ii(t){var e;return t!==void 0&&(!l.window.activeTextEditor||l.window.activeTextEditor.selection.isEmpty||!l.window.activeTextEditor.selection.contains(new l.Position(t-1,0)))?new l.Range(t-1,0,t-1,1):(e=l.window.activeTextEditor)==null?void 0:e.selection}o(ii,"getRangeOrSelectionForLink");function Pr(){return`${l.env.appName.toLowerCase().includes("insiders")?"insiders.":""}vscode.dev`}o(Pr,"getVscodeDevHost");function bi(t,e,n){async function r(s,c){await Fr(t,void 0);const[u,d]=typeof s=="string"?[{url:s,workspace:void 0}]:await wi.show(t,c,l.l10n.t("Enter a remote url, or select a remote provider"),c===Ve.AddToWorkspace?l.l10n.t("Add Remote Repository to Workspace"):l.l10n.t("Open Remote Repository"),{allowAddToWorkspace:!1});if(!u){n.publicLog2("openRepository.abort",{reason:"abandoned"});return}try{let f;if(u.workspace)f=u.workspace,f.location=d!=null?d:f.location;else if(f=await t.createWorkspaceForRemoteUrl(u.url,void 0,d!=null?d:c),!f){n.publicLog2("openRepository.abort",{reason:"aborted invalid url"});return}await kn(t,f)}catch(f){if(n.sendException(f),Ze.asVirtualProviderErrorCode(f)===ie.InvalidCredentialsError){const{action:h}=f;if(h){Fn.showStatus401Message(()=>h());return}}K.error(f)}}o(r,"openRepository");async function i(s,c){const u=c?t.repositories.filter(d=>d.provider.id===c):t.repositories;if(u.length!==0){if(u.length>1){const d=await l.window.showQuickPick(u.map(f=>({label:f.name,description:f.provider.name,repository:f})),{placeHolder:s});return d?d.repository:void 0}return u[0]}}o(i,"getRepository");async function a(s,c,u=!1){var d;const f=await i(l.l10n.t("Choose which repository to copy a vscode.dev link for"),void 0);if(f===void 0)return;const h=ri(c);if(!h)return;const p=s.getRelativeFilePath(h.uri),b=await s.getMetadata(f.uri),te=((d=b.HEAD.branch)==null?void 0:d.name)===b.defaultBranch.name||b.pullRequest?await s.getBestRemoteUri(f.uri,X.Branch,p,{selection:h.range,resourceUri:h.uri}):await s.getBestRemoteUri(f.uri,void 0,p,{selection:h.range,resourceUri:h.uri});if(te!==void 0)return te.with({authority:`${Pr()}/${te.authority}`,fragment:u?te.fragment:void 0,query:u?te.query:void 0,path:Y(te.path)})}return o(a,"getLink"),[l.commands.registerCommand("remoteHub.openRepository",s=>(n.publicLog2("command.openRepository"),r(s))),l.commands.registerCommand("remoteHub.continueOn.openRepository",s=>(n.publicLog2("command.continueOn.openRepository"),r(s))),l.commands.registerCommand("remoteHub.addRepositoryToWorkspace",()=>{}),l.commands.registerCommand("remoteHub.continueOn.addRepositoryToWorkspace",()=>{}),l.commands.registerCommand("remoteHub.continueOn",async()=>l.commands.executeCommand("_workbench.editSessions.actions.continueEditSession")),l.commands.registerCommand("remoteHub.openOnDesktop",async()=>{if(!jt)return;const s=await i(l.l10n.t("Choose which repository to open on the desktop"),void 0);if(s===void 0)return;const c=await t.getBestRemoteUri(s.uri);if(c!==void 0)return n.publicLog2("command.openOnDesktop"),l.Uri.parse(`${l.env.uriScheme}://${e}/open?url=${encodeURIComponent(c.toString(!0))}`)}),l.commands.registerCommand("remoteHub.clone",async()=>{const s=await i(l.l10n.t("Choose which repository to clone"),void 0);if(s!==void 0){if(n.publicLog2("command.clone"),await t.changeStoreHasChanges(s.uri)&&l.workspace.getConfiguration("workbench.experimental.editSessions").get("autoResume")==="off"){const c={title:l.l10n.t("Continue")},u={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showWarningMessage(l.l10n.t(`You have uncommitted changes.

Unless you commit those changes, you won't be able see them in your local clone.`),{modal:!0},c,u)!==c){n.publicLog2("command.clone.abort",{reason:"abandoned uncommitted changes prompt"});return}}return t.clone(s)}}),l.commands.registerCommand("remoteHub.continueEditSession.openOnWeb",async()=>{if(jt)return;const s=await i(l.l10n.t("Choose which repository to open on the web"));if(s===void 0)return;const c=await t.getBestRemoteUri(s.uri);if(c!==void 0)return c.with({authority:`${Pr()}/${c.authority}`})}),l.commands.registerCommand("remoteHub.openOnWeb",async()=>{if(jt)return;const s=await i(l.l10n.t("Choose which repository to open on the web"),void 0);if(s===void 0)return;const c=await t.getBestRemoteUri(s.uri);if(c===void 0)return;const u=c.with({authority:`${Pr()}/${c.authority}`});n.publicLog2("command.openOnWeb"),l.env.openExternal(u)}),l.commands.registerCommand("remoteHub.copyVscodeDevLinkFile",async()=>{const s=await i(l.l10n.t("Choose which repository to copy a vscode.dev link for"),void 0);if(s===void 0)return;const c=await t.getBestRemoteUri(s.uri);if(c===void 0)return;const u=c.with({authority:`${Pr()}/${c.authority}`});await l.env.clipboard.writeText(u.toString(!0))}),l.commands.registerCommand("remoteHub.copyVscodeDevLink",async s=>{const c=await a(t,s,!0);c&&await l.env.clipboard.writeText(c.toString(!0))}),l.commands.registerCommand("remoteHub.copyVscodeDevLinkWithoutRange",async s=>{const c=await a(t,s,!1);c&&await l.env.clipboard.writeText(c.toString(!0))}),l.commands.registerCommand("remoteHub.goToRepository",async()=>{n.publicLog2("command.goToRepository");const s=await i(l.l10n.t("Choose which repository to open on the remote"));if(!s)return;const c={provider:s.provider,repo:s.id};return l.commands.executeCommand("remoteHub.openOnRemote",c)}),l.commands.registerCommand("remoteHub.openOnRemote",async s=>{n.publicLog2("command.openOnRemote");const{provider:c,...u}=s,d=t.getRemoteUri(c.id,u);if(d){await l.env.openExternal(d);return}l.window.showErrorMessage(l.l10n.t("Unable to open the resource on {0}",s.provider.name))}),l.commands.registerCommand("remoteHub.refresh",()=>void t.refresh()),l.commands.registerCommand("remoteHub.enableDebugLogging",()=>pe.updateEffective("logLevel",et.Debug)),l.commands.registerCommand("remoteHub.disableDebugLogging",()=>pe.updateEffective("logLevel",et.Warn)),l.commands.registerCommand("remoteHub.exportDebugInfo",async()=>{t.changeStoreExportDebugInfo()}),l.commands.registerCommand("remoteHub.setContext",async(s,c)=>{if(!s.startsWith("continueOn:"))throw new Error("Key must start with 'continueOn:'");await wr(s,c)}),l.commands.registerCommand("remoteHub.notebook.continueOn",async()=>{const s={title:l.l10n.t("Continue Working On...")};await l.window.showInformationMessage(l.l10n.t("Running notebook cells is not available in the web editor. To run this cell, you will need to continue in an environment that can run code, like a codespace or local VS Code."),{modal:!0},s)===s&&await l.commands.executeCommand("remoteHub.continueOn")}),l.commands.registerCommand("remoteHub.remoteHelp.getStarted",()=>jt?"https://aka.ms/vscode-web-docs":"https://aka.ms/vscode-remote/remote-repositories/getting-started")]}o(bi,"registerCommands");function Ar(t){return t}o(Ar,"command");async function di(t,e){return l.commands.executeCommand(t,e)}o(di,"executeCommand");function ai(t,e,n){return new ot(new Qr(t),new Qr(e)).ComputeDiff(n).changes}o(ai,"stringDiff");class Ir{constructor(e,n,r,i){this.originalStart=e,this.originalLength=n,this.modifiedStart=r,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}o(Ir,"DiffChange");var _i;(function(t){t[t.MAX_SAFE_SMALL_INTEGER=1073741824]="MAX_SAFE_SMALL_INTEGER",t[t.MIN_SAFE_SMALL_INTEGER=-1073741824]="MIN_SAFE_SMALL_INTEGER",t[t.MAX_UINT_8=255]="MAX_UINT_8",t[t.MAX_UINT_16=65535]="MAX_UINT_16",t[t.MAX_UINT_32=4294967295]="MAX_UINT_32",t[t.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN"})(_i||(_i={}));function Ei(t,e){return(e<<5)-e+t|0}o(Ei,"numberHash");function oi(t,e){e=Ei(149417,e);for(let n=0,r=t.length;n<r;n++)e=Ei(t.charCodeAt(n),e);return e}o(oi,"stringHash");class Qr{constructor(e){this.source=e}getElements(){const e=this.source,n=new Int32Array(e.length);for(let r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return n}}o(Qr,"StringDiffSequence");class or{static Assert(e,n){if(!e)throw new Error(n)}}o(or,"Debug");class Jr{static Copy(e,n,r,i,a){for(let s=0;s<a;s++)r[i+s]=e[n+s]}static Copy2(e,n,r,i,a){for(let s=0;s<a;s++)r[i+s]=e[n+s]}}o(Jr,"MyArray");var he;(function(t){t[t.MaxDifferencesHistory=1447]="MaxDifferencesHistory"})(he||(he={}));class Xe{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Ir(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_originalCount++}AddModifiedElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}o(Xe,"DiffChangeHelper");class ot{constructor(e,n,r=null){this.ContinueProcessingPredicate=r,this._originalSequence=e,this._modifiedSequence=n;const[i,a,s]=ot._getElements(e),[c,u,d]=ot._getElements(n);this._hasStrings=s&&d,this._originalStringElements=i,this._originalElementsOrHash=a,this._modifiedStringElements=c,this._modifiedElementsOrHash=u,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const n=e.getElements();if(ot._isStringArray(n)){const r=new Int32Array(n.length);for(let i=0,a=n.length;i<a;i++)r[i]=oi(n[i],0);return[n,r,!0]}return n instanceof Int32Array?[[],n,!1]:[[],new Int32Array(n),!1]}ElementsAreEqual(e,n){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[n]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[n]:!0}ElementsAreStrictEqual(e,n){if(!this.ElementsAreEqual(e,n))return!1;const r=ot._getStrictElement(this._originalSequence,e),i=ot._getStrictElement(this._modifiedSequence,n);return r===i}static _getStrictElement(e,n){return typeof e.getStrictElement=="function"?e.getStrictElement(n):null}OriginalElementsAreEqual(e,n){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[n]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[n]:!0}ModifiedElementsAreEqual(e,n){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[n]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[n]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,n,r,i,a){const s=[!1];let c=this.ComputeDiffRecursive(e,n,r,i,s);return a&&(c=this.PrettifyChanges(c)),{quitEarly:s[0],changes:c}}ComputeDiffRecursive(e,n,r,i,a){for(a[0]=!1;e<=n&&r<=i&&this.ElementsAreEqual(e,r);)e++,r++;for(;n>=e&&i>=r&&this.ElementsAreEqual(n,i);)n--,i--;if(e>n||r>i){let h;return r<=i?(or.Assert(e===n+1,"originalStart should only be one more than originalEnd"),h=[new Ir(e,0,r,i-r+1)]):e<=n?(or.Assert(r===i+1,"modifiedStart should only be one more than modifiedEnd"),h=[new Ir(e,n-e+1,r,0)]):(or.Assert(e===n+1,"originalStart should only be one more than originalEnd"),or.Assert(r===i+1,"modifiedStart should only be one more than modifiedEnd"),h=[]),h}const s=[0],c=[0],u=this.ComputeRecursionPoint(e,n,r,i,s,c,a),d=s[0],f=c[0];if(u!==null)return u;if(!a[0]){const h=this.ComputeDiffRecursive(e,d,r,f,a);let p=[];return a[0]?p=[new Ir(d+1,n-(d+1)+1,f+1,i-(f+1)+1)]:p=this.ComputeDiffRecursive(d+1,n,f+1,i,a),this.ConcatenateChanges(h,p)}return[new Ir(e,n-e+1,r,i-r+1)]}WALKTRACE(e,n,r,i,a,s,c,u,d,f,h,p,b,te,A,ee,me,re){let Pe=null,Fe=null,$e=new Xe,je=n,it=r,Je=b[0]-ee[0]-i,xt=-1073741824,Qt=this.m_forwardHistory.length-1;do{const an=Je+e;an===je||an<it&&d[an-1]<d[an+1]?(h=d[an+1],te=h-Je-i,h<xt&&$e.MarkNextChange(),xt=h,$e.AddModifiedElement(h+1,te),Je=an+1-e):(h=d[an-1]+1,te=h-Je-i,h<xt&&$e.MarkNextChange(),xt=h-1,$e.AddOriginalElement(h,te+1),Je=an-1-e),Qt>=0&&(d=this.m_forwardHistory[Qt],e=d[0],je=1,it=d.length-1)}while(--Qt>=-1);if(Pe=$e.getReverseChanges(),re[0]){let an=b[0]+1,$t=ee[0]+1;if(Pe!==null&&Pe.length>0){const dn=Pe[Pe.length-1];an=Math.max(an,dn.getOriginalEnd()),$t=Math.max($t,dn.getModifiedEnd())}Fe=[new Ir(an,p-an+1,$t,A-$t+1)]}else{$e=new Xe,je=s,it=c,Je=b[0]-ee[0]-u,xt=1073741824,Qt=me?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const an=Je+a;an===je||an<it&&f[an-1]>=f[an+1]?(h=f[an+1]-1,te=h-Je-u,h>xt&&$e.MarkNextChange(),xt=h+1,$e.AddOriginalElement(h+1,te+1),Je=an+1-a):(h=f[an-1],te=h-Je-u,h>xt&&$e.MarkNextChange(),xt=h,$e.AddModifiedElement(h+1,te+1),Je=an-1-a),Qt>=0&&(f=this.m_reverseHistory[Qt],a=f[0],je=1,it=f.length-1)}while(--Qt>=-1);Fe=$e.getChanges()}return this.ConcatenateChanges(Pe,Fe)}ComputeRecursionPoint(e,n,r,i,a,s,c){let u=0,d=0,f=0,h=0,p=0,b=0;e--,r--,a[0]=0,s[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const te=n-e+(i-r),A=te+1,ee=new Int32Array(A),me=new Int32Array(A),re=i-r,Pe=n-e,Fe=e-r,$e=n-i,it=(Pe-re)%2==0;ee[re]=e,me[Pe]=n,c[0]=!1;for(let Je=1;Je<=te/2+1;Je++){let xt=0,Qt=0;f=this.ClipDiagonalBound(re-Je,Je,re,A),h=this.ClipDiagonalBound(re+Je,Je,re,A);for(let $t=f;$t<=h;$t+=2){$t===f||$t<h&&ee[$t-1]<ee[$t+1]?u=ee[$t+1]:u=ee[$t-1]+1,d=u-($t-re)-Fe;const dn=u;for(;u<n&&d<i&&this.ElementsAreEqual(u+1,d+1);)u++,d++;if(ee[$t]=u,u+d>xt+Qt&&(xt=u,Qt=d),!it&&Math.abs($t-Pe)<=Je-1&&u>=me[$t])return a[0]=u,s[0]=d,dn<=me[$t]&&1447>0&&Je<=1447+1?this.WALKTRACE(re,f,h,Fe,Pe,p,b,$e,ee,me,u,n,a,d,i,s,it,c):null}const an=(xt-e+(Qt-r)-Je)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(xt,an))return c[0]=!0,a[0]=xt,s[0]=Qt,an>0&&1447>0&&Je<=1447+1?this.WALKTRACE(re,f,h,Fe,Pe,p,b,$e,ee,me,u,n,a,d,i,s,it,c):(e++,r++,[new Ir(e,n-e+1,r,i-r+1)]);p=this.ClipDiagonalBound(Pe-Je,Je,Pe,A),b=this.ClipDiagonalBound(Pe+Je,Je,Pe,A);for(let $t=p;$t<=b;$t+=2){$t===p||$t<b&&me[$t-1]>=me[$t+1]?u=me[$t+1]-1:u=me[$t-1],d=u-($t-Pe)-$e;const dn=u;for(;u>e&&d>r&&this.ElementsAreEqual(u,d);)u--,d--;if(me[$t]=u,it&&Math.abs($t-re)<=Je&&u<=ee[$t])return a[0]=u,s[0]=d,dn>=ee[$t]&&1447>0&&Je<=1447+1?this.WALKTRACE(re,f,h,Fe,Pe,p,b,$e,ee,me,u,n,a,d,i,s,it,c):null}if(Je<=1447){let $t=new Int32Array(h-f+2);$t[0]=re-f+1,Jr.Copy2(ee,f,$t,1,h-f+1),this.m_forwardHistory.push($t),$t=new Int32Array(b-p+2),$t[0]=Pe-p+1,Jr.Copy2(me,p,$t,1,b-p+1),this.m_reverseHistory.push($t)}}return this.WALKTRACE(re,f,h,Fe,Pe,p,b,$e,ee,me,u,n,a,d,i,s,it,c)}PrettifyChanges(e){for(let n=0;n<e.length;n++){const r=e[n],i=n<e.length-1?e[n+1].originalStart:this._originalElementsOrHash.length,a=n<e.length-1?e[n+1].modifiedStart:this._modifiedElementsOrHash.length,s=r.originalLength>0,c=r.modifiedLength>0;for(;r.originalStart+r.originalLength<i&&r.modifiedStart+r.modifiedLength<a&&(!s||this.OriginalElementsAreEqual(r.originalStart,r.originalStart+r.originalLength))&&(!c||this.ModifiedElementsAreEqual(r.modifiedStart,r.modifiedStart+r.modifiedLength));){const d=this.ElementsAreStrictEqual(r.originalStart,r.modifiedStart);if(this.ElementsAreStrictEqual(r.originalStart+r.originalLength,r.modifiedStart+r.modifiedLength)&&!d)break;r.originalStart++,r.modifiedStart++}let u=[null];if(n<e.length-1&&this.ChangesOverlap(e[n],e[n+1],u)){e[n]=u[0],e.splice(n+1,1),n--;continue}}for(let n=e.length-1;n>=0;n--){const r=e[n];let i=0,a=0;if(n>0){const h=e[n-1];i=h.originalStart+h.originalLength,a=h.modifiedStart+h.modifiedLength}const s=r.originalLength>0,c=r.modifiedLength>0;let u=0,d=this._boundaryScore(r.originalStart,r.originalLength,r.modifiedStart,r.modifiedLength);for(let h=1;;h++){const p=r.originalStart-h,b=r.modifiedStart-h;if(p<i||b<a||s&&!this.OriginalElementsAreEqual(p,p+r.originalLength)||c&&!this.ModifiedElementsAreEqual(b,b+r.modifiedLength))break;const A=(p===i&&b===a?5:0)+this._boundaryScore(p,r.originalLength,b,r.modifiedLength);A>d&&(d=A,u=h)}r.originalStart-=u,r.modifiedStart-=u;const f=[null];if(n>0&&this.ChangesOverlap(e[n-1],e[n],f)){e[n-1]=f[0],e.splice(n,1),n++;continue}}if(this._hasStrings)for(let n=1,r=e.length;n<r;n++){const i=e[n-1],a=e[n],s=a.originalStart-i.originalStart-i.originalLength,c=i.originalStart,u=a.originalStart+a.originalLength,d=u-c,f=i.modifiedStart,h=a.modifiedStart+a.modifiedLength,p=h-f;if(s<5&&d<20&&p<20){const b=this._findBetterContiguousSequence(c,d,f,p,s);if(b){const[te,A]=b;(te!==i.originalStart+i.originalLength||A!==i.modifiedStart+i.modifiedLength)&&(i.originalLength=te-i.originalStart,i.modifiedLength=A-i.modifiedStart,a.originalStart=te+s,a.modifiedStart=A+s,a.originalLength=u-a.originalStart,a.modifiedLength=h-a.modifiedStart)}}}return e}_findBetterContiguousSequence(e,n,r,i,a){if(n<a||i<a)return null;const s=e+n-a+1,c=r+i-a+1;let u=0,d=0,f=0;for(let h=e;h<s;h++)for(let p=r;p<c;p++){const b=this._contiguousSequenceScore(h,p,a);b>0&&b>u&&(u=b,d=h,f=p)}return u>0?[d,f]:null}_contiguousSequenceScore(e,n,r){let i=0;for(let a=0;a<r;a++){if(!this.ElementsAreEqual(e+a,n+a))return 0;i+=this._originalStringElements[e+a].length}return i}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,n){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(n>0){const r=e+n;if(this._OriginalIsBoundary(r-1)||this._OriginalIsBoundary(r))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,n){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(n>0){const r=e+n;if(this._ModifiedIsBoundary(r-1)||this._ModifiedIsBoundary(r))return!0}return!1}_boundaryScore(e,n,r,i){const a=this._OriginalRegionIsBoundary(e,n)?1:0,s=this._ModifiedRegionIsBoundary(r,i)?1:0;return a+s}ConcatenateChanges(e,n){let r=[];if(e.length===0||n.length===0)return n.length>0?n:e;if(this.ChangesOverlap(e[e.length-1],n[0],r)){const i=new Array(e.length+n.length-1);return Jr.Copy(e,0,i,0,e.length-1),i[e.length-1]=r[0],Jr.Copy(n,1,i,e.length,n.length-1),i}else{const i=new Array(e.length+n.length);return Jr.Copy(e,0,i,0,e.length),Jr.Copy(n,0,i,e.length,n.length),i}}ChangesOverlap(e,n,r){if(or.Assert(e.originalStart<=n.originalStart,"Left change is not less than or equal to right change"),or.Assert(e.modifiedStart<=n.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=n.originalStart||e.modifiedStart+e.modifiedLength>=n.modifiedStart){const i=e.originalStart;let a=e.originalLength;const s=e.modifiedStart;let c=e.modifiedLength;return e.originalStart+e.originalLength>=n.originalStart&&(a=n.originalStart+n.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=n.modifiedStart&&(c=n.modifiedStart+n.modifiedLength-e.modifiedStart),r[0]=new Ir(i,a,s,c),!0}else return r[0]=null,!1}ClipDiagonalBound(e,n,r,i){if(e>=0&&e<i)return e;const a=r,s=i-r-1,c=n%2==0;if(e<0){const u=a%2==0;return c===u?0:1}else{const u=s%2==0;return c===u?i-1:i-2}}}o(ot,"LcsDiff");var pt;(function(t){function e(r,i){return r instanceof We?i:new l.Position(i.line,i.character)}o(e,"makePosition"),t.makePosition=e;function n(r,i){return r instanceof We?i:new l.Range(i.start.line,i.start.character,i.end.line,i.end.character)}o(n,"makeRange"),t.makeRange=n})(pt||(pt={}));var It;(function(t){t[t.index2code=1]="index2code",t[t.code2Index=2]="code2Index"})(It||(It={}));const Ht=o(class{constructor(t,e,n,r){this.diffCache=new Zn(32),this.indexDocumentCache=new Zn(32),this.codeDocumentCache=new Zn(32),this.providerService=t,this.rootUri=e,this.index=n,this.code=r,this.changes=this.computeChanges()}async computeChanges(){if(this.index===this.code)return new Map;const t=await this.providerService.compareCommits(this.rootUri,{base:this.index,compare:this.code});return t===void 0?new Map:new Map(t.map(e=>[e.uri.toString(),e.type]))}async needsMapping(t){const e=t.uri;if(!e.toString().startsWith(this.rootUri.toString()))return!1;if((await this.changes).get(e.toString())!==void 0)return!0;const i=await this.getIndexDocument(e);return i===void 0?!0:this.getDiff(1,i,t).length!==0}async mapPositionFromCodeToIndex(t,e){const n=t.uri;if(!n.toString().startsWith(this.rootUri.toString()))return;const i=(await this.changes).get(n.toString());if(i===D.Created||i===D.Deleted)return;const a=await this.getIndexDocument(n);if(a===void 0)return;const s=this.getDiff(2,a,t);if(s.length===0)return e;const c=t.offsetAt(new l.Position(e.line,e.character));let u=c;for(const p of s){if(p.modifiedStart<=c&&c<p.modifiedStart+p.modifiedLength)return;if(u<p.modifiedStart)break;u=u-(p.modifiedLength-p.originalLength)}const d=a.positionAt(u),f=this.getWordAtOffset(a.lineAt(d.line).text,d.character),h=this.getWordAtOffset(t.lineAt(e.line).text,e.character);if(!(f===void 0||h===void 0||f!==h))return new l.Position(d.line,d.character)}async mapRangeFromIndexToCode(t,e){const n=t instanceof l.Uri?t:t.uri;if(!n.toString().startsWith(this.rootUri.toString()))return;const i=(await this.changes).get(n.toString());if(i===D.Created||i===D.Deleted)return;const[a,s]=await Promise.all([this.getIndexDocument(n),this.getCodeDocument(t)]);if(a===void 0||s===void 0)return;const c=this.getDiff(1,a,s);if(c.length===0)return e;const u=a.offsetAt(e.start);let d=u;const f=a.offsetAt(e.end);let h=f;for(const ee of c){if(h<ee.originalStart)break;const me=ee.modifiedLength-ee.originalLength;if(ee.originalStart<=u){if(u<ee.originalStart+ee.originalLength)return;d+=me}else if(f<ee.originalStart+ee.originalLength)return;if(ee.originalStart<=f){if(f<ee.originalStart+ee.originalLength)return;h+=me}}const p=s.positionAt(d),b=s.positionAt(h),te=a.getText(e),A=s.getText(pt.makeRange(s,{start:p,end:b}));if(te===A)return new l.Range(p.line,p.character,b.line,b.character)}async getIndexDocument(t){return this.getDocument(this.indexDocumentCache,t,this.index)}async getCodeDocument(t){return t instanceof l.Uri?this.getDocument(this.codeDocumentCache,t,this.code):t}async getDocument(t,e,n){let r=t.get(e.toString());if(r!==null)return r!==void 0||(r=this._getDocument(e,n),t.set(e.toString(),r),r.then(i=>{i===void 0&&t.set(e.toString(),null)},void 0)),r}async _getDocument(t,e){const n=t.toString().substr(this.rootUri.toString().length);return this.providerService.getFileContent(this.rootUri,e,n).then(r=>new We(t,Number.MAX_VALUE,Ht.textDecoder.decode(r)),()=>{})}getDiff(t,e,n){if(e.uri.toString()!==n.uri.toString())throw new Error(`Original (${e.uri.toString()}) and modified (${n.uri.toString()}) are pointing to a different document`);const r=`${t}${e.uri.toString()}`;let i=this.diffCache.get(r);return i!==void 0&&i.original===e.version&&i.modified===n.version||(i={original:e.version,modified:n.version,changes:ai(e.getText(),n.getText(),!0)},this.diffCache.set(r,i)),i.changes}getWordAtOffset(t,e){let n="findStart",r=0,i=t.length,a=0;for(;a<t.length&&n!=="endFound";){switch(a===e&&(n="findEnd"),t[a]){case" ":case"	":case"(":case")":case"[":case"]":case"{":case"}":case"'":case'"':case"`":switch(n){case"findStart":r=a+1;break;case"findEnd":i=a,n="endFound";break}break}a++}return n==="endFound"?t.substring(r,i):void 0}},"_DiffMapper");let un=Ht;un.textDecoder=new TextDecoder("utf8");var ge;(function(t){t[t.LineFeed=10]="LineFeed",t[t.CarriageReturn=13]="CarriageReturn"})(ge||(ge={}));class We{static computeLineOffsets(e,n,r=0){const i=n?[r]:[];for(let a=0;a<e.length;a++){const s=e.charCodeAt(a);(s===13||s===10)&&(s===13&&a+1<e.length&&e.charCodeAt(a+1)===10&&a++,i.push(r+a+1))}return i}constructor(e,n,r){this._content=r,this.uri=e,this.version=n,this._lineOffsets=void 0}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=We.computeLineOffsets(this._content,!0)),this._lineOffsets}getText(e){if(e){const n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content}lineAt(e){const n=this.getLineOffsets();if(e>=n.length)return{lineNumber:e,text:""};const r=n[e],i=n[e+1];if(i===void 0)return{lineNumber:e,text:this._content.substring(r)};const a=this._content.substring(r,i);let s=a.length-1;for(;s>=0&&(a[s]===`
`||a[s]==="\r");)s--;return{lineNumber:e,text:a.substr(0,s+1)}}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);const n=this.getLineOffsets();let r=0,i=n.length;if(i===0)return{line:0,character:e};for(;r<i;){const s=Math.floor((r+i)/2);n[s]>e?i=s:r=s+1}const a=r-1;return{line:a,character:e-n[a]}}offsetAt(e){const n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;const r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)}get lineCount(){return this.getLineOffsets().length}}o(We,"TextDocument");var Ke;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647})(Ke||(Ke={}));var ft;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647})(ft||(ft={}));var Rt;(function(t){function e(r,i){return r===Number.MAX_VALUE&&(r=ft.MAX_VALUE),i===Number.MAX_VALUE&&(i=ft.MAX_VALUE),{line:r,character:i}}o(e,"create"),t.create=e;function n(r){var i=r;return ze.objectLiteral(i)&&ze.uinteger(i.line)&&ze.uinteger(i.character)}o(n,"is"),t.is=n})(Rt||(Rt={}));var kt;(function(t){function e(r,i,a,s){if(ze.uinteger(r)&&ze.uinteger(i)&&ze.uinteger(a)&&ze.uinteger(s))return{start:Rt.create(r,i),end:Rt.create(a,s)};if(Rt.is(r)&&Rt.is(i))return{start:r,end:i};throw new Error("Range#create called with invalid arguments["+r+", "+i+", "+a+", "+s+"]")}o(e,"create"),t.create=e;function n(r){var i=r;return ze.objectLiteral(i)&&Rt.is(i.start)&&Rt.is(i.end)}o(n,"is"),t.is=n})(kt||(kt={}));var Dn;(function(t){function e(r,i){return{uri:r,range:i}}o(e,"create"),t.create=e;function n(r){var i=r;return ze.defined(i)&&kt.is(i.range)&&(ze.string(i.uri)||ze.undefined(i.uri))}o(n,"is"),t.is=n})(Dn||(Dn={}));var Tn;(function(t){function e(r,i,a,s){return{targetUri:r,targetRange:i,targetSelectionRange:a,originSelectionRange:s}}o(e,"create"),t.create=e;function n(r){var i=r;return ze.defined(i)&&kt.is(i.targetRange)&&ze.string(i.targetUri)&&(kt.is(i.targetSelectionRange)||ze.undefined(i.targetSelectionRange))&&(kt.is(i.originSelectionRange)||ze.undefined(i.originSelectionRange))}o(n,"is"),t.is=n})(Tn||(Tn={}));var zn;(function(t){function e(r,i,a,s){return{red:r,green:i,blue:a,alpha:s}}o(e,"create"),t.create=e;function n(r){var i=r;return ze.numberRange(i.red,0,1)&&ze.numberRange(i.green,0,1)&&ze.numberRange(i.blue,0,1)&&ze.numberRange(i.alpha,0,1)}o(n,"is"),t.is=n})(zn||(zn={}));var fi;(function(t){function e(r,i){return{range:r,color:i}}o(e,"create"),t.create=e;function n(r){var i=r;return kt.is(i.range)&&zn.is(i.color)}o(n,"is"),t.is=n})(fi||(fi={}));var Bi;(function(t){function e(r,i,a){return{label:r,textEdit:i,additionalTextEdits:a}}o(e,"create"),t.create=e;function n(r){var i=r;return ze.string(i.label)&&(ze.undefined(i.textEdit)||Ii.is(i))&&(ze.undefined(i.additionalTextEdits)||ze.typedArray(i.additionalTextEdits,Ii.is))}o(n,"is"),t.is=n})(Bi||(Bi={}));var hi;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(hi||(hi={}));var dr;(function(t){function e(r,i,a,s,c){var u={startLine:r,endLine:i};return ze.defined(a)&&(u.startCharacter=a),ze.defined(s)&&(u.endCharacter=s),ze.defined(c)&&(u.kind=c),u}o(e,"create"),t.create=e;function n(r){var i=r;return ze.uinteger(i.startLine)&&ze.uinteger(i.startLine)&&(ze.undefined(i.startCharacter)||ze.uinteger(i.startCharacter))&&(ze.undefined(i.endCharacter)||ze.uinteger(i.endCharacter))&&(ze.undefined(i.kind)||ze.string(i.kind))}o(n,"is"),t.is=n})(dr||(dr={}));var Pi;(function(t){function e(r,i){return{location:r,message:i}}o(e,"create"),t.create=e;function n(r){var i=r;return ze.defined(i)&&Dn.is(i.location)&&ze.string(i.message)}o(n,"is"),t.is=n})(Pi||(Pi={}));var gi;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(gi||(gi={}));var Yi;(function(t){t.Unnecessary=1,t.Deprecated=2})(Yi||(Yi={}));var Ea;(function(t){function e(n){var r=n;return r!=null&&ze.string(r.href)}o(e,"is"),t.is=e})(Ea||(Ea={}));var Ui;(function(t){function e(r,i,a,s,c,u){var d={range:r,message:i};return ze.defined(a)&&(d.severity=a),ze.defined(s)&&(d.code=s),ze.defined(c)&&(d.source=c),ze.defined(u)&&(d.relatedInformation=u),d}o(e,"create"),t.create=e;function n(r){var i,a=r;return ze.defined(a)&&kt.is(a.range)&&ze.string(a.message)&&(ze.number(a.severity)||ze.undefined(a.severity))&&(ze.integer(a.code)||ze.string(a.code)||ze.undefined(a.code))&&(ze.undefined(a.codeDescription)||ze.string((i=a.codeDescription)===null||i===void 0?void 0:i.href))&&(ze.string(a.source)||ze.undefined(a.source))&&(ze.undefined(a.relatedInformation)||ze.typedArray(a.relatedInformation,Pi.is))}o(n,"is"),t.is=n})(Ui||(Ui={}));var qi;(function(t){function e(r,i){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];var c={title:r,command:i};return ze.defined(a)&&a.length>0&&(c.arguments=a),c}o(e,"create"),t.create=e;function n(r){var i=r;return ze.defined(i)&&ze.string(i.title)&&ze.string(i.command)}o(n,"is"),t.is=n})(qi||(qi={}));var Ii;(function(t){function e(a,s){return{range:a,newText:s}}o(e,"replace"),t.replace=e;function n(a,s){return{range:{start:a,end:a},newText:s}}o(n,"insert"),t.insert=n;function r(a){return{range:a,newText:""}}o(r,"del"),t.del=r;function i(a){var s=a;return ze.objectLiteral(s)&&ze.string(s.newText)&&kt.is(s.range)}o(i,"is"),t.is=i})(Ii||(Ii={}));var Qi;(function(t){function e(r,i,a){var s={label:r};return i!==void 0&&(s.needsConfirmation=i),a!==void 0&&(s.description=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return i!==void 0&&ze.objectLiteral(i)&&ze.string(i.label)&&(ze.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(ze.string(i.description)||i.description===void 0)}o(n,"is"),t.is=n})(Qi||(Qi={}));var kr;(function(t){function e(n){var r=n;return typeof r=="string"}o(e,"is"),t.is=e})(kr||(kr={}));var Li;(function(t){function e(a,s,c){return{range:a,newText:s,annotationId:c}}o(e,"replace"),t.replace=e;function n(a,s,c){return{range:{start:a,end:a},newText:s,annotationId:c}}o(n,"insert"),t.insert=n;function r(a,s){return{range:a,newText:"",annotationId:s}}o(r,"del"),t.del=r;function i(a){var s=a;return Ii.is(s)&&(Qi.is(s.annotationId)||kr.is(s.annotationId))}o(i,"is"),t.is=i})(Li||(Li={}));var ca;(function(t){function e(r,i){return{textDocument:r,edits:i}}o(e,"create"),t.create=e;function n(r){var i=r;return ze.defined(i)&&Ai.is(i.textDocument)&&Array.isArray(i.edits)}o(n,"is"),t.is=n})(ca||(ca={}));var Wi;(function(t){function e(r,i,a){var s={kind:"create",uri:r};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(s.options=i),a!==void 0&&(s.annotationId=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="create"&&ze.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||ze.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||ze.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||kr.is(i.annotationId))}o(n,"is"),t.is=n})(Wi||(Wi={}));var jn;(function(t){function e(r,i,a,s){var c={kind:"rename",oldUri:r,newUri:i};return a!==void 0&&(a.overwrite!==void 0||a.ignoreIfExists!==void 0)&&(c.options=a),s!==void 0&&(c.annotationId=s),c}o(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="rename"&&ze.string(i.oldUri)&&ze.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||ze.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||ze.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||kr.is(i.annotationId))}o(n,"is"),t.is=n})(jn||(jn={}));var fr;(function(t){function e(r,i,a){var s={kind:"delete",uri:r};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(s.options=i),a!==void 0&&(s.annotationId=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="delete"&&ze.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||ze.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||ze.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||kr.is(i.annotationId))}o(n,"is"),t.is=n})(fr||(fr={}));var ma;(function(t){function e(n){var r=n;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(function(i){return ze.string(i.kind)?Wi.is(i)||jn.is(i)||fr.is(i):ca.is(i)}))}o(e,"is"),t.is=e})(ma||(ma={}));var hr=function(){function t(e,n){this.edits=e,this.changeAnnotations=n}return o(t,"TextEditChangeImpl"),t.prototype.insert=function(e,n,r){var i,a;if(r===void 0?i=Ii.insert(e,n):kr.is(r)?(a=r,i=Li.insert(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(r),i=Li.insert(e,n,a)),this.edits.push(i),a!==void 0)return a},t.prototype.replace=function(e,n,r){var i,a;if(r===void 0?i=Ii.replace(e,n):kr.is(r)?(a=r,i=Li.replace(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(r),i=Li.replace(e,n,a)),this.edits.push(i),a!==void 0)return a},t.prototype.delete=function(e,n){var r,i;if(n===void 0?r=Ii.del(e):kr.is(n)?(i=n,r=Li.del(e,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=Li.del(e,i)),this.edits.push(r),i!==void 0)return i},t.prototype.add=function(e){this.edits.push(e)},t.prototype.all=function(){return this.edits},t.prototype.clear=function(){this.edits.splice(0,this.edits.length)},t.prototype.assertChangeAnnotations=function(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},t}(),Ja=function(){function t(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}return o(t,"ChangeAnnotations"),t.prototype.all=function(){return this._annotations},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),t.prototype.manage=function(e,n){var r;if(kr.is(e)?r=e:(r=this.nextId(),n=e),this._annotations[r]!==void 0)throw new Error("Id "+r+" is already in use.");if(n===void 0)throw new Error("No annotation provided for id "+r);return this._annotations[r]=n,this._size++,r},t.prototype.nextId=function(){return this._counter++,this._counter.toString()},t}(),Xi=function(){function t(e){var n=this;this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new Ja(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(function(r){if(ca.is(r)){var i=new hr(r.edits,n._changeAnnotations);n._textEditChanges[r.textDocument.uri]=i}})):e.changes&&Object.keys(e.changes).forEach(function(r){var i=new hr(e.changes[r]);n._textEditChanges[r]=i})):this._workspaceEdit={}}return o(t,"WorkspaceChange"),Object.defineProperty(t.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),t.prototype.getTextEditChange=function(e){if(Ai.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var n={uri:e.uri,version:e.version},r=this._textEditChanges[n.uri];if(!r){var i=[],a={textDocument:n,edits:i};this._workspaceEdit.documentChanges.push(a),r=new hr(i,this._changeAnnotations),this._textEditChanges[n.uri]=r}return r}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var r=this._textEditChanges[e];if(!r){var i=[];this._workspaceEdit.changes[e]=i,r=new hr(i),this._textEditChanges[e]=r}return r}},t.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Ja,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},t.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},t.prototype.createFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;Qi.is(n)||kr.is(n)?i=n:r=n;var a,s;if(i===void 0?a=Wi.create(e,r):(s=kr.is(i)?i:this._changeAnnotations.manage(i),a=Wi.create(e,r,s)),this._workspaceEdit.documentChanges.push(a),s!==void 0)return s},t.prototype.renameFile=function(e,n,r,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var a;Qi.is(r)||kr.is(r)?a=r:i=r;var s,c;if(a===void 0?s=jn.create(e,n,i):(c=kr.is(a)?a:this._changeAnnotations.manage(a),s=jn.create(e,n,i,c)),this._workspaceEdit.documentChanges.push(s),c!==void 0)return c},t.prototype.deleteFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;Qi.is(n)||kr.is(n)?i=n:r=n;var a,s;if(i===void 0?a=fr.create(e,r):(s=kr.is(i)?i:this._changeAnnotations.manage(i),a=fr.create(e,r,s)),this._workspaceEdit.documentChanges.push(a),s!==void 0)return s},t}(),$i;(function(t){function e(r){return{uri:r}}o(e,"create"),t.create=e;function n(r){var i=r;return ze.defined(i)&&ze.string(i.uri)}o(n,"is"),t.is=n})($i||($i={}));var Ki;(function(t){function e(r,i){return{uri:r,version:i}}o(e,"create"),t.create=e;function n(r){var i=r;return ze.defined(i)&&ze.string(i.uri)&&ze.integer(i.version)}o(n,"is"),t.is=n})(Ki||(Ki={}));var Ai;(function(t){function e(r,i){return{uri:r,version:i}}o(e,"create"),t.create=e;function n(r){var i=r;return ze.defined(i)&&ze.string(i.uri)&&(i.version===null||ze.integer(i.version))}o(n,"is"),t.is=n})(Ai||(Ai={}));var ja;(function(t){function e(r,i,a,s){return{uri:r,languageId:i,version:a,text:s}}o(e,"create"),t.create=e;function n(r){var i=r;return ze.defined(i)&&ze.string(i.uri)&&ze.string(i.languageId)&&ze.integer(i.version)&&ze.string(i.text)}o(n,"is"),t.is=n})(ja||(ja={}));var ki;(function(t){t.PlainText="plaintext",t.Markdown="markdown"})(ki||(ki={})),function(t){function e(n){var r=n;return r===t.PlainText||r===t.Markdown}o(e,"is"),t.is=e}(ki||(ki={}));var ya;(function(t){function e(n){var r=n;return ze.objectLiteral(n)&&ki.is(r.kind)&&ze.string(r.value)}o(e,"is"),t.is=e})(ya||(ya={}));var Ya;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(Ya||(Ya={}));var qa;(function(t){t.PlainText=1,t.Snippet=2})(qa||(qa={}));var Qa;(function(t){t.Deprecated=1})(Qa||(Qa={}));var Xa;(function(t){function e(r,i,a){return{newText:r,insert:i,replace:a}}o(e,"create"),t.create=e;function n(r){var i=r;return i&&ze.string(i.newText)&&kt.is(i.insert)&&kt.is(i.replace)}o(n,"is"),t.is=n})(Xa||(Xa={}));var Za;(function(t){t.asIs=1,t.adjustIndentation=2})(Za||(Za={}));var Aa;(function(t){function e(n){return{label:n}}o(e,"create"),t.create=e})(Aa||(Aa={}));var eo;(function(t){function e(n,r){return{items:n||[],isIncomplete:!!r}}o(e,"create"),t.create=e})(eo||(eo={}));var ua;(function(t){function e(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}o(e,"fromPlainText"),t.fromPlainText=e;function n(r){var i=r;return ze.string(i)||ze.objectLiteral(i)&&ze.string(i.language)&&ze.string(i.value)}o(n,"is"),t.is=n})(ua||(ua={}));var to;(function(t){function e(n){var r=n;return!!r&&ze.objectLiteral(r)&&(ya.is(r.contents)||ua.is(r.contents)||ze.typedArray(r.contents,ua.is))&&(n.range===void 0||kt.is(n.range))}o(e,"is"),t.is=e})(to||(to={}));var no;(function(t){function e(n,r){return r?{label:n,documentation:r}:{label:n}}o(e,"create"),t.create=e})(no||(no={}));var ro;(function(t){function e(n,r){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s={label:n};return ze.defined(r)&&(s.documentation=r),ze.defined(i)?s.parameters=i:s.parameters=[],s}o(e,"create"),t.create=e})(ro||(ro={}));var da;(function(t){t.Text=1,t.Read=2,t.Write=3})(da||(da={}));var io;(function(t){function e(n,r){var i={range:n};return ze.number(r)&&(i.kind=r),i}o(e,"create"),t.create=e})(io||(io={}));var Da;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(Da||(Da={}));var Ra;(function(t){t.Deprecated=1})(Ra||(Ra={}));var Di;(function(t){function e(n,r,i,a,s){var c={name:n,kind:r,location:{uri:a,range:i}};return s&&(c.containerName=s),c}o(e,"create"),t.create=e})(Di||(Di={}));var ao;(function(t){function e(r,i,a,s,c,u){var d={name:r,detail:i,kind:a,range:s,selectionRange:c};return u!==void 0&&(d.children=u),d}o(e,"create"),t.create=e;function n(r){var i=r;return i&&ze.string(i.name)&&ze.number(i.kind)&&kt.is(i.range)&&kt.is(i.selectionRange)&&(i.detail===void 0||ze.string(i.detail))&&(i.deprecated===void 0||ze.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}o(n,"is"),t.is=n})(ao||(ao={}));var Xr;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(Xr||(Xr={}));var Ta;(function(t){function e(r,i){var a={diagnostics:r};return i!=null&&(a.only=i),a}o(e,"create"),t.create=e;function n(r){var i=r;return ze.defined(i)&&ze.typedArray(i.diagnostics,Ui.is)&&(i.only===void 0||ze.typedArray(i.only,ze.string))}o(n,"is"),t.is=n})(Ta||(Ta={}));var oo;(function(t){function e(r,i,a){var s={title:r},c=!0;return typeof i=="string"?(c=!1,s.kind=i):qi.is(i)?s.command=i:s.edit=i,c&&a!==void 0&&(s.kind=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return i&&ze.string(i.title)&&(i.diagnostics===void 0||ze.typedArray(i.diagnostics,Ui.is))&&(i.kind===void 0||ze.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||qi.is(i.command))&&(i.isPreferred===void 0||ze.boolean(i.isPreferred))&&(i.edit===void 0||ma.is(i.edit))}o(n,"is"),t.is=n})(oo||(oo={}));var Ma;(function(t){function e(r,i){var a={range:r};return ze.defined(i)&&(a.data=i),a}o(e,"create"),t.create=e;function n(r){var i=r;return ze.defined(i)&&kt.is(i.range)&&(ze.undefined(i.command)||qi.is(i.command))}o(n,"is"),t.is=n})(Ma||(Ma={}));var so;(function(t){function e(r,i){return{tabSize:r,insertSpaces:i}}o(e,"create"),t.create=e;function n(r){var i=r;return ze.defined(i)&&ze.uinteger(i.tabSize)&&ze.boolean(i.insertSpaces)}o(n,"is"),t.is=n})(so||(so={}));var lo;(function(t){function e(r,i,a){return{range:r,target:i,data:a}}o(e,"create"),t.create=e;function n(r){var i=r;return ze.defined(i)&&kt.is(i.range)&&(ze.undefined(i.target)||ze.string(i.target))}o(n,"is"),t.is=n})(lo||(lo={}));var Pa;(function(t){function e(r,i){return{range:r,parent:i}}o(e,"create"),t.create=e;function n(r){var i=r;return i!==void 0&&kt.is(i.range)&&(i.parent===void 0||t.is(i.parent))}o(n,"is"),t.is=n})(Pa||(Pa={}));var fl=null,Ia;(function(t){function e(a,s,c,u){return new La(a,s,c,u)}o(e,"create"),t.create=e;function n(a){var s=a;return!!(ze.defined(s)&&ze.string(s.uri)&&(ze.undefined(s.languageId)||ze.string(s.languageId))&&ze.uinteger(s.lineCount)&&ze.func(s.getText)&&ze.func(s.positionAt)&&ze.func(s.offsetAt))}o(n,"is"),t.is=n;function r(a,s){for(var c=a.getText(),u=i(s,function(te,A){var ee=te.range.start.line-A.range.start.line;return ee===0?te.range.start.character-A.range.start.character:ee}),d=c.length,f=u.length-1;f>=0;f--){var h=u[f],p=a.offsetAt(h.range.start),b=a.offsetAt(h.range.end);if(b<=d)c=c.substring(0,p)+h.newText+c.substring(b,c.length);else throw new Error("Overlapping edit");d=p}return c}o(r,"applyEdits"),t.applyEdits=r;function i(a,s){if(a.length<=1)return a;var c=a.length/2|0,u=a.slice(0,c),d=a.slice(c);i(u,s),i(d,s);for(var f=0,h=0,p=0;f<u.length&&h<d.length;){var b=s(u[f],d[h]);b<=0?a[p++]=u[f++]:a[p++]=d[h++]}for(;f<u.length;)a[p++]=u[f++];for(;h<d.length;)a[p++]=d[h++];return a}o(i,"mergeSort")})(Ia||(Ia={}));var La=function(){function t(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}return o(t,"FullTextDocument"),Object.defineProperty(t.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),t.prototype.getText=function(e){if(e){var n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content},t.prototype.update=function(e,n){this._content=e.text,this._version=n,this._lineOffsets=void 0},t.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var e=[],n=this._content,r=!0,i=0;i<n.length;i++){r&&(e.push(i),r=!1);var a=n.charAt(i);r=a==="\r"||a===`
`,a==="\r"&&i+1<n.length&&n.charAt(i+1)===`
`&&i++}r&&n.length>0&&e.push(n.length),this._lineOffsets=e}return this._lineOffsets},t.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return Rt.create(0,e);for(;r<i;){var a=Math.floor((r+i)/2);n[a]>e?i=a:r=a+1}var s=r-1;return Rt.create(s,e-n[s])},t.prototype.offsetAt=function(e){var n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;var r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)},Object.defineProperty(t.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),t}(),ze;(function(t){var e=Object.prototype.toString;function n(b){return typeof b!="undefined"}o(n,"defined"),t.defined=n;function r(b){return typeof b=="undefined"}o(r,"undefined"),t.undefined=r;function i(b){return b===!0||b===!1}o(i,"boolean"),t.boolean=i;function a(b){return e.call(b)==="[object String]"}o(a,"string"),t.string=a;function s(b){return e.call(b)==="[object Number]"}o(s,"number"),t.number=s;function c(b,te,A){return e.call(b)==="[object Number]"&&te<=b&&b<=A}o(c,"numberRange"),t.numberRange=c;function u(b){return e.call(b)==="[object Number]"&&-2147483648<=b&&b<=2147483647}o(u,"integer"),t.integer=u;function d(b){return e.call(b)==="[object Number]"&&0<=b&&b<=2147483647}o(d,"uinteger"),t.uinteger=d;function f(b){return e.call(b)==="[object Function]"}o(f,"func"),t.func=f;function h(b){return b!==null&&typeof b=="object"}o(h,"objectLiteral"),t.objectLiteral=h;function p(b,te){return Array.isArray(b)&&b.every(te)}o(p,"typedArray"),t.typedArray=p})(ze||(ze={}));var Gi;(function(t){function e(r){return typeof r=="string"||r instanceof String}o(e,"string"),t.string=e;function n(r){return typeof r=="number"||r instanceof Number}o(n,"number"),t.number=n})(Gi||(Gi={}));var ka;(function(t){function e(n){const r=n;return r!=null&&(Gi.number(r.value)||Gi.string(r.value))&&Gi.string(r.target)}o(e,"is"),t.is=e})(ka||(ka={}));class co extends l.Diagnostic{constructor(e,n,r,i){super(e,n,r);this.data=i,this.hasDiagnosticCode=!1}}o(co,"ProtocolDiagnostic");var Ri;(function(t){const e=Object.prototype.toString;function n(f){return typeof f!="undefined"}o(n,"defined"),t.defined=n;function r(f){return f===!0||f===!1}o(r,"boolean"),t.boolean=r;function i(f){return e.call(f)==="[object String]"}o(i,"string"),t.string=i;function a(f){return e.call(f)==="[object Number]"}o(a,"number"),t.number=a;function s(f){return f!==null&&typeof f=="object"}o(s,"objectLiteral"),t.objectLiteral=s;function c(f){return Array.isArray(f)}o(c,"array"),t.array=c;function u(f){return c(f)&&f.every(h=>i(h))}o(u,"stringArray"),t.stringArray=u;function d(f,h){return Array.isArray(f)&&f.every(h)}o(d,"typedArray"),t.typedArray=d})(Ri||(Ri={}));var S;(function(t){function e(n){const r=n;return r&&Ri.string(r.language)&&Ri.string(r.value)}o(e,"is"),t.is=e})(S||(S={}));function g(t){const e=o(J=>l.Uri.parse(J),"nullConverter"),n=t!=null?t:e;function r(J){return n(J)}o(r,"asUri");function i(J){return J.map(a)}o(i,"asDiagnostics");function a(J){const mt=new co(h(J.range),J.message,b(J.severity),J.data);return J.code!==void 0&&(Ea.is(J.codeDescription)?mt.code={value:J.code,target:r(J.codeDescription.href)}:ka.is(J.code)?(mt.hasDiagnosticCode=!0,mt.code={value:J.code.value,target:r(J.code.target)}):mt.code=J.code),J.source&&(mt.source=J.source),J.relatedInformation&&(mt.relatedInformation=s(J.relatedInformation)),Array.isArray(J.tags)&&(mt.tags=u(J.tags)),mt}o(a,"asDiagnostic");function s(J){return J.map(c)}o(s,"asRelatedInformation");function c(J){return new l.DiagnosticRelatedInformation(Je(J.location),J.message)}o(c,"asDiagnosticRelatedInformation");function u(J){if(!J)return;const mt=[];for(const yn of J){const qr=d(yn);qr!==void 0&&mt.push(qr)}return mt.length>0?mt:void 0}o(u,"asDiagnosticTags");function d(J){switch(J){case Yi.Unnecessary:return l.DiagnosticTag.Unnecessary;case Yi.Deprecated:return l.DiagnosticTag.Deprecated;default:return}}o(d,"asDiagnosticTag");function f(J){if(!!J)return new l.Position(J.line,J.character)}o(f,"asPosition");function h(J){if(!!J)return new l.Range(f(J.start),f(J.end))}o(h,"asRange");function p(J){return J.map(mt=>h(mt))}o(p,"asRanges");function b(J){if(J==null)return l.DiagnosticSeverity.Error;switch(J){case gi.Error:return l.DiagnosticSeverity.Error;case gi.Warning:return l.DiagnosticSeverity.Warning;case gi.Information:return l.DiagnosticSeverity.Information;case gi.Hint:return l.DiagnosticSeverity.Hint}return l.DiagnosticSeverity.Error}o(b,"asDiagnosticSeverity");function te(J){if(Ri.string(J))return new l.MarkdownString(J);if(S.is(J))return new l.MarkdownString().appendCodeblock(J.value,J.language);if(Array.isArray(J)){const yn=[];for(const qr of J){const za=new l.MarkdownString;S.is(qr)?za.appendCodeblock(qr.value,qr.language):za.appendMarkdown(qr),yn.push(za)}return yn}let mt;switch(J.kind){case ki.Markdown:return new l.MarkdownString(J.value);case ki.PlainText:return mt=new l.MarkdownString,mt.appendText(J.value),mt;default:return mt=new l.MarkdownString,mt.appendText(`Unsupported Markup content received. Kind is: ${J.kind}`),mt}}o(te,"asHoverContent");function A(J){if(Ri.string(J))return J;switch(J.kind){case ki.Markdown:return new l.MarkdownString(J.value);case ki.PlainText:return J.value;default:return`Unsupported Markup content received. Kind is: ${J.kind}`}}o(A,"asDocumentation");function ee(J){if(!!J)return new l.Hover(te(J.contents),h(J.range))}o(ee,"asHover");function me(J){if(!!J)return new l.TextEdit(h(J.range),J.newText)}o(me,"asTextEdit");function re(J){if(!!J)return J.map(me)}o(re,"asTextEdits");function Pe(J){if(!J)return;const mt=new l.SignatureHelp;return Ri.number(J.activeSignature)?mt.activeSignature=J.activeSignature:mt.activeSignature=0,Ri.number(J.activeParameter)?mt.activeParameter=J.activeParameter:mt.activeParameter=0,J.signatures&&(mt.signatures=Fe(J.signatures)),mt}o(Pe,"asSignatureHelp");function Fe(J){return J.map($e)}o(Fe,"asSignatureInformations");function $e(J){const mt=new l.SignatureInformation(J.label);return J.documentation!==void 0&&(mt.documentation=A(J.documentation)),J.parameters!==void 0&&(mt.parameters=je(J.parameters)),J.activeParameter!==void 0&&(mt.activeParameter=J.activeParameter),mt}o($e,"asSignatureInformation");function je(J){return J.map(it)}o(je,"asParameterInformations");function it(J){const mt=new l.ParameterInformation(J.label);return J.documentation&&(mt.documentation=A(J.documentation)),mt}o(it,"asParameterInformation");function Je(J){if(!!J)return new l.Location(n(J.uri),h(J.range))}o(Je,"asLocation");function xt(J){if(!!J)return $t(J)}o(xt,"asDeclarationResult");function Qt(J){if(!!J)return $t(J)}o(Qt,"asDefinitionResult");function an(J){if(!J)return;const mt={targetUri:n(J.targetUri),targetRange:h(J.targetSelectionRange),originSelectionRange:h(J.originSelectionRange),targetSelectionRange:h(J.targetSelectionRange)};if(!mt.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return mt}o(an,"asLocationLink");function $t(J){if(!!J)return Ri.array(J)?J.length===0?[]:Tn.is(J[0])?J.map(qr=>an(qr)):J.map(yn=>Je(yn)):Tn.is(J)?[an(J)]:Je(J)}o($t,"asLocationResult");function dn(J){if(!!J)return J.map(mt=>Je(mt))}o(dn,"asReferences");function Mr(J){if(!!J)return J.map(Ti)}o(Mr,"asDocumentHighlights");function Ti(J){const mt=new l.DocumentHighlight(h(J.range));return Ri.number(J.kind)&&(mt.kind=Mi(J.kind)),mt}o(Ti,"asDocumentHighlight");function Mi(J){switch(J){case da.Text:return l.DocumentHighlightKind.Text;case da.Read:return l.DocumentHighlightKind.Read;case da.Write:return l.DocumentHighlightKind.Write}return l.DocumentHighlightKind.Text}o(Mi,"asDocumentHighlightKind");function oa(J,mt){if(!!J)return J.map(yn=>il(yn,mt))}o(oa,"asSymbolInformations");function Fi(J){return J<=Da.TypeParameter?J-1:l.SymbolKind.Property}o(Fi,"asSymbolKind");function _a(J){switch(J){case Ra.Deprecated:return l.SymbolTag.Deprecated;default:return}}o(_a,"asSymbolTag");function Mo(J){if(J==null)return;const mt=[];for(const yn of J){const qr=_a(yn);qr!==void 0&&mt.push(qr)}return mt.length===0?void 0:mt}o(Mo,"asSymbolTags");function il(J,mt){const yn=new l.SymbolInformation(J.name,Fi(J.kind),h(J.location.range),J.location.uri?n(J.location.uri):mt);return al(yn,J),J.containerName&&(yn.containerName=J.containerName),yn}o(il,"asSymbolInformation");function Mc(J){if(J!=null)return J.map(Zo)}o(Mc,"asDocumentSymbols");function Zo(J){var mt;const yn=new l.DocumentSymbol(J.name,(mt=J.detail)!=null?mt:"",Fi(J.kind),h(J.range),h(J.selectionRange));if(al(yn,J),J.children!==void 0&&J.children.length>0){const qr=[];for(const za of J.children)qr.push(Zo(za));yn.children=qr}return yn}o(Zo,"asDocumentSymbol");function al(J,mt){J.tags=Mo(mt.tags),mt.deprecated&&(J.tags?J.tags.includes(l.SymbolTag.Deprecated)||(J.tags=J.tags.concat(l.SymbolTag.Deprecated)):J.tags=[l.SymbolTag.Deprecated])}o(al,"fillTags");function es(J){const mt={title:J.title,command:J.command};return J.arguments&&(mt.arguments=J.arguments),mt}o(es,"asCommand");function Pc(J){if(!!J)return J.map(es)}o(Pc,"asCommands");const na=new Map;na.set(Xr.Empty,l.CodeActionKind.Empty),na.set(Xr.QuickFix,l.CodeActionKind.QuickFix),na.set(Xr.Refactor,l.CodeActionKind.Refactor),na.set(Xr.RefactorExtract,l.CodeActionKind.RefactorExtract),na.set(Xr.RefactorInline,l.CodeActionKind.RefactorInline),na.set(Xr.RefactorRewrite,l.CodeActionKind.RefactorRewrite),na.set(Xr.Source,l.CodeActionKind.Source),na.set(Xr.SourceOrganizeImports,l.CodeActionKind.SourceOrganizeImports);function ts(J){if(J==null)return;let mt=na.get(J);if(mt)return mt;const yn=J.split(".");mt=l.CodeActionKind.Empty;for(const qr of yn)mt=mt.append(qr);return mt}o(ts,"asCodeActionKind");function Ic(J){if(J!=null)return J.map(mt=>ts(mt))}o(Ic,"asCodeActionKinds");function Lc(J){if(J==null)return;const mt=new l.CodeAction(J.title);return J.kind!==void 0&&(mt.kind=ts(J.kind)),J.diagnostics&&(mt.diagnostics=i(J.diagnostics)),J.edit&&(mt.edit=ol(J.edit)),J.command&&(mt.command=es(J.command)),J.isPreferred!==void 0&&(mt.isPreferred=J.isPreferred),mt}o(Lc,"asCodeAction");function ol(J){if(!J)return;const mt=new l.WorkspaceEdit;return J.documentChanges?J.documentChanges.forEach(yn=>{if(Wi.is(yn))mt.createFile(n(yn.uri),yn.options);else if(jn.is(yn))mt.renameFile(n(yn.oldUri),n(yn.newUri),yn.options);else if(fr.is(yn))mt.deleteFile(n(yn.uri),yn.options);else if(ca.is(yn))mt.set(n(yn.textDocument.uri),re(yn.edits));else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(yn,void 0,4)}`)}):J.changes&&Object.keys(J.changes).forEach(yn=>{mt.set(n(yn),re(J.changes[yn]))}),mt}o(ol,"asWorkspaceEdit");function sl(J){return new l.Color(J.red,J.green,J.blue,J.alpha)}o(sl,"asColor");function ll(J){return new l.ColorInformation(h(J.range),sl(J.color))}o(ll,"asColorInformation");function kc(J){if(Array.isArray(J))return J.map(ll)}o(kc,"asColorInformations");function cl(J){const mt=new l.ColorPresentation(J.label);return mt.additionalTextEdits=re(J.additionalTextEdits),J.textEdit&&(mt.textEdit=me(J.textEdit)),mt}o(cl,"asColorPresentation");function xc(J){if(Array.isArray(J))return J.map(cl)}o(xc,"asColorPresentations");function ul(J){if(J)switch(J){case hi.Comment:return l.FoldingRangeKind.Comment;case hi.Imports:return l.FoldingRangeKind.Imports;case hi.Region:return l.FoldingRangeKind.Region}}o(ul,"asFoldingRangeKind");function dl(J){return new l.FoldingRange(J.startLine,J.endLine,ul(J.kind))}o(dl,"asFoldingRange");function Fc(J){if(Array.isArray(J))return J.map(dl)}o(Fc,"asFoldingRanges");function ns(J){return new l.SelectionRange(h(J.range),J.parent?ns(J.parent):void 0)}o(ns,"asSelectionRange");function Nc(J){if(!Array.isArray(J))return[];const mt=[];for(const yn of J)mt.push(ns(yn));return mt}return o(Nc,"asSelectionRanges"),{asUri:r,asDiagnostics:i,asDiagnostic:a,asRange:h,asRanges:p,asPosition:f,asDiagnosticSeverity:b,asDiagnosticTag:d,asHover:ee,asTextEdit:me,asTextEdits:re,asSignatureHelp:Pe,asSignatureInformations:Fe,asSignatureInformation:$e,asParameterInformations:je,asParameterInformation:it,asDeclarationResult:xt,asDefinitionResult:Qt,asLocation:Je,asReferences:dn,asDocumentHighlights:Mr,asDocumentHighlight:Ti,asDocumentHighlightKind:Mi,asSymbolKind:Fi,asSymbolTag:_a,asSymbolTags:Mo,asSymbolInformations:oa,asSymbolInformation:il,asDocumentSymbols:Mc,asDocumentSymbol:Zo,asCommand:es,asCommands:Pc,asCodeAction:Lc,asCodeActionKind:ts,asCodeActionKinds:Ic,asWorkspaceEdit:ol,asFoldingRangeKind:ul,asFoldingRange:dl,asFoldingRanges:Fc,asColor:sl,asColorInformation:ll,asColorInformations:kc,asColorPresentation:cl,asColorPresentations:xc,asSelectionRange:ns,asSelectionRanges:Nc}}o(g,"createConverter");var _;(function(t){function e(r,i){const{provider:a,repo:s}=i instanceof l.Uri?r.getVirtualUriMetadata(i):i;return r.getRemoteUri(a.id,{repo:s})}o(e,"externalUri"),t.externalUri=e;function n(r,i){const{provider:a,repo:s}=i instanceof l.Uri?r.getVirtualUriMetadata(i):i;return r.getRemoteUri(a.id,{repo:s})}o(n,"externalIndexUri"),t.externalIndexUri=n})(_||(_={}));var k;(function(t){function e(i){if(i.HEAD.type===V.Branch||i.HEAD.type===V.RemoteBranch)return i.HEAD.name}o(e,"getBranchName"),t.getBranchName=e;function n(i){if(i.HEAD.type!==V.Branch)return;if(i.pullRequest!==void 0)return i.HEAD.name;const a=i.HEAD.name;return a===void 0||a.startsWith("refs/heads/")?a:`refs/heads/${a}`}o(n,"getIndexBranchName"),t.getIndexBranchName=n;async function r(i,a,s=Be.timeout){const c=await i.getMetadata(a),u=_.externalIndexUri(i,c),d=t.getIndexBranchName(c);if(!(u===void 0||d===void 0))return Be.getIndexedTip(u,d,{authentication:i.getAuthentication(a)},s)}o(r,"getIndexedTip"),t.getIndexedTip=r})(k||(k={}));var oe;(function(t){const e=new Zn(1024);function n(s,c,u){let d=e.get(u);return d!==void 0||(d=s.getCommit(c,u),e.set(u,d)),d}o(n,"get"),t.get=n;async function r(s,c,u){const d=[];for(const h of u)d.push(n(s,c,h));const f=[];for(const h of await Promise.all(d))h!==void 0&&f.push(h);return f}o(r,"all"),t.all=r;function i(s,c){const u=s.commitDate,d=c.commitDate;return u===void 0&&d===void 0?0:u===void 0?1:d===void 0?-1:u<d?1:u>d?-1:0}o(i,"sort"),t.sort=i;function a(s){const c=s.authorName!==void 0?`  \u2022  ${s.authorName}`:"",u=s.commitDate!==void 0?`  \u2022  ${An(s.commitDate,{ago:!0})}`:"",d=s.branchName!==void 0?` - ${s.branchName}`:"",f=s.tags!==void 0?typeof s.tags=="string"?`  \u2022  ${s.tags}`:`  \u2022  ${s.tags.join(" ")}`:"";return{author:c,date:u,branch:d,tag:f}}o(a,"getCommitInfo"),t.getCommitInfo=a})(oe||(oe={}));var Se;(function(t){t[t.Unknown=0]="Unknown",t[t.New=1]="New",t[t.Failed=2]="Failed",t[t.Partial=3]="Partial",t[t.InProgress=4]="InProgress",t[t.Complete=5]="Complete",t[t.PartialIndex=6]="PartialIndex",t[t.CompleteIndex=7]="CompleteIndex"})(Se||(Se={}));var Oe;(function(t){function e(r){return{workspaceId:r.WorkspaceId,snapshotId:r.SnapshotId,state:r.State,commitId:r.commitId.toLowerCase(),branchName:n(r.BranchName),creationDate:new Date(r._ts*1e3)}}o(e,"asWorkspaceSnapshot"),t.asWorkspaceSnapshot=e;function n(r){if(r!==null)return r.startsWith("refs/heads/")?r.substr(11):r}o(n,"getBranchName")})(Oe||(Oe={}));var Be;(function(t){t.timeout=5*60*1e3;const e=new Zn(32),n=new Zn(32);async function r(h,p,b,te=t.timeout){const A=await i(h,p,b,te);if(!(A===void 0||A.length===0))return A[0]}o(r,"getIndexedTip"),t.getIndexedTip=r;async function i(h,p,b,te=t.timeout){const A=c(h,p);let ee=e.get(A);if(ee===void 0||ee!==void 0&&Date.now()-ee.time>te){const me=ct.getAllWorkspaceSnapshots(h,b,p);ee={time:Date.now(),promise:me,snapshots:void 0},e.set(A,ee)}if(ee.snapshots!==null){if(ee.snapshots===void 0){let me=await ee.promise;if(me===void 0){ee.snapshots=null;return}me.sort((re,Pe)=>Pe.creationDate.getTime()-re.creationDate.getTime()),me=me.filter(re=>re.state===5||re.state===3),ee.snapshots=me}return ee.snapshots}}o(i,"all"),t.all=i;async function a(h,p,b,te,A=t.timeout){const ee=s(h,p);let me=n.get(ee);if(me===null)return;if(me!==void 0)return me;const re=c(h,b),Pe=e.get(re);if(Pe!==void 0&&Date.now()-Pe.time<=A){if(Pe.snapshots===null)return;const Fe=Pe.snapshots!==void 0?Pe.snapshots:await i(h,b,te);if(Fe!==void 0){for(const $e of Fe)if($e.commitId===p)return n.set(ee,$e),$e}return}if(me=await ct.getWorkspaceSnapshot(p,te),me===void 0){n.set(ee,null);return}return n.set(ee,me),me}o(a,"single"),t.single=a;function s(h,p){return`${h.toString()}/${p}`}o(s,"getSingleCacheKey");function c(h,p){return p!==void 0?`${p}\\${h.toString()}`:h.toString()}o(c,"getAllCacheKey");async function u(h,p,b,te=t.timeout){return await a(h,p,void 0,b,te)!==void 0}o(u,"exists"),t.exists=u;async function d(h,p,b,te=t.timeout){return await i(h,p,b,te)!==void 0}o(d,"branch"),t.branch=d;async function f(h,p,b){const te=new Map(b.map(me=>[me.commitId,me])),A=await oe.all(h,p.uri,b.map(me=>me.commitId));if(A.length===0)return;const ee=[];for(const me of A){const re=te.get(me.hash);re!==void 0&&ee.push({...re,commit:me})}if(ee.length!==0)return ee}o(f,"resolve"),t.resolve=f})(Be||(Be={}));var gt;(function(t){function e(n=!1){return{hoverProvider:n,declarationProvider:n,definitionProvider:n,typeDefinitionProvider:n,referencesProvider:n,documentSymbolProvider:n,foldingRangeProvider:n,diagnosticProvider:n,workspaceSymbolProvider:n}}o(e,"create"),t.create=e})(gt||(gt={}));var ct;(function(t){const e="v0.1",n="https://prod.richnav.vsengsaas.visualstudio.com/api",r=10*1e3;function i(Fe,$e){const je=setTimeout(()=>{Fe.cancel()},$e);return{dispose:()=>clearTimeout(je)}}o(i,"timeout");async function a(Fe,$e,je,it){var Je;const xt=await Mt(Fe,{method:"POST",body:JSON.stringify($e),headers:{"Content-Type":"application/json",...(await je.authentication).getRichNavigationHeaders(),"x-correlation-id":(Je=je.correlationId)!=null?Je:Sr()}},it);if(!!xt.ok)return xt.json()}o(a,"postRequest");async function s(Fe,$e,je,it){const Je=await Mt(Fe,{method:"POST",body:$e,headers:(await je.authentication).getRichNavigationHeaders()},it);if(!!Je.ok)return await Je.json()}o(s,"postForm");function c(Fe,$e){return`${n}/${e}/HttpLanguageService/${Fe}/${$e}`}o(c,"makeRequestUrl");async function u(Fe,$e){const je=new l.CancellationTokenSource,it=i(je,r);try{const Je=await Mt(`${n}/${e}/WorkspaceSnapshot?commitId=${Fe}`,{headers:(await $e.authentication).getRichNavigationHeaders()},je.token);if(Je.ok){const xt=await Je.json();return{workspaceId:xt.workspaceId,snapshotId:xt.snapshotId,state:xt.state,commitId:Fe.toLowerCase(),branchName:void 0,creationDate:new Date}}return}catch(Je){if(Je instanceof l.CancellationError){K.log(`RichNav request getWorkspaceSnapshot timed out after ${r/1e3} seconds`);return}throw Je}finally{it.dispose()}}o(u,"getWorkspaceSnapshot"),t.getWorkspaceSnapshot=u;async function d(Fe,$e,je){const it=new ur;it.append("uriString",Fe.toString(!0)),je!==void 0&&it.append("branchName",je);const Je=new l.CancellationTokenSource,xt=i(Je,r);try{const Qt=await s(`${n}/${e}/WorkspaceSnapshot/all`,it,$e,Je.token);return Qt===void 0?void 0:Qt.map(Oe.asWorkspaceSnapshot)}catch(Qt){Qt instanceof l.CancellationError?K.log(`RichNav request getAllWorkspaceSnapshots timed out after ${r/1e3}  seconds`):K.error(Qt);return}finally{xt.dispose()}}o(d,"getAllWorkspaceSnapshots"),t.getAllWorkspaceSnapshots=d;async function f(Fe,$e,je){const it=new ur;it.append("uriString",Fe.toString(!0)),je!==void 0&&it.append("branchName",je);const Je=new l.CancellationTokenSource,xt=i(Je,r);try{const Qt=await s(`${n}/${e}/WorkspaceSnapshot/latest`,it,$e,Je.token);return Qt===void 0?void 0:Oe.asWorkspaceSnapshot(Qt)}catch(Qt){Qt instanceof l.CancellationError?K.log(`RichNav request getLatestWorkspaceSnapshot timed out after ${r/1e3}  seconds`):K.error(Qt);return}finally{xt.dispose()}}o(f,"getLatestWorkspaceSnapshot"),t.getLatestWorkspaceSnapshot=f;async function h(Fe,$e,je,it){try{return a(c(Fe,"textDocument/capabilities"),$e,je,it)}catch(Je){K.error(Je);return}}o(h,"capabilities"),t.capabilities=h;async function p(Fe,$e,je,it){try{return a(c(Fe,"textDocument/hover"),$e,je,it)}catch(Je){K.error(Je);return}}o(p,"provideHover"),t.provideHover=p;async function b(Fe,$e,je,it){try{return a(c(Fe,"textDocument/definition"),$e,je,it)}catch(Je){K.error(Je);return}}o(b,"provideDefinition"),t.provideDefinition=b;async function te(Fe,$e,je,it){try{return a(c(Fe,"textDocument/declaration"),$e,je,it)}catch(Je){K.error(Je);return}}o(te,"provideDeclaration"),t.provideDeclaration=te;async function A(Fe,$e,je,it){try{return a(c(Fe,"textDocument/typeDefinition"),$e,je,it)}catch(Je){K.error(Je);return}}o(A,"provideTypeDefinition"),t.provideTypeDefinition=A;async function ee(Fe,$e,je,it){try{return a(c(Fe,"textDocument/references"),$e,je,it)}catch(Je){K.error(Je);return}}o(ee,"provideReferences"),t.provideReferences=ee;async function me(Fe,$e,je,it){try{return a(c(Fe,"textDocument/foldingRange"),$e,je,it)}catch(Je){K.error(Je);return}}o(me,"providerFoldingRanges"),t.providerFoldingRanges=me;async function re(Fe,$e,je,it){if($e=="")return;const Je=await Mt(`${n}/${e}/Search/${Fe}/${$e}`,{headers:(await je.authentication).getRichNavigationHeaders()},it);if(Je.ok)return await Je.json()}o(re,"provideWorkspaceSymbols"),t.provideWorkspaceSymbols=re;async function Pe(Fe,$e,je){const it=l.Uri.from({scheme:"https",authority:"prod.richnav.vsengsaas.visualstudio.com",path:`/api/${e}/Workspace/${Fe}/${$e}/assets/designtime`,query:`id=${je}`});try{const Je=new l.CancellationTokenSource,xt=await Mt(it.toString().replace("?id%3D","?id="),{method:"GET",headers:{accept:"text/plain"}},Je.token);return xt.ok?xt.text():void 0}catch(Je){K.error(Je);return}}o(Pe,"getDesignTimeFileContent"),t.getDesignTimeFileContent=Pe})(ct||(ct={}));class Nt{constructor(e,n){this.providerService=e,this.telemetryService=n,this.metadata=new Map;const r=[];r.push(this.providerService.onDidChangeRepositories(i=>{var a;for(const s of i.added){const c=s.uri,u=pe.getIndexMemento(c);if(u!==void 0){const d=_.externalIndexUri(this.providerService,c);d!==void 0&&(typeof((a=u.branch)==null?void 0:a.name)=="string"?Be.all(d,u.branch.name,{authentication:this.providerService.getAuthentication(c)}).catch(void 0):typeof u.ref=="string"&&N(u.ref)&&Be.single(d,u.ref,void 0,{authentication:this.providerService.getAuthentication(c)}).catch(void 0))}this.providerService.getMetadata(c).then(d=>{const f={},h=d.pullRequest===void 0?k.getIndexBranchName(d):void 0;h!==void 0?f.branch={name:h}:f.ref=d.HEAD.sha,pe.setIndexMemento(c,f).then(void 0,void 0)},void 0)}})),r.push(this.providerService.onDidChangeRepository(i=>{const a=i.repository.uri,s=E(a);this.metadata.delete(s),this.getIndexMetadata(a).catch(void 0)})),this.disposable=l.Disposable.from(...r)}dispose(){this.disposable.dispose()}async resolveIndexRef(e,n){const r=await this.providerService.getModeRefType(e),i=Pt.decode(e);if(i!==void 0){if(i.type===At.Latest)return r===se.Branch?this.getIndexedTip(e,n?0:Be.timeout):void 0;if(i.type===At.SHA){const s=_.externalIndexUri(this.providerService,e);return s===void 0?void 0:await Be.exists(s,i.sha,{authentication:this.providerService.getAuthentication(e)},n?0:Be.timeout)?i.sha:void 0}}if(this.providerService.getModeConfig(e,r).index===I.Latest)return this.getIndexedTip(e,n?0:Be.timeout)}refresh(e){for(const n of e)this.metadata.delete(n.toString())}getIndexMetadata(e){const n=this.providerService.getVirtualRootUri(e),r=E(n);let i=this.metadata.get(r);return i!==void 0||(i=this.createIndexMetadata(e),this.metadata.set(r,i)),i}async getIndexedTip(e,n=Be.timeout){const r=await k.getIndexedTip(this.providerService,e,n);return r!==void 0?r.commitId:void 0}async createIndexMetadata(e){const n=new _t(`RichNavIndexProvider.createIndexMetadata(${e.toString()})`);try{const r=_.externalIndexUri(this.providerService,e);if(r===void 0)return;n.logStep("Getting metadata");const i=this.providerService.getMetadata(e),a=this.providerService.getModeRefType(e,i),s=await i;n.logStep("Getting snapshot",{suffix:" \u2022 Getting snapshot..."});const c=this.providerService.getAuthentication(e),u=s.pullRequest===void 0?k.getIndexBranchName(s):void 0,d=await Be.single(r,s.HEAD.sha,u,{authentication:this.providerService.getAuthentication(e)});if(s.HEAD.type===V.Branch||s.HEAD.type===V.RemoteBranch){const b=Pt.decode(e);if(b!==void 0)return n.logStep("Handle legacy encoding",{suffix:" \u2022 Handle legacy encoding..."}),d===void 0?b.type===At.Latest?(n.logStep("Getting branch snapshot",{suffix:" \u2022 Getting branch snapshot..."}),u!==void 0&&await Be.branch(r,u,{authentication:this.providerService.getAuthentication(e)})?{type:De.Indexed}:{type:De.NotIndexed}):{type:De.NotIndexed}:b.type===At.Latest||b.type===At.SHA?{type:De.Active,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}}:{type:De.Match,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}}}n.logStep("Getting mode config",{suffix:" \u2022 Getting mode config..."});const h=this.providerService.getModeConfig(e,await a),p=this.providerService.getVirtualUriMetadata(e);if((h.index===I.Latest||h.index===I.Match)&&d!==void 0)return{type:De.Active,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}};if(h.index===I.TipPlusLatest&&p.provider.id==="github"){if(d!==void 0&&d.commitId===s.HEAD.sha)return{type:De.Active,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}};if(s.HEAD.type===V.Branch&&u!==void 0){n.logStep("Getting closest index",{suffix:" \u2022 Getting closest index..."});const b=await Be.all(r,u,{authentication:c});if(b!==void 0&&b.length>0)return{type:De.Active,sha:this.computeClosestIndex(e,s.HEAD.sha,b),branch:{name:u}}}}return d!==void 0?{type:De.Indexed}:s.HEAD.type===V.Branch&&(n.logStep("Getting branch snapshot",{suffix:" \u2022 Getting branch snapshot..."}),u!==void 0&&await Be.branch(r,u,{authentication:c}))?{type:De.Indexed}:{type:De.NotIndexed}}finally{n.stop()}}async computeClosestIndex(e,n,r){if(r.length===0)throw new Error("At least on snapshot should exist");const i=new Set(r.map(f=>f.commitId)),a=await this.providerService.getCommits(e,{ref:n,limit:100});if(a===void 0)return;let s;for(const f of a.commits)if(f.hash===n){s=f;break}if(s===void 0)return;const c=new Map(a.commits.map(f=>[f.hash,f])),u=[s];let d;for(;u.length>0;){for(d=u.shift();d!==void 0&&!i.has(d.hash);)if(d.parents.length>0){for(let f=1;f<d.parents.length;f++){const h=c.get(d.parents[f]);h!==void 0&&u.push(h)}d=c.get(d.parents[0])}if(d!==void 0)break}return d!==void 0?d.hash:void 0}async getSnapshots(e,n){const r=_.externalIndexUri(this.providerService,e);if(r===void 0)return[];const i=await Be.all(r,void 0,{authentication:this.providerService.getAuthentication(e)});if(i===void 0)return[];const a=[];for(const s of i)s.branchName!==void 0&&a.push({workspaceId:s.workspaceId,snapshotId:s.snapshotId,hash:s.commitId,branch:{name:s.branchName}});return a}async getStatusBarContributions(e){const n=await this.providerService.getMetadata(e),[r,i]=await Promise.all([this.getIndexMetadata(e),this.providerService.getModeRefType(e,n)]),a=this.providerService.getModeConfig(e,i);if(r===void 0)return[];const{HEAD:s}=n,c=[];if(r!==void 0){let u;const d=[`${O(s.sha)}`];if(r.type===De.Active){const f=await r.sha;a.index===I.Latest||a.index===I.Match?(u=a.display===U.Browse?"$(layers-active)\u2009\u2009$(lock)":"$(layers-active)",d.push(l.l10n.t(`The commit is indexed and rich code navigation features are enabled.
The files in the workspace are readonly.`))):a.index===I.TipPlusLatest&&(u="$(layers-dot)",f!==n.HEAD.sha?d.push(l.l10n.t("The commit is not indexed. Rich code navigation features are enabled using a former indexed commit which might lead to fuzzy results.")):d.push(l.l10n.t("The commit is indexed. Rich code navigation features are enabled. Files in the workspace can be modified which might lead to fuzzy results.")))}else r.type===De.Match?(u="$(layers)",d.push(l.l10n.t(`The commit you are on is indexed, but rich navigation is not enabled.
Click the status bar item to enable it.`))):r.type===De.Indexed&&(u="$(layers)",d.push(l.l10n.t(`The branch you are on is indexed, but rich navigation is not enabled.
Click the status bar item to enable it.`)));u&&c.push(Ar({command:"remoteHub.indexMode.select",title:u,tooltip:d.join(`
`),arguments:[{uri:e}]}))}return c}}o(Nt,"RichNavIndexProvider");var rn;(function(t){let e;function n(){return e=l.window.createStatusBarItem(l.StatusBarAlignment.Right),e.text="$(compass)",e.command="remoteHub.indexMode.select",e.hide(),[e,l.window.onDidChangeActiveTextEditor(()=>{u()}),l.commands.registerCommand("remoteHub.indexMode.select",f=>{d(f).catch(h=>K.log("Selecting index mode failed.",h))})]}o(n,"create"),t.create=n;const r=new Map;function i(f){r.set(f.key(),f)}o(i,"addService"),t.addService=i;function a(f){r.delete(f.key())}o(a,"removeService"),t.removeService=a;function s(f){return r.get(E(f))}o(s,"getService");async function c(f){for(const h of r.values())if(await h.handles(f))return h}o(c,"getServiceForDocument");async function u(){try{let f=o(function(te){const A=te.lastIndexOf("/");return A<=0?te:te.substr(A+1)},"basename");const h=l.window.activeTextEditor;if(h===void 0){e.hide();return}const p=await c(h.document);if(p===void 0){e.hide();return}const b=await p.isDocumentIndexed(h.document);b===He.Indexed?(e.text="$(compass)",e.tooltip=new l.MarkdownString(l.l10n.t("The source file '{0}' is indexed and provides rich code navigation features like Go to Declaration and Find all References.",f(h.document.uri.path))),e.show()):b===He.IndexMapped?(e.text="$(compass-dot)",e.tooltip=new l.MarkdownString(l.l10n.t("The source file '{0}' provides rich code navigation features using an earlier indexed commit. Navigation results might be fuzzy.",f(h.document.uri.path))),e.show()):e.hide()}catch(f){e.hide()}}o(u,"updateStatusBarItem"),t.updateStatusBarItem=u;async function d(f){var h;const p=f.uri,b=s(p);if(b===void 0)return;const[te,A,ee,me]=await Promise.all([b.getBranchName(),b.getMetadata(),b.getIndexMetadata(),b.getModeRefType(p)]);if(ee===void 0||!De.hasIndex(ee.type))return;let re,Pe=!1;const Fe=Pt.decode(p);(Fe==null?void 0:Fe.type)===At.Latest||(Fe==null?void 0:Fe.type)===At.SHA?(Pe=!0,re={display:U.Browse,index:Fe.type===At.Latest?I.Latest:I.Match}):re=(h=b.getCurrentIndexMode())!=null?h:b.getModeConfig(p,me);const $e=b.getUriMetadata(),je=l.l10n.t("{0} current","$(check)"),it={indexKind:"disable",label:l.l10n.t("Disable"),description:re.index===I.None?`  \u2022  ${je}`:void 0,detail:l.l10n.t("Disable rich navigation.")};let Je,xt;if(me===se.PullRequestBranch||me===se.PullRequestRemoteBranch||me===se.Commit||me===se.Tag){const Qt={indexKind:"match",label:l.l10n.t("Current indexed commit - readonly"),description:re.index===I.Match&&re.display===U.Browse?`  \u2022  ${je}`:void 0,detail:l.l10n.t("Enable rich navigation only if the current commit is indexed. Files will be read-only.")},an={indexKind:"match+writeable",label:l.l10n.t("Current indexed commit - writable"),description:re.index===I.Match&&re.display===U.Edit?`  \u2022  ${je}`:void 0,detail:l.l10n.t("Enable rich navigation only if the current commit is indexed. Files will be writable.")};let $t=$e.provider.id==="github";$t&&($t=A.HEAD.type===V.RemoteBranch?A.HEAD.branch.remote.accessLevel>=le.Write:!0);const dn=$t?[Qt,an,it]:[Qt,it];xt=await l.window.showQuickPick(dn,{placeHolder:"Pick a rich navigation mode"})}else if(me===se.Branch||me===se.RemoteBranch){const Qt={indexKind:"latest",label:l.l10n.t("Latest indexed commit"),description:re.index===I.Latest?`  \u2022  ${je}`:void 0,detail:l.l10n.t("Enable rich navigation on the latest indexed commit. Files will be read-only.")},an={indexKind:"tip+latest",label:l.l10n.t("Current commit & latest index"),description:re.index===I.TipPlusLatest?`  \u2022  ${je}`:void 0,detail:l.l10n.t("Enable rich navigation on the current commit using the latest index. Files will be writeable.")},$t=$e.provider.id==="github"?[Qt,an,it]:[Qt,it];xt=await l.window.showQuickPick($t,{placeHolder:l.l10n.t("Pick a rich navigation mode for branch {0}",te)})}if(xt!==void 0&&(xt.indexKind==="disable"?Je={display:U.Edit,index:I.None}:xt.indexKind==="match"?Je={display:U.Browse,index:I.Match}:xt.indexKind==="match+writeable"?Je={display:U.Edit,index:I.Match}:xt.indexKind==="tip+latest"?Je={display:U.Edit,index:I.TipPlusLatest}:xt.indexKind==="latest"&&(Je={display:U.Browse,index:I.Latest}),Je!==void 0&&!ne.equals(re,Je))){if(await b.hasChanges()&&Je.display===U.Browse){await l.window.showInformationMessage("The repository has outgoing changes. Commit them first before switching to browse mode.",{modal:!0});return}if(await b.updateIndexMode(Je),Pe){const Qt=await b.getNonIndexedWorkspaceDescriptor();Qt!==void 0&&kn(b.getProviderService(),Qt)}}}o(d,"toggleIndexMode")})(rn||(rn={}));class Yn{constructor(e){this.telemetryService=e}static createStatus(){return rn.create()}async createNavigationService(e,n){const r=await e.getIndexMetadata(n.uri);if(!(r===void 0||r.type===De.NotIndexed))return()=>new qn(e,n,this.telemetryService)}}o(Yn,"RichNavServiceProvider");var ln;(function(t){const e=new RegExp("^vsck:\\/\\/([a-fA-F0-9]+)\\/(latest|[a-fA-F0-9]{15})\\/designtime\\/([a-fA-F0-9]+)(\\/?.*)$");function n(i){const a=e.exec(i);if(a===null||a.length!==5)return;const s={v:1,w:a[1],s:a[2],a:a[3]};return l.Uri.from({scheme:er.scheme,authority:P(JSON.stringify(s)),path:a[4]})}o(n,"toVSCode"),t.toVSCode=n;function r(i){if(i.scheme!==er.scheme)return;let a;try{return a=JSON.parse(y(i.authority)),a===void 0?void 0:{workspaceId:a.w,snapshotId:a.s,assetId:`${a.a}${i.path}`}}catch{return}}o(r,"toRichNavComponents"),t.toRichNavComponents=r})(ln||(ln={}));const In=o(class{constructor(){this._onDidChangeFile=new l.EventEmitter,this.cache=new Zn(64),this.textEncoder=new TextEncoder}get onDidChangeFile(){return this._onDidChangeFile.event}watch(t,e){return In.emptyDisposable}async stat(t){const e=await this.getFile(t);if(e===void 0)throw l.FileSystemError.FileNotFound();return{type:l.FileType.File,mtime:e.time,ctime:e.time,size:e.content.length,permissions:l.FilePermission.Readonly}}readDirectory(t){return[]}createDirectory(t){throw l.FileSystemError.NoPermissions()}async readFile(t){const e=await this.getFile(t);if(e===void 0)throw l.FileSystemError.FileNotFound();return e.content}writeFile(t,e,n){throw l.FileSystemError.NoPermissions()}delete(t,e){throw l.FileSystemError.NoPermissions()}rename(t,e,n){throw l.FileSystemError.NoPermissions()}async getFile(t){let e=this.cache.get(t.toString());if(e!==void 0)return e;if(t.scheme!==In.scheme)return;const n=ln.toRichNavComponents(t);if(n===void 0)return;const r=await ct.getDesignTimeFileContent(n.workspaceId,n.snapshotId,n.assetId);if(r!==void 0)return e={content:this.textEncoder.encode(r),time:Date.now()},this.cache.set(t.toString(),e),e}},"_RichNavFileSystemProvider");let er=In;er.scheme="vsck-fs",er.emptyDisposable={dispose:()=>{}};var He;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.IndexMapped=1]="IndexMapped",t[t.Indexed=2]="Indexed"})(He||(He={}));const Un=o(class{static registerCapability(t,e,n){var r;const i=this.disabledCapabilities.get(t);if(i==null?void 0:i[e])return!1;const a=this.localCapabilities.get(t);return(a==null?void 0:a[e])?!1:(r=n[e])!=null?r:!1}constructor(t,e,n){this.providerService=t,this.repository=e,this.telemetryService=n,this.repositoryRoot=`${e.uri.toString()}/`;const r=o((a=!1)=>{const s=this.repository.uri;a||(this.metadata=this.providerService.getMetadata(s),this.indexMetadata=this.providerService.getIndexMetadata(s)),Promise.all([this.metadata,this.indexMetadata,this.providerService.getModeRefType(s,this.metadata)]).then(async c=>{var u,d;const[f,h,p]=this.currentlyResolved,[b,te,A]=c,ee=this.providerService.getModeConfig(s,A);if(f!==void 0&&h!==void 0&&p!==void 0&&f.HEAD.sha===b.HEAD.sha&&te!==void 0&&h.type===te.type&&p.index===ee.index&&p.display===ee.display){const re=(h==null?void 0:h.type)===De.Active?await h.sha:void 0,Pe=(te==null?void 0:te.type)===De.Active?await te.sha:void 0;if(re===Pe)return}const me={newDisplayMode:ee.display,newIndexMode:ee.index,newIndexType:(te==null?void 0:te.type)===void 0?"undefined":De[te==null?void 0:te.type],currentDisplayMode:(u=p==null?void 0:p.display)!=null?u:"undefined",currentIndexMode:(d=p==null?void 0:p.index)!=null?d:"undefined",currentIndexType:(h==null?void 0:h.type)===void 0?"undefined":De[h==null?void 0:h.type]};this.telemetryService.publicLog2("codex.handleRepositoryChanged",me),this.currentlyResolved=[b,te,ee];for(const re of this.registeredFeatures.values())re.dispose();if(this.registeredFeatures.clear(),this.pendingCapabilitiesRequests.clear(),this.documentListeners!==void 0&&this.documentListeners.dispose(),this.workspaceSnapshot=void 0,this.mapper=void 0,lt.isActive(te)){const re=_.externalIndexUri(this.providerService,b),Pe=await te.sha;if(re!==void 0&&Pe!==void 0){const Fe=await Be.single(re,Pe,k.getIndexBranchName(b),{authentication:this.providerService.getAuthentication(s)});Fe!==void 0&&(this.telemetryService.publicLog2("codex.foundSnapshot",{snapshotId:Fe.snapshotId}),this.workspaceSnapshot=Fe,this.documentListeners=this.installDocumentListeners(),((ee==null?void 0:ee.display)===U.Edit||b.HEAD.sha!==Pe)&&(this.mapper=new un(this.providerService,s,Pe,b.HEAD.sha)))}}await rn.updateStatusBarItem()}).then(void 0,void 0)},"handleRepositoryChanged");this.metadata=this.providerService.getMetadata(this.repository.uri),this.indexMetadata=this.providerService.getIndexMetadata(this.repository.uri),this.currentlyResolved=[void 0,void 0,void 0],this.registeredFeatures=new Map,this.pendingCapabilitiesRequests=new Map,this.capabilitiesCache=new Zn(2048),this.knownDesignTimeFiles=new Set;const i=[];i.push(this.providerService.onDidChangeRepository(a=>{E(a.repository.uri)===E(this.repository.uri)&&r()})),i.push(this.providerService.onDidRefresh(a=>{for(const s of a)if(E(s)===E(this.repository.uri)){r();break}})),this.environmentListeners=l.Disposable.from(...i),r(!0),rn.addService(this),this.indexMetadata.then(async a=>{var s;const c=this.repository.uri;let u=!1;const d=Pt.decode(this.repository.uri);if(d!==void 0&&a!==void 0&&(d.type===At.Latest&&a.type!==De.Active||d.type===At.SHA&&(a.type!==De.Active||await a.sha!==d.sha))&&(u=!0),!u){await this.metadata;const f=await this.providerService.getModeRefType(c,this.metadata),h=(s=this.currentlyResolved[2])!=null?s:this.providerService.getModeConfig(c,f,!0);h!==void 0&&h.display===U.Browse&&a!==void 0&&h.index!==I.None&&a.type!==De.Active?u=!0:(a==null?void 0:a.type)===De.Active&&await a.sha===void 0&&((h==null?void 0:h.display)===U.Browse,u=!0)}u&&l.window.showWarningMessage(l.l10n.t("The repository got opened in rich code navigation mode but no corresponding index is available. Rich code navigation features are disabled.")).then(void 0,void 0)},void 0),Un.fileSystemProvider===void 0&&(Un.fileSystemProvider=new er,l.workspace.registerFileSystemProvider(er.scheme,Un.fileSystemProvider))}getRepository(){return this.repository}async updateIndexMode(t){const e=this.currentlyResolved[2],n=t!==void 0;if(t===void 0){const r=this.repository.uri,i=await this.providerService.getModeRefType(r,this.metadata);t=this.providerService.getModeConfig(r,i),await new Promise(a=>setTimeout(a,1e3))}if(e===void 0||e.index!==t.index||e.display!==t.display){if(t.index===I.Latest){await Promise.all([this.metadata,this.indexMetadata]);const r=await this.getIndexedTip();if(r===void 0)return;await this.sync(r.hash)}else t.index===I.TipPlusLatest&&(await Promise.all([this.metadata,this.indexMetadata]),await this.sync());n&&await pe.setMode(this.repository.uri,t),this.refresh()}}getCurrentIndexMode(){return this.currentlyResolved[2]}key(){return E(this.repository.uri)}dispose(){for(const t of this.registeredFeatures.values())t.dispose();this.registeredFeatures.clear(),rn.removeService(this),this.documentListeners!==void 0&&(this.documentListeners.dispose(),this.documentListeners=void 0),this.environmentListeners!==void 0&&(this.environmentListeners.dispose(),this.environmentListeners=void 0)}handles(t){return t.uri.scheme!==Gn.scheme?Promise.resolve(!1):Promise.resolve(t.uri.toString().startsWith(this.repositoryRoot))}async getBranchName(){return k.getBranchName(await this.metadata)}async getMetadata(){return this.metadata}async getIndexMetadata(){return this.indexMetadata}getProviderService(){return this.providerService}getUriMetadata(){return this.providerService.getVirtualUriMetadata(this.repository.uri)}getModeConfig(t,e){return this.providerService.getModeConfig(t,e)}getModeRefType(t){return this.providerService.getModeRefType(t)}refresh(){return this.providerService.refresh()}async getNonIndexedWorkspaceDescriptor(){const{name:t,repo:e}=await this.metadata,{ref:n}=this.providerService.getVirtualUriMetadata(this.repository.uri);return{name:t,uri:this.providerService.createVirtualUri(this.repository.uri,{repo:e,ref:n}),location:Ve.CurrentWindow}}async isDocumentIndexed(t){await this.metadata;const e=await this.indexMetadata;if(e===void 0||e.type===De.NotIndexed||this.workspaceSnapshot===void 0)return 0;const n=this.pendingCapabilitiesRequests.get(t.uri.toString());return n!==void 0&&await n,this.registeredFeatures.has(t.uri.toString())?this.mapper===void 0?2:await this.mapper.needsMapping(t)?1:2:0}async getIndexedTip(){const t=await this.metadata,e=_.externalIndexUri(this.providerService,t),n=k.getIndexBranchName(t);if(e===void 0||n===void 0)return;const r=await Be.getIndexedTip(e,n,{authentication:this.providerService.getAuthentication(this.repository.uri)});if(r===void 0)return;const i=await oe.get(this.providerService,this.repository.uri,r.commitId);if(i!==void 0)return{...i,branchName:n}}hasChanges(){return this.providerService.getChangeStore(this.repository.uri).hasChanges(this.repository.uri)}sync(t){return this.providerService.sync(this.repository.uri,{to:t,reason:"user"})}async getCommit(t){const e=await this.metadata,n=_.externalIndexUri(this.providerService,e);if(n===void 0)return;const[r,i]=await Promise.all([oe.get(this.providerService,this.repository.uri,t),Be.single(n,t,void 0,{authentication:this.providerService.getAuthentication(this.repository.uri)})]);if(!(r===void 0||i===void 0))return{...r,branchName:i.branchName}}installDocumentListeners(){const t=[],e=o(async n=>{const r=n.uri.scheme;if(Gn.scheme!==r&&er.scheme!==r)return;const i=n.uri.toString();if(r===Gn.scheme&&!i.startsWith(this.repositoryRoot)||r===er.scheme&&!this.knownDesignTimeFiles.has(i)||this.pendingCapabilitiesRequests.has(i))return;const a=this.workspaceSnapshot!==void 0?this.workspaceSnapshot.commitId:void 0;if(a===void 0)return;let s=this.capabilitiesCache.get(i);if(s!==null){if(s===void 0){const c=this.capabilities(n.uri);this.pendingCapabilitiesRequests.set(i,c),s=await c,this.pendingCapabilitiesRequests.delete(i),this.capabilitiesCache.set(i,s===void 0?null:s)}s===void 0||!l.workspace.textDocuments.some(c=>c===n)||this.registerProviders(n,s,a)}},"openHandler");return t.push(l.workspace.onDidOpenTextDocument(e)),l.workspace.textDocuments.forEach(e),t.push(l.workspace.onDidCloseTextDocument(n=>{const r=n.uri.toString(),i=this.registeredFeatures.get(r);i!==void 0&&(this.registeredFeatures.delete(n.uri.toString()),i.dispose()),this.pendingCapabilitiesRequests.delete(r)})),l.Disposable.from(...t)}registerProviders(t,e,n){if(this.workspaceSnapshot===void 0)return;const r=this.workspaceSnapshot,i=t.languageId,s=[{scheme:this.repository.uri.scheme,pattern:t.uri.fsPath,language:t.languageId,exclusive:!0}],c=[],u=new Promise((A,ee)=>{const me=`/${r.snapshotId}/source/`;this.metadata.then(re=>{A(g(Pe=>{const Fe=l.Uri.parse(Pe);if(re===void 0)return Fe;try{if(Fe.scheme==="vsck"&&Fe.authority===r.workspaceId&&Fe.path.startsWith(me))return this.repository.createRelativeUri(Fe.path.substr(me.length));const $e=ln.toVSCode(Pe);return $e!==void 0?(this.knownDesignTimeFiles.add($e.toString()),$e):Fe}catch($e){return Fe}}))},ee)}),d=new RegExp(`^vsck:\\/\\/${r.workspaceId}\\/(?:latest|[a-fA-F0-9]{15})\\/designtime\\/(?:[a-fA-F0-9]+)(\\/?.*)$`);function f(A){const ee=d.exec(A);return ee===null||ee.length===2}o(f,"designTimeFilter");function h(A){if(A==null)return A;if(Array.isArray(A)){if(A.length===0)return[];const ee=A[0];return typeof ee.uri=="string"?A.filter(Pe=>f(Pe.uri)):typeof ee.targetUri=="string"?A.filter(Pe=>f(Pe.targetUri)):[]}return d.exec(A.uri)===null?A:void 0}o(h,"filterDesignTimeFiles");async function p(A,ee,me){var re,Pe,Fe;if(me==null||A===void 0)return me;const $e=new Map(l.workspace.textDocuments.map(it=>[it.uri.toString(!0),it]));if(Array.isArray(me)){const it=[],Je=[];if(me.length===0)return[];for(const xt of me){const Qt=xt;if(Qt.uri instanceof l.Uri){const an=await A.mapRangeFromIndexToCode((re=$e.get(Qt.uri.toString()))!=null?re:Qt.uri,Qt.range);an!==void 0&&it.push(new l.Location(Qt.uri,an))}else{const an=xt,$t=(Pe=$e.get(an.targetUri.toString()))!=null?Pe:an.targetUri,dn=an.originSelectionRange?await A.mapRangeFromIndexToCode(ee,an.originSelectionRange):void 0;if(dn!==void 0||an.originSelectionRange===void 0){const Mr=await A.mapRangeFromIndexToCode($t,an.targetRange);if(Mr!==void 0){const Ti=an.targetSelectionRange?await A.mapRangeFromIndexToCode($t,an.targetSelectionRange):void 0;(Ti!==void 0||an.targetSelectionRange===void 0)&&Je.push({targetUri:an.targetUri,targetRange:Mr,targetSelectionRange:Ti,originSelectionRange:dn})}}}}return it.length>0?it:Je}const je=await A.mapRangeFromIndexToCode((Fe=$e.get(me.uri.toString()))!=null?Fe:me.uri,me.range);if(je!==void 0)return new l.Location(me.uri,je)}o(p,"mapLocations");const b=o(A=>({authentication:this.providerService.getAuthentication(A.uri),correlationId:Sr()}),"getRestApiOptions"),te=o((A,ee)=>{const me={method:A,correlationId:ee.correlationId};this.telemetryService.publicLog2("codex.restAPICall",me)},"sendTelemetry");Un.registerCapability(i,"hoverProvider",e)&&c.push(l.languages.registerHoverProvider(s,{provideHover:async(A,ee,me)=>{const re=await this.createTextDocumentPositionParams(A,ee);if(re===void 0)return;const Pe=b(A);return te("codex.provideHover",Pe),(await u).asHover(await ct.provideHover(n,re,Pe,me))}})),Un.registerCapability(i,"definitionProvider",e)&&c.push(l.languages.registerDefinitionProvider(s,{provideDefinition:async(A,ee,me)=>{const re=await this.createTextDocumentPositionParams(A,ee);if(re===void 0)return;const Pe=b(A);return te("codex.provideDefinition",Pe),p(this.mapper,A,(await u).asDefinitionResult(h(await ct.provideDefinition(n,re,Pe,me))))}})),Un.registerCapability(i,"declarationProvider",e)&&c.push(l.languages.registerDeclarationProvider(s,{provideDeclaration:async(A,ee,me)=>{const re=await this.createTextDocumentPositionParams(A,ee);if(re===void 0)return;const Pe=b(A);return te("codex.provideDeclaration",Pe),p(this.mapper,A,(await u).asDeclarationResult(h(await ct.provideDeclaration(n,re,Pe,me))))}})),Un.registerCapability(i,"typeDefinitionProvider",e)&&c.push(l.languages.registerTypeDefinitionProvider(s,{provideTypeDefinition:async(A,ee,me)=>{const re=await this.createTextDocumentPositionParams(A,ee);if(re===void 0)return;const Pe=b(A);return te("codex.provideTypeDefinition",Pe),p(this.mapper,A,(await u).asDefinitionResult(h(await ct.provideTypeDefinition(n,re,Pe,me))))}})),Un.registerCapability(i,"referencesProvider",e)&&c.push(l.languages.registerReferenceProvider(s,{provideReferences:async(A,ee,me,re)=>{const Pe=this.mapper!==void 0?await this.mapper.mapPositionFromCodeToIndex(A,ee):ee;if(Pe===void 0)return;const Fe={position:{line:Pe.line,character:Pe.character},textDocument:{uri:this.createRichNavDocumentUri(A.uri).toString(!0)},context:{includeDeclaration:me.includeDeclaration}},$e=b(A);return te("codex.provideReferences",$e),p(this.mapper,A,(await u).asReferences(h(await ct.provideReferences(n,Fe,$e,re))))}})),Un.registerCapability(i,"foldingRangeProvider",e)&&c.push(l.languages.registerFoldingRangeProvider(s,{provideFoldingRanges:async(A,ee,me)=>{if(this.mapper!==void 0&&await this.mapper.needsMapping(A))return;const re=b(A);return te("codex.provideFoldingRanges",re),(await u).asFoldingRanges(await ct.providerFoldingRanges(n,this.createTextDocumentParams(A.uri),re,me))}})),Un.registerCapability(i,"workspaceSymbolProvider",e)&&c.push(l.languages.registerWorkspaceSymbolProvider({provideWorkspaceSymbols:async(A,ee)=>{const me=b(t),re=await ct.provideWorkspaceSymbols(n,A,me,ee);if(re!==void 0)return(await u).asSymbolInformations(re)}})),this.registeredFeatures.set(t.uri.toString(),l.Disposable.from(...c)),rn.updateStatusBarItem()}async capabilities(t){var e;const n=this.workspaceSnapshot!==void 0?this.workspaceSnapshot.commitId:void 0;if(n===void 0)return;const r=new l.CancellationTokenSource;return(e=await ct.capabilities(n,this.createTextDocumentParams(t),{authentication:this.providerService.getAuthentication(t)},r.token))!=null?e:void 0}createTextDocumentParams(t){return{textDocument:{uri:this.createRichNavDocumentUri(t).toString(!0)}}}async createTextDocumentPositionParams(t,e){const n=this.mapper!==void 0?await this.mapper.mapPositionFromCodeToIndex(t,e):e;if(n!==void 0)return{position:{line:n.line,character:n.character},textDocument:{uri:this.createRichNavDocumentUri(t.uri).toString(!0)}}}createRichNavDocumentUri(t){if(t.scheme===er.scheme){const r=ln.toRichNavComponents(t);return r===void 0?t:l.Uri.file(r.assetId)}const e=this.repository.uri.toString(!0),n=t.toString(!0);return l.Uri.file(n.substr(e.length))}},"_RichNavService");let qn=Un;qn.localCapabilities=new Map([["javascript",Object.assign(gt.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["javascriptreact",Object.assign(gt.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["typescript",Object.assign(gt.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["typescriptreact",Object.assign(gt.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})]]),qn.disabledCapabilities=new Map([["javascript",Object.assign(gt.create(),{declarationProvider:!0})],["javascriptreact",Object.assign(gt.create(),{declarationProvider:!0})],["typescript",Object.assign(gt.create(),{declarationProvider:!0})],["typescriptreact",Object.assign(gt.create(),{declarationProvider:!0})]]);var Dr=o((t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},"__accessCheck"),gr=o((t,e,n)=>(Dr(t,e,"read from private field"),n?n.call(t):e.get(t)),"__privateGet"),Zi=o((t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},"__privateAdd"),uo=o((t,e,n,r)=>(Dr(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),"__privateSet"),vi;class fa{constructor(e){Zi(this,vi,void 0),uo(this,vi,e)}async provideEditSessionIdentity(e,n){await Fr(gr(this,vi),e.uri);const r=gr(this,vi).getRepository(e.uri);if(!r||n.isCancellationRequested)return null;const{uri:i,ref:a}=await gr(this,vi).getRepositoryContext(r,"http"),s=await gr(this,vi).getMetadata(r.uri);return JSON.stringify({remote:i!=null?i:s.cloneUrl.http,ref:a,sha:s.HEAD.sha})}provideEditSessionIdentityMatch(e,n){try{const r=this.normalizeEditSessionIdentity(e),i=this.normalizeEditSessionIdentity(n);return r.remote===i.remote&&r.ref===i.ref&&r.sha===i.sha?l.EditSessionIdentityMatch.Complete:r.remote===i.remote&&r.ref===i.ref&&r.sha!==i.sha?l.EditSessionIdentityMatch.Partial:l.EditSessionIdentityMatch.None}catch(r){return l.EditSessionIdentityMatch.Partial}}normalizeEditSessionIdentity(e){var n,r,i;let{remote:a,ref:s,sha:c}=JSON.parse(e);return a=(i=(r=(n=gr(this,vi)).getHttpsCloneUri)==null?void 0:r.call(n,a))!=null?i:typeof a=="string"&&a.endsWith(".git")?a.slice(0,a.length-4):a,{remote:a,ref:s,sha:c}}}o(fa,"EditSessionIdentityProvider"),vi=new WeakMap;var fo=o((t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},"extensionApi_accessCheck"),si=o((t,e,n)=>(fo(t,e,"read from private field"),n?n.call(t):e.get(t)),"extensionApi_privateGet"),ho=o((t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},"extensionApi_privateAdd"),xa=o((t,e,n,r)=>(fo(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),"extensionApi_privateSet"),xr;class go{constructor(e){ho(this,xr,void 0),xa(this,xr,e),this.registerApiCommands()}registerApiCommands(){l.commands.registerCommand("remoteHub.api.getRepositoryContext",async e=>{if(!e)throw new Error("Please specify a repository uri.");await Fr(si(this,xr),e);const n=si(this,xr).getRepository(e);if(!n)throw new Error(`Unable to acquire repository context for ${e.toString(!0)}.`);return si(this,xr).getRepositoryContext(n)})}async getMetadata(e){const n=si(this,xr).getVirtualUriMetadata(e);if(n===void 0)return;const{provider:r,repo:i}=n;return{provider:{id:r.id,name:r.name},repo:i,getRevision:async()=>{const{HEAD:a}=await si(this,xr).getMetadata(e);return{type:a.type,name:a.name,revision:a.sha}}}}getProvider(e){return si(this,xr).getRegisteredProvider(e)}getProviderUri(e){return x.getProviderUri(e)}getProviderRootUri(e){return si(this,xr).getProviderRootUri(e)}isProviderUri(e,n){return e.scheme!==Gn.scheme&&si(this,xr).hasProvider(e,n)}getVirtualUri(e){return x.getVirtualUri(e)}getVirtualWorkspaceUri(e){return si(this,xr).getVirtualWorkspaceUri(e)}async loadWorkspaceContents(e){if(e.scheme!==x.scheme)return!1;await Fr(si(this,xr),e);const n=si(this,xr).getProviderRootUri(e);if(n.scheme!=="github")return!1;const r=new _t(`RemoteHub.loadWorkspaceContents(${n.toString()})`,{log:!1,logLevel:et.Debug}),i=await si(this,xr).loadWorkspaceContents(n);return r.stop(),i}}o(go,"ExtensionApi"),xr=new WeakMap;var Fa=Object.defineProperty,Na=Object.getOwnPropertyDescriptor,wa=o((t,e,n,r)=>{for(var i=r>1?void 0:r?Na(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&Fa(e,n,i),i},"fs_decorateClass");const ha=l.FileSystemError.FileNotFound().code;class ia{constructor(e){this.providerService=e,this._onDidChangeFile=new l.EventEmitter,this.implicitlyWatchedUris=new Map,this.watchedUris=new Map,this.syncedRootUris=new Set,this.disposable=l.Disposable.from(l.workspace.registerFileSystemProvider(this.scheme,this,{isCaseSensitive:!0}),l.workspace.registerFileSearchProvider(this.scheme,this),l.workspace.registerTextSearchProvider(this.scheme,this),e.onDidChangeRepository(n=>{n.reason==="HEAD"&&this.onRefreshOrRepositoryChanged([n.repository.uri])}),e.onDidRefresh(n=>this.onRefreshOrRepositoryChanged(n)),e.onDidChangeChangeStore(n=>{const r=n.map(i=>{switch(i.type){case D.Created:return{type:l.FileChangeType.Created,uri:i.uri};case D.Changed:return{type:l.FileChangeType.Changed,uri:i.uri};case D.Deleted:return{type:l.FileChangeType.Deleted,uri:i.uri}}});setTimeout(()=>this._onDidChangeFile.fire(r),0)}))}get onDidChangeFile(){return this._onDidChangeFile.event}get scheme(){return Gn.scheme}dispose(){var e;(e=this.disposable)==null||e.dispose()}onRefreshOrRepositoryChanged(e){e=e.filter(n=>n.scheme===this.scheme),e.length!==0&&(K.log(`fs.onRefreshOrRepositoryChanged(${e.map(n=>n.toString()).join(", ")})`),this.updateOpenOrWatchedUris(e))}updateOpenOrWatchedUris(e){const n=x.getOpenUris(this.scheme,e);for(const[i,a]of[...this.watchedUris,...this.implicitlyWatchedUris])e.some(s=>Z(a,s))&&(this.implicitlyWatchedUris.delete(i),n.set(i,a));K.debug(`fs.updateOpenOrWatchedUris(${e.map(i=>i.toString()).join(", ")}): uris=${n.size}`);for(const i of e)n.set(E(i),i);const r=[...n.values()].map(i=>({type:l.FileChangeType.Changed,uri:i}));setTimeout(()=>{K.debug(`fs.updateOpenOrWatchedUris: Firing events=${r.map(i=>i.uri.toString()).join(", ")}`),this._onDidChangeFile.fire(r)},0)}watch(e,n){const r=E(e);this.watchedUris.set(r,e);const i=Fr(this.providerService,e).then(()=>this.providerService.watch(x.getProviderUri(e),n));return{dispose:async()=>{this.watchedUris.delete(r),(await i).dispose()}}}async stat(e){const n=new _t(`fs.stat(${e.toString()})`);await Fr(this.providerService,e);const r=this.providerService.getVirtualRootUri(e),i=r.toString();this.syncedRootUris.has(i)||(this.syncedRootUris.add(i),await this.providerService.fetchOrSync(r));let a;try{if(this.providerService.changeStoreMaybeHasChanges(r,e)!==!1){if(n.logStep("ChangeStore query"),a=await this.providerService.changeStoreStat(e),a!==void 0)return a;n.logStep("Provider query",{message:": Not found \u2022",suffix:" \u2022 Querying provider..."})}else n.logStep("Provider query"),this.implicitlyWatchedUris.set(E(e),e);return a=await this.providerService.stat(x.getProviderUri(e)),a}finally{a===void 0&&this.implicitlyWatchedUris.delete(E(e)),n.stop()}}async readDirectory(e){const n=new _t(`fs.readDirectory(${e.toString()})`);await Fr(this.providerService,e),this.implicitlyWatchedUris.set(E(e),e);try{n.logStep("Provider query");let r=await this.providerService.readDirectory(x.getProviderUri(e));return this.providerService.changeStoreMaybeHasChanges(this.providerService.getVirtualRootUri(e))!==!1&&(n.logStep("Applying changes",{suffix:" \u2022 Applying changes..."}),r=await this.providerService.changeStoreUpdateDirectoryEntries(e,r)),r}finally{n.stop()}}async createDirectory(e){const n=new _t(`fs.createDirectory(${e.toString()})`);await Fr(this.providerService,e);try{await this.providerService.changeStoreCreateDirectory(e)}catch(r){throw K.error(r,n.context),r}finally{n.stop()}}async readFile(e){const n=new _t(`fs.readFile(${e.toString()})`),r=E(e);let i;await Fr(this.providerService,e);try{if(this.providerService.changeStoreMaybeHasChanges(this.providerService.getVirtualRootUri(e),e)!==!1){n.logStep("ChangeStore query");const a=await this.providerService.changeStoreReadFile(e);if(a!==void 0)return a;n.logStep("Provider query",{message:": Not found \u2022",suffix:" \u2022 Querying provider..."})}else n.logStep("Provider query"),this.implicitlyWatchedUris.set(r,e);return i=await this.providerService.readFile(x.getProviderUri(e)),i}catch(a){throw a instanceof Zt&&Fn.showProviderNotFoundMessage(a),a}finally{i===void 0&&this.implicitlyWatchedUris.delete(r),n.stop()}}async writeFile(e,n,r){const i=new _t(`fs.writeFile(${e.toString()})`,{},n.length,r);await Fr(this.providerService,e);try{let a;try{if(a=await this.stat(e),!r.overwrite)throw l.FileSystemError.FileExists()}catch(s){if(s instanceof l.FileSystemError&&s.code===ha){if(!r.create)throw l.FileSystemError.FileNotFound(e)}else throw s}try{if(a===void 0)await this.providerService.changeStoreCreateFile(e,n);else{i.logStep("Provider original query");let s;try{s=await this.providerService.readFile(x.getProviderUri(e))}catch(c){if(c instanceof l.FileSystemError&&c.code===ha)s=new Uint8Array;else throw c}i.logStep("Writing file",{suffix:" \u2022 Writing file to Change Store..."}),await this.providerService.changeStoreWriteFile(e,n,s)}}catch(s){throw K.error(s,i.context),s}}catch(a){throw a instanceof Zt&&Fn.showProviderNotFoundMessage(a),a}finally{i.stop()}}async delete(e,n){const r=new _t(`fs.delete(${e.toString()})`,{},n);await Fr(this.providerService,e);try{switch((await this.stat(e)).type){case l.FileType.File:await this.providerService.changeStoreDeleteFile(e);break;case l.FileType.Directory:{await this.deleteDirectory(e,n);break}default:throw l.FileSystemError.NoPermissions()}}catch(i){throw K.error(i,r.context),i}finally{r.stop()}}async deleteDirectory(e,n){const r=new _t(`fs.deleteDirectory(${e.toString()})`,{},n);try{const i=await this.readDirectory(e);if(i.length!==0){if(!n.recursive&&i.some(([,a])=>a===l.FileType.Directory))throw l.FileSystemError.NoPermissions();for(const[a,s]of i)s===l.FileType.Directory?await this.deleteDirectory(l.Uri.joinPath(e,a),n):await this.providerService.changeStoreDeleteFile(l.Uri.joinPath(e,a))}await this.providerService.changeStoreDeleteDirectory(e)}catch(i){throw K.error(i,r.context),i}finally{r.stop()}}async rename(e,n,r){const i=new _t(`fs.rename(${e.toString()} -> ${n.toString()})`,{},r);await Fr(this.providerService,e);try{switch((await this.stat(e)).type){case l.FileType.File:{const s=await this.readFile(e);await this.writeFile(n,s,{create:!0,overwrite:r.overwrite}),await this.delete(e,{recursive:!1});break}case l.FileType.Directory:{await this.renameDirectory(e,n,r);break}default:throw l.FileSystemError.NoPermissions()}}catch(a){throw K.error(a,i.context),a}finally{i.stop()}}async renameDirectory(e,n,r){const i=new _t(`fs.renameDirectory(${e.toString()} -> ${n.toString()})`,{},r);try{await this.copyDirectory(e,n,r),await this.delete(e,{recursive:!0})}catch(a){throw K.error(a,i.context),a}finally{i.stop()}}async copy(e,n,r){const i=new _t(`fs.copy(${e.toString()} -> ${n.toString()})`,{},r);try{switch((await this.stat(e)).type){case l.FileType.File:{const s=await this.readFile(e);await this.writeFile(n,s,{create:!0,overwrite:r.overwrite});break}case l.FileType.Directory:{await this.copyDirectory(e,n,r);break}default:throw l.FileSystemError.NoPermissions()}}catch(a){throw K.error(a,i.context),a}finally{i.stop()}}async copyDirectory(e,n,r){const i=new _t(`fs.copyDirectory(${e.toString()} -> ${n.toString()})`,{},r);try{if(await this.exists(n))throw l.FileSystemError.FileExists();try{await this.createDirectory(n);const a=await this.readDirectory(e);for(const[s,c]of a)c===l.FileType.Directory?await this.copyDirectory(l.Uri.joinPath(e,s),l.Uri.joinPath(n,s),r):await this.copy(l.Uri.joinPath(e,s),l.Uri.joinPath(n,s),r)}catch(a){throw K.error(a,i.context),a}}finally{i.stop()}}async exists(e){try{return await this.stat(e),!0}catch(n){if(n instanceof l.FileSystemError&&n.code===ha)return!1;throw n}}async provideFileSearchResults(e,n,r){var i;const a=new _t(`fs.provideFileSearchResults(${e.pattern}, ${n.folder.toString()})`,{logLevel:et.Debug});await Fr(this.providerService,n.folder);let s;try{return s=await this.providerService.provideFileSearchResults(e,{...n,folder:x.getProviderUri(n.folder)},r),s==null?void 0:s.map(c=>x.getVirtualUri(c))}catch(c){throw K.error(c,a.context),c}finally{a.stop({suffix:` \u2022 ${(i=s==null?void 0:s.length)!=null?i:0} results found`})}}async provideTextSearchResults(e,n,r,i){return await Fr(this.providerService,n.folder),this.providerService.provideTextSearchResults(e,{...n,folder:x.getProviderUri(n.folder)},{report:a=>r.report({...a,uri:x.getVirtualUri(a.uri)})},i)}}o(ia,"ChangeTrackingFileSystem"),wa([St()],ia.prototype,"stat",1),wa([St()],ia.prototype,"readDirectory",1),wa([St()],ia.prototype,"readFile",1);const Oa=o(class{constructor(t){this.providerService=t,this.lock=new Cn("PendingRepositoryOpenActions"),this.disposable=l.Disposable.from(t.onDidChangeRepositories(e=>e.added.length&&this.onRepositoriesOpened(e.added)))}dispose(){this.disposable.dispose()}async onRepositoriesOpened(t){for(const e of t){const n=await this.getAndDelete(e);(n==null?void 0:n.applyChangeset)&&await this.applyPendingChangeset(e,n.applyChangeset),(n==null?void 0:n.filesToOpen)&&this.openPendingFiles(e.uri,n.filesToOpen),await this.fetchOrSync(e).then(async()=>{const r=pe.getEffective("uncommittedChangesOnEntry");if(r==="none"||!await this.providerService.changeStoreHasChanges(e.uri)||(await this.providerService.getIncomingChanges(this.providerService.getVirtualRootUri(e.uri))).length===0&&r==="promptIfBehind")return;const{state:s}=await this.providerService.getMetadata(e.uri);if(s===void 0||s.behind<1)return;const c=await this.providerService.changeStoreGetChanges(e.uri),u=c.length===1?l.l10n.t("You have {0} file with uncommitted changes from a previous edit session.",c.length.toString()):l.l10n.t("You have {0} files with uncommitted changes from a previous edit session.",c.length.toString());let d="";s.behind===1?d=l.l10n.t(`Your repository contents may be out of date until you sync.

You are {0} commit behind.`,s.behind.toString()):s.behind>1&&(d=l.l10n.t(`Your repository contents may be out of date until you sync.

You are {0} commits behind.`,s.behind.toString()));const f=[u,d].join(`

`),h={title:l.l10n.t("Sync")},p={title:l.l10n.t("Continue Without Syncing"),isCloseAffordance:!0},b={title:l.l10n.t("Don't Show Again")},te=await l.window.showInformationMessage(f,{modal:!0},h,p,b);switch(te==null?void 0:te.title){case h.title:await l.commands.executeCommand("remoteHub.sync");break;case b.title:await pe.updateEffective("uncommittedChangesOnEntry","none");break;default:break}})}}async fetchOrSync(t){await this.providerService.fetchOrSync(t.uri)}async get(t){return this.lock.synchronizeRead(()=>this.getCore(t.uri),"PendingRepositoryOpenActions.get")}async getAndDelete(t){K.debug(`RepositoryOpenActionsService.getAndDelete(${t.uri.toString()})`);try{return await this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t.uri);if(n!==void 0)return await this.storeCore(t.uri,void 0),n},"PendingRepositoryOpenActions.getAndDelete")}catch(e){K.error(e,`Failed to get pending actions for ${t.uri.toString()}`);return}}async openPendingFiles(t,e){if(e.length!==0){K.log(`RepositoryOpenActionsService.openPendingFiles(${t.toString()})`,e.join(","));for(let n of e){const r=/:(?<start>\d+)(?:-(?<end>\d+))?$/.exec(n);let i,a;(r==null?void 0:r.groups)!==void 0&&(i=Number(r.groups.start),isNaN(i)&&(i=void 0),a=Number(r.groups.end),isNaN(a)&&(a=void 0),n=n.substring(0,r.index));const s=l.Uri.joinPath(t,n);let c;try{c=await l.workspace.fs.stat(s)}catch{}if((c==null?void 0:c.type)===l.FileType.Directory)l.commands.executeCommand("revealInExplorer",s);else{let u;i!==void 0&&(u={selection:new l.Range(Number(i)-1,0,a!=null?a:i,0)}),l.commands.executeCommand("vscode.open",s,u)}}}}setChangesetToApply(t,e){return K.log(`RepositoryOpenActionsService.setChangesetToApply(${t.toString()})`),this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t);await this.storeCore(t,{...n,applyChangeset:e})},"PendingRepositoryOpenActions.setChangesetToApply")}setPendingFilesToOpen(t,e){return K.log(`RepositoryOpenActionsService.setPendingFilesToOpen(${t.toString()})`,e.length),this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t);await this.storeCore(t,{...n,filesToOpen:e})},"PendingRepositoryOpenActions.setPendingFilesToOpen")}async applyPendingChangeset(t,e){K.log(`RepositoryOpenActionsService.applyPendingChangeset(${t.uri.toString()})`);try{await this.providerService.changeStoreApplyChangeset(t.uri,e,{save:!0})}catch(n){K.error(n,`Failed to apply pending changeset for ${t.uri.toString()}`)}}async getCore(t){return this.fromStorage(await this.providerService.getFromStorage(t,this.getStorageKey(t)))}storeCore(t,e){return e===void 0||e.applyChangeset===void 0&&(e.filesToOpen===void 0||e.filesToOpen.length===0)?this.providerService.deleteFromStorage(t,this.getStorageKey(t)):this.providerService.storeInStorage(t,this.getStorageKey(t),this.toStorage(e))}getStorageKey(t){return`actions/${E(t)}`}fromStorage(t){if(!!t)try{const e=JSON.parse(t,(n,r)=>(n==="uri"||n.endsWith("Uri"))&&T(r)?l.Uri.from(r):r);return{filesToOpen:e.filesToOpen,applyChangeset:e.applyChangeset}}catch(e){return K.error(e,"Failed to deserialize pending repository actions"),{}}}toStorage(t){const e={schemaVersion:Oa.storageSchemaVersion,...t};return JSON.stringify(e)}},"_RepositoryOpenActionsService");let vo=Oa;vo.storageSchemaVersion=1;function xi(){}o(xi,"Diff"),xi.prototype={diff:o(function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.callback;typeof r=="function"&&(i=r,r={}),this.options=r;var a=this;function s(A){return i?(setTimeout(function(){i(void 0,A)},0),!0):A}o(s,"done"),e=this.castInput(e),n=this.castInput(n),e=this.removeEmpty(this.tokenize(e)),n=this.removeEmpty(this.tokenize(n));var c=n.length,u=e.length,d=1,f=c+u,h=[{newPos:-1,components:[]}],p=this.extractCommon(h[0],n,e,0);if(h[0].newPos+1>=c&&p+1>=u)return s([{value:this.join(n),count:n.length}]);function b(){for(var A=-1*d;A<=d;A+=2){var ee=void 0,me=h[A-1],re=h[A+1],Pe=(re?re.newPos:0)-A;me&&(h[A-1]=void 0);var Fe=me&&me.newPos+1<c,$e=re&&0<=Pe&&Pe<u;if(!Fe&&!$e){h[A]=void 0;continue}if(!Fe||$e&&me.newPos<re.newPos?(ee=po(re),a.pushComponent(ee.components,void 0,!0)):(ee=me,ee.newPos++,a.pushComponent(ee.components,!0,void 0)),Pe=a.extractCommon(ee,n,e,A),ee.newPos+1>=c&&Pe+1>=u)return s(Lo(a,ee.components,n,e,a.useLongestToken));h[A]=ee}d++}if(o(b,"execEditLength"),i)o(function A(){setTimeout(function(){if(d>f)return i();b()||A()},0)},"exec")();else for(;d<=f;){var te=b();if(te)return te}},"diff"),pushComponent:o(function(e,n,r){var i=e[e.length-1];i&&i.added===n&&i.removed===r?e[e.length-1]={count:i.count+1,added:n,removed:r}:e.push({count:1,added:n,removed:r})},"pushComponent"),extractCommon:o(function(e,n,r,i){for(var a=n.length,s=r.length,c=e.newPos,u=c-i,d=0;c+1<a&&u+1<s&&this.equals(n[c+1],r[u+1]);)c++,u++,d++;return d&&e.components.push({count:d}),e.newPos=c,u},"extractCommon"),equals:o(function(e,n){return this.options.comparator?this.options.comparator(e,n):e===n||this.options.ignoreCase&&e.toLowerCase()===n.toLowerCase()},"equals"),removeEmpty:o(function(e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n},"removeEmpty"),castInput:o(function(e){return e},"castInput"),tokenize:o(function(e){return e.split("")},"tokenize"),join:o(function(e){return e.join("")},"join")};function Lo(t,e,n,r,i){for(var a=0,s=e.length,c=0,u=0;a<s;a++){var d=e[a];if(d.removed){if(d.value=t.join(r.slice(u,u+d.count)),u+=d.count,a&&e[a-1].added){var h=e[a-1];e[a-1]=e[a],e[a]=h}}else{if(!d.added&&i){var f=n.slice(c,c+d.count);f=f.map(function(b,te){var A=r[u+te];return A.length>b.length?A:b}),d.value=t.join(f)}else d.value=t.join(n.slice(c,c+d.count));c+=d.count,d.added||(u+=d.count)}}var p=e[s-1];return s>1&&typeof p.value=="string"&&(p.added||p.removed)&&t.equals("",p.value)&&(e[s-2].value+=p.value,e.pop()),e}o(Lo,"buildValues");function po(t){return{newPos:t.newPos,components:t.components.slice(0)}}o(po,"clonePath");var Me=new xi;function Et(t,e,n){return Me.diff(t,e,n)}o(Et,"diffChars");function Lt(t,e){if(typeof t=="function")e.callback=t;else if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}o(Lt,"generateOptions");var en=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,Mn=/\S/,Nn=new xi;Nn.equals=function(t,e){return this.options.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e||this.options.ignoreWhitespace&&!Mn.test(t)&&!Mn.test(e)},Nn.tokenize=function(t){for(var e=t.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<e.length-1;n++)!e[n+1]&&e[n+2]&&en.test(e[n])&&en.test(e[n+2])&&(e[n]+=e[n+2],e.splice(n+1,2),n--);return e};function Vn(t,e,n){return n=Lt(n,{ignoreWhitespace:!0}),Nn.diff(t,e,n)}o(Vn,"diffWords");function Ur(t,e,n){return Nn.diff(t,e,n)}o(Ur,"diffWordsWithSpace");var jr=new xi;jr.tokenize=function(t){var e=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var i=n[r];r%2&&!this.options.newlineIsToken?e[e.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),e.push(i))}return e};function Wr(t,e,n){return jr.diff(t,e,n)}o(Wr,"diffLines");function Yr(t,e,n){var r=Lt(n,{ignoreWhitespace:!0});return jr.diff(t,e,r)}o(Yr,"diffTrimmedLines");var Zr=new xi;Zr.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};function $r(t,e,n){return Zr.diff(t,e,n)}o($r,"diffSentences");var aa=new xi;aa.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function Hc(t,e,n){return aa.diff(t,e,n)}o(Hc,"diffCss");function mo(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?mo=o(function(e){return typeof e},"_typeof"):mo=o(function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},"_typeof"),mo(t)}o(mo,"_typeof");function ea(t){return hl(t)||gl(t)||vl(t)||pl()}o(ea,"_toConsumableArray");function hl(t){if(Array.isArray(t))return ko(t)}o(hl,"_arrayWithoutHoles");function gl(t){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(t))return Array.from(t)}o(gl,"_iterableToArray");function vl(t,e){if(!!t){if(typeof t=="string")return ko(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ko(t,e)}}o(vl,"_unsupportedIterableToArray");function ko(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}o(ko,"_arrayLikeToArray");function pl(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}o(pl,"_nonIterableSpread");var ml=Object.prototype.toString,Sa=new xi;Sa.useLongestToken=!0,Sa.tokenize=jr.tokenize,Sa.castInput=function(t){var e=this.options,n=e.undefinedReplacement,r=e.stringifyReplacer,i=r===void 0?function(a,s){return typeof s=="undefined"?n:s}:r;return typeof t=="string"?t:JSON.stringify(xo(t,null,null,i),i,"  ")},Sa.equals=function(t,e){return xi.prototype.equals.call(Sa,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function Bc(t,e,n){return Sa.diff(t,e,n)}o(Bc,"diffJson");function xo(t,e,n,r,i){e=e||[],n=n||[],r&&(t=r(i,t));var a;for(a=0;a<e.length;a+=1)if(e[a]===t)return n[a];var s;if(ml.call(t)==="[object Array]"){for(e.push(t),s=new Array(t.length),n.push(s),a=0;a<t.length;a+=1)s[a]=xo(t[a],e,n,r,i);return e.pop(),n.pop(),s}if(t&&t.toJSON&&(t=t.toJSON()),mo(t)==="object"&&t!==null){e.push(t),s={},n.push(s);var c=[],u;for(u in t)t.hasOwnProperty(u)&&c.push(u);for(c.sort(),a=0;a<c.length;a+=1)u=c[a],s[u]=xo(t[u],e,n,r,u);e.pop(),n.pop()}else s=t;return s}o(xo,"canonicalize");var yo=new xi;yo.tokenize=function(t){return t.slice()},yo.join=yo.removeEmpty=function(t){return t};function Uc(t,e,n){return yo.diff(t,e,n)}o(Uc,"diffArrays");function Ha(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.split(/\r\n|[\n\v\f\r\x85]/),r=t.match(/\r\n|[\n\v\f\r\x85]/g)||[],i=[],a=0;function s(){var d={};for(i.push(d);a<n.length;){var f=n[a];if(/^(\-\-\-|\+\+\+|@@)\s/.test(f))break;var h=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(f);h&&(d.index=h[1]),a++}for(c(d),c(d),d.hunks=[];a<n.length;){var p=n[a];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(p))break;if(/^@@/.test(p))d.hunks.push(u());else{if(p&&e.strict)throw new Error("Unknown line "+(a+1)+" "+JSON.stringify(p));a++}}}o(s,"parseIndex");function c(d){var f=/^(---|\+\+\+)\s+(.*)$/.exec(n[a]);if(f){var h=f[1]==="---"?"old":"new",p=f[2].split("	",2),b=p[0].replace(/\\\\/g,"\\");/^".*"$/.test(b)&&(b=b.substr(1,b.length-2)),d[h+"FileName"]=b,d[h+"Header"]=(p[1]||"").trim(),a++}}o(c,"parseFileHeader");function u(){var d=a,f=n[a++],h=f.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),p={oldStart:+h[1],oldLines:typeof h[2]=="undefined"?1:+h[2],newStart:+h[3],newLines:typeof h[4]=="undefined"?1:+h[4],lines:[],linedelimiters:[]};p.oldLines===0&&(p.oldStart+=1),p.newLines===0&&(p.newStart+=1);for(var b=0,te=0;a<n.length&&!(n[a].indexOf("--- ")===0&&a+2<n.length&&n[a+1].indexOf("+++ ")===0&&n[a+2].indexOf("@@")===0);a++){var A=n[a].length==0&&a!=n.length-1?" ":n[a][0];if(A==="+"||A==="-"||A===" "||A==="\\")p.lines.push(n[a]),p.linedelimiters.push(r[a]||`
`),A==="+"?b++:A==="-"?te++:A===" "&&(b++,te++);else break}if(!b&&p.newLines===1&&(p.newLines=0),!te&&p.oldLines===1&&(p.oldLines=0),e.strict){if(b!==p.newLines)throw new Error("Added line count did not match for hunk at line "+(d+1));if(te!==p.oldLines)throw new Error("Removed line count did not match for hunk at line "+(d+1))}return p}for(o(u,"parseHunk");a<n.length;)s();return i}o(Ha,"parsePatch");function yl(t,e,n){var r=!0,i=!1,a=!1,s=1;return o(function c(){if(r&&!a){if(i?s++:r=!1,t+s<=n)return s;a=!0}if(!i)return a||(r=!0),e<=t-s?-s++:(i=!0,c())},"iterator")}o(yl,"distanceIterator");function rs(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string"&&(e=Ha(e)),Array.isArray(e)){if(e.length>1)throw new Error("applyPatch only works with a single input.");e=e[0]}var r=t.split(/\r\n|[\n\v\f\r\x85]/),i=t.match(/\r\n|[\n\v\f\r\x85]/g)||[],a=e.hunks,s=n.compareLine||function(Ti,Mi,oa,Fi){return Mi===Fi},c=0,u=n.fuzzFactor||0,d=0,f=0,h,p;function b(Ti,Mi){for(var oa=0;oa<Ti.lines.length;oa++){var Fi=Ti.lines[oa],_a=Fi.length>0?Fi[0]:" ",Mo=Fi.length>0?Fi.substr(1):Fi;if(_a===" "||_a==="-"){if(!s(Mi+1,r[Mi],_a,Mo)&&(c++,c>u))return!1;Mi++}}return!0}o(b,"hunkFits");for(var te=0;te<a.length;te++){for(var A=a[te],ee=r.length-A.oldLines,me=0,re=f+A.oldStart-1,Pe=yl(re,d,ee);me!==void 0;me=Pe())if(b(A,re+me)){A.offset=f+=me;break}if(me===void 0)return!1;d=A.offset+A.oldStart+A.oldLines}for(var Fe=0,$e=0;$e<a.length;$e++){var je=a[$e],it=je.oldStart+je.offset+Fe-1;Fe+=je.newLines-je.oldLines;for(var Je=0;Je<je.lines.length;Je++){var xt=je.lines[Je],Qt=xt.length>0?xt[0]:" ",an=xt.length>0?xt.substr(1):xt,$t=je.linedelimiters[Je];if(Qt===" ")it++;else if(Qt==="-")r.splice(it,1),i.splice(it,1);else if(Qt==="+")r.splice(it,0,an),i.splice(it,0,$t),it++;else if(Qt==="\\"){var dn=je.lines[Je-1]?je.lines[Je-1][0]:null;dn==="+"?h=!0:dn==="-"&&(p=!0)}}}if(h)for(;!r[r.length-1];)r.pop(),i.pop();else p&&(r.push(""),i.push(`
`));for(var Mr=0;Mr<r.length-1;Mr++)r[Mr]=r[Mr]+i[Mr];return r.join("")}o(rs,"applyPatch");function Wc(t,e){typeof t=="string"&&(t=Ha(t));var n=0;function r(){var i=t[n++];if(!i)return e.complete();e.loadFile(i,function(a,s){if(a)return e.complete(a);var c=rs(s,i,e);e.patched(i,c,function(u){if(u)return e.complete(u);r()})})}o(r,"processIndex"),r()}o(Wc,"applyPatches");function is(t,e,n,r,i,a,s){s||(s={}),typeof s.context=="undefined"&&(s.context=4);var c=Wr(n,r,s);c.push({value:"",lines:[]});function u(me){return me.map(function(re){return" "+re})}o(u,"contextLines");for(var d=[],f=0,h=0,p=[],b=1,te=1,A=o(function(re){var Pe=c[re],Fe=Pe.lines||Pe.value.replace(/\n$/,"").split(`
`);if(Pe.lines=Fe,Pe.added||Pe.removed){var $e;if(!f){var je=c[re-1];f=b,h=te,je&&(p=s.context>0?u(je.lines.slice(-s.context)):[],f-=p.length,h-=p.length)}($e=p).push.apply($e,ea(Fe.map(function(Mr){return(Pe.added?"+":"-")+Mr}))),Pe.added?te+=Fe.length:b+=Fe.length}else{if(f)if(Fe.length<=s.context*2&&re<c.length-2){var it;(it=p).push.apply(it,ea(u(Fe)))}else{var Je,xt=Math.min(Fe.length,s.context);(Je=p).push.apply(Je,ea(u(Fe.slice(0,xt))));var Qt={oldStart:f,oldLines:b-f+xt,newStart:h,newLines:te-h+xt,lines:p};if(re>=c.length-2&&Fe.length<=s.context){var an=/\n$/.test(n),$t=/\n$/.test(r),dn=Fe.length==0&&p.length>Qt.oldLines;!an&&dn&&n.length>0&&p.splice(Qt.oldLines,0,"\\ No newline at end of file"),(!an&&!dn||!$t)&&p.push("\\ No newline at end of file")}d.push(Qt),f=0,h=0,p=[]}b+=Fe.length,te+=Fe.length}},"_loop"),ee=0;ee<c.length;ee++)A(ee);return{oldFileName:t,newFileName:e,oldHeader:i,newHeader:a,hunks:d}}o(is,"structuredPatch");function wl(t){var e=[];t.oldFileName==t.newFileName&&e.push("Index: "+t.oldFileName),e.push("==================================================================="),e.push("--- "+t.oldFileName+(typeof t.oldHeader=="undefined"?"":"	"+t.oldHeader)),e.push("+++ "+t.newFileName+(typeof t.newHeader=="undefined"?"":"	"+t.newHeader));for(var n=0;n<t.hunks.length;n++){var r=t.hunks[n];r.oldLines===0&&(r.oldStart-=1),r.newLines===0&&(r.newStart-=1),e.push("@@ -"+r.oldStart+","+r.oldLines+" +"+r.newStart+","+r.newLines+" @@"),e.push.apply(e,r.lines)}return e.join(`
`)+`
`}o(wl,"formatPatch");function Sl(t,e,n,r,i,a,s){return wl(is(t,e,n,r,i,a,s))}o(Sl,"createTwoFilesPatch");function Cl(t,e,n,r,i,a){return Sl(t,t,e,n,r,i,a)}o(Cl,"createPatch");function bl(t,e){return t.length!==e.length?!1:Fo(t,e)}o(bl,"arrayEqual");function Fo(t,e){if(e.length>t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}o(Fo,"arrayStartsWith");function _l(t){var e=Oo(t.lines),n=e.oldLines,r=e.newLines;n!==void 0?t.oldLines=n:delete t.oldLines,r!==void 0?t.newLines=r:delete t.newLines}o(_l,"calcLineCount");function $c(t,e,n){t=as(t,n),e=as(e,n);var r={};(t.index||e.index)&&(r.index=t.index||e.index),(t.newFileName||e.newFileName)&&(os(t)?os(e)?(r.oldFileName=wo(r,t.oldFileName,e.oldFileName),r.newFileName=wo(r,t.newFileName,e.newFileName),r.oldHeader=wo(r,t.oldHeader,e.oldHeader),r.newHeader=wo(r,t.newHeader,e.newHeader)):(r.oldFileName=t.oldFileName,r.newFileName=t.newFileName,r.oldHeader=t.oldHeader,r.newHeader=t.newHeader):(r.oldFileName=e.oldFileName||t.oldFileName,r.newFileName=e.newFileName||t.newFileName,r.oldHeader=e.oldHeader||t.oldHeader,r.newHeader=e.newHeader||t.newHeader)),r.hunks=[];for(var i=0,a=0,s=0,c=0;i<t.hunks.length||a<e.hunks.length;){var u=t.hunks[i]||{oldStart:1/0},d=e.hunks[a]||{oldStart:1/0};if(ss(u,d))r.hunks.push(ls(u,s)),i++,c+=u.newLines-u.oldLines;else if(ss(d,u))r.hunks.push(ls(d,c)),a++,s+=d.newLines-d.oldLines;else{var f={oldStart:Math.min(u.oldStart,d.oldStart),oldLines:0,newStart:Math.min(u.newStart+s,d.oldStart+c),newLines:0,lines:[]};El(f,u.oldStart,u.lines,d.oldStart,d.lines),a++,i++,r.hunks.push(f)}}return r}o($c,"merge");function as(t,e){if(typeof t=="string"){if(/^@@/m.test(t)||/^Index:/m.test(t))return Ha(t)[0];if(!e)throw new Error("Must provide a base reference or pass in a patch");return is(void 0,void 0,e,t)}return t}o(as,"loadPatch");function os(t){return t.newFileName&&t.newFileName!==t.oldFileName}o(os,"fileNameChanged");function wo(t,e,n){return e===n?e:(t.conflict=!0,{mine:e,theirs:n})}o(wo,"selectField");function ss(t,e){return t.oldStart<e.oldStart&&t.oldStart+t.oldLines<e.oldStart}o(ss,"hunkBefore");function ls(t,e){return{oldStart:t.oldStart,oldLines:t.oldLines,newStart:t.newStart+e,newLines:t.newLines,lines:t.lines}}o(ls,"cloneHunk");function El(t,e,n,r,i){var a={offset:e,lines:n,index:0},s={offset:r,lines:i,index:0};for(us(t,a,s),us(t,s,a);a.index<a.lines.length&&s.index<s.lines.length;){var c=a.lines[a.index],u=s.lines[s.index];if((c[0]==="-"||c[0]==="+")&&(u[0]==="-"||u[0]==="+"))Al(t,a,s);else if(c[0]==="+"&&u[0]===" "){var d;(d=t.lines).push.apply(d,ea(ga(a)))}else if(u[0]==="+"&&c[0]===" "){var f;(f=t.lines).push.apply(f,ea(ga(s)))}else c[0]==="-"&&u[0]===" "?cs(t,a,s):u[0]==="-"&&c[0]===" "?cs(t,s,a,!0):c===u?(t.lines.push(c),a.index++,s.index++):No(t,ga(a),ga(s))}ds(t,a),ds(t,s),_l(t)}o(El,"mergeLines");function Al(t,e,n){var r=ga(e),i=ga(n);if(fs(r)&&fs(i)){if(Fo(r,i)&&hs(n,r,r.length-i.length)){var a;(a=t.lines).push.apply(a,ea(r));return}else if(Fo(i,r)&&hs(e,i,i.length-r.length)){var s;(s=t.lines).push.apply(s,ea(i));return}}else if(bl(r,i)){var c;(c=t.lines).push.apply(c,ea(r));return}No(t,r,i)}o(Al,"mutualChange");function cs(t,e,n,r){var i=ga(e),a=Dl(n,i);if(a.merged){var s;(s=t.lines).push.apply(s,ea(a.merged))}else No(t,r?a:i,r?i:a)}o(cs,"removal");function No(t,e,n){t.conflict=!0,t.lines.push({conflict:!0,mine:e,theirs:n})}o(No,"conflict");function us(t,e,n){for(;e.offset<n.offset&&e.index<e.lines.length;){var r=e.lines[e.index++];t.lines.push(r),e.offset++}}o(us,"insertLeading");function ds(t,e){for(;e.index<e.lines.length;){var n=e.lines[e.index++];t.lines.push(n)}}o(ds,"insertTrailing");function ga(t){for(var e=[],n=t.lines[t.index][0];t.index<t.lines.length;){var r=t.lines[t.index];if(n==="-"&&r[0]==="+"&&(n="+"),n===r[0])e.push(r),t.index++;else break}return e}o(ga,"collectChange");function Dl(t,e){for(var n=[],r=[],i=0,a=!1,s=!1;i<e.length&&t.index<t.lines.length;){var c=t.lines[t.index],u=e[i];if(u[0]==="+")break;if(a=a||c[0]!==" ",r.push(u),i++,c[0]==="+")for(s=!0;c[0]==="+";)n.push(c),c=t.lines[++t.index];u.substr(1)===c.substr(1)?(n.push(c),t.index++):s=!0}if((e[i]||"")[0]==="+"&&a&&(s=!0),s)return n;for(;i<e.length;)r.push(e[i++]);return{merged:r,changes:n}}o(Dl,"collectContext");function fs(t){return t.reduce(function(e,n){return e&&n[0]==="-"},!0)}o(fs,"allRemoves");function hs(t,e,n){for(var r=0;r<n;r++){var i=e[e.length-n+r].substr(1);if(t.lines[t.index+r]!==" "+i)return!1}return t.index+=n,!0}o(hs,"skipRemoveSuperset");function Oo(t){var e=0,n=0;return t.forEach(function(r){if(typeof r!="string"){var i=Oo(r.mine),a=Oo(r.theirs);e!==void 0&&(i.oldLines===a.oldLines?e+=i.oldLines:e=void 0),n!==void 0&&(i.newLines===a.newLines?n+=i.newLines:n=void 0)}else n!==void 0&&(r[0]==="+"||r[0]===" ")&&n++,e!==void 0&&(r[0]==="-"||r[0]===" ")&&e++}),{oldLines:e,newLines:n}}o(Oo,"calcOldNewLineCount");function Kc(t){for(var e=[],n,r,i=0;i<t.length;i++)n=t[i],n.added?r=1:n.removed?r=-1:r=0,e.push([r,n.value]);return e}o(Kc,"convertChangesToDMP");function Gc(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];r.added?e.push("<ins>"):r.removed&&e.push("<del>"),e.push(Rl(r.value)),r.added?e.push("</ins>"):r.removed&&e.push("</del>")}return e.join("")}o(Gc,"convertChangesToXML");function Rl(t){var e=t;return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/"/g,"&quot;"),e}o(Rl,"escapeHTML");var gs=/[^a-zA-Z0-9]/,vs=/\s/,ps=/[\r\n]/,Tl=/\n\r?\n$/,Ml=/^\r?\n\r?\n/,vt;(function(t){t[t.DIFF_DELETE=-1]="DIFF_DELETE",t[t.DIFF_INSERT=1]="DIFF_INSERT",t[t.DIFF_EQUAL=0]="DIFF_EQUAL"})(vt||(vt={}));function Pl(t,e){return t<e?t:e}o(Pl,"min");function Il(t,e){return t>e?t:e}o(Il,"max");var li=st,Ba=function(){function t(){this.diffs=[],this.start1=0,this.start2=0,this.length1=0,this.length2=0}return o(t,"PatchObject"),t.prototype.toString=function(){var e,n;this.length1===0?e=this.start1+",0":this.length1===1?e=this.start1+1:e=this.start1+1+","+this.length1,this.length2===0?n=this.start2+",0":this.length2===1?n=this.start2+1:n=this.start2+1+","+this.length2;for(var r=["@@ -"+e+" +"+n+` @@
`],i,a=0;a<this.diffs.length;a++){switch(this.diffs[a][0]){case vt.DIFF_INSERT:i="+";break;case vt.DIFF_DELETE:i="-";break;case vt.DIFF_EQUAL:i=" ";break}r[a+1]=i+encodeURI(this.diffs[a][1])+`
`}return r.join("").replace(/%20/g," ")},t}(),Ll=function(){function t(){this.diffTimeout=1,this.diffEditCost=4,this.matchThreshold=.5,this.matchDistance=1e3,this.patchDeleteThreshold=.5,this.patchMargin=4,this.matchMaxBits=32}return o(t,"DiffMatchPatch"),t.prototype.diff_main=function(e,n,r,i){typeof i=="undefined"&&(this.diffTimeout<=0?i=Number.MAX_VALUE:i=Date.now()+this.diffTimeout*1e3);var a=i;if(e==null||n==null)throw new Error("Null input. (diff_main)");if(e===n)return e?[[vt.DIFF_EQUAL,e]]:[];typeof r=="undefined"&&(r=!0);var s=r,c=this.diff_commonPrefix(e,n),u=e.substring(0,c);e=e.substring(c),n=n.substring(c),c=this.diff_commonSuffix(e,n);var d=e.substring(e.length-c);e=e.substring(0,e.length-c),n=n.substring(0,n.length-c);var f=this.diff_compute_(e,n,s,a);return u&&f.unshift([vt.DIFF_EQUAL,u]),d&&f.push([vt.DIFF_EQUAL,d]),this.diff_cleanupMerge(f),f},t.prototype.diff_commonPrefix=function(e,n){if(!e||!n||e.charAt(0)!==n.charAt(0))return 0;for(var r=0,i=li.min(e.length,n.length),a=i,s=0;r<a;)e.substring(s,a)===n.substring(s,a)?(r=a,s=r):i=a,a=Math.floor((i-r)/2+r);return a},t.prototype.diff_commonSuffix=function(e,n){if(!e||!n||e.charAt(e.length-1)!==n.charAt(n.length-1))return 0;for(var r=0,i=li.min(e.length,n.length),a=i,s=0;r<a;)e.substring(e.length-a,e.length-s)===n.substring(n.length-a,n.length-s)?(r=a,s=r):i=a,a=Math.floor((i-r)/2+r);return a},t.prototype.diff_cleanupSemantic=function(e){for(var n=!1,r=[],i=0,a=null,s=0,c=0,u=0,d=0,f=0;s<e.length;)e[s][0]===vt.DIFF_EQUAL?(r[i++]=s,c=d,u=f,d=0,f=0,a=e[s][1]):(e[s][0]===vt.DIFF_INSERT?d+=e[s][1].length:f+=e[s][1].length,a&&a.length<=li.max(c,u)&&a.length<=li.max(d,f)&&(e.splice(r[i-1],0,[vt.DIFF_DELETE,a]),e[r[i-1]+1][0]=vt.DIFF_INSERT,i--,i--,s=i>0?r[i-1]:-1,c=0,u=0,d=0,f=0,a=null,n=!0)),s++;for(n&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),s=1;s<e.length;){if(e[s-1][0]===vt.DIFF_DELETE&&e[s][0]===vt.DIFF_INSERT){var h=e[s-1][1],p=e[s][1],b=this.diff_commonOverlap_(h,p),te=this.diff_commonOverlap_(p,h);b>=te?(b>=h.length/2||b>=p.length/2)&&(e.splice(s,0,[vt.DIFF_EQUAL,p.substring(0,b)]),e[s-1][1]=h.substring(0,h.length-b),e[s+1][1]=p.substring(b),s++):(te>=h.length/2||te>=p.length/2)&&(e.splice(s,0,[vt.DIFF_EQUAL,h.substring(0,te)]),e[s-1][0]=vt.DIFF_INSERT,e[s-1][1]=p.substring(0,p.length-te),e[s+1][0]=vt.DIFF_DELETE,e[s+1][1]=h.substring(te),s++),s++}s++}},t.prototype.diff_cleanupSemanticLossless=function(e){for(var n=1;n<e.length-1;){if(e[n-1][0]===vt.DIFF_EQUAL&&e[n+1][0]===vt.DIFF_EQUAL){var r=e[n-1][1],i=e[n][1],a=e[n+1][1],s=this.diff_commonSuffix(r,i);if(s){var c=i.substring(i.length-s);r=r.substring(0,r.length-s),i=c+i.substring(0,i.length-s),a=c+a}for(var u=r,d=i,f=a,h=this.diff_cleanupSemanticScore_(r,i)+this.diff_cleanupSemanticScore_(i,a);i.charAt(0)===a.charAt(0);){r+=i.charAt(0),i=i.substring(1)+a.charAt(0),a=a.substring(1);var p=this.diff_cleanupSemanticScore_(r,i)+this.diff_cleanupSemanticScore_(i,a);p>=h&&(h=p,u=r,d=i,f=a)}e[n-1][1]!==u&&(u?e[n-1][1]=u:(e.splice(n-1,1),n--),e[n][1]=d,f?e[n+1][1]=f:(e.splice(n+1,1),n--))}n++}},t.prototype.diff_cleanupEfficiency=function(e){for(var n=!1,r=[],i=0,a=null,s=0,c=!1,u=!1,d=!1,f=!1;s<e.length;)e[s][0]===vt.DIFF_EQUAL?(e[s][1].length<this.diffEditCost&&(d||f)?(r[i++]=s,c=d,u=f,a=e[s][1]):(i=0,a=null),d=f=!1):(e[s][0]===vt.DIFF_DELETE?f=!0:d=!0,a&&(c&&u&&d&&f||a.length<this.diffEditCost/2&&Number(c)+Number(u)+Number(d)+Number(f)===3)&&(e.splice(r[i-1],0,[vt.DIFF_DELETE,a]),e[r[i-1]+1][0]=vt.DIFF_INSERT,i--,a=null,c&&u?(d=f=!0,i=0):(i--,s=i>0?r[i-1]:-1,d=f=!1),n=!0)),s++;n&&this.diff_cleanupMerge(e)},t.prototype.diff_cleanupMerge=function(e){e.push([vt.DIFF_EQUAL,""]);for(var n=0,r=0,i=0,a="",s="",c;n<e.length;)switch(e[n][0]){case vt.DIFF_INSERT:i++,s+=e[n][1],n++;break;case vt.DIFF_DELETE:r++,a+=e[n][1],n++;break;case vt.DIFF_EQUAL:r+i>1?(r!==0&&i!==0&&(c=this.diff_commonPrefix(s,a),c!==0&&(n-r-i>0&&e[n-r-i-1][0]===vt.DIFF_EQUAL?e[n-r-i-1][1]+=s.substring(0,c):(e.splice(0,0,[vt.DIFF_EQUAL,s.substring(0,c)]),n++),s=s.substring(c),a=a.substring(c)),c=this.diff_commonSuffix(s,a),c!==0&&(e[n][1]=s.substring(s.length-c)+e[n][1],s=s.substring(0,s.length-c),a=a.substring(0,a.length-c))),n-=r+i,e.splice(n,r+i),a.length&&(e.splice(n,0,[vt.DIFF_DELETE,a]),n++),s.length&&(e.splice(n,0,[vt.DIFF_INSERT,s]),n++),n++):n!==0&&e[n-1][0]===vt.DIFF_EQUAL?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,i=0,r=0,a="",s="";break}e[e.length-1][1]===""&&e.pop();var u=!1;for(n=1;n<e.length-1;)e[n-1][0]===vt.DIFF_EQUAL&&e[n+1][0]===vt.DIFF_EQUAL&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)===e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),u=!0):e[n][1].substring(0,e[n+1][1].length)===e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),u=!0)),n++;u&&this.diff_cleanupMerge(e)},t.prototype.diff_xIndex=function(e,n){var r=0,i=0,a=0,s=0,c;for(c=0;c<e.length&&(e[c][0]!==vt.DIFF_INSERT&&(r+=e[c][1].length),e[c][0]!==vt.DIFF_DELETE&&(i+=e[c][1].length),!(r>n));c++)a=r,s=i;return e.length!==c&&e[c][0]===vt.DIFF_DELETE?s:s+(n-a)},t.prototype.diff_prettyHtml=function(e){for(var n=[],r=/&/g,i=/</g,a=/>/g,s=/\n/g,c=0;c<e.length;c++){var u=e[c][0],d=e[c][1],f=d.replace(r,"&amp;").replace(i,"&lt;").replace(a,"&gt;").replace(s,"&para;<br>");switch(u){case vt.DIFF_INSERT:n[c]='<ins style="background:#e6ffe6;">'+f+"</ins>";break;case vt.DIFF_DELETE:n[c]='<del style="background:#ffe6e6;">'+f+"</del>";break;case vt.DIFF_EQUAL:n[c]="<span>"+f+"</span>";break}}return n.join("")},t.prototype.diff_text1=function(e){for(var n=[],r=0;r<e.length;r++)e[r][0]!==vt.DIFF_INSERT&&(n[r]=e[r][1]);return n.join("")},t.prototype.diff_text2=function(e){for(var n=[],r=0;r<e.length;r++)e[r][0]!==vt.DIFF_DELETE&&(n[r]=e[r][1]);return n.join("")},t.prototype.diff_levenshtein=function(e){for(var n=0,r=0,i=0,a=0;a<e.length;a++){var s=e[a][0],c=e[a][1];switch(s){case vt.DIFF_INSERT:r+=c.length;break;case vt.DIFF_DELETE:i+=c.length;break;case vt.DIFF_EQUAL:n+=li.max(r,i),r=0,i=0;break}}return n+=li.max(r,i),n},t.prototype.diff_toDelta=function(e){for(var n=[],r=0;r<e.length;r++)switch(e[r][0]){case vt.DIFF_INSERT:n[r]="+"+encodeURI(e[r][1]);break;case vt.DIFF_DELETE:n[r]="-"+e[r][1].length;break;case vt.DIFF_EQUAL:n[r]="="+e[r][1].length;break}return n.join("	").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(e,n){for(var r=[],i=0,a=0,s=n.split(/\t/g),c=0;c<s.length;c++){var u=s[c].substring(1);switch(s[c].charAt(0)){case"+":try{r[i++]=[vt.DIFF_INSERT,decodeURI(u)]}catch(h){throw new Error("Illegal escape in diff_fromDelta: "+u)}break;case"-":case"=":var d=parseInt(u,10);if(isNaN(d)||d<0)throw new Error("Invalid number in diff_fromDelta: "+u);var f=e.substring(a,a+=d);s[c].charAt(0)==="="?r[i++]=[vt.DIFF_EQUAL,f]:r[i++]=[vt.DIFF_DELETE,f];break;default:if(s[c])throw new Error("Invalid diff operation in diff_fromDelta: "+s[c])}}if(a!==e.length)throw new Error("Delta length ("+a+") does not equal source text length ("+e.length+")");return r},t.prototype.diff_linesToChars=function(e,n){var r=[],i={};r[0]="";var a=this.diff_linesToCharsMunge_(e,r,i,4e4),s=this.diff_linesToCharsMunge_(n,r,i,65535);return{chars1:a,chars2:s,lineArray:r}},t.prototype.diff_charsToLines=function(e,n){for(var r=0;r<e.length;r++){for(var i=e[r][1],a=[],s=0;s<i.length;s++)a[s]=n[i.charCodeAt(s)];e[r][1]=a.join("")}},t.prototype.match_main=function(e,n,r){if(e==null||n==null||r==null)throw new Error("Null input. (match_main)");return r=li.max(0,li.min(r,e.length)),e===n?0:e.length?e.substring(r,r+n.length)===n?r:this.match_bitap_(e,n,r):-1},t.prototype.patch_make=function(e,n,r){var i,a;if(typeof e=="string"&&typeof n=="string"&&typeof r=="undefined")i=e,a=this.diff_main(i,n,!0),a.length>2&&(this.diff_cleanupSemantic(a),this.diff_cleanupEfficiency(a));else if(e&&typeof e=="object"&&typeof n=="undefined"&&typeof r=="undefined")a=e,i=this.diff_text1(a);else if(typeof e=="string"&&n&&typeof n=="object"&&typeof r=="undefined")i=e,a=n;else if(typeof e=="string"&&typeof n=="string"&&r&&typeof r=="object")i=e,a=r;else throw new Error("Unknown call format to patch_make");if(a.length===0)return[];for(var s=[],c=new Ba,u=0,d=0,f=0,h=i,p=i,b=0;b<a.length;b++){var te=a[b][0],A=a[b][1];switch(!u&&te!==vt.DIFF_EQUAL&&(c.start1=d,c.start2=f),te){case vt.DIFF_INSERT:c.diffs[u++]=a[b],c.length2+=A.length,p=p.substring(0,f)+A+p.substring(f);break;case vt.DIFF_DELETE:c.length1+=A.length,c.diffs[u++]=a[b],p=p.substring(0,f)+p.substring(f+A.length);break;case vt.DIFF_EQUAL:A.length<=2*this.patchMargin&&u&&a.length!==b+1?(c.diffs[u++]=a[b],c.length1+=A.length,c.length2+=A.length):A.length>=2*this.patchMargin&&u&&(this.patch_addContext_(c,h),s.push(c),c=new Ba,u=0,h=p,d=f);break}te!==vt.DIFF_INSERT&&(d+=A.length),te!==vt.DIFF_DELETE&&(f+=A.length)}return u&&(this.patch_addContext_(c,h),s.push(c)),s},t.prototype.patch_deepCopy=function(e){for(var n=[],r=0;r<e.length;r++){for(var i=e[r],a=new Ba,s=0;s<i.diffs.length;s++)a.diffs[s]=[i.diffs[s][0],i.diffs[s][1]];a.start1=i.start1,a.start2=i.start2,a.length1=i.length1,a.length2=i.length2,n[r]=a}return n},t.prototype.patch_apply=function(e,n){if(e.length===0)return[n,[]];e=this.patch_deepCopy(e);var r=this.patch_addPadding(e);n=r+n+r,this.patch_splitMax(e);for(var i=0,a=[],s=0;s<e.length;s++){var c=e[s].start2+i,u=this.diff_text1(e[s].diffs),d=void 0,f=-1;if(u.length>this.matchMaxBits?(d=this.match_main(n,u.substring(0,this.matchMaxBits),c),d!==-1&&(f=this.match_main(n,u.substring(u.length-this.matchMaxBits),c+u.length-this.matchMaxBits),(f===-1||d>=f)&&(d=-1))):d=this.match_main(n,u,c),d===-1)a[s]=!1,i-=e[s].length2-e[s].length1;else{a[s]=!0,i=d-c;var h=void 0;if(f===-1?h=n.substring(d,d+u.length):h=n.substring(d,f+this.matchMaxBits),u===h)n=n.substring(0,d)+this.diff_text2(e[s].diffs)+n.substring(d+u.length);else{var p=this.diff_main(u,h,!1);if(u.length>this.matchMaxBits&&this.diff_levenshtein(p)/u.length>this.patchDeleteThreshold)a[s]=!1;else{this.diff_cleanupSemanticLossless(p);for(var b=0,te=0,A=0;A<e[s].diffs.length;A++){var ee=e[s].diffs[A];ee[0]!==vt.DIFF_EQUAL&&(te=this.diff_xIndex(p,b)),ee[0]===vt.DIFF_INSERT?n=n.substring(0,d+te)+ee[1]+n.substring(d+te):ee[0]===vt.DIFF_DELETE&&(n=n.substring(0,d+te)+n.substring(d+this.diff_xIndex(p,b+ee[1].length))),ee[0]!==vt.DIFF_DELETE&&(b+=ee[1].length)}}}}}return n=n.substring(r.length,n.length-r.length),[n,a]},t.prototype.patch_addPadding=function(e){for(var n=this.patchMargin,r="",i=1;i<=n;i++)r+=String.fromCharCode(i);for(var i=0;i<e.length;i++)e[i].start1+=n,e[i].start2+=n;var a=e[0],s=a.diffs;if(s.length===0||s[0][0]!==vt.DIFF_EQUAL)s.unshift([vt.DIFF_EQUAL,r]),a.start1-=n,a.start2-=n,a.length1+=n,a.length2+=n;else if(n>s[0][1].length){var c=n-s[0][1].length;s[0][1]=r.substring(s[0][1].length)+s[0][1],a.start1-=c,a.start2-=c,a.length1+=c,a.length2+=c}if(a=e[e.length-1],s=a.diffs,s.length===0||s[s.length-1][0]!==vt.DIFF_EQUAL)s.push([vt.DIFF_EQUAL,r]),a.length1+=n,a.length2+=n;else if(n>s[s.length-1][1].length){var c=n-s[s.length-1][1].length;s[s.length-1][1]+=r.substring(0,c),a.length1+=c,a.length2+=c}return r},t.prototype.patch_splitMax=function(e){for(var n=this.matchMaxBits,r=0;r<e.length;r++)if(!(e[r].length1<=n)){var i=e[r];e.splice(r--,1);for(var a=i.start1,s=i.start2,c="";i.diffs.length!==0;){var u=new Ba,d=!0;for(u.start1=a-c.length,u.start2=s-c.length,c!==""&&(u.length1=u.length2=c.length,u.diffs.push([vt.DIFF_EQUAL,c]));i.diffs.length!==0&&u.length1<n-this.patchMargin;){var f=i.diffs[0][0],h=i.diffs[0][1];f===vt.DIFF_INSERT?(u.length2+=h.length,s+=h.length,u.diffs.push(i.diffs.shift()),d=!1):f===vt.DIFF_DELETE&&u.diffs.length===1&&u.diffs[0][0]===vt.DIFF_EQUAL&&h.length>2*n?(u.length1+=h.length,a+=h.length,d=!1,u.diffs.push([f,h]),i.diffs.shift()):(h=h.substring(0,n-u.length1-this.patchMargin),u.length1+=h.length,a+=h.length,f===vt.DIFF_EQUAL?(u.length2+=h.length,s+=h.length):d=!1,u.diffs.push([f,h]),h===i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(h.length))}c=this.diff_text2(u.diffs),c=c.substring(c.length-this.patchMargin);var p=this.diff_text1(i.diffs).substring(0,this.patchMargin);p!==""&&(u.length1+=p.length,u.length2+=p.length,u.diffs.length!==0&&u.diffs[u.diffs.length-1][0]===vt.DIFF_EQUAL?u.diffs[u.diffs.length-1][1]+=p:u.diffs.push([vt.DIFF_EQUAL,p])),d||e.splice(++r,0,u)}}},t.prototype.patch_toText=function(e){for(var n=[],r=0;r<e.length;r++)n[r]=e[r];return n.join("")},t.prototype.patch_fromText=function(e){var n=[];if(!e)return n;for(var r=e.split(`
`),i=0,a=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<r.length;){var s=r[i].match(a);if(!s)throw new Error("Invalid patch string: "+r[i]);var c=new Ba;n.push(c),c.start1=parseInt(s[1],10),s[2]===""?(c.start1--,c.length1=1):s[2]==="0"?c.length1=0:(c.start1--,c.length1=parseInt(s[2],10)),c.start2=parseInt(s[3],10),s[4]===""?(c.start2--,c.length2=1):s[4]==="0"?c.length2=0:(c.start2--,c.length2=parseInt(s[4],10)),i++;for(var u=void 0,d=void 0,f=void 0;i<r.length;){u=r[i].charAt(0),f=r[i].substring(1);try{d=decodeURI(f)}catch(h){throw new Error("Illegal escape in patch_fromText: "+f)}if(u==="-")c.diffs.push([vt.DIFF_DELETE,d]);else if(u==="+")c.diffs.push([vt.DIFF_INSERT,d]);else if(u===" ")c.diffs.push([vt.DIFF_EQUAL,d]);else{if(u==="@")break;if(u!=="")throw new Error('Invalid patch mode "'+u+'" in: '+d)}i++}}return n},t.prototype.diff_compute_=function(e,n,r,i){var a;if(!e)return[[vt.DIFF_INSERT,n]];if(!n)return[[vt.DIFF_DELETE,e]];var s=e.length>n.length?e:n,c=e.length>n.length?n:e,u=s.indexOf(c);if(u!==-1)return a=[[vt.DIFF_INSERT,s.substring(0,u)],[vt.DIFF_EQUAL,c],[vt.DIFF_INSERT,s.substring(u+c.length)]],e.length>n.length&&(a[0][0]=vt.DIFF_DELETE,a[2][0]=vt.DIFF_DELETE),a;if(c.length===1)return[[vt.DIFF_DELETE,e],[vt.DIFF_INSERT,n]];var d=this.diff_halfMatch_(e,n);if(d){var f=d[0],h=d[1],p=d[2],b=d[3],te=d[4],A=this.diff_main(f,p,r,i),ee=this.diff_main(h,b,r,i);return A.concat([[vt.DIFF_EQUAL,te]],ee)}return r&&e.length>100&&n.length>100?this.diff_lineMode_(e,n,i):this.diff_bisect_(e,n,i)},t.prototype.diff_lineMode_=function(e,n,r){var i=this.diff_linesToChars(e,n);e=i.chars1,n=i.chars2;var a=i.lineArray,s=this.diff_main(e,n,!1,r);this.diff_charsToLines(s,a),this.diff_cleanupSemantic(s),s.push([vt.DIFF_EQUAL,""]);for(var c=0,u=0,d=0,f="",h="";c<s.length;){switch(s[c][0]){case vt.DIFF_INSERT:d++,h+=s[c][1];break;case vt.DIFF_DELETE:u++,f+=s[c][1];break;case vt.DIFF_EQUAL:if(u>=1&&d>=1){s.splice(c-u-d,u+d),c=c-u-d;for(var p=this.diff_main(f,h,!1,r),b=p.length-1;b>=0;b--)s.splice(c,0,p[b]);c=c+p.length}d=0,u=0,f="",h="";break}c++}return s.pop(),s},t.prototype.diff_bisect_=function(e,n,r){for(var i=e.length,a=n.length,s=Math.ceil((i+a)/2),c=s,u=2*s,d=new Array(u),f=new Array(u),h=0;h<u;h++)d[h]=-1,f[h]=-1;d[c+1]=0,f[c+1]=0;for(var p=i-a,b=p%2!=0,te=0,A=0,ee=0,me=0,re=0;re<s&&!(Date.now()>r);re++){for(var Pe=-re+te;Pe<=re-A;Pe+=2){var Fe=c+Pe,$e=void 0;Pe===-re||Pe!==re&&d[Fe-1]<d[Fe+1]?$e=d[Fe+1]:$e=d[Fe-1]+1;for(var je=$e-Pe;$e<i&&je<a&&e.charAt($e)===n.charAt(je);)$e++,je++;if(d[Fe]=$e,$e>i)A+=2;else if(je>a)te+=2;else if(b){var it=c+p-Pe;if(it>=0&&it<u&&f[it]!==-1){var Je=i-f[it];if($e>=Je)return this.diff_bisectSplit_(e,n,$e,je,r)}}}for(var xt=-re+ee;xt<=re-me;xt+=2){var it=c+xt,Je=void 0;xt===-re||xt!==re&&f[it-1]<f[it+1]?Je=f[it+1]:Je=f[it-1]+1;for(var Qt=Je-xt;Je<i&&Qt<a&&e.charAt(i-Je-1)===n.charAt(a-Qt-1);)Je++,Qt++;if(f[it]=Je,Je>i)me+=2;else if(Qt>a)ee+=2;else if(!b){var Fe=c+p-xt;if(Fe>=0&&Fe<u&&d[Fe]!==-1){var $e=d[Fe],je=c+$e-Fe;if(Je=i-Je,$e>=Je)return this.diff_bisectSplit_(e,n,$e,je,r)}}}}return[[vt.DIFF_DELETE,e],[vt.DIFF_INSERT,n]]},t.prototype.diff_bisectSplit_=function(e,n,r,i,a){var s=e.substring(0,r),c=n.substring(0,i),u=e.substring(r),d=n.substring(i),f=this.diff_main(s,c,!1,a),h=this.diff_main(u,d,!1,a);return f.concat(h)},t.prototype.diff_linesToCharsMunge_=function(e,n,r,i){for(var a="",s=0,c=-1,u=n.length;c<e.length-1;){c=e.indexOf(`
`,s),c===-1&&(c=e.length-1);var d=e.substring(s,c+1);(r.hasOwnProperty?r.hasOwnProperty(d):r[d]!==void 0)?a+=String.fromCharCode(r[d]):(u===i&&(d=e.substring(s),c=e.length),a+=String.fromCharCode(u),r[d]=u,n[u++]=d),s=c+1}return a},t.prototype.diff_commonOverlap_=function(e,n){var r=e.length,i=n.length;if(r===0||i===0)return 0;r>i?e=e.substring(r-i):r<i&&(n=n.substring(0,r));var a=li.min(r,i);if(e===n)return a;for(var s=0,c=1;;){var u=e.substring(a-c),d=n.indexOf(u);if(d===-1)return s;c+=d,(d===0||e.substring(a-c)===n.substring(0,c))&&(s=c,c++)}},t.prototype.diff_halfMatch_=function(e,n){if(this.diffTimeout<=0)return null;var r=e.length>n.length?e:n,i=e.length>n.length?n:e;if(r.length<4||i.length*2<r.length)return null;var a=this.diff_halfMatchI_(r,i,Math.ceil(r.length/4)),s=this.diff_halfMatchI_(r,i,Math.ceil(r.length/2)),c;if(!a&&!s)return null;s?a?c=a[4].length>s[4].length?a:s:c=s:c=a;var u,d,f,h,p=c[4];return e.length>n.length?(u=c[0],d=c[1],f=c[2],h=c[3]):(f=c[0],h=c[1],u=c[2],d=c[3]),[u,d,f,h,p]},t.prototype.diff_halfMatchI_=function(e,n,r){for(var i=e.substring(r,r+Math.floor(e.length/4)),a="",s,c,u,d,f=n.indexOf(i,0);f!==-1;){var h=this.diff_commonPrefix(e.substring(r),n.substring(f)),p=this.diff_commonSuffix(e.substring(0,r),n.substring(0,f));a.length<p+h&&(a=n.substring(f-p,f)+n.substring(f,f+h),s=e.substring(0,r-p),c=e.substring(r+h),u=n.substring(0,f-p),d=n.substring(f+h)),f=n.indexOf(i,f+1)}return a.length*2>=e.length?[s,c,u,d,a]:null},t.prototype.diff_cleanupSemanticScore_=function(e,n){if(!e||!n)return 6;var r=e.charAt(e.length-1),i=n.charAt(0),a=r.match(gs),s=i.match(gs),c=a&&r.match(vs),u=s&&i.match(vs),d=c&&r.match(ps),f=u&&i.match(ps),h=d&&e.match(Tl),p=f&&n.match(Ml);return h||p?5:d||f?4:a&&!c&&u?3:c||u?2:a||s?1:0},t.prototype.match_bitap_=function(e,n,r){if(n.length>this.matchMaxBits)throw new Error("Pattern too long for this browser");var i=this.match_alphabet_(n),a=this.matchThreshold,s=e.indexOf(n,r);s!==-1&&(a=li.min(this.match_bitapScore_(0,s,n,r),a),s=e.lastIndexOf(n,r+n.length),s!==-1&&(a=li.min(this.match_bitapScore_(0,s,n,r),a)));var c=1<<n.length-1;s=-1;for(var u,d,f=n.length+e.length,h,p=0;p<n.length;p++){for(u=0,d=f;u<d;)this.match_bitapScore_(p,r+d,n,r)<=a?u=d:f=d,d=Math.floor((f-u)/2+u);f=d;var b=li.max(1,r-d+1),te=li.min(r+d,e.length)+n.length,A=Array(te+2);A[te+1]=(1<<p)-1;for(var ee=te;ee>=b;ee--){var me=i[e.charAt(ee-1)];if(p===0?A[ee]=(A[ee+1]<<1|1)&me:A[ee]=(A[ee+1]<<1|1)&me|((h[ee+1]|h[ee])<<1|1)|h[ee+1],A[ee]&c){var re=this.match_bitapScore_(p,ee-1,n,r);if(re<=a)if(a=re,s=ee-1,s>r)b=li.max(1,2*r-s);else break}}if(this.match_bitapScore_(p+1,r,n,r)>a)break;h=A}return s},t.prototype.match_bitapScore_=function(e,n,r,i){var a=e/r.length,s=Math.abs(i-n);return this.matchDistance?a+s/this.matchDistance:s?1:a},t.prototype.match_alphabet_=function(e){for(var n={},r=0;r<e.length;r++)n[e.charAt(r)]=0;for(var r=0;r<e.length;r++)n[e.charAt(r)]|=1<<e.length-r-1;return n},t.prototype.patch_addContext_=function(e,n){if(n.length!==0){if(e.start2==null)throw Error("patch not initialized");for(var r=n.substring(e.start2,e.start2+e.length1),i=0;n.indexOf(r)!==n.lastIndexOf(r)&&r.length<this.matchMaxBits-this.patchMargin-this.patchMargin;)i+=this.patchMargin,r=n.substring(e.start2-i,e.start2+e.length1+i);i+=this.patchMargin;var a=n.substring(e.start2-i,e.start2);a&&e.diffs.unshift([vt.DIFF_EQUAL,a]);var s=n.substring(e.start2+e.length1,e.start2+e.length1+i);s&&e.diffs.push([vt.DIFF_EQUAL,s]),e.start1-=a.length,e.start2-=a.length,e.length1+=a.length+s.length,e.length2+=a.length+s.length}},t}();function Ho(t,e){let n={};for(let a=0;a<e.length;a++){const s=e[a];n[s]?n[s].push(a):n[s]=[a]}let i=[{buffer1index:-1,buffer2index:-1,chain:null}];for(let a=0;a<t.length;a++){const s=t[a],c=n[s]||[];let u=0,d=i[0];for(let f=0;f<c.length;f++){const h=c[f];let p;for(p=u;p<i.length&&!(i[p].buffer2index<h&&(p===i.length-1||i[p+1].buffer2index>h));p++);if(p<i.length){const b={buffer1index:a,buffer2index:h,chain:i[p]};if(u===i.length?i.push(d):i[u]=d,u=p+1,d=b,u===i.length)break}}i[u]=d}return i[i.length-1]}o(Ho,"LCS");function kl(t,e){const n=Ho(t,e);let r=[],i=t.length,a=e.length,s={common:[]};function c(){s.common.length&&(s.common.reverse(),r.push(s),s={common:[]})}o(c,"processCommon");for(let u=n;u!==null;u=u.chain){let d={buffer1:[],buffer2:[]};for(;--i>u.buffer1index;)d.buffer1.push(t[i]);for(;--a>u.buffer2index;)d.buffer2.push(e[a]);(d.buffer1.length||d.buffer2.length)&&(c(),d.buffer1.reverse(),d.buffer2.reverse(),r.push(d)),i>=0&&s.common.push(t[i])}return c(),r.reverse(),r}o(kl,"diffComm");function ms(t,e){const n=Ho(t,e);let r=[],i=t.length,a=e.length;for(let s=n;s!==null;s=s.chain){const c=i-s.buffer1index-1,u=a-s.buffer2index-1;i=s.buffer1index,a=s.buffer2index,(c||u)&&r.push({buffer1:[i+1,c],buffer1Content:t.slice(i+1,i+1+c),buffer2:[a+1,u],buffer2Content:e.slice(a+1,a+1+u)})}return r.reverse(),r}o(ms,"diffIndices");function zc(t,e){const n=Ho(t,e);let r=[],i=t.length,a=e.length;function s(c,u,d){let f=[];for(let h=0;h<d;h++)f.push(c[u+h]);return{offset:u,length:d,chunk:f}}o(s,"chunkDescription");for(let c=n;c!==null;c=c.chain){const u=i-c.buffer1index-1,d=a-c.buffer2index-1;i=c.buffer1index,a=c.buffer2index,(u||d)&&r.push({buffer1:s(t,c.buffer1index+1,u),buffer2:s(e,c.buffer2index+1,d)})}return r.reverse(),r}o(zc,"diffPatch");function xl(t,e,n){let r=[];function i(u,d){r.push({ab:d,oStart:u.buffer1[0],oLength:u.buffer1[1],abStart:u.buffer2[0],abLength:u.buffer2[1]})}o(i,"addHunk"),ms(e,t).forEach(u=>i(u,"a")),ms(e,n).forEach(u=>i(u,"b")),r.sort((u,d)=>u.oStart-d.oStart);let a=[],s=0;function c(u){u>s&&(a.push({stable:!0,buffer:"o",bufferStart:s,bufferLength:u-s,bufferContent:e.slice(s,u)}),s=u)}for(o(c,"advanceTo");r.length;){let u=r.shift(),d=u.oStart,f=u.oStart+u.oLength,h=[u];for(c(d);r.length;){const p=r[0],b=p.oStart;if(b>f)break;f=Math.max(f,b+p.oLength),h.push(r.shift())}if(h.length===1){if(u.abLength>0){const p=u.ab==="a"?t:n;a.push({stable:!0,buffer:u.ab,bufferStart:u.abStart,bufferLength:u.abLength,bufferContent:p.slice(u.abStart,u.abStart+u.abLength)})}}else{let p={a:[t.length,-1,e.length,-1],b:[n.length,-1,e.length,-1]};for(;h.length;){u=h.shift();const re=u.oStart,Pe=re+u.oLength,Fe=u.abStart,$e=Fe+u.abLength;let je=p[u.ab];je[0]=Math.min(Fe,je[0]),je[1]=Math.max($e,je[1]),je[2]=Math.min(re,je[2]),je[3]=Math.max(Pe,je[3])}const b=p.a[0]+(d-p.a[2]),te=p.a[1]+(f-p.a[3]),A=p.b[0]+(d-p.b[2]),ee=p.b[1]+(f-p.b[3]);let me={stable:!1,aStart:b,aLength:te-b,aContent:t.slice(b,te),oStart:d,oLength:f-d,oContent:e.slice(d,f),bStart:A,bLength:ee-A,bContent:n.slice(A,ee)};a.push(me)}s=f}return c(e.length),a}o(xl,"diff3MergeRegions");function Bo(t,e,n,r){r=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},r);const a=typeof t=="string",s=typeof e=="string",c=typeof n=="string";a&&(t=t.split(r.stringSeparator)),s&&(e=e.split(r.stringSeparator)),c&&(n=n.split(r.stringSeparator));let u=[];const d=xl(t,e,n);let f=[];function h(){f.length&&u.push({ok:f}),f=[]}o(h,"flushOk");function p(b,te){if(b.length!==te.length)return!1;for(let A=0;A<b.length;A++)if(b[A]!==te[A])return!1;return!0}return o(p,"isFalseConflict"),d.forEach(b=>{b.stable?f.push(...b.bufferContent):r.excludeFalseConflicts&&p(b.aContent,b.bContent)?f.push(...b.aContent):(h(),u.push({conflict:{a:b.aContent,aIndex:b.aStart,o:b.oContent,oIndex:b.oStart,b:b.bContent,bIndex:b.bStart}}))}),h(),u}o(Bo,"diff3Merge");function Vc(t,e,n,r){r=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/,label:{}},r);const a=Bo(t,e,n,r);let s=!1,c=[];return a.forEach(u=>{u.ok?c=c.concat(u.ok):u.conflict&&(s=!0,c.push(`<<<<<<<${r.label.a?` ${r.label.a}`:""}`),c=c.concat(u.conflict.a),c.push(`|||||||${r.label.o?` ${r.label.o}`:""}`),c=c.concat(u.conflict.o),c.push("======="),c=c.concat(u.conflict.b),c.push(`>>>>>>>${r.label.b?` ${r.label.b}`:""}`))}),{conflict:s,result:c}}o(Vc,"mergeDiff3");function Fl(t,e,n,r){r=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},r);const a=Bo(t,e,n,r);let s=!1,c=[];for(let u=0;u<a.length;u++){const d=a[u];d.ok?c=c.concat(d.ok):(s=!0,c=c.concat([`
<<<<<<<<<
`],d.conflict.a,[`
=========
`],d.conflict.b,[`
>>>>>>>>>
`]))}return{conflict:s,result:c}}o(Fl,"node_diff3_merge");function Jc(t,e,n,r){r=Object.assign({excludeFalseConflicts:!1,stringSeparator:/\s+/},r);const a=Bo(t,e,n,r);let s=!1,c=[];for(let u=0;u<a.length;u++){const d=a[u];if(d.ok)c=c.concat(d.ok);else{const f=kl(d.conflict.a,d.conflict.b);for(let h=0;h<f.length;h++){let p=f[h];p.common?c=c.concat(p.common):(s=!0,c=c.concat([`
<<<<<<<<<
`],p.buffer1,[`
=========
`],p.buffer2,[`
>>>>>>>>>
`]))}}}return{conflict:s,result:c}}o(Jc,"mergeDigIn");function jc(t,e){let n=[],r=0;function i(a){for(;r<a;)n.push(t[r]),r++}o(i,"advanceTo");for(let a=0;a<e.length;a++){let s=e[a];i(s.buffer1.offset);for(let c=0;c<s.buffer2.chunk.length;c++)n.push(s.buffer2.chunk[c]);r+=s.buffer1.length}return i(t.length),n}o(jc,"patch");function Yc(t){return t.map(e=>({buffer1:{offset:e.buffer1.offset,length:e.buffer1.length},buffer2:{chunk:e.buffer2.chunk}}))}o(Yc,"stripPatch");function qc(t){return t.map(e=>({buffer1:e.buffer2,buffer2:e.buffer1}))}o(qc,"invertPatch");const Uo=new Ll;Uo.diffTimeout=0;function ys(t,e,n){return pe.get("experimental.useDiffMatchPatch")===!0?Uo.patch_toText(Uo.patch_make(e,n)):Cl(t,e,n)}o(ys,"diffs_createPatch");function ws(t,e,n,r){const i=`diff --git a/${t} b/${t}`;switch(r){case"modify":return ys(t,e,n);case"add":{let a;!n.endsWith(`
`)&&!n.endsWith(`\r
`)?a=`
\\ No newline at end of file`:a="";const s=/\r?\n/g,c=n.split(s),u=n.match(s)||[],d=c.length,f=[];for(let h=0;h<d;h+=1)(h<c.length-1||h===c.length-1&&c[h]!=="")&&f.push("+"),f.push(c[h]),h<u.length&&f.push(u[h]);return n=f.join(""),`${i}
new file mode 100644
--- /dev/null
+++ b/${t}
@@ -0,0 +1,${d} @@
${n}${a}`}case"delete":{let a=0;return e=e.replace(/\r?\n/g,s=>(a++,`${s}-`)),`${i}
deleted file mode 100644
--- a/${t}
+++ /dev/null
@@ -1,${a} +0,0 @@
-${e}`}}}o(ws,"createPatch2");function Ss(t,e,n){return rs(t,e,n)}o(Ss,"diffs_applyPatch");function Nl(t,e){const n=[];for(const r of Ha(t,e))n.push({...r,oldFileName:r.newFileName,oldHeader:r.newHeader,newFileName:r.oldFileName,newHeader:r.oldHeader,hunks:r.hunks.map(i=>({...i,oldLines:i.newLines,oldStart:i.newStart,newLines:i.oldLines,newStart:i.oldStart,lines:i.lines.map(a=>a[0]==="-"?`+${a.slice(1)}`:a[0]==="+"?`-${a.slice(1)}`:a)}))}),n.push(r);return n}o(Nl,"reversePatch");function Cs(t,e,n,r){let i=`
`;const a=t.match(/(?:\r?\n)/g);if(a!==null&&a.length!==0){const d=a.filter(f=>f===`\r
`).length;i=d>a.length-d?`\r
`:`
`}const s=Fl(t,e,n,{excludeFalseConflicts:!0,stringSeparator:/\r?\n/}),c=s.result;let u=s.conflict;for(let d=0;d<c.length;d+=1)c[d]===`
<<<<<<<<<
`?c[d]="<<<<<<< HEAD":c[d]===`
=========
`?c[d]="=======":c[d]===`
>>>>>>>>>
`&&(c[d]=`>>>>>>> ${r}`);return{conflicts:u,mergedContent:c.join(i)}}o(Cs,"diffs_merge");var Ol=Object.defineProperty,Hl=Object.getOwnPropertyDescriptor,Bl=o((t,e,n,r)=>{for(var i=r>1?void 0:r?Hl(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&Ol(e,n,i),i},"changeStore_decorateClass");const Ul=l.FileSystemError.FileNotFound().code,bs=`===================================================================
`,zi=new TextDecoder,Wl=new TextEncoder;function $l(t){return t&&"type"in t&&"uri"in t&&"uri"in t&&"fileType"in t&&"revision"in t&&"timestamp"in t}o($l,"isOperation");function So(t,e,n){return{type:t.type,rootUri:e,uri:n!=null?n:t.uri}}o(So,"toEvent");const Ua=o(class{constructor(t,e,n,r,i,a){this.providerService=t,this.storageService=e,this.fileStorageService=n,this.telemetryService=r,this.workspaceId=i,this._onDidChange=new l.EventEmitter,this.cache=new Map,this.lock=new rr,this.scopedStores=new Map,a===void 0&&(this.disposable=l.Disposable.from(this.providerService.onDidRefresh(()=>this.cache.clear())))}get onDidChange(){return this._onDidChange.event}dispose(){var t;(t=this.disposable)==null||t.dispose()}async exportDebugInfo(t){var e;async function n(r){const i=await l.workspace.openTextDocument({language:"json",content:`ChangeStore Operations for ${r.toString(!0)}

${this.toStorage(await this.getWorkingOperations(r))}`});return void l.window.showTextDocument(i)}if(o(n,"exportCore"),t===void 0)for(const r of(e=l.workspace.workspaceFolders)!=null?e:[])await n.call(this,r.uri);else return n.call(this,t)}async getWorkspacesWithChanges(){var t;const e=new _t("ChangeStore.getWorkspacesWithChanges()");try{const n=[];for(const r of(t=l.workspace.workspaceFolders)!=null?t:[])r.uri.scheme===x.scheme&&await this.hasChanges(r.uri)&&n.push(r.uri);return n.length>0?n:void 0}finally{e.stop()}}async acceptAll(t,e){const n=`ChangeStore.acceptAll(${t.toString()}, ${e==null?void 0:e.staged})`;K.log(n);const r=[];await this.lock.synchronizeWrite(E(t),async()=>{const i=await this.getWorkingOperations(t),a=[];let s=[];const c=(e==null?void 0:e.staged)&&!(e.staged==="auto"&&!i.some(u=>u.staged));for(const u of i){if(c&&!u.staged){s.push(u);continue}u.fileType===l.FileType.File&&await this.discardWorkingContent(t,u.uri);let d;if(u.type===D.Created&&u.fileType===l.FileType.Directory&&(i.some(f=>Q(f.uri,u.uri))||(d={type:D.Deleted,rootUri:t,uri:u.uri})),r.push(d!=null?d:So(u,t)),u.type===D.Created){let f=u.uri;for(;;){const{parent:h}=this.findParent(f,i,p=>p.type===D.Created);if(h){a.push(h),f=h.uri;continue}break}}}s.length>0&&a.length>0&&(s=s.filter(u=>a.includes(u)?(r.push(So(u,t)),!1):!0)),await this.saveWorkingOperations(t,s)},n),r.length!==0&&this._onDidChange.fire(r)}async discard(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.discard(${t.toString()})`;K.log(n);const r=[];await this.lock.synchronizeWrite(E(e),async()=>this.discardCore(e,t,r),n),r.length!==0&&this._onDidChange.fire(r)}async discardCore(t,e,n){K.debug(`ChangeStore.discardCore(${e.toString()})`);let r=await this.getWorkingOperations(t);if(r.length===0)return;const i=$(e),a=r.findIndex(u=>$(u.uri)===i);if(a===-1)return;const[s]=r.splice(a,1);let c;switch(s.type){case D.Created:c=D.Deleted;break;case D.Deleted:c=D.Created;break;default:c=s.type;break}if(n.push({type:c,rootUri:t,uri:e}),s.type===D.Created){let u=s.uri;for(;;){const{parent:d,parentIndex:f}=this.findNewParentWithOnlyChild(u,r);if(d){r.splice(f,1),n.push({type:D.Deleted,rootUri:t,uri:d.uri}),u=d.uri;continue}break}}else if(s.type===D.Deleted){let u=s.uri;const d=this.findDeletedParents(u,r);let f=[...r];d.forEach(({parent:h,parentIndex:p})=>{f[p]=void 0,n.push({type:D.Created,rootUri:t,uri:h.uri})}),r=f.filter(h=>h!==void 0)}await this.saveWorkingOperations(t,r),s.fileType===l.FileType.File&&await this.discardWorkingContent(t,e)}async discardAll(t,e){const n=this.getUriScope(t);if(n)return this.getScopedChangeStore(n).discardAll(t,e);const r=`ChangeStore.discardAll(${t.toString()}, ${e==null?void 0:e.staged})`;K.log(r);const i=[];await this.lock.synchronizeWrite(E(t),async()=>{const a=await this.getWorkingOperations(t),s=[];let c=[];const u=(e==null?void 0:e.staged)&&!(e.staged==="auto"&&!a.some(d=>d.staged));for(const d of a){if(u&&!d.staged){c.push(d);continue}d.fileType===l.FileType.File&&await this.discardWorkingContent(t,d.uri);let f;switch(d.type){case D.Created:f=D.Deleted;break;case D.Deleted:f=D.Created;break;default:f=d.type;break}if(i.push({type:f,rootUri:t,uri:d.uri}),d.type===D.Created){let h=d.uri;for(;;){const{parent:p}=this.findNewParentWithOnlyChild(h,a);if(p){s.push(p),h=p.uri;continue}break}}}c.length>0&&s.length>0&&(c=c.filter(d=>s.includes(d)?(i.push({type:D.Deleted,rootUri:t,uri:d.uri}),!1):!0)),await this.saveWorkingOperations(t,c)},r),i.length!==0&&this._onDidChange.fire(i)}async stage(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.stage(${t.toString()})`;K.log(n);const r=[];await this.lock.synchronizeWrite(E(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e);i!==void 0&&await this.stageCore(e,t,i,r,a)},n),r.length!==0&&this._onDidChange.fire(r)}async stageAll(t){const e=`ChangeStore.stageAll(${t.toString()})`;K.log(e);const n=[];await this.lock.synchronizeWrite(E(t),async()=>{const r=(await this.getWorkingOperations(t)).filter(i=>!i.staged);if(r.length!==0)for(const i of r){const{index:a}=await this.getWorkingOperation(i.uri,t);if(!await this.stageCore(t,i.uri,i,n,a))return}},e),n.length!==0&&this._onDidChange.fire(n)}async stageCore(t,e,n,r,i){if(n.conflicts){if(!n.conflicts.status.includes(D.Deleted)){const s=l.l10n.t("Yes");if(await l.window.showWarningMessage(l.l10n.t("Are you sure you want to stage {0} with merge conflicts?",j(e)),{modal:!0},s)!==s)return!1}const[,a]=n.conflicts.status;switch(a){case D.Changed:switch(n.type){case D.Created:return!1;case D.Changed:return await this.spliceOperation(e,i,{...n,conflicts:void 0,staged:!0,timestamp:Date.now()},r),!0;case D.Deleted:const s=l.l10n.t("Keep Their Version"),c=l.l10n.t("Delete File"),u=await l.window.showInformationMessage(l.l10n.t(`File '{0}' was deleted by us and modified by them.

What would you like to do?`,j(e)),{modal:!0},s,c);return u===s?(await this.discardCore(t,e,r),!0):u===c?(await this.spliceOperation(e,i,{...n,type:D.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:void 0,staged:!0,timestamp:Date.now()},r),!0):!1}case D.Created:switch(n.type){case D.Changed:case D.Deleted:return!1;case D.Created:return await this.spliceOperation(e,i,{...n,type:D.Changed,conflicts:void 0,size:n.size,hash:n.hash,originalHash:n.originalHash,staged:!0,timestamp:Date.now()},r),!0}case D.Deleted:switch(n.type){case D.Created:case D.Changed:{const s=l.l10n.t("Keep Our Version"),c=l.l10n.t("Delete File"),u=await l.window.showInformationMessage(l.l10n.t(`File '{0}' was deleted by them and modified by us.

What would you like to do?`,j(e)),{modal:!0},s,c);return u===s?(await this.spliceOperation(e,i,{...n,type:D.Created,originalHash:void 0,conflicts:void 0,staged:!0,timestamp:Date.now()},r),!0):u===c?(await this.discardCore(t,e,r),!0):!1}case D.Deleted:return await this.discardCore(t,e,r),!0}}}return await this.spliceOperation(e,i,{...n,staged:!0,conflicts:void 0,timestamp:Date.now()},r),!0}async unstage(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.unstage(${t.toString()})`;K.log(n);const r=[];await this.lock.synchronizeWrite(E(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e);i!==void 0&&await this.spliceOperation(t,a,{...i,staged:!1,timestamp:Date.now()},r)},n),r.length!==0&&this._onDidChange.fire(r)}async unstageAll(t){const e=`ChangeStore.unstageAll(${t.toString()})`;K.log(e);const n=[];await this.lock.synchronizeWrite(E(t),async()=>{const r=(await this.getWorkingOperations(t)).map(i=>({...i,staged:!1,timestamp:Date.now()}));r.length!==0&&(await this.saveWorkingOperations(t,r),n.push(...r.map(i=>So(i,t))))},e),n.length!==0&&this._onDidChange.fire(n)}async hasChanges(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).hasChanges(t);const n=E(t),r=this.cache.get(n);return r!==void 0?r.length!==0:this.lock.synchronizeRead(n,async()=>(await this.getWorkingOperations(t)).length!==0,`ChangeStore.hasChanges(${t.toString()})`)}maybeHasChanges(t,e){const n=this.getUriScope(t);if(n)return this.getScopedChangeStore(n).maybeHasChanges(t,e);const r=E(t),i=this.cache.get(r);if(i===void 0)return;if(i.length===0)return!1;if(e===void 0)return!0;const a=$(e);return i.some(s=>$(s.uri)===a)}async hasMergeConflicts(t){return this.lock.synchronizeRead(E(t),async()=>(await this.getWorkingOperations(t)).some(e=>e.conflicts!==void 0),`ChangeStore.hasMergeConflicts(${t.toString()})`)}async hasStagedChanges(t){return this.lock.synchronizeRead(E(t),async()=>(await this.getWorkingOperations(t)).some(e=>e.staged&&e.conflicts===void 0),`ChangeStore.hasStagedChanges(${t.toString()})`)}async hasWorkingChanges(t){return this.lock.synchronizeRead(E(t),async()=>(await this.getWorkingOperations(t)).some(e=>!e.staged&&e.conflicts===void 0),`ChangeStore.hasWorkingChanges(${t.toString()})`)}async getChange(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).getChange(t);const n=this.providerService.getVirtualRootUri(t);if(n!==void 0)return this.lock.synchronizeRead(E(n),async()=>{const{operation:r}=await this.getWorkingOperation(t,n);return r},`ChangeStore.getChange(${t.toString()})`)}async getChanges(t,e){const n=this.getUriScope(t);return n?this.getScopedChangeStore(n).getChanges(t,e):this.lock.synchronizeRead(E(t),async()=>{let r=await this.getWorkingOperations(t);if((e==null?void 0:e.excludeConflicts)||(e==null?void 0:e.predicate)){const{excludeConflicts:i,predicate:a}=e;r=r.filter(s=>{var c;return(!i||s.conflicts===void 0)&&((c=a==null?void 0:a(s))!=null?c:!0)})}return r},`ChangeStore.getChanges(${t.toString()})`)}async getGroupedChanges(t,e){const n=this.getUriScope(t);return n?this.getScopedChangeStore(n).getGroupedChanges(t,e):this.lock.synchronizeRead(E(t),async()=>{var r,i;const a=await this.getWorkingOperations(t),s={conflicts:[],staged:[],working:[]};for(const c of a)!((i=(r=e==null?void 0:e.predicate)==null?void 0:r.call(e,c))!=null?i:!0)||(c.conflicts?s.conflicts.push(c):c.staged?s.staged.push(c):s.working.push(c));return s},`ChangeStore.getChangesByType(${t.toString()})`)}async getContent(t){const e=this.providerService.getVirtualRootUri(t);if(e===void 0)throw new Error(`Unable to find content for ${t.toString()}; Repository not found`);const n=E(e),r=this.cache.get(n);if((r==null?void 0:r.length)===0)throw new Error(`Unable to find content for ${t.toString()}`);return this.lock.synchronizeRead(n,async()=>{const i=zi.decode(await this.getWorkingContent(e,t));if(i!==void 0)return i;throw new Error(`Unable to find content for ${t.toString()}`)},`ChangeStore.getContent(${t.toString()}}`)}async getMergeConflicts(t,e){return this.lock.synchronizeRead(E(t),async()=>(await this.getWorkingOperations(t)).filter(r=>{var i,a;return r.conflicts!==void 0&&((a=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,r))!=null?a:!0)}),`ChangeStore.getMergeConflicts(${t.toString()})`)}async getStagedChanges(t,e){return this.lock.synchronizeRead(E(t),async()=>(await this.getWorkingOperations(t)).filter(r=>{var i,a;return r.staged&&r.conflicts===void 0&&((a=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,r))!=null?a:!0)}),`ChangeStore.getStagedChanges(${t.toString()})`)}async getWorkingChanges(t,e){return this.lock.synchronizeRead(E(t),async()=>(await this.getWorkingOperations(t)).filter(r=>{var i,a;return!r.staged&&r.conflicts===void 0&&((a=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,r))!=null?a:!0)}),`ChangeStore.getWorkingChanges(${t.toString()})`)}async applyChangeset(t,e,n,r){var i;let a;$l(n)?a=n:r=r!=null?r:n,K.log(`ChangeStore.applyChangeset${t.toString()}`,e.workspaceId,e.uri,a==null?void 0:a.uri,r==null?void 0:r.save);const s=this.getScopedChangeStore(e.workspaceId),c=(i=e.patch)!=null?i:await s.createPatch(e.uri,a==null?void 0:a.uri);await this.applyPatchCore(t,c,{...r,getIncomingContent:async u=>{const d=this.getScopedUri(this.providerService.createRelativeVirtualUri(e.uri,u),e.workspaceId);return zi.decode(await l.workspace.fs.readFile(d))},merge:async(u,d,f)=>{try{const h=x.getProviderUri(u),p=zi.decode(await l.workspace.fs.readFile(h)),b=this.getScopedUri(this.providerService.createRelativeVirtualUri(e.uri,d),e.workspaceId),te=zi.decode(await l.workspace.fs.readFile(b)),A=await this.providerService.getMetadata(b);return{...Cs(f,p,te,A.HEAD.sha),baseUri:h,incomingUri:b}}catch(h){throw new Error(`Unable to apply patch to ${d}: ${String(h)}`)}}})}async applyPatch(t,e,n){if(K.log(`ChangeStore.applyPatch(${t.toString()})`,n==null?void 0:n.save),!e.startsWith("diff --"))throw new Error("Invalid patch");return this.applyPatchCore(t,e,n)}async applyPatchCore(t,e,n={}){const r=`ChangeStore.applyPatchCore(${t.toString()})`;K.debug(r,n==null?void 0:n.save);const i=new l.WorkspaceEdit,a=[],s=new Map;async function c(p){var b;const te=E(p),A=l.workspace.textDocuments.find(ee=>E(ee.uri)===te);return(b=A==null?void 0:A.getText())!=null?b:zi.decode(await l.workspace.fs.readFile(p))}o(c,"getContent");async function u(p){try{const b=await l.workspace.fs.stat(p);return Boolean(b)}catch{return!1}}o(u,"exists");async function d(p,b,te){let A=Ss("",te,{fuzzFactor:0});if(A===!1){if(!n.getIncomingContent)throw new Error(`Unable to apply patch to ${b}`);A=await n.getIncomingContent(b)}i.createFile(p,{overwrite:!0}),i.replace(p,new l.Range(0,0,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),A)}o(d,"applyCreate");async function f(p,b,te,A){const ee=await c(p);let me=Ss(ee,te,{fuzzFactor:1});if(me===!1){if(n.merge===void 0)throw new Error(`Unable to apply patch to ${b}; Resulted in conflicts`);const re={title:l.l10n.t("Merge")},Pe={title:l.l10n.t("Skip File"),isCloseAffordance:!0};if(await l.window.showWarningMessage(l.l10n.t(`Unable to apply changes to '{0}'.

Do you want to retry by merging the files?`,b),{modal:!0},re,Pe)!==re)return;const $e=await n.merge(p,b,ee);me=$e.mergedContent,$e.conflicts&&s.set(E(p),{type:A,baseUri:$e.baseUri,incomingUri:$e.incomingUri})}i.replace(p,new l.Range(0,0,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),me)}o(f,"applyModification");const h=(n==null?void 0:n.reverse)?Nl(e,{}):Ha(e,{});for(const p of h)if(p.oldFileName==="/dev/null"){if(!p.newFileName)continue;const b=p.newFileName.startsWith("b/")?p.newFileName.substr(2):p.newFileName,te=this.providerService.createRelativeVirtualUri(t,b);a.push(E(te)),!await u(te)?await d(te,b,p):await f(te,b,p,D.Created)}else if(p.newFileName==="/dev/null"){if(!p.oldFileName)continue;const b=p.oldFileName.startsWith("a/")?p.oldFileName.substr(2):p.oldFileName,te=this.providerService.createRelativeVirtualUri(t,b);await u(te)&&i.deleteFile(te)}else if(p.oldFileName===p.newFileName){if(!p.newFileName)continue;const b=this.providerService.createRelativeVirtualUri(t,p.newFileName);a.push(E(b)),!await u(b)?await d(b,p.newFileName,p):await f(b,p.newFileName,p,D.Changed)}else throw new Error(`Unable to apply patch to ${p.oldFileName}; Renames aren't currently supported`);if(await l.workspace.applyEdit(i),n.save&&a.length)for(const p of a){const b=l.workspace.textDocuments.find(te=>E(te.uri)===p);await(b==null?void 0:b.save())}s.size&&setTimeout(async()=>{const p=[];await this.lock.synchronizeWrite(E(t),async()=>{const b=await this.getWorkingOperations(t);if(b.length===0)return;let te=-1;for(const A of b){te++;const ee=s.get(E(A.uri));ee!==void 0&&await this.spliceOperation(A.uri,te,{...A,conflicts:{baseUri:ee.baseUri,incomingUri:ee.incomingUri,status:[A.type,ee.type]},timestamp:Date.now()},p)}},r),p.length!==0&&this._onDidChange.fire(p)},0)}async createChangeset(t){K.log(`ChangeStore.createChangeset${t.toString()})`);const e=await this.createPatch(t);return e?{workspaceId:this.workspaceId,uri:t,patch:e}:void 0}async createPatch(t,e,n){if(K.log(`ChangeStore.createPatch${t.toString()})`,e),e===void 0){let a=await this.getWorkingOperations(t);if((n==null?void 0:n.staged)&&(a=a.filter(c=>c.staged)),a.length===0)return"";const s=[];for(const c of a){const u=await this.createPatchCore(t,c);s.push(u)}return s.join("")}const{operation:r}=await this.getWorkingOperation(e,t);if(r===void 0)throw new Error(`Unable to create patch for ${e.toString()}`);return(n==null?void 0:n.staged)&&r.staged?"":await this.createPatchCore(t,r)}async createPatchCore(t,e){if(e.fileType!==l.FileType.File)return"";const n=this.providerService.getRelativeFilePath(t,e.uri),r=`diff --git a/${n} b/${n}`;if(e.type===D.Created){let u=await this.getContent(e.uri);return ws(n,"",u,"add")}if(e.type===D.Deleted){let u=zi.decode(await l.workspace.fs.readFile(x.getProviderUri(e.uri)));return ws(n,u,"","delete")}const i=await this.getContent(e.uri),a=zi.decode(await l.workspace.fs.readFile(x.getProviderUri(e.uri))),s=ys(n,a,i),c=s.indexOf(bs);return`${r}
${s.substr(c+bs.length)}`}async keep(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return;const r=`ChangeStore.keep(${t.toString()})`;K.log(r,e);const i=[];await this.lock.synchronizeWrite(E(n),async()=>{const{operation:a,index:s}=await this.getWorkingOperation(t,n);if(a===void 0)return;if(e===void 0&&a.conflicts){const[,u]=a.conflicts.status;switch(u){case D.Changed:switch(a.type){case D.Changed:case D.Created:case D.Deleted:await this.spliceOperation(t,s,{...a,conflicts:void 0,timestamp:Date.now()},i);break}break;case D.Created:switch(a.type){case D.Changed:case D.Deleted:await this.spliceOperation(t,s,{...a,conflicts:void 0,timestamp:Date.now()},i);break;case D.Created:await this.spliceOperation(t,s,{...a,type:D.Changed,size:a.size,hash:a.hash,originalHash:a.originalHash,conflicts:void 0,timestamp:Date.now()},i);break}break;case D.Deleted:switch(a.type){case D.Deleted:await this.discardCore(n,t,i);break;case D.Changed:await this.spliceOperation(t,s,{...a,type:D.Created,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);break;case D.Created:await this.spliceOperation(t,s,{...a,conflicts:void 0,timestamp:Date.now()},i);break}break}return}if(e===void 0)return;switch(e.type){case D.Changed:switch(a.type){case D.Deleted:await this.spliceOperation(t,s,{...a,type:D.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);return;case D.Created:break;case D.Changed:break}break;case D.Created:switch(a.type){case D.Changed:case D.Deleted:return;case D.Created:break}break;case D.Deleted:switch(a.type){case D.Deleted:return this.discardCore(n,t,i);case D.Changed:await this.spliceOperation(t,s,{...a,type:D.Created,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);return;case D.Created:return}}const c=e!==void 0?await l.workspace.fs.readFile(e.providerUri):void 0;await this.spliceOperation(t,s,{...a,type:D.Changed,originalHash:c!==void 0?await Rn(c):a.originalHash,conflicts:void 0,timestamp:Date.now()},i)},r),i.length!==0&&this._onDidChange.fire(i)}async merge(t,e,n){const r=this.providerService.getVirtualWorkspaceUri(t);if(r===void 0)return;const i=`ChangeStore.merge(${t.toString()})`;K.log(i,e,n);const a=[];await this.lock.synchronizeWrite(E(r),async()=>{const{operation:s,index:c}=await this.getWorkingOperation(t,r);if(s===void 0)return;switch(e.type){case D.Changed:switch(s.type){case D.Deleted:await this.spliceOperation(t,c,{...s,type:D.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:{baseUri:n.providerUri,incomingUri:e.providerUri,status:[s.type,e.type]},timestamp:Date.now()},a);return;case D.Created:break;case D.Changed:break}break;case D.Created:switch(s.type){case D.Deleted:case D.Changed:return;case D.Created:const b=await l.workspace.fs.readFile(e.providerUri);await this.spliceOperation(t,c,{...s,originalHash:b!==void 0?await Rn(b):s.originalHash,conflicts:{baseUri:n.providerUri,incomingUri:e.providerUri,status:[s.type,e.type]},type:D.Changed,timestamp:Date.now()},a);break}break;case D.Deleted:switch(s.type){case D.Deleted:return this.discardCore(r,t,a);case D.Changed:await this.spliceOperation(t,c,{...s,type:D.Created,originalHash:void 0,conflicts:{baseUri:void 0,incomingUri:e.providerUri,status:[s.type,e.type]},timestamp:Date.now()},a);return;case D.Created:return}}const u=await this.providerService.getMetadata(e.providerUri),d=await this.getWorkingContent(r,t),f=s.type===D.Created?new Uint8Array(0):await l.workspace.fs.readFile(n.providerUri),h=await l.workspace.fs.readFile(e.providerUri),p=Cs(zi.decode(d),zi.decode(f),zi.decode(h),u.HEAD.sha);await this.writeFileCore(r,t,a,Wl.encode(p.mergedContent),h!=null?h:new Uint8Array(0),p.conflicts?{baseUri:n.providerUri,incomingUri:e.providerUri,status:[s.type,e.type]}:void 0)},i),a.length!==0&&this._onDidChange.fire(a)}async resolveDiffCommand(t,e,n,r){let i;const a=this.providerService.getVirtualRootUri(t);return a!==void 0&&({operation:i}=await this.getWorkingOperation(t,a)),(i==null?void 0:i.type)===D.Deleted?this.resolveOpenCommand(e):((i==null?void 0:i.type)===D.Created&&(e=e.with({query:"~"})),{command:"vscode.diff",title:"Open Changes",arguments:[e,t,n,r]})}resolveOpenCommand(t,e){return{command:"vscode.open",title:"Open File",arguments:[t,e]}}getScopedUri(t,e){const n=typeof e=="string"?e:e.workspaceId;return n===this.workspaceId?t:t.with({fragment:n})}getUriScope(t){return t.fragment||void 0}getScopedChangeStore(t){const e=typeof t=="string"?t:t.workspaceId;K.log(`ChangeStore.getScopedChangeStore(${e})`);let n=this.scopedStores.get(e);return n===void 0&&(n=e===this.workspaceId?new Ua.ScopedChangeStore(this,e,this.workspaceId):new Ua.ScopedChangeStore(new Ua(this.providerService,this.storageService.with(e),this.fileStorageService.with(e),this.telemetryService,this.workspaceId,e),e,this.workspaceId),this.scopedStores.set(e,n)),n}async stat(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).stat(t);const n=this.providerService.getVirtualRootUri(t);if(n===void 0)return;const r=E(n),i=this.cache.get(r);if((i==null?void 0:i.length)!==0)return this.lock.synchronizeRead(r,async()=>{var a;const{operation:s}=await this.getWorkingOperation(t,n);if(s!==void 0){if(s.type===D.Deleted)throw l.FileSystemError.FileNotFound(`The ${s.fileType===l.FileType.Directory?"folder":"file"} has been deleted.`);return{type:s.fileType,size:(a=s.size)!=null?a:0,ctime:0,mtime:s.timestamp}}},`ChangeStore.stat(${t.toString()}`)}async readFile(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).readFile(t);const n=new _t(`ChangeStore.readFile(${t.toString()})`);try{const r=this.providerService.getVirtualRootUri(t);if(r===void 0)return;const i=E(r),a=this.cache.get(i);return(a==null?void 0:a.length)===0?void 0:await this.lock.synchronizeRead(i,()=>{const s=this.cache.get(i);if((s==null?void 0:s.length)===0){n.log({message:": Not found; no operations"});return}return this.getWorkingContent(r,t)},n.context)}finally{n.stop()}}async createDirectory(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new _t(`ChangeStore.createDirectory(${t.toString()})`);try{const r=[];if(await this.lock.synchronizeWrite(E(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e),s=await this.providerService.getMetadata(t);await this.spliceOperation(t,a,i===void 0?{type:D.Created,uri:t,fileType:l.FileType.Directory,revision:s.HEAD.sha,timestamp:Date.now(),size:0,hash:"",originalHash:void 0}:{...i,timestamp:Date.now()},r)},n.context),r.length===0)return;this._onDidChange.fire(r)}finally{n.stop()}}async deleteDirectory(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new _t(`ChangeStore.deleteDirectory(${t.toString()})`);try{const r=[];if(await this.lock.synchronizeWrite(E(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e);if((i==null?void 0:i.type)===D.Created)return this.discardCore(e,t,r);const s=await this.providerService.getMetadata(t);await this.spliceOperation(t,a,{type:D.Deleted,uri:t,fileType:l.FileType.Directory,revision:s.HEAD.sha,timestamp:Date.now(),size:void 0,hash:void 0,originalHash:void 0},r)},n.context),r.length===0)return;this._onDidChange.fire(r)}finally{n.stop()}}async updateDirectoryEntries(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return e;const r=new _t(`ChangeStore.updateDirectoryEntries(${t.toString()})`,{},e.length);try{const i=E(n),a=this.cache.get(i);return(a==null?void 0:a.length)===0?e:await this.lock.synchronizeRead(i,async()=>{const{path:s}=z(n,t),c=await this.getWorkingOperations(n);for(const u of c)switch(u.type){case D.Changed:break;case D.Created:{if(Q(u.uri,s)){const d=this.providerService.getRelativeFilePath(t,u.uri);e.push([d,u.fileType])}break}case D.Deleted:{if(Q(u.uri,s)){const d=this.providerService.getRelativeFilePath(t,u.uri),f=e.findIndex(([h])=>h===d);f!==-1&&e.splice(f,1)}break}}return e},r.context)}finally{r.stop()}}async writeFile(t,e,n,r){const i=this.providerService.getVirtualWorkspaceUri(t);if(i===void 0)return;const a=new _t(`ChangeStore.writeFile(${t.toString()})`,{},e.length,r);try{const s=[];if(await this.lock.synchronizeWrite(E(i),async()=>this.writeFileCore(i,t,s,e,n,r),a.context),s.length===0)return;this._onDidChange.fire(s)}finally{a.stop()}}async writeFileCore(t,e,n,r,i,a){const s=new _t(`ChangeStore.writeFileCore(${e.toString()})`,{},r.length,a);try{const[{operation:c,index:u},d,f]=await Promise.all([this.getWorkingOperation(e,t),Rn(r),Rn(i)]);if(d===f&&(!c||(c==null?void 0:c.type)===D.Changed))return this.discardCore(t,e,n);if(d===(c==null?void 0:c.hash)&&f===(c==null?void 0:c.originalHash))return;const[{HEAD:h}]=await Promise.all([this.providerService.getMetadata(e),this.saveWorkingContent(t,e,r)]);await this.spliceOperation(e,u,c===void 0?{type:D.Changed,uri:e,fileType:l.FileType.File,revision:h.sha,timestamp:Date.now(),size:r.byteLength,hash:d,originalHash:f,conflicts:a,staged:!1}:{...c,revision:h.sha,timestamp:Date.now(),size:r.byteLength,hash:d,originalHash:f,conflicts:a,staged:!1},n)}finally{s.stop()}}async createFile(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return;const r=new _t(`ChangeStore.createFile(${t.toString()})`,{},e.length);try{const i=[];if(await this.lock.synchronizeWrite(E(n),async()=>{const[{operation:a,index:s},c,u]=await Promise.all([this.getWorkingOperation(t,n),Rn(e),this.providerService.getMetadata(t),this.saveWorkingContent(n,t,e)]);await this.spliceOperation(t,s,a===void 0?{type:D.Created,uri:t,fileType:l.FileType.File,revision:u.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:c,originalHash:c}:a.type===D.Deleted?{...a,type:D.Changed,revision:u.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:c}:{...a,type:D.Created,revision:u.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:c},i)},r.context),i.length===0)return;this._onDidChange.fire(i)}finally{r.stop()}}async deleteFile(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new _t(`ChangeStore.deleteFile(${t.toString()})`);try{const r=[];if(await this.lock.synchronizeWrite(E(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e);if((i==null?void 0:i.type)===D.Created)return this.discardCore(e,t,r);const[s]=await Promise.all([this.providerService.getMetadata(t),this.discardWorkingContent(e,t)]);await this.spliceOperation(t,a,{type:D.Deleted,uri:t,fileType:l.FileType.File,revision:s.HEAD.sha,timestamp:Date.now(),size:void 0,hash:void 0,originalHash:void 0},r)},n.context),r.length===0)return;this._onDidChange.fire(r)}finally{n.stop()}}findParent(t,e,n){const r=_e(t),{operation:i,index:a}=this.findWorkingOperation(r,e);return i!==void 0&&n(i,e)?{parent:i,parentIndex:a}:{parent:void 0,parentIndex:-1}}findNewParentWithOnlyChild(t,e){const n=$(t);return this.findParent(t,e,(r,i)=>r.type===D.Created&&!i.some(a=>Q(a.uri,r.uri)&&$(a.uri)!==n))}findDeletedParents(t,e){const n=[];for(let r=0;r<e.length;r+=1){const i=e[r];i.type===D.Deleted&&Z(t,i.uri)&&n.push({parent:i,parentIndex:r})}return n}async getWorkingOperation(t,e){return this.findWorkingOperation(t,await this.getWorkingOperations(e))}findWorkingOperation(t,e){if(e.length===0)return{operation:void 0,index:-1};const n=$(t);let r=-1;const i=e.find((a,s)=>$(a.uri)!==n?!1:(r=s,!0));return i===void 0?{operation:void 0,index:-1}:{operation:i,index:r}}async getWorkingOperations(t){const e=E(t);let n=this.cache.get(e);return n===void 0&&(n=this.fromStorage(await this.storageService.get(this.getOperationsStorageKey(e))),this.cache.set(e,n)),n}async saveWorkingOperations(t,e){K.debug(`ChangeStore.saveWorkingOperations(${t.toString()})`,e.length);const n=E(t);this.cache.set(n,e);try{await this.storageService.store(this.getOperationsStorageKey(n),this.toStorage(e))}catch(r){throw this.cache.delete(n),K.error(r,`Failed to save repository changes for ${n}`),r}}getOperationsStorageKey(t){return`operations/${t}`}async getWorkingContent(t,e){try{return await this.fileStorageService.get(this.getFileStorageKey(t,e))}catch(n){throw K.error(n),this.telemetryService.sendException(n),n}}async discardWorkingContent(t,e){K.debug(`ChangeStore.discardWorkingContent(${e.toString()})`);try{return await this.fileStorageService.delete(this.getFileStorageKey(t,e))}catch(n){if(n instanceof l.FileSystemError&&n.code===Ul)return;throw K.error(n),this.telemetryService.sendException(n),n}}async saveWorkingContent(t,e,n){K.debug(`ChangeStore.saveWorkingContent(${e.toString()})`,n.length);try{return await this.fileStorageService.store(this.getFileStorageKey(t,e),n)}catch(r){throw K.error(r),this.telemetryService.sendException(r),r}}getFileStorageKey(t,e){return`changestore/${F(e)}`}async spliceOperation(t,e,n,r){const i=this.providerService.getVirtualWorkspaceUri(t);if(i===void 0)return;const a=await this.getWorkingOperations(i);e!==-1?a.splice(e,1,n):a.push(n),await this.saveWorkingOperations(i,a),r.push(So(n,i,t))}fromStorage(t){if(!t)return[];try{const e=JSON.parse(t,(n,r)=>(n==="uri"||n.endsWith("Uri"))&&T(r)?typeof r=="string"?l.Uri.parse(r):l.Uri.from(r):r);return Array.isArray(e)?e:e.operations}catch(e){throw K.error(e,"Failed to deserialize ChangeStore operations"),e}}toStorage(t){const e={schemaVersion:Ua.operationsStorageSchemaVersion,operations:t};return JSON.stringify(e)}},"_ChangeStore");let Wo=Ua;Wo.operationsStorageSchemaVersion=1,Wo.ScopedChangeStore=class{constructor(t,e,n){this.changeStore=t,this.scope=e,this.workspaceId=n}createPatch(t,e,n){return this.changeStore.createPatch(this.stripUriScope(t),this.stripUriScope(e),n)}discardAll(t,e){return this.changeStore.discardAll(this.stripUriScope(t),e)}getChange(t){return this.changeStore.getChange(this.stripUriScope(t))}getChanges(t,e){return this.changeStore.getChanges(this.stripUriScope(t),e)}async getGroupedChanges(t,e){return this.changeStore.getGroupedChanges(this.stripUriScope(t),e)}hasChanges(t){return this.changeStore.hasChanges(this.stripUriScope(t))}maybeHasChanges(t,e){return this.changeStore.maybeHasChanges(this.stripUriScope(t),this.stripUriScope(e))}async stat(t){const n=this.changeStore.getUriScope(t)!==this.workspaceId,r=await this.changeStore.stat(this.stripUriScope(t));return r!==void 0&&n&&(r.permissions=l.FilePermission.Readonly),r}readFile(t){return this.changeStore.readFile(this.stripUriScope(t))}resolveDiffCommand(t,e,n,r){return this.changeStore.resolveDiffCommand(this.changeStore.getScopedUri(t,this.scope),this.changeStore.getScopedUri(e,this.scope),n,r)}stripUriScope(t){return t===void 0||!t.fragment?t:t.with({fragment:""})}},Bl([nn()],Wo.prototype,"getWorkingOperations",1);function Kl(t){switch(t){case D.Changed:return l.l10n.t("Modified");case D.Created:return l.l10n.t("Added");case D.Deleted:return l.l10n.t("Deleted")}}o(Kl,"getStatusText");function Gl(t){const[e,n]=t;switch(e){case D.Changed:switch(n){case D.Changed:case D.Created:return l.l10n.t("Modified by Both");case D.Deleted:return l.l10n.t("Deleted by Incoming")}case D.Created:switch(n){case D.Changed:case D.Created:return l.l10n.t("Added by Both");case D.Deleted:return l.l10n.t("Deleted by Incoming")}case D.Deleted:switch(n){case D.Changed:case D.Created:return l.l10n.t("Deleted by Current");case D.Deleted:return l.l10n.t("Deleted by Both")}}}o(Gl,"getConflictStatusText");class _s{constructor(e,n){this.providerService=e,this.gitIgnoreFiles=n,this._onDidChangeFileDecorations=new l.EventEmitter,this._decorations=new Map,this._submodules=new Set,this.disposable=l.Disposable.from(l.window.registerFileDecorationProvider(this),e.onDidChangeRepository(this.onRefresh,this),e.onDidRefresh(this.onRefresh,this),e.onDidChangeChangeStore(this.onUrisChanged,this),e.onDidChangeRepositories(this.onDidChangeRepositories,this))}get onDidChangeFileDecorations(){return this._onDidChangeFileDecorations.event}dispose(){this.disposable.dispose(),this._decorations.clear()}onRefresh(){this._decorations.clear(),setTimeout(()=>this._onDidChangeFileDecorations.fire(void 0),0)}onUrisChanged(e){let n;const r=e.map(({uri:i})=>(this._decorations.delete(E(i)),this.gitIgnoreFiles.isIgnoreFile(i)&&(n=i),i));n?(this.gitIgnoreFiles.getIgnoreFile(n,!0),setTimeout(()=>this._onDidChangeFileDecorations.fire(void 0),0)):setTimeout(()=>this._onDidChangeFileDecorations.fire(r),0)}async onDidChangeRepositories(e){for(const n of e.added){this.gitIgnoreFiles.getIgnoreFile(n.uri,!1);const r=await this.providerService.getSubmodules(n.uri);if(!!r)for(const[i,a]of r)this._submodules.add(i)}for(const n of e.removed)this._submodules.delete(E(n.uri))}async provideFileDecoration(e,n){if(e.scheme!==Gn.scheme)return;await Fr(this.providerService,e);const r=E(e);let i=this._decorations.get(r);if(i!==void 0)return i!=null?i:void 0;const a=await this.gitIgnoreFiles.getIgnoreFile(e,!1),s=(await l.workspace.fs.stat(e)).type===l.FileType.Directory;if(a==null?void 0:a.isArbitraryPathIgnored(e.path,s))return i={color:new l.ThemeColor("remoteHub.decorations.ignoredResourceForeground")},this._decorations.set(r,i),i;const c=await this.providerService.getIncomingChanges(this.providerService.getVirtualRootUri(e));let u;c.length>0&&(u=c.find(f=>E(f.uri)===r));const d=await this.providerService.changeStoreGetChange(e);if(d===void 0){if(u!==void 0)switch(u.type){case D.Created:i={badge:"\u2193A",color:new l.ThemeColor("remoteHub.decorations.incomingAddedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes (Added)")};break;case D.Deleted:i={badge:"\u2193D",color:new l.ThemeColor("remoteHub.decorations.incomingDeletedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes (Deleted)")};break;case D.Changed:i={badge:"\u2193M",color:new l.ThemeColor("remoteHub.decorations.incomingModifiedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes (Modified)")};break;default:i={badge:"\u2193~",color:new l.ThemeColor("remoteHub.decorations.incomingModifiedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes")};break}else this._submodules.has(this.providerService.getRelativeFilePath(e))&&(i={badge:"S",color:new l.ThemeColor("remoteHub.decorations.submoduleForegroundColor"),tooltip:"Submodule"});return this._decorations.set(r,i!=null?i:null),i}if(d.conflicts)i={badge:"!",color:new l.ThemeColor("remoteHub.decorations.conflictForegroundColor"),tooltip:l.l10n.t("Merge Conflicts ({0})",Gl(d.conflicts.status))};else if(u!==void 0)switch(u.type){case D.Created:i={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts (Added)")};break;case D.Deleted:i={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts (Deleted)")};break;case D.Changed:i={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts")};break;default:i={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts")}}else switch(d.type){case D.Created:i={badge:"A",color:new l.ThemeColor("remoteHub.decorations.addedForegroundColor"),tooltip:l.l10n.t("Added")};break;case D.Changed:i={badge:"M",color:new l.ThemeColor("remoteHub.decorations.modifiedForegroundColor"),tooltip:l.l10n.t("Modified")};break;case D.Deleted:i={badge:"D",color:new l.ThemeColor("remoteHub.decorations.deletedForegroundColor"),tooltip:l.l10n.t("Deleted")};break}return this._decorations.set(r,i!=null?i:null),i}}o(_s,"ScmDecorationProvider");var Qc=vr(919);function Xc(t,e,n){if(!(e==null?void 0:e.length)&&!(n==null?void 0:n.length))return new Set(t);let r;if(e==null?void 0:e.length){const i=new Set([...e,...e.map(s=>`${s}/**`)]),a=micromatch(t,[...i],{dot:!0,nocase:!0});r=new Set(a)}if(n==null?void 0:n.length){const i=new Set([...n,...n.map(a=>`${a}/**`)]);if(r===void 0){const a=micromatch.not(t,[...i],{dot:!0,nocase:!0});r=new Set(a)}else micromatch(t,[...i],{dot:!0,nocase:!0}).forEach(r.delete,r)}return r}o(Xc,"globFilter");function Es(t,e={}){if(!t)return Ps;if(typeof t=="string"||rc(t)){const n=Ko(t,e);if(n===Vi)return Ps;const r=o(function(i,a){return!!n(i,a)},"resultPattern");return n.allBasenames&&(r.allBasenames=n.allBasenames),n.allPaths&&(r.allPaths=n.allPaths),r}return ac(t,e)}o(Es,"parse");function zl(t,e,n=(r,i)=>r===i){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let r=0,i=t.length;r<i;r++)if(!n(t[r],e[r]))return!1;return!0}o(zl,"equals");function $o(t){return!!t&&typeof t.then=="function"}o($o,"isThenable");function Zc(){return Object.create(null)}o(Zc,"getEmptyExpression");const Co="**",As="/",bo="[/\\\\]",_o="[^/\\\\]",eu=/\//g;function Ds(t,e){switch(t){case 0:return"";case 1:return`${_o}*?`;default:return`(?:${bo}|${_o}+${bo}${e?`|${bo}${_o}+`:""})*?`}}o(Ds,"starsToRegExp");function Rs(t,e){if(!t)return[];const n=[];let r=!1,i=!1,a="";for(const s of t){switch(s){case e:if(!r&&!i){n.push(a),a="";continue}break;case"{":r=!0;break;case"}":r=!1;break;case"[":i=!0;break;case"]":i=!1;break}a+=s}return a&&n.push(a),n}o(Rs,"splitGlobAware");function Ts(t){if(!t)return"";let e="";const n=Rs(t,As);if(n.every(r=>r===Co))e=".*";else{let r=!1;n.forEach((i,a)=>{if(i===Co){if(r)return;e+=Ds(2,a===n.length-1)}else{let s=!1,c="",u=!1,d="";for(const f of i){if(f!=="}"&&s){c+=f;continue}if(u&&(f!=="]"||!d)){let h;f==="-"?h=f:(f==="^"||f==="!")&&!d?h="^":f===As?h="":h=sn(f),d+=h;continue}switch(f){case"{":s=!0;continue;case"[":u=!0;continue;case"}":{e+=`(?:${Rs(c,",").map(b=>Ts(b)).join("|")})`,s=!1,c="";break}case"]":{e+="["+d+"]",u=!1,d="";break}case"?":e+=_o;continue;case"*":e+=Ds(1);continue;default:e+=sn(f)}}a<n.length-1&&(n[a+1]!==Co||a+2<n.length)&&(e+=bo)}r=i===Co})}return e}o(Ts,"parseRegExp");const Vl=/^\*\*\/\*\.[\w\.-]+$/,Jl=/^\*\*\/([\w\.-]+)\/?$/,jl=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,Yl=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,ql=/^\*\*((\/[\w\.-]+)+)\/?$/,Ql=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,Ms=new Zn(1e4),Ps=o(function(){return!1},"FALSE"),Vi=o(function(){return null},"NULL");function Ko(t,e){if(!t)return Vi;let n;typeof t!="string"?n=t.pattern:n=t,n=n.trim();const r=`${n}_${!!e.trimForExclusions}`;let i=Ms.get(r);if(i)return Is(i,t);let a;return Vl.test(n)?i=Zl(n.substr(4),n):(a=Jl.exec(Go(n,e)))?i=ec(a[1],n):(e.trimForExclusions?Yl:jl).test(n)?i=tc(n,e):(a=ql.exec(Go(n,e)))?i=Ls(a[1].substr(1),n,!0):(a=Ql.exec(Go(n,e)))?i=Ls(a[1],n,!1):i=nc(n),Ms.set(r,i),Is(i,t)}o(Ko,"parsePattern");function Xl(t,e){if(!t||!e)return t;const n=e.length;if(n===0||t.length===0)return t;let r=0;for(;t.indexOf(e,r)===r;)r=r+n;return t.substring(r)}o(Xl,"ltrim");function Is(t,e){if(typeof e=="string")return t;const n=o(function(r,i){return Z(r,e.base)?t(Xl(r.substr(e.base.length),"/"),i):null},"wrappedPattern");return n.allBasenames=t.allBasenames,n.allPaths=t.allPaths,n.basenames=t.basenames,n.patterns=t.patterns,n}o(Is,"wrapRelativePattern");function Go(t,e){return e.trimForExclusions&&t.endsWith("/**")?t.substr(0,t.length-2):t}o(Go,"trimForExclusions");function Zl(t,e){return function(n,r){return typeof n=="string"&&n.endsWith(t)?e:null}}o(Zl,"trivia1");function ec(t,e){const n=`/${t}`,r=`\\${t}`,i=o(function(s,c){return typeof s!="string"?null:c?c===t?e:null:s===t||s.endsWith(n)||s.endsWith(r)?e:null},"parsedPattern"),a=[t];return i.basenames=a,i.patterns=[e],i.allBasenames=a,i}o(ec,"trivia2");function tc(t,e){const n=ks(t.slice(1,-1).split(",").map(c=>Ko(c,e)).filter(c=>c!==Vi),t),r=n.length;if(!r)return Vi;if(r===1)return n[0];const i=o(function(c,u){for(let d=0,f=n.length;d<f;d++)if(n[d](c,u))return t;return null},"parsedPattern"),a=n.find(c=>!!c.allBasenames);a&&(i.allBasenames=a.allBasenames);const s=n.reduce((c,u)=>u.allPaths?c.concat(u.allPaths):c,[]);return s.length&&(i.allPaths=s),i}o(tc,"trivia3");function Ls(t,e,n){const r="/"+t;let i;return n?i=o(function(a,s){return typeof a=="string"&&a.endsWith(r)?e:null},"parsedPattern"):i=o(function(a,s){return null},"parsedPattern"),i.allPaths=[(n?"*/":"./")+t],i}o(Ls,"trivia4and5");function nc(t){try{const e=new RegExp(`^${Ts(t)}$`);return function(n){return e.lastIndex=0,typeof n=="string"&&e.test(n)?t:null}}catch(e){return Vi}}o(nc,"toRegExp");function tu(t,e,n){return!t||typeof e!="string"?!1:Es(t)(e,void 0,n)}o(tu,"match");function rc(t){const e=t;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}o(rc,"isRelativePattern");function nu(t){return t.allBasenames||[]}o(nu,"getBasenameTerms");function ru(t){return t.allPaths||[]}o(ru,"getPathTerms");function ic(t){let e=-1,n=0,r=-1,i=!0,a=0;for(let s=t.length-1;s>=0;--s){const c=t.charCodeAt(s);if(c===47){if(!i){n=s+1;break}continue}r===-1&&(i=!1,r=s+1),c===46?e===-1?e=s:a!==1&&(a=1):e!==-1&&(a=-1)}return e===-1||r===-1||a===0||a===1&&e===r-1&&e===n+1?"":t.slice(e,r)}o(ic,"extname");function ac(t,e){const n=ks(Object.getOwnPropertyNames(t).map(c=>oc(c,t[c],e)).filter(c=>c!==Vi)),r=n.length;if(!r)return Vi;if(!n.some(c=>!!c.requiresSiblings)){if(r===1)return n[0];const c=o(function(f,h){let p;for(let b=0,te=n.length;b<te;b++){const A=n[b](f,h);if(typeof A=="string")return A;$o(A)&&(p||(p=[]),p.push(A))}return p?(async()=>{for(const b of p){const te=await b;if(typeof te=="string")return te}return null})():null},"resultExpression2"),u=n.find(f=>!!f.allBasenames);u&&(c.allBasenames=u.allBasenames);const d=n.reduce((f,h)=>h.allPaths?f.concat(h.allPaths):f,[]);return d.length&&(c.allPaths=d),c}const i=o(function(c,u,d){let f,h;for(let p=0,b=n.length;p<b;p++){const te=n[p];te.requiresSiblings&&d&&(u||(u=j(c)),f||(f=u.substr(0,u.length-ic(c).length)));const A=te(c,u,f,d);if(typeof A=="string")return A;$o(A)&&(h||(h=[]),h.push(A))}return h?(async()=>{for(const p of h){const b=await p;if(typeof b=="string")return b}return null})():null},"resultExpression"),a=n.find(c=>!!c.allBasenames);a&&(i.allBasenames=a.allBasenames);const s=n.reduce((c,u)=>u.allPaths?c.concat(u.allPaths):c,[]);return s.length&&(i.allPaths=s),i}o(ac,"parsedExpression");function oc(t,e,n){if(e===!1)return Vi;const r=Ko(t,n);if(r===Vi)return Vi;if(typeof e=="boolean")return r;if(e){const i=e.when;if(typeof i=="string"){const a=o((s,c,u,d)=>{if(!d||!r(s,c))return null;const f=i.replace("$(basename)",()=>u),h=d(f);return $o(h)?h.then(p=>p?t:null):h?t:null},"result");return a.requiresSiblings=!0,a}}return r}o(oc,"parseExpressionPattern");function ks(t,e){const n=t.filter(c=>!!c.basenames);if(n.length<2)return t;const r=n.reduce((c,u)=>{const d=u.basenames;return d?c.concat(d):c},[]);let i;if(e){i=[];for(let c=0,u=r.length;c<u;c++)i.push(e)}else i=n.reduce((c,u)=>{const d=u.patterns;return d?c.concat(d):c},[]);const a=o(function(c,u){if(typeof c!="string")return null;if(!u){let f;for(f=c.length;f>0;f--){const h=c.charCodeAt(f-1);if(h===47||h===92)break}u=c.substr(f)}const d=r.indexOf(u);return d!==-1?i[d]:null},"aggregate");a.basenames=r,a.patterns=i,a.allBasenames=r;const s=t.filter(c=>!c.basenames);return s.push(a),s}o(ks,"aggregateBasenameMatches");function iu(t,e){return zl(t,e,(n,r)=>typeof n=="string"&&typeof r=="string"?n===r:typeof n!="string"&&typeof r!="string"?n.base===r.base&&n.pattern===r.pattern:!1)}o(iu,"patternsEquals");class xs{constructor(e,n,r){if(this.location=n,this.parent=r,n[n.length-1]==="\\")throw Error("Unexpected path format, do not use trailing backslashes");n[n.length-1]!=="/"&&(n+="/"),this.isPathIgnored=this.parseIgnoreFile(e,this.location,this.parent)}updateContents(e){this.isPathIgnored=this.parseIgnoreFile(e,this.location,this.parent)}isPathIncludedInTraversal(e,n){if(e[0]!=="/"||e[e.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+e);return!this.isPathIgnored(e,n)}isArbitraryPathIgnored(e,n){if(e[0]!=="/"||e[e.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+e);const r=e.split("/").filter(s=>s);let i=!1,a="";for(let s=0;s<r.length;s++){const c=s===r.length-1,u=r[s];if(a=a+"/"+u,!this.isPathIncludedInTraversal(a,c?n:!0)){i=!0;break}}return i}gitignoreLinesToExpression(e,n,r){const i=e.map(s=>this.gitignoreLineToGlob(s,n)),a=Object.create(null);for(const s of i)a[s]=!0;return Es(a,{trimForExclusions:r})}parseIgnoreFile(e,n,r){const i=e.split(`
`).map(A=>A.trim()).filter(A=>A&&A[0]!=="#"),a=i.filter(A=>!A.endsWith("/")),s=a.filter(A=>!A.includes("!")),c=this.gitignoreLinesToExpression(s,n,!0),u=a.filter(A=>A.includes("!")).map(A=>A.replace(/!/g,"")),d=this.gitignoreLinesToExpression(u,n,!1),f=i.filter(A=>!A.includes("!")),h=this.gitignoreLinesToExpression(f,n,!0),p=i.filter(A=>A.includes("!")).map(A=>A.replace(/!/g,"")),b=this.gitignoreLinesToExpression(p,n,!1);return o((A,ee)=>{if(!A.startsWith(n))return!1;if(ee&&h(A)&&!b(A))return!0;const me=c(A),re=d(A);return me&&!re?!0:r?r.isPathIgnored(A,ee):!1},"isPathIgnored")}gitignoreLineToGlob(e,n){const r=e.indexOf("/");return r===-1||r===e.length-1?e="**/"+e:(r===0?n.slice(-1)==="/"&&(e=e.slice(1)):n.slice(-1)!=="/"&&(e="/"+e),e=n+e),e}}o(xs,"IgnoreFile");const Fs=new TextDecoder;class Ns{constructor(e){this.providerService=e,this._gitIgnoreFiles=new Map}isIgnoreFile(e){return this.getIgnoreFileUri(e).toString()===e.toString()}async getIgnoreFile(e,n){const r=this.providerService.getVirtualRootUri(e),i=r.toString(),a=this._gitIgnoreFiles.get(i);if(a&&!n)return a;const s=this.doProcessIgnoreFile(r,a);return this._gitIgnoreFiles.set(i,s),s}getIgnoreFileUri(e){const n=this.providerService.getVirtualRootUri(e);return this.providerService.createRelativeUri(n,".gitignore")}async doProcessIgnoreFile(e,n){const r=this.providerService.createRelativeUri(e,".gitignore");try{if((await l.workspace.fs.stat(r)).type!==l.FileType.File)return;const a=await l.workspace.fs.readFile(r);if(n!==void 0){const s=await n;if(s)return s.updateContents(Fs.decode(a)),s}return new xs(Fs.decode(a),`${e.path}/`)}catch(i){}}}o(Ns,"IgnoreFileService");const Os=o(t=>{t=1831565813+(t|=0)|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296},"e");class Hs{constructor(e){this.dictionaries=void 0,this.length=void 0,this.separator=void 0,this.style=void 0,this.seed=void 0;const{length:n,separator:r,dictionaries:i,style:a,seed:s}=e;this.dictionaries=i,this.separator=r,this.length=n,this.style=a,this.seed=s}generate(){if(!this.dictionaries)throw new Error('Cannot find any dictionary. Please provide at least one, or leave the "dictionary" field empty in the config object');if(this.length<=0)throw new Error("Invalid length provided");if(this.length>this.dictionaries.length)throw new Error(`The length cannot be bigger than the number of dictionaries.
Length provided: ${this.length}. Number of dictionaries provided: ${this.dictionaries.length}`);let e=this.seed;return this.dictionaries.slice(0,this.length).reduce((n,r)=>{let i;e?(i=(s=>{if(typeof s=="string"){const c=s.split("").map(d=>d.charCodeAt(0)).reduce((d,f)=>d+f,1),u=Math.floor(Number(c));return Os(u)}return Os(s)})(e),e=4294967296*i):i=Math.random();let a=r[Math.floor(i*r.length)]||"";if(this.style==="lowerCase")a=a.toLowerCase();else if(this.style==="capital"){const[s,...c]=a.split("");a=s.toUpperCase()+c.join("")}else this.style==="upperCase"&&(a=a.toUpperCase());return n?`${n}${this.separator}${a}`:`${a}`},"")}}o(Hs,"a");const Bs={separator:"_",dictionaries:[]},sc=o(t=>{const e=[...t&&t.dictionaries||Bs.dictionaries],n={...Bs,...t,length:t&&t.length||e.length,dictionaries:e};if(!t||!t.dictionaries||!t.dictionaries.length)throw new Error('A "dictionaries" array must be provided. This is a breaking change introduced starting from Unique Name Generator v4. Read more about the breaking change here: https://github.com/andreasonny83/unique-names-generator#migration-guide');return new Hs(n).generate()},"n");var lc=["able","above","absent","absolute","abstract","abundant","academic","acceptable","accepted","accessible","accurate","accused","active","actual","acute","added","additional","adequate","adjacent","administrative","adorable","advanced","adverse","advisory","aesthetic","afraid","aggregate","aggressive","agreeable","agreed","agricultural","alert","alive","alleged","allied","alone","alright","alternative","amateur","amazing","ambitious","amused","ancient","angry","annoyed","annual","anonymous","anxious","appalling","apparent","applicable","appropriate","arbitrary","architectural","armed","arrogant","artificial","artistic","ashamed","asleep","assistant","associated","atomic","attractive","automatic","autonomous","available","average","awake","aware","awful","awkward","back","bad","balanced","bare","basic","beautiful","beneficial","better","bewildered","big","binding","biological","bitter","bizarre","blank","blonde","blushing","boiling","bold","bored","boring","bottom","brainy","brave","breakable","breezy","brief","bright","brilliant","broad","broken","bumpy","burning","busy","calm","capable","careful","casual","causal","cautious","central","certain","changing","characteristic","charming","cheap","cheerful","chemical","chief","chilly","chosen","chronic","chubby","circular","civic","civil","classic","classical","clean","clear","clever","clinical","close","closed","cloudy","clumsy","coastal","cognitive","coherent","cold","collective","colorful","colossal","coloured","colourful","combined","comfortable","commercial","common","compact","comparable","comparative","compatible","competent","competitive","complete","complex","complicated","comprehensive","compulsory","conceptual","concerned","concrete","condemned","confident","confidential","confused","conscious","conservation","considerable","consistent","constant","constitutional","contemporary","content","continental","continued","continuing","continuous","controlled","controversial","convenient","conventional","convinced","convincing","cooing","cool","cooperative","corporate","correct","corresponding","costly","courageous","creative","creepy","criminal","critical","crooked","crowded","crucial","crude","cruel","cuddly","cultural","curious","curly","current","curved","cute","daily","damaged","damp","dangerous","dark","dead","deafening","dear","decent","decisive","deep","defeated","defensive","defiant","definite","deliberate","delicate","delicious","delighted","delightful","democratic","dependent","depressed","desirable","desperate","detailed","determined","developed","developing","devoted","different","difficult","digital","diplomatic","direct","dirty","disappointed","disastrous","disciplinary","disgusted","distant","distinct","distinctive","distinguished","disturbed","disturbing","diverse","divine","dizzy","domestic","dominant","double","doubtful","drab","dramatic","dreadful","driving","dry","dual","due","dull","dusty","dutch","dying","dynamic","eager","early","eastern","easy","economic","educational","eerie","effective","efficient","elaborate","elated","elderly","eldest","electoral","electric","electrical","electronic","elegant","eligible","embarrassed","embarrassing","emotional","empirical","empty","enchanting","encouraging","endless","energetic","enormous","enthusiastic","entire","entitled","envious","environmental","equal","equivalent","essential","established","estimated","ethical","eventual","everyday","evident","evil","evolutionary","exact","excellent","exceptional","excess","excessive","excited","exciting","exclusive","existing","exotic","expected","expensive","experienced","experimental","explicit","extended","extensive","external","extra","extraordinary","extreme","exuberant","faint","fair","faithful","familiar","famous","fancy","fantastic","far","fascinating","fashionable","fast","fatal","favourable","favourite","federal","fellow","few","fierce","final","financial","fine","firm","fiscal","fit","fixed","flaky","flat","flexible","fluffy","fluttering","flying","following","fond","foolish","foreign","formal","formidable","forthcoming","fortunate","forward","fragile","frail","frantic","free","frequent","fresh","friendly","frightened","front","frozen","full","fun","functional","fundamental","funny","furious","future","fuzzy","gastric","general","generous","genetic","gentle","genuine","geographical","giant","gigantic","given","glad","glamorous","gleaming","global","glorious","golden","good","gorgeous","gothic","governing","graceful","gradual","grand","grateful","greasy","great","grieving","grim","gross","grotesque","growing","grubby","grumpy","guilty","handsome","happy","hard","harsh","head","healthy","heavy","helpful","helpless","hidden","high","hilarious","hissing","historic","historical","hollow","holy","homely","hon","honest","horizontal","horrible","hostile","hot","huge","human","hungry","hurt","hushed","husky","icy","ideal","identical","ideological","ill","illegal","imaginative","immediate","immense","implicit","important","impossible","impressed","impressive","improved","inadequate","inc","inclined","increased","increasing","incredible","independent","indirect","individual","industrial","inevitable","influential","informal","inherent","initial","injured","inland","inner","innocent","innovative","inquisitive","instant","institutional","insufficient","intact","integral","integrated","intellectual","intelligent","intense","intensive","interested","interesting","interim","interior","intermediate","internal","international","invisible","involved","irrelevant","isolated","itchy","jealous","jittery","joint","jolly","joyous","judicial","juicy","junior","just","keen","key","kind","known","labour","large","late","latin","lazy","leading","left","legal","legislative","legitimate","lengthy","lesser","level","lexical","liable","light","like","likely","limited","linear","linguistic","liquid","literary","little","live","lively","living","local","logical","lonely","long","loose","lost","loud","lovely","low","loyal","ltd","lucky","mad","magic","magnetic","magnificent","main","major","mammoth","managerial","managing","manual","many","marginal","marine","marked","married","marvellous","mass","massive","mathematical","mature","maximum","mean","meaningful","mechanical","medical","medieval","melodic","melted","mental","mere","metropolitan","mid","middle","mighty","mild","military","miniature","minimal","minimum","ministerial","minor","miserable","misleading","missing","misty","mixed","moaning","mobile","moderate","modern","modest","molecular","monetary","monthly","moral","motionless","muddy","multiple","mushy","musical","mutual","mysterious","naked","narrow","nasty","national","natural","naughty","naval","near","nearby","neat","necessary","negative","neighbouring","nervous","net","neutral","new","nice","noble","noisy","normal","northern","nosy","notable","novel","nuclear","numerous","nursing","nutritious","nutty","obedient","objective","obliged","obnoxious","obvious","occasional","occupational","odd","official","ok","okay","old","only","open","operational","opposite","optimistic","ordinary","organic","organisational","original","orthodox","other","outdoor","outer","outrageous","outside","outstanding","overall","overseas","overwhelming","painful","pale","panicky","parallel","parental","parliamentary","partial","particular","passing","passive","past","patient","payable","peaceful","peculiar","perfect","permanent","persistent","personal","petite","philosophical","physical","plain","planned","plastic","pleasant","pleased","poised","polite","poor","popular","positive","possible","potential","powerful","practical","precious","precise","preferred","pregnant","preliminary","premier","prepared","present","presidential","pretty","previous","prickly","primary","prime","principal","printed","prior","private","probable","productive","professional","profitable","profound","progressive","prominent","promising","proper","proposed","prospective","protective","protestant","proud","provincial","psychiatric","psychological","public","puny","pure","purring","puzzled","quaint","qualified","quarrelsome","querulous","quick","quickest","quiet","quintessential","quixotic","racial","radical","rainy","random","rapid","rare","raspy","rational","ratty","raw","ready","real","realistic","rear","reasonable","recent","reduced","redundant","regional","registered","regular","regulatory","related","relative","relaxed","relevant","reliable","relieved","religious","reluctant","remaining","remarkable","remote","renewed","representative","repulsive","required","resident","residential","resonant","respectable","respective","responsible","resulting","retail","retired","revolutionary","rich","ridiculous","right","rigid","ripe","rising","rival","roasted","robust","rolling","romantic","rotten","rough","round","royal","rubber","rude","ruling","running","rural","sacred","sad","safe","salty","satisfactory","satisfied","scared","scary","scattered","scientific","scornful","scrawny","screeching","secondary","secret","secure","select","selected","selective","selfish","semantic","senior","sensible","sensitive","separate","serious","severe","shaggy","shaky","shallow","shared","sharp","sheer","shiny","shivering","shocked","short","shrill","shy","sick","significant","silent","silky","silly","similar","simple","single","skilled","skinny","sleepy","slight","slim","slimy","slippery","slow","small","smart","smiling","smoggy","smooth","social","soft","solar","sole","solid","sophisticated","sore","sorry","sound","sour","southern","spare","sparkling","spatial","special","specific","specified","spectacular","spicy","spiritual","splendid","spontaneous","sporting","spotless","spotty","square","squealing","stable","stale","standard","static","statistical","statutory","steady","steep","sticky","stiff","still","stingy","stormy","straight","straightforward","strange","strategic","strict","striking","striped","strong","structural","stuck","subjective","subsequent","substantial","subtle","successful","successive","sudden","sufficient","suitable","sunny","super","superb","superior","supporting","supposed","supreme","sure","surprised","surprising","surrounding","surviving","suspicious","sweet","swift","symbolic","sympathetic","systematic","tall","tame","tart","tasteless","tasty","technical","technological","teenage","temporary","tender","tense","terrible","territorial","testy","then","theoretical","thick","thin","thorough","thoughtful","thoughtless","thundering","tight","tiny","tired","top","total","tough","toxic","traditional","tragic","tremendous","tricky","tropical","troubled","typical","ugliest","ugly","ultimate","unable","unacceptable","unaware","uncertain","unchanged","uncomfortable","unconscious","underground","underlying","unemployed","uneven","unexpected","unfair","unfortunate","unhappy","uniform","uninterested","unique","united","universal","unknown","unlikely","unnecessary","unpleasant","unsightly","unusual","unwilling","upper","upset","uptight","urban","urgent","used","useful","useless","usual","vague","valid","valuable","variable","varied","various","varying","vast","verbal","vertical","very","vicarious","vicious","victorious","violent","visible","visiting","visual","vital","vitreous","vivacious","vivid","vocal","vocational","voiceless","voluminous","voluntary","vulnerable","wandering","warm","wasteful","watery","weak","wealthy","weary","wee","weekly","weird","welcome","well","western","wet","whispering","whole","wicked","wide","widespread","wild","wilful","willing","willowy","wily","wise","wispy","wittering","witty","wonderful","wooden","working","worldwide","worried","worrying","worthwhile","worthy","written","wrong","xenacious","xenial","xenogeneic","xeric","xerothermic","yabbering","yammering","yappiest","yappy","yawning","yearling","yearning","yeasty","yelling","yelping","yielding","yodelling","young","youngest","youthful","ytterbic","yucky","yummy","zany","zealous","zeroth","zestful","zesty","zippy","zonal","zoophagous","zygomorphic","zygotic"],cc=["aardvark","aardwolf","albatross","alligator","alpaca","amphibian","anaconda","angelfish","anglerfish","ant","anteater","antelope","antlion","ape","aphid","armadillo","asp","baboon","badger","bandicoot","barnacle","barracuda","basilisk","bass","bat","bear","beaver","bedbug","bee","beetle","bird","bison","blackbird","boa","boar","bobcat","bobolink","bonobo","bovid","bug","butterfly","buzzard","camel","canid","canidae","capybara","cardinal","caribou","carp","cat","caterpillar","catfish","catshark","cattle","centipede","cephalopod","chameleon","cheetah","chickadee","chicken","chimpanzee","chinchilla","chipmunk","cicada","clam","clownfish","cobra","cockroach","cod","condor","constrictor","coral","cougar","cow","coyote","crab","crane","crawdad","crayfish","cricket","crocodile","crow","cuckoo","damselfly","deer","dingo","dinosaur","dog","dolphin","donkey","dormouse","dove","dragon","dragonfly","duck","eagle","earthworm","earwig","echidna","eel","egret","elephant","elk","emu","ermine","falcon","felidae","ferret","finch","firefly","fish","flamingo","flea","fly","flyingfish","fowl","fox","frog","galliform","gamefowl","gayal","gazelle","gecko","gerbil","gibbon","giraffe","goat","goldfish","goose","gopher","gorilla","grasshopper","grouse","guan","guanaco","guineafowl","gull","guppy","haddock","halibut","hamster","hare","harrier","hawk","hedgehog","heron","herring","hippopotamus","hookworm","hornet","horse","hoverfly","hummingbird","hyena","iguana","impala","jackal","jaguar","jay","jellyfish","junglefowl","kangaroo","kingfisher","kite","kiwi","koala","koi","krill","ladybug","lamprey","landfowl","lark","leech","lemming","lemur","leopard","leopon","limpet","lion","lizard","llama","lobster","locust","loon","louse","lungfish","lynx","macaw","mackerel","magpie","mammal","manatee","mandrill","marlin","marmoset","marmot","marsupial","marten","mastodon","meadowlark","meerkat","mink","minnow","mite","mockingbird","mole","mollusk","mongoose","monkey","moose","mosquito","moth","mouse","mule","muskox","narwhal","newt","nightingale","ocelot","octopus","opossum","orangutan","orca","ostrich","otter","owl","ox","panda","panther","parakeet","parrot","parrotfish","partridge","peacock","peafowl","pelican","penguin","perch","pheasant","pig","pigeon","pike","pinniped","piranha","planarian","platypus","pony","porcupine","porpoise","possum","prawn","primate","ptarmigan","puffin","puma","python","quail","quelea","quokka","rabbit","raccoon","rat","rattlesnake","raven","reindeer","reptile","rhinoceros","roadrunner","rodent","rook","rooster","roundworm","sailfish","salamander","salmon","sawfish","scallop","scorpion","seahorse","shark","sheep","shrew","shrimp","silkworm","silverfish","skink","skunk","sloth","slug","smelt","snail","snake","snipe","sole","sparrow","spider","spoonbill","squid","squirrel","starfish","stingray","stoat","stork","sturgeon","swallow","swan","swift","swordfish","swordtail","tahr","takin","tapir","tarantula","tarsier","termite","tern","thrush","tick","tiger","tiglon","toad","tortoise","toucan","trout","tuna","turkey","turtle","tyrannosaurus","unicorn","urial","vicuna","viper","vole","vulture","wallaby","walrus","warbler","wasp","weasel","whale","whippet","whitefish","wildcat","wildebeest","wildfowl","wolf","wolverine","wombat","woodpecker","worm","wren","xerinae","yak","zebra"],uc=["amaranth","amber","amethyst","apricot","aqua","aquamarine","azure","beige","black","blue","blush","bronze","brown","chocolate","coffee","copper","coral","crimson","cyan","emerald","fuchsia","gold","gray","green","harlequin","indigo","ivory","jade","lavender","lime","magenta","maroon","moccasin","olive","orange","peach","pink","plum","purple","red","rose","salmon","sapphire","scarlet","silver","tan","teal","tomato","turquoise","violet","white","yellow"],au=null,ou=null,su=null;class Us{static generate(e={}){let n=e.min||1,r=e.max||999;if(e.length){const i=Math.pow(10,e.length);return n=i/10,r=i-1,[`${Math.floor(Math.random()*(r-n))+n}`]}return[`${Math.floor(Math.random()*(r-n))+n}`]}}o(Us,"y");class ta{constructor(e,n){this.command=e,this.show=n}get label(){return this.command.title}get identifier(){return this.command.command}async execute(){var e;return void await l.commands.executeCommand(this.command.command,...(e=this.command.arguments)!=null?e:[])}get alwaysShow(){var e;return(e=this.show)!=null?e:!1}get commandArguments(){return this.command.arguments}set commandArguments(e){this.command.arguments=e}}o(ta,"CommandQuickPickItem");var Eo;(function(t){async function e(n,r,i,a,s,c){let u;Array.isArray(s)?u=s:c===void 0&&(u=[],c=s);const d=l.window.createQuickPick(),f=new Or(500),h=[f],{defaultBranch:p,HEAD:b}=await n.getMetadata(r);async function te(Pe){const[Fe,$e,je,it]=await Promise.all([n.getBranch(r,p.name),n.getBranches(r,{query:Pe,limit:100}),n.getTags(r,{query:Pe,limit:100}),n.getSnapshots(r)]),Je=new Set,xt=new Set;for(const dn of it)Je.add(dn.hash),xt.add(dn.branch.name);const Qt=((c==null?void 0:c.filterBranches)?$e.branches.filter(c==null?void 0:c.filterBranches):$e.branches).filter(dn=>dn.name!==p.name).sort((dn,Mr)=>dn.committedDate&&Mr.committedDate?Mr.committedDate.getTime()-dn.committedDate.getTime():0),an=l.l10n.t("Open indexed commit"),$t=[{iconPath:new l.ThemeIcon("layers-active"),tooltip:an}];if(Pe!==void 0&&u){for(const dn of u)if(dn.identifier==="remoteHub.createBranch"||dn.identifier==="remoteHub.createBranchFrom"){const Mr=dn.commandArguments;if(!Mr)continue;const Ti=Mr.findIndex(oa=>"uri"in oa);let Mi;Ti!==-1&&([Mi]=Mr.splice(Ti,1),Mi.branch=Pe,Mr.push(Mi),dn.commandArguments=Mr)}}return[...u,{label:"",kind:l.QuickPickItemKind.Separator},...(c==null?void 0:c.showHead)?[{label:"HEAD",description:`\u2022$(git-commit) ${O(b.sha)}${Je.has(b.sha)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,alwaysShow:!0,type:ye.Commit,name:void 0,sha:b.sha,buttons:Je.has(b.sha)?$t:void 0}]:[],{label:`$(${(Fe==null?void 0:Fe.locked)?"lock":"git-branch"}) ${p.name} (default)`,description:`\u2022$(git-commit) ${O(p.sha)}${xt.has(p.name)||Je.has(p.sha)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,alwaysShow:!0,type:ye.Branch,name:void 0,sha:p.sha,buttons:xt.has(p.name)||Je.has(p.sha)?$t:void 0},...Qt.map(dn=>({label:`$(${dn.locked?"lock":"git-branch"}) ${dn.name}`,description:`\u2022$(git-commit) ${O(dn.commit)}${xt.has(dn.name)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,type:ye.Branch,name:dn.name,sha:dn.commit,buttons:xt.has(dn.name)?$t:void 0})),...je.tags.map(dn=>({label:`$(tag) ${dn.name}`,description:`\u2022$(git-commit) ${O(dn.commit)}${Je.has(dn.commit)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,type:ye.Tag,name:dn.name,sha:dn.commit,buttons:Je.has(dn.commit)?$t:void 0}))]}o(te,"getItems");const A=te(void 0);let ee,me=!1;async function re(Pe){ee=void 0;const Fe=d.activeItems;d.items=Pe!=null?Pe:await A,me&&Fe.length!==0&&(d.activeItems=d.items.filter($e=>Fe.some(je=>je.label===$e.label))),d.busy=!1}o(re,"setItems");try{return await new Promise(Fe=>{var $e;h.push(d.onDidHide(()=>Fe(void 0)),d.onDidChangeValue(je=>{if(me=!1,je=je.trim(),(c==null?void 0:c.allowResetToSha)&&b.branch&&N(je)){re([{label:`Reset $(git-branch) ${b.branch.name} to $(git-commit) ${je}`,name:b.branch.name,sha:je,type:ye.Branch}]);return}d.busy=!0;const it=f.debounce(je?()=>te(je):()=>A);ee===void 0&&(ee=it.then(async Je=>re(Je)))}),d.onDidAccept(()=>{if(d.activeItems.length!==0){const[je]=d.activeItems;Fe(je)}}),d.onDidTriggerItemButton(je=>{const it=je.item;!(it instanceof ta)&&it.kind!==l.QuickPickItemKind.Separator&&(it.useIndex=!0),Fe(it)})),d.title=a,d.placeholder=i,d.matchOnDescription=!0,d.ignoreFocusOut=($e=c==null?void 0:c.ignoreFocusOut)!=null?$e:!0,d.busy=!0,d.show(),ee=f.debounce(async()=>A,0).then(je=>re(je))})}finally{d.dispose(),h.forEach(Pe=>void Pe.dispose())}}o(e,"show"),t.show=e})(Eo||(Eo={}));const dc=new TextDecoder;class Ws{constructor(e,n,r,i){this.providerService=e,this.openActionsService=n,this.telemetryService=r,this.ignoreFileService=i,this._onDidCloseRepository=new l.EventEmitter,this._onDidOpenRepository=new l.EventEmitter,this._onDidChangeState=new l.EventEmitter,this._scmProviders=[],this._state="uninitialized",this.disposable=l.Disposable.from(pe.onDidChange(this.onConfigurationChanged,this),this.providerService.onDidChangeRepositories(this.onRepositoriesChanged,this),this.providerService.onDidChangeRepository(async({repository:s})=>{const c=this.getScmProvider(x.getVirtualUri(s.uri));c!==void 0&&await this.updateStatusBarCommands(c,void 0)}),this.providerService.onDidSyncRepository(async({repository:s,syncing:c})=>{const u=this.getScmProvider(x.getVirtualUri(s.uri));u!==void 0&&(await this.updateStatusBarCommands(u,{syncing:c}),c===!1&&await this.update(s.uri))}),this.providerService.onDidRefresh(s=>{for(const c of s)this.update(c)}),this.providerService.onDidChangeChangeStore(s=>this.update(s[0].rootUri)),...this.registerCommands());const a=this.providerService.repositories;this.onRepositoriesChanged({added:a,removed:[]})}get onDidCloseRepository(){return this._onDidCloseRepository.event}get onDidOpenRepository(){return this._onDidOpenRepository.event}get onDidChangeState(){return this._onDidChangeState.event}get repositories(){return this._scmProviders.map(e=>e.repository).filter(e=>Boolean(e))}dispose(){var e;(e=this.disposable)==null||e.dispose()}get staging(){return this._staging===void 0&&(this._staging=pe.get("staging")),this._staging}get state(){return this._state}refresh(){for(const e of this._scmProviders)this.update(e.sourceControl.rootUri)}onConfigurationChanged(e){pe.changed(e,"staging")&&(this._staging=void 0,pe.changed(e,"staging.enabled")&&this.refresh()),pe.changed(e,"commitDirectlyWarning")&&this.refresh()}async onRepositoriesChanged(e){if(e.added.length)for(const n of e.added){const r=await this.update(n.uri);(r==null?void 0:r.repository)&&this._onDidOpenRepository.fire(r.repository)}if(e.removed.length)for(const n of e.removed){const r=this._scmProviders.findIndex(i=>E(i.sourceControl.rootUri)===E(n.uri));if(r!==-1){const i=this._scmProviders[r];i.repository&&this._onDidCloseRepository.fire(i.repository),i.sourceControl.dispose(),this._scmProviders.splice(r,1)}}this._state!=="initialized"&&(this._state="initialized",this._onDidChangeState.fire(this._state))}registerCommands(){return[l.commands.registerCommand("remoteHub.createPullRequest",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.createPullRequest"),void this.createPullRequest(e)}),l.commands.registerCommand("remoteHub.createDraftPullRequest",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.createDraftPullRequest"),void this.createPullRequest(e,{draft:!0})}),l.commands.registerCommand("remoteHub.commit",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.commit"),void this.commitChanges(e,{empty:!1})}),l.commands.registerCommand("remoteHub.commitEmpty",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.commitEmpty"),void this.commitChanges(e,{empty:!0})}),l.commands.registerCommand("remoteHub.discardAllChanges",async e=>{if($s(e)){const a=this.getSourceControlFrom(e);if((a==null?void 0:a.rootUri)===void 0)return;const c=e.resourceStates.filter(Wa);if(c.length!==0){if(await Vo(c))for(const u of c)await this.providerService.getChangeStore(u.resourceUri).discard(u.resourceUri),await this.closeDiffEditors(a.rootUri,[u.resourceUri]);else this.telemetryService.publicLog2("command.discardAllChanges.abort",{reason:"aborted"});return}}let n=!1;e!==void 0&&"confirmDiscard"in e&&(n=!0,e=void 0);const r=this.getSourceControlFrom(e);if((r==null?void 0:r.rootUri)===void 0)return;this.telemetryService.publicLog2("command.discardAllChanges");const i=await this.providerService.getChangeStore(r.rootUri).getChanges(r.rootUri);n||await Vo(i)?await this.providerService.getChangeStore(r.rootUri).discardAll(r.rootUri):this.telemetryService.publicLog2("command.discardAllChanges.abort",{reason:"aborted"})}),l.commands.registerCommand("remoteHub.discardChanges",async(...e)=>{const n=this.getSourceControlFrom(e[0]);if((n==null?void 0:n.rootUri)!==void 0)for(const r of e)!Wa(r)||(this.telemetryService.publicLog2("command.discardChanges"),await Vo([r])?(await this.providerService.getChangeStore(r.resourceUri).discard(r.resourceUri),await this.closeDiffEditors(n.rootUri,[r.resourceUri])):this.telemetryService.publicLog2("command.discardChanges.abort",{reason:"aborted"}))}),l.commands.registerCommand("remoteHub.stageAllChanges",async e=>{const n=this.getSourceControlFrom(e);(n==null?void 0:n.rootUri)!==void 0&&(this.telemetryService.publicLog2("command.stageAllChanges"),await this.providerService.getChangeStore(n.rootUri).stageAll(n.rootUri),await this.closeDiffEditors(n.rootUri,void 0))}),l.commands.registerCommand("remoteHub.stageChanges",async(...e)=>{var n;const r=(n=this.getSourceControlFrom(e[0]))==null?void 0:n.rootUri;if(!!r)for(const i of e)!Wa(i)||(this.telemetryService.publicLog2("command.stageChanges"),await this.providerService.getChangeStore(i.resourceUri).stage(i.resourceUri),await this.closeDiffEditors(r,[i.resourceUri]))}),l.commands.registerCommand("remoteHub.unstageAllChanges",async e=>{const n=this.getSourceControlFrom(e);(n==null?void 0:n.rootUri)!==void 0&&(this.telemetryService.publicLog2("command.unstageAllChanges"),await this.providerService.getChangeStore(n.rootUri).unstageAll(n.rootUri),await this.closeDiffEditors(n.rootUri,void 0))}),l.commands.registerCommand("remoteHub.unstageChanges",async(...e)=>{var n;const r=(n=this.getSourceControlFrom(e[0]))==null?void 0:n.rootUri;if(!!r)for(const i of e)!Wa(i)||(this.telemetryService.publicLog2("command.unstageChanges"),await this.providerService.getChangeStore(i.resourceUri).unstage(i.resourceUri),await this.closeDiffEditors(r,[i.resourceUri]))}),l.commands.registerCommand("remoteHub.keepChanges",async(...e)=>{for(const n of e)!Wa(n)||(this.telemetryService.publicLog2("command.keepChanges"),await this.providerService.getChangeStore(n.resourceUri).keep(n.resourceUri))}),l.commands.registerCommand("remoteHub.openChanges",async e=>{var n;if(e instanceof l.Uri){const i=await this.providerService.getMetadata(e),a=this.getOriginalVirtualUri(e,i);return void l.commands.executeCommand("vscode.diff",a,e,l.l10n.t("{0} (Working Tree)",j(e)))}const{command:r}=e;if(!!r)return this.telemetryService.publicLog2("command.openChanges"),void l.commands.executeCommand(r.command,...(n=r.arguments)!=null?n:[])}),l.commands.registerCommand("remoteHub.openFile",async(...e)=>{var n;for(const r of e)if(zo(r)){const i=r,a=this.providerService.getChangeStore(i.resourceUri).resolveOpenCommand(i.resourceUri,{preserveFocus:!1,preview:!1,viewColumn:l.ViewColumn.Active});this.telemetryService.publicLog2("command.openFile"),await l.commands.executeCommand(a.command,...(n=a.arguments)!=null?n:[])}else if(r instanceof l.Uri){this.telemetryService.publicLog2("command.openFile");const i=r;await l.window.showTextDocument(i)}}),l.commands.registerCommand("remoteHub.createBranch",async e=>{await di("remoteHub.createBranchFrom",{...e,fromSha:"HEAD"})}),l.commands.registerCommand("remoteHub.createBranchFrom",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await $a(this._scmProviders,l.l10n.t("Choose which repository to create a new branch on"));if(r===void 0)return;this.telemetryService.publicLog2("command.createBranchFrom");const i=await this.providerService.getMetadata(r);let a;if(i.accessLevel<le.Write&&(a=await this.providerService.getFork(r),a===void 0)){const A={title:l.l10n.t("Fork Repository")},ee={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showErrorMessage(l.l10n.t(`You don't have access to create branches on this repository.

Do you want to create a branch on a fork?`),{modal:!0},A,ee)!==A){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"no permissions and declined to fork"});return}if(a=await l.window.withProgress({location:l.ProgressLocation.Notification,title:l.l10n.t("Forking {0}...",i.name)},()=>this.providerService.fork(r)),a===void 0){l.window.showErrorMessage(l.l10n.t("Unable to fork repository.")),this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"aborted fork failed"});return}}let s,c=e==null?void 0:e.branch,u=!1;try{(!c||!w(c))&&(c=await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>Ka(this.providerService,r,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),void 0,void 0)));let A;if(e==null?void 0:e.fromSha)A=e.fromSha,A==="HEAD"&&(A=i.HEAD.sha);else{const ee=await Eo.show(this.providerService,r,l.l10n.t("Select a ref to create the new branch from"),void 0,{showHead:!0});if(!ee){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"abandoned branch picker"});return}A=ee.sha,u=Boolean(ee.useIndex)}c&&A&&(s=await this.providerService.createBranch(r,c,A,a))}catch(A){K.error(A),l.window.showErrorMessage(l.l10n.t("Unable to create the new branch."));return}if(!s){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"abandoned branch name prompt"});return}const d=await this.providerService.switchTo(a?this.providerService.createVirtualUri(r,a):r,{type:ye.Branch,id:s});if(!d)return;const f=await this.providerService.getChangeStore(r).createChangeset(r);f&&await this.openActionsService.setChangesetToApply(d.uri,f);const h=l.l10n.t("Switch to Branch"),p=l.l10n.t("Open in New Window"),te=pe.get("switchToCreatedBranch")==="always"?h:await l.window.showInformationMessage(l.l10n.t(`Created new branch '{0}'.

Any uncommitted changes will be applied to the new branch.

Do you want to switch to the new branch?`,s),{modal:!0},h,p);!te||(await this.providerService.getChangeStore(r).discardAll(r),d.location=te===p?Ve.NewWindow:Ve.CurrentWindow,u&&await pe.setMode(d.uri,de.getIndexDefault(se.Branch)),await kn(this.providerService,d,{skipChangesPrompt:!0}))}),l.commands.registerCommand("remoteHub.applyPatch",async e=>{if(e=this.getSourceControlFrom(e),(e==null?void 0:e.rootUri)===void 0)return;this.telemetryService.publicLog2("command.applyPatch");let n;const r=l.window.activeTextEditor;if((r==null?void 0:r.document.languageId)!=="diff"){const i=await l.window.showOpenDialog({openLabel:l.l10n.t("Open Patch"),title:l.l10n.t("Open Patch"),canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{Diff:["diff"],Patch:["*","patch"]}});if(i===void 0||i.length===0)return;n=dc.decode(await l.workspace.fs.readFile(i[0]))}else n=r.document.getText();try{await this.providerService.getChangeStore(e.rootUri).applyPatch(e.rootUri,n)}catch{l.window.showErrorMessage(l.l10n.t("Invalid patch file"))}}),l.commands.registerCommand("remoteHub.exportPatch",async(...e)=>{const n=Array.isArray(e)?e:[e];for(const r of n){const i=this.getSourceControlFrom(r);if((i==null?void 0:i.rootUri)===void 0)return;let a;zo(r)&&(a=r.resourceUri),this.telemetryService.publicLog2("command.exportPatch");const s=await this.providerService.getChangeStore(i.rootUri).createPatch(i.rootUri,a),c=await l.workspace.openTextDocument({language:"diff",content:s});await l.window.showTextDocument(c)}}),l.commands.registerCommand("remoteHub.switchToBranch",async e=>{var n,r;const i=(n=e==null?void 0:e.uri)!=null?n:await $a(this._scmProviders,l.l10n.t("Choose which repository to switch branches on"));if(i===void 0)return;this.telemetryService.publicLog2("command.switchToBranch");const a=[],s=await this.providerService.getMetadata(i);if(e==null?void 0:e.commands)switch(a.push(new ta(Ar({command:"remoteHub.createBranch",title:l.l10n.t("{0} Create new branch...","$(add)"),arguments:[{uri:i}]}),!0),new ta(Ar({command:"remoteHub.createBranchFrom",title:l.l10n.t("{0} Create new branch from...","$(add)"),arguments:[{uri:i}]}),!0)),s.HEAD.type){case V.Branch:a.push(new ta(Ar({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Branch on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.repo,branch:s.HEAD.branch.name}]})));break;case V.RemoteBranch:a.push(new ta(Ar({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Remote Branch on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.HEAD.branch.remote.repo,branch:s.HEAD.branch.name}]})));break;case V.Tag:a.push(new ta(Ar({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Tag on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.repo,tag:s.HEAD.detached.name}]})));break;case V.Commit:a.push(new ta(Ar({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Commit on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.repo,sha:s.HEAD.sha}]})));break}const c=(r=s.HEAD.branch)==null?void 0:r.name,u=Boolean(c&&!await this.providerService.getChangeStore(i).hasChanges(i)),d=await Eo.show(this.providerService,i,l.l10n.t("Select a branch or tag to checkout"),void 0,a,{allowResetToSha:u,filterBranches:c?f=>f.name!==c:void 0,ignoreFocusOut:!1});if(!d){this.telemetryService.publicLog2("command.switchToBranch.abort",{reason:"abandoned branch picker"});return}return d instanceof ta?void d.execute():u&&d.type===ye.Branch&&d.name===c&&d.sha?l.window.withProgress({location:l.ProgressLocation.SourceControl},async()=>{try{await this.providerService.sync(i,{to:d.sha})}catch(f){K.error(f),l.window.showErrorMessage(l.l10n.t("Unable to reset the repository to commit '{0}'.",O(d.sha)))}}):void l.window.withProgress({location:l.ProgressLocation.SourceControl},async()=>{const f=await this.providerService.switchTo(i,d.name?{type:d.type,id:d.name}:void 0);if(f!==void 0){if(d.useIndex){const h=await this.providerService.getModeRefType(f.uri);await pe.setMode(f.uri,de.getIndexDefault(h))}return kn(this.providerService,f)}})}),l.commands.registerCommand("remoteHub.fetch",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await $a(this._scmProviders,l.l10n.t("Choose which repository to fetch"));if(r!==void 0){this.telemetryService.publicLog2("command.fetch");try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.providerService.fetch(r,{force:!0}))}catch(i){l.window.showErrorMessage(l.l10n.t("Unable to fetch repository"))}}}),l.commands.registerCommand("remoteHub.fetchAll",async e=>{const n=this.providerService.repositories;if(n.length===0)return;(e==null?void 0:e.automated)||this.telemetryService.publicLog2("command.fetchAll"),(await l.window.withProgress({location:l.ProgressLocation.SourceControl},async()=>{const i=[];for(const a of n)try{await this.providerService.fetch(a.uri)}catch(s){i.push(s)}return i})).length&&!(e==null?void 0:e.automated)&&l.window.showErrorMessage(n.length?l.l10n.t("Unable to fetch repositories"):l.l10n.t("Unable to fetch repository"))}),l.commands.registerCommand("remoteHub.pull",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await $a(this._scmProviders,l.l10n.t("Choose which repository to pull"));if(r!==void 0){this.telemetryService.publicLog2("command.pull");try{await this.sync(r,{pull:!0})}catch{}}}),l.commands.registerCommand("remoteHub.sync",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await $a(this._scmProviders,l.l10n.t("Choose which repository to sync"));if(r!==void 0){this.telemetryService.publicLog2("command.sync");try{await this.sync(r)}catch{}}}),l.commands.registerCommand("remoteHub.disableCommitDirectlyWarning",()=>{this.telemetryService.publicLog2("command.disableCommitDirectlyWarning"),pe.updateEffective("commitDirectlyWarning",yt.Off)})]}async sync(e,{pull:n,...r}={pull:!1}){this.telemetryService.publicLog2("sync");try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.providerService.sync(e,r))}catch(i){if(Ze.asVirtualProviderErrorCode(i)===ie.SyncConflictsError){const a={title:l.l10n.t("Continue")},s={title:l.l10n.t("Cancel"),isCloseAffordance:!0};await l.window.showWarningMessage(n?l.l10n.t(`Pulling in changes may cause conflicts with your uncommitted changes as one of more of those files has changed since you started editing.

Do you want to continue pulling in changes.`):l.l10n.t(`Syncing changes may cause conflicts with your uncommitted changes as one of more of those files has changed since you started editing.

Do you want to continue syncing changes?`),{modal:!0},a,s)===a?await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.providerService.sync(e,{conflictResolution:ve.Merge})):this.telemetryService.publicLog2("sync.abort",{reason:"abandoned"})}else if(Ze.asVirtualProviderErrorCode(i)===ie.UnresolvedConflictsError)await l.window.showErrorMessage(n?l.l10n.t("You must resolve any pending conflicts before pulling."):l.l10n.t("You must resolve any pending conflicts before syncing."),{modal:!0});else throw K.error(i),this.telemetryService.sendException(i),l.window.showErrorMessage(l.l10n.t("Unable to sync the repository.")),i}}async commitChanges(e,n){try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.commitChangesCore(e,n))}catch(r){if(Ze.asVirtualProviderErrorCode(r)===ie.NothingToCommitError){l.window.showInformationMessage(l.l10n.t("There are no changes to commit."));return}K.error(r),l.window.showErrorMessage(l.l10n.t("Unable to commit.")),this.telemetryService.sendException(r)}}async commitChangesCore(e,n){const r=e.rootUri;this.telemetryService.publicLog2("commit",{staging:String(this.staging.enabled)});const i=new _t(`VirtualSourceControl.commitChanges(${r.toString()})`);let a;try{const s=await this.providerService.getMetadata(r);let c,u;const d=this.staging.enabled?this.staging.smart?"auto":!0:!1;for(;;){const h=e.inputBox.value;if(await this.providerService.getChangeStore(r).hasMergeConflicts(r)){e.inputBox.showValidationMessage(l.l10n.t("You must resolve any pending conflicts before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("commit.abort",{reason:"aborted conflicts"}),a=": Aborted; Unresolved conflicts";return}const p=await this.providerService.getCommitOperations(r,{staged:d});if(p.length===0&&!n.empty){e.inputBox.showValidationMessage(this.staging.enabled?l.l10n.t("There are no staged changes to commit."):l.l10n.t("There are no changes to commit."),l.SourceControlInputBoxValidationType.Information),this.telemetryService.publicLog2("commit.abort",{reason:this.staging.enabled?"aborted no staged changes":"aborted no changes"}),a=`: Aborted; No ${this.staging.enabled?"staged ":""}changes`;return}if(!h){e.inputBox.showValidationMessage(l.l10n.t("You must specify a commit message before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("commit.abort",{reason:"aborted no message"}),a=": Aborted; No message";return}let b,te;if(s.HEAD.type===V.RemoteBranch?(te=s.HEAD.branch.remote.accessLevel<le.Write,b=te&&s.accessLevel<le.Write):(b=s.accessLevel<le.Write,te=b),u===void 0&&b&&(u=await this.providerService.getFork(r),u===void 0)){const A={title:l.l10n.t("Fork Repository")},ee={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showInformationMessage(l.l10n.t("You're trying to make changes in a project you don't have write access to. Do you want to create a fork of this project to commit your proposed changes to?"),{modal:!0},A,ee)!==A){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned fork prompt"}),a=": Aborted; Abandoned fork prompt";return}if(u=await l.window.withProgress({location:l.ProgressLocation.Notification,title:l.l10n.t("Forking {0}...",s.name)},()=>this.providerService.fork(r)),u===void 0){l.window.showErrorMessage(l.l10n.t("Unable to fork repository.")),this.telemetryService.publicLog2("commit.abort",{reason:"aborted fork failed"}),a=": Aborted; Fork failed";return}}if(u||te){if(u===void 0){const me={title:l.l10n.t("Commit to a New Branch")},re={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showErrorMessage(l.l10n.t(`You're trying to make changes to a branch you don't have write access to.

Do you want to commit your changes to a new branch?`),{modal:!0},me,re)!==me){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned remote branch prompt"}),a=": Aborted; Abandoned commit to new branch prompt";return}}let A=0;try{const me=await this.providerService.getBranches(u?this.providerService.createVirtualUri(r,u):r,{query:"patch-"});for(const re of me.branches){const Pe=/^patch-(?<num>\d+)$/.exec(re.name);if(Pe==null?void 0:Pe.groups){const Fe=Number(Pe.groups.num);Fe>A&&(A=Fe)}}}catch{}const ee=await Ka(this.providerService,r,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),l.l10n.t("Commit \u2022 Create Branch \u2022 {0}",u?u.name:s.name),`patch-${A+1}`);if(ee&&(c=await this.providerService.createBranch(r,ee,s.HEAD.sha,u)),!c){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned create branch prompt"}),a=": Aborted; Abandoned create branch prompt";return}}try{await this.providerService.createAndPushCommit(r,h,p,c,n,u),await this.closeDiffEditors(r,void 0)}catch(A){const ee=Ze.asVirtualProviderErrorCode(A);if(ee===ie.DetachedHEADError){const me={title:l.l10n.t("Commit to a New Branch")},re={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showErrorMessage(l.l10n.t(`Unable to commit your changes because you are not currently on a branch.

Do you want to commit your changes to a new branch?`),{modal:!0},me,re)!==me){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head prompt"}),a=": Aborted; Abandoned commit to new branch prompt (detached head)";return}const Fe=await Ka(this.providerService,r,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),l.l10n.t("Commit \u2022 Create Branch \u2022 {0}",u?u.name:s.name));if(Fe&&(c=await this.providerService.createBranch(r,Fe,s.HEAD.sha,u)),!c){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head create branch prompt"}),a=": Aborted; Abandoned create branch prompt (detached head)";return}continue}else if(ee===ie.MergeConflictError){const me={title:l.l10n.t("Pull")},re={title:l.l10n.t("Sync (Pull & Push)")},Pe={title:l.l10n.t("Cancel"),isCloseAffordance:!0},Fe=await l.window.showErrorMessage(l.l10n.t(`Changes have been committed since you started editing, so you must merge those changes before you can commit.

Do you want to pull or sync (pull and automatically push) your changes?`),{modal:!0},me,re,Pe);if(Fe!==me&&Fe!==re){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned conflicts prompt"}),a=": Aborted; Abandoned merge changes prompt";return}if(await this.sync(r,{pull:Fe===me,conflictResolution:ve.Merge}),Fe===me){a=': Aborted; Chose "pull" from merge changes prompt';return}continue}else if(ee===ie.CommitToProtectedBranchError){const me={title:l.l10n.t("Commit to a New Branch")},re={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if((l.workspace.getConfiguration("git").get("branchProtectionPrompt")==="alwaysCommitToNewBranch"?me:await l.window.showErrorMessage(l.l10n.t(`You are trying to commit to a protected branch and you do not have permission to push your commits to the remote.

How would you like to proceed?`),{modal:!0},me,re))!==me){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head prompt"}),a=": Aborted; Abandoned commit to new branch prompt (detached head)";return}const $e=await Ka(this.providerService,r,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),l.l10n.t("Commit \u2022 Create Branch \u2022 {0}",u?u.name:s.name));if($e&&(c=await this.providerService.createBranch(r,$e,s.HEAD.sha,u)),!c){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head create branch prompt"}),a=": Aborted; Abandoned create branch prompt (detached head)";return}continue}else if(ee===ie.CommitToArchivedRepositoryError){l.window.showErrorMessage(l.l10n.t("The current repository has been archived and is now read-only. Please contact the repository owner."),{modal:!0}),this.telemetryService.publicLog2("commit.abort",{reason:"archived repository"}),a=`: Aborted; ${String(A)}`;return}else throw K.error(A),a=`: Aborted; ${String(A)}`,A}break}if(e.inputBox.value="",u?await this.providerService.getChangeStore(r).discardAll(r,{staged:d}):await this.providerService.getChangeStore(r).acceptAll(r,{staged:d}),Yo(pa.HasCommitted,!0),!u&&!c)return;async function f(){if(u){const A={title:l.l10n.t("Switch to Fork")},ee={title:l.l10n.t("Cancel"),isCloseAffordance:!0},me=await l.window.showInformationMessage(l.l10n.t("Committed changes to your fork of {0}. Do you want to switch to your fork to continue making changes?",s.name),{modal:!0},A,ee);if(this.telemetryService.publicLog2("commit.switchToFork",{confirm:String(me===A)}),me===A){let re;c!==void 0?re={type:ye.Branch,id:c}:s.HEAD.branch!==void 0&&(re={type:ye.Branch,id:s.HEAD.branch.name}),kn(this.providerService,{name:u.name,uri:this.providerService.createVirtualUri(r,{repo:u.repo,ref:re}),location:Ve.CurrentWindow})}return}const h={title:l.l10n.t("Switch to Branch")},p={title:l.l10n.t("Cancel"),isCloseAffordance:!0},b=pe.get("switchToCreatedBranch")==="always",te=b?h:await l.window.showInformationMessage(l.l10n.t("Committed changes to new branch '{0}'. Do you want to switch to the new branch to continue making changes?",c),{modal:!0},h,p);this.telemetryService.publicLog2("commit.switchToBranch",{confirm:String(te===h),autoConfirm:String(b)}),te===h&&kn(this.providerService,{name:s.name,uri:this.providerService.createVirtualUri(r,{repo:s.repo,ref:c?{type:ye.Branch,id:c}:void 0}),location:Ve.CurrentWindow})}o(f,"showSwitchToPrompt"),f.call(this)}finally{i.stop(a?{message:a}:void 0)}}async createPullRequest(e,n){try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.createPullRequestCore(e,n))}catch(r){const i=Ze.asVirtualProviderErrorCode(r);if(i===ie.NothingToCommitError){l.window.showInformationMessage(l.l10n.t("There are no changes to commit."));return}if(i===ie.CommitFailedError){l.window.showErrorMessage(l.l10n.t("Unable to commit."));return}K.error(r),l.window.showErrorMessage(l.l10n.t("Unable to open a pull request.")),this.telemetryService.sendException(r)}}async createPullRequestCore(e,n){var r;const i=e.rootUri,a=(r=n==null?void 0:n.draft)!=null?r:!1;this.telemetryService.publicLog2("createPullRequest",{draft:String(a),staging:String(this.staging.enabled)});const s=new _t(`VirtualSourceControl.createPullRequest(${i.toString()})`);let c;try{let u=o(function(){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned branch prompt"}),c=": Aborted; Abandoned commit to new branch prompt"},"handleBranchNotCreated"),d;const f=this.staging.enabled?this.staging.smart?"auto":!0:!1;if(!(n==null?void 0:n.sha)){if(await this.providerService.getChangeStore(i).hasMergeConflicts(i)){e.inputBox.showValidationMessage(l.l10n.t("You must resolve any pending conflicts before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted conflicts"}),c=": Aborted; Unresolved conflicts";return}if(d=await this.providerService.getCommitOperations(i,{staged:this.staging.enabled?this.staging.smart?"auto":!0:!1}),d.length===0){e.inputBox.showValidationMessage(this.staging.enabled?l.l10n.t("There are no staged changes to commit."):l.l10n.t("There are no changes to commit."),l.SourceControlInputBoxValidationType.Information),this.telemetryService.publicLog2("createPullRequest.abort",{reason:this.staging.enabled?"aborted no staged changes":"aborted no changes"}),c=`: Aborted; No ${this.staging.enabled?"staged ":""}changes`;return}}const h=e.inputBox.value;if(!h){e.inputBox.showValidationMessage(l.l10n.t("You must specify a commit message before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted no message"}),c=": Aborted; No message";return}const p=await this.providerService.getMetadata(i);let b,te;p.HEAD.type===V.RemoteBranch?(te=p.HEAD.branch.remote.accessLevel<le.Write,b=te&&p.accessLevel<le.Write):(b=p.accessLevel<le.Write,te=b);let A=n==null?void 0:n.fork;if(A===void 0&&b&&(A=await this.providerService.getFork(i),A===void 0)){const je={title:l.l10n.t("Fork Repository")},it={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showInformationMessage(l.l10n.t(`You're trying to make changes in a project you don't have write access to.

Do you want to create a fork of this project to commit your proposed changes to?`),{modal:!0},je,it)!==je){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned fork prompt"}),c=": Aborted; Abandoned fork prompt";return}if(A=await l.window.withProgress({location:l.ProgressLocation.Notification,title:l.l10n.t("Forking {0}...",p.name)},()=>this.providerService.fork(i)),A===void 0){l.window.showErrorMessage(l.l10n.t("Unable to fork repository.")),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted fork failed"}),c=": Aborted; Fork failed";return}}const ee=h.trimStart().split(`
`),me=await l.window.showInputBox({ignoreFocusOut:!0,placeHolder:l.l10n.t("New pull request title"),prompt:l.l10n.t("Please provide a title for the new pull request"),value:ee[0]});if(!me){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned title prompt"}),c=": Aborted; Abandoned title prompt";return}async function re(je){let it=0;try{const Qt=await this.providerService.getBranches(A?this.providerService.createVirtualUri(i,A):i,{query:"patch-"});for(const an of Qt.branches){const $t=/^patch-(?<num>\d+)$/.exec(an.name);if($t==null?void 0:$t.groups){const dn=Number($t.groups.num);dn>it&&(it=dn)}}}catch{}const Je=await Ka(this.providerService,i,l.l10n.t("Create a new branch for this pull request"),l.l10n.t("New branch name"),l.l10n.t("New Pull Request \u2022 Create Branch \u2022 {0}",A?A.name:p.name),`patch-${it+1}`);let xt;return Je&&(xt=await this.providerService.createBranch(i,Je,je,A)),xt}o(re,"createBranch");const Pe=await re.call(this,p.HEAD.sha);if(!Pe){u.call(this);return}(d==null?void 0:d.length)&&await this.providerService.createAndPushCommit(i,h,d,Pe,void 0,A);const Fe=await this.providerService.createPullRequest(i,Pe,me,ee.slice(1).join(`
`),{draft:a},A);e.inputBox.value="",(d==null?void 0:d.length)&&(A?await this.providerService.getChangeStore(i).discardAll(i,{staged:f}):await this.providerService.getChangeStore(i).acceptAll(i,{staged:f}));async function $e(){const je={title:l.l10n.t("Switch to Pull Request")},it={title:l.l10n.t("Cancel"),isCloseAffordance:!0},Je=await l.window.showInformationMessage(l.l10n.t("Created pull request #{0} in {1}. Do you want to switch to the new pull request?",Fe.id,p.name),{modal:!0},je,it);this.telemetryService.publicLog2("commit.switchToPullRequest",{confirm:String(Je===je)}),Je===je&&kn(this.providerService,{name:p.name,uri:this.providerService.createVirtualUri(i,{repo:p.repo,ref:{type:ye.PullRequest,id:Fe.id}}),location:Ve.CurrentWindow})}o($e,"showSwitchToPrompt"),$e.call(this)}finally{s.stop(c?{message:c}:void 0)}}async update(e){const n=l.workspace.getWorkspaceFolder(e);if(n===void 0)return;const r=await this.providerService.getMetadata(e),i=await this.createOrUpdateScmProvider(e,n.name),a=await this.ignoreFileService.getIgnoreFile(e,!1),s=await this.providerService.getChangeStore(e).getGroupedChanges(e,{predicate:f=>f.fileType===l.FileType.File}),c=await Promise.all(s.conflicts.filter(f=>a?!a.isArbitraryPathIgnored(f.uri.path,!1):!0).map(async f=>({type:f.type,resourceUri:f.uri,command:await this.providerService.getChangeStore(f.uri).resolveDiffCommand(f.uri,f.conflicts.incomingUri,l.l10n.t("{0} (Incoming Changes \u2194 Current Changes)",j(f.uri)))}))),u=await Promise.all(s.staged.filter(f=>a?!a.isArbitraryPathIgnored(f.uri.path,!1):!0).map(async f=>({type:f.type,resourceUri:f.uri,command:await this.providerService.getChangeStore(f.uri).resolveDiffCommand(f.uri,this.getOriginalVirtualUri(f.uri,r),l.l10n.t("{0} (Index)",j(f.uri)))}))),d=await Promise.all(s.working.filter(f=>a?!a.isArbitraryPathIgnored(f.uri.path,!1):!0).map(async f=>({type:f.type,resourceUri:f.uri,decorations:{strikeThrough:f.type===D.Deleted},command:await this.providerService.getChangeStore(f.uri).resolveDiffCommand(f.uri,this.getOriginalVirtualUri(f.uri,r),l.l10n.t("{0} (Working Tree)",j(f.uri)))})));return i.sourceControl.actionButton=this.ensureActionButton(e),this.ensureMergeConflictsGroup(i).resourceStates=c,this.ensureStagedChangesGroup(i).resourceStates=this.staging.enabled?u:[],this.ensureWorkingChangesGroup(i).resourceStates=this.staging.enabled?d:[...u,...d],i}getOriginalVirtualUri(e,n){return this.providerService.createVirtualUri(x.getProviderId(e),{repo:n.repo,ref:{type:ye.Commit,id:n.HEAD.sha}},this.providerService.getRelativeFilePath(e))}ensureActionButton(e){var n,r;const i=(n=this.providerService.getRegisteredProvider(e))==null?void 0:n.name;return{command:{title:l.l10n.t("Commit & Push"),tooltip:i!==void 0?l.l10n.t("Your changes will be committed and pushed directly to {0}.",i):l.l10n.t("Your changes will be committed and pushed directly to the remote."),command:"remoteHub.commit"},secondaryCommands:[[{title:l.l10n.t("Continue Working On..."),tooltip:l.l10n.t("Bring your working changes with you to a new development environment."),command:"remoteHub.continueOn"}]],enabled:(r=this.providerService.changeStoreMaybeHasChanges(e))!=null?r:!0}}async createOrUpdateScmProvider(e,n){var r,i;const a=await this.providerService.getMetadata(e);let s;const c=a.HEAD.branch?a.HEAD.name:void 0;let u=this.getScmProvider(e);if(u===void 0){n=a.name,s=l.scm.createSourceControl(`remoteHub:${a.provider.id}`,n,e),s.quickDiffProvider={provideOriginalResource:f=>x.getProviderUri(f)};const d=this.providerService.createIGitRepository(e,s,a);u={id:a.provider.id,name:a.provider.name,sourceControl:s,groups:[],repository:d},this.ensureMergeConflictsGroup(u),this.ensureStagedChangesGroup(u),this.ensureWorkingChangesGroup(u),this._scmProviders.push(u)}else s=u.sourceControl;return a.accessLevel>=le.Write||((i=(r=a.HEAD.branch)==null?void 0:r.remote)==null?void 0:i.accessLevel)!==void 0&&a.HEAD.branch.remote.accessLevel>=le.Write?(s.acceptInputCommand={command:"remoteHub.commit",title:l.l10n.t("Commit"),arguments:[s]},c?s.inputBox.placeholder=l.l10n.t("Message (Ctrl+Enter to commit and push to '{0}' on {1})",c,a.provider.name):s.inputBox.placeholder=l.l10n.t("Message (Ctrl+Enter to commit and push to {0})",a.provider.name),pe.get("commitDirectlyWarning")===yt.Off?s.inputBox.validateInput=void 0:s.inputBox.validateInput=d=>{if(pe.get("commitDirectlyWarning")===yt.Auto&&tl(pa.HasCommitted))return;const f=new l.MarkdownString(c?l.l10n.t("Your changes will be committed and immediately pushed to the '{0}' branch on {1}.",c,a.provider.name):l.l10n.t("Your changes will be committed and immediately pushed to {0}.",a.provider.name)),h="remoteHub.disableCommitDirectlyWarning";return f.isTrusted={enabledCommands:[h]},f.appendMarkdown(`&nbsp; [${l.l10n.t("Don't show again")}](command:${h} '${l.l10n.t("Hide")}')`),{message:f,type:l.SourceControlInputBoxValidationType.Information}}):(s.acceptInputCommand={command:"remoteHub.createPullRequest",title:l.l10n.t("Create a Pull Request"),arguments:[s]},s.inputBox.placeholder=l.l10n.t("Message (Ctrl+Enter to create a pull request for '{0}')",n)),await this.updateStatusBarCommands(u,{syncing:!1},a),u}async updateStatusBarCommands(e,n,r){var i,a,s,c,u;const d=e.sourceControl.rootUri;r=r!=null?r:await this.providerService.getMetadata(d);const{HEAD:f}=r,h=await this.providerService.getIndexMetadata(d),p=(h==null?void 0:h.type)===De.Active,b=(h==null?void 0:h.type)===De.Active,te=De.hasIndex(h==null?void 0:h.type),A=await this.providerService.getChangeStore(d).hasChanges(d),ee=(a=f.type===V.Branch&&((i=await this.providerService.getBranch(d,f.branch.name))==null?void 0:i.locked)?"$(lock)":void 0)!=null?a:Oi(f.type),me=[];if(me.push(Ar({command:"remoteHub.switchToBranch",title:`${ee} ${f.name}${A?"*":""}`,tooltip:`${O(f.sha)}`,arguments:[{uri:d,commands:!0}]})),f.detached||((n==null?void 0:n.syncing)?me.push(Ar({command:"",title:"$(sync~spin)",tooltip:l.l10n.t("Syncing Changes..."),arguments:[]})):me.push(Ar({command:"remoteHub.sync",title:`$(sync)${((c=(s=r.state)==null?void 0:s.behind)!=null?c:0)>0?` ${(u=r.state)==null?void 0:u.behind}\u2193`:""}`,tooltip:p||b?l.l10n.t("Sync to latest indexed commit"):l.l10n.t("Sync (Pull & Push)"),arguments:[{uri:d}]}))),r.pullRequest&&me.push(Ar({command:"remoteHub.openOnRemote",title:`$(git-pull-request) ${r.pullRequest.id}`,tooltip:l.l10n.t(`Open Pull Request #{0} on {1}

{2}`,r.pullRequest.id,r.provider.name,r.pullRequest.title),arguments:[{provider:r.provider,repo:r.repo,pullRequest:{id:r.pullRequest.id}}]})),te){const re=this.providerService.getIndexProvider(d);re&&me.push(...await re.getStatusBarContributions(d))}e.sourceControl.statusBarCommands=me}ensureMergeConflictsGroup(e){const n="conflicts";let r=e.groups.find(i=>i.id===n);return r===void 0&&(r=e.sourceControl.createResourceGroup(n,l.l10n.t("Merge Conflicts")),r.hideWhenEmpty=!0,e.groups.push(r)),r}ensureStagedChangesGroup(e){const n="staged";let r=e.groups.find(i=>i.id===n);return r===void 0&&(r=e.sourceControl.createResourceGroup(n,l.l10n.t("Staged Changes")),r.hideWhenEmpty=!0,e.groups.push(r)),r}ensureWorkingChangesGroup(e){const n="changes";let r=e.groups.find(i=>i.id===n);return r===void 0&&(r=e.sourceControl.createResourceGroup(n,l.l10n.t("Changes")),e.groups.push(r)),r}getScmProvider(e){const n=E(e);return this._scmProviders.find(r=>E(r.sourceControl.rootUri)===n)}getSourceControlFrom(e){if(e===void 0){if(this._scmProviders.length!==1)return;e=this._scmProviders[0].sourceControl}let n;if(fc(e))n=e;else if($s(e)){const r=e,i=this._scmProviders.find(a=>a.groups.find(s=>s.id===r.id));n=i==null?void 0:i.sourceControl}else if(zo(e)){const r=e,i=this._scmProviders.find(a=>a.groups.some(s=>s.resourceStates.find(c=>c.resourceUri.toString()===r.resourceUri.toString())));n=i==null?void 0:i.sourceControl}else{if(this._scmProviders.length!==1)return;n=this._scmProviders[0].sourceControl}return n}async closeDiffEditors(e,n){if(!l.workspace.getConfiguration("git",e).get("closeDiffOnOperation",!1))return;const i=[];for(const a of l.window.tabGroups.all.map(s=>s.tabs).flat()){const{input:s}=a;(s instanceof l.TabInputTextDiff||s instanceof l.TabInputNotebookDiff)&&s.modified.scheme===x.scheme&&(!n||n.some(c=>c.path===s.modified.path))&&i.push(a)}await l.window.tabGroups.close(i,!0)}}o(Ws,"VirtualSourceControl");function fc(t){return"rootUri"in t&&"inputBox"in t}o(fc,"isSourceControl");function $s(t){return t!==void 0&&"id"in t&&"label"in t&&"resourceStates"in t&&Array.isArray(t.resourceStates)}o($s,"isSourceControlResourceGroup");function zo(t){return t!==void 0&&"resourceUri"in t&&t.resourceUri instanceof l.Uri}o(zo,"isSourceControlResourceState");function Wa(t){return"type"in t}o(Wa,"isTrackedChange");async function Vo(t){var e,n,r;if(t.length===0)return!0;let i,a=l.l10n.t("Discard Changes");if(t.length===1){const c=t[0];c.type===D.Created?(i=l.l10n.t(`Are you sure you want to DELETE {0}?
This is IRREVERSIBLE!
This file will be FOREVER LOST.`,j((e=c.resourceUri)!=null?e:c.uri)),a=l.l10n.t("Delete file")):c.type===D.Deleted?(a=l.l10n.t("Restore file"),i=l.l10n.t("Are you sure you want to restore {0}?",j((n=c.resourceUri)!=null?n:c.uri))):i=l.l10n.t("Are you sure you want to discard changes in {0}?",j((r=c.resourceUri)!=null?r:c.uri))}else t.every(c=>c.type===D.Created)?i=l.l10n.t(`Are you sure you want to DELETE {0} files?
This is IRREVERSIBLE!
These files will be FOREVER LOST.`,t.length):t.every(c=>c.type===D.Deleted)?(a=l.l10n.t("Restore files"),i=l.l10n.t("Are you sure you want to restore {0} files?",t.length)):i=l.l10n.t("Are you sure you want to discard changes in {0} files?",t.length);return await l.window.showWarningMessage(i,{modal:!0},a)===a}o(Vo,"confirmDiscard");async function $a(t,e,n){if(t.length===0)return;if(t.length===1)return t[0].sourceControl.rootUri;const r=await l.window.showQuickPick(t.map(({sourceControl:i})=>({label:i.label,uri:i.rootUri})),{placeHolder:e,title:n});if(!!r)return r.uri}o($a,"getOrPickRootUri");async function Ka(t,e,n,r,i,a){let s;const c=l.window.createInputBox();c.ignoreFocusOut=!0;try{return await new Promise(u=>{s=l.Disposable.from(c.onDidHide(()=>u(void 0)),c.onDidChangeValue(d=>{if(d=d.trim(),!d){c.validationMessage=l.l10n.t("Please enter a valid branch name");return}if(!w(d)){c.validationMessage=l.l10n.t("'{0}' isn't a valid branch name",d);return}c.validationMessage=void 0}),c.onDidAccept(async()=>{const d=c.value.trim();if((await t.getBranches(e,{query:d,limit:100})).branches.some(h=>h.name===d)){c.validationMessage=l.l10n.t("Branch '{0}' already exists",d);return}c.enabled=!1,c.busy=!0,u(d)})),c.prompt=n,c.placeholder=r,c.title=i,c.value=hc(a),c.show()})}finally{c.dispose(),s==null||s.dispose()}}o(Ka,"getBranchNameWithPrompt");function hc(t){const e=l.workspace.getConfiguration("git"),n=e.get("branchPrefix","");if(!t&&e.get("branchRandomName.enable",!1)===!0){const r=gc();return`${n}${r}`}return`${n}${t!=null?t:""}`}o(hc,"generateBranchName");function gc(){const t=l.workspace.getConfiguration("git"),e=t.get("branchRandomName.dictionary",["adjectives","animals"]),n=[];for(const r of e)r.toLowerCase()==="adjectives"&&n.push(lc),r.toLowerCase()==="animals"&&n.push(cc),r.toLowerCase()==="colors"&&n.push(uc),r.toLowerCase()==="numbers"&&n.push(Us.generate({length:3}));return n.length===0?"":sc({dictionaries:n,length:n.length,separator:t.get("branchWhitespaceChar","-")})}o(gc,"generateRandomBranchName");class Ks{constructor(e){this.providerService=e,this.id="remoteHubVsCodeDevLink",this.label="Copy vscode.dev Link",this.priority=10,l.env.appHost!=="codespaces"&&l.env.appHost!=="github.dev"&&l.window.registerShareProvider!==void 0&&(this._shareProviderRegistration=l.window.registerShareProvider({scheme:x.scheme},this))}dispose(){var e;(e=this._shareProviderRegistration)==null||e.dispose()}async provideShare(e){var n;const r=this.providerService.getRepository(e.resourceUri);if(!r)return;const i=this.providerService.getRelativeFilePath(r.uri,e.resourceUri),a=await this.providerService.getMetadata(r.uri),s=((n=a.HEAD.branch)==null?void 0:n.name)===a.defaultBranch.name||a.pullRequest?await this.providerService.getBestRemoteUri(r.uri,X.Branch,i,e):await this.providerService.getBestRemoteUri(r.uri,void 0,i,e);if(s!==void 0)return l.Uri.parse(`https://${Pr()}/${s.authority}${Y(s.path)}${s.fragment?`#${s.fragment}`:""}${s.query?`?${s.query}`:""}`)}}o(Ks,"RemoteHubShareProvider");class Ji extends l.TimelineItem{static is(e){return e instanceof Ji}constructor(e,n,r,i,{dateType:a,showAuthor:s,dateFormatter:c}){var u;const d=r.message.indexOf(`
`),f=d!==-1?`${r.message.substring(0,d)} \u2026`:r.message,h=a==="authored"?r.authorDate:r.commitDate;super(f,(u=h==null?void 0:h.getTime())!=null?u:0);this.id=r.hash,this.contextValue=`${x.scheme}:${n}:file:commit`,this.command=i,s&&(this.description=r.authorName),this.tooltip=vc(r,c,h),this.iconPath=new l.ThemeIcon("git-commit"),this.rootUri=e,this.providerId=n,this.hash=r.hash,this.parents=r.parents,this.message=r.message}}o(Ji,"CommitTimelineItem");function vc(t,e,n){return t.authorName&&t.authorEmail?l.l10n.t(`{0} ({1}) \u2014 {2}
{3}

{4}`,t.authorName,t.authorEmail,O(t.hash),e.format(n),t.message):t.authorName&&!t.authorEmail?l.l10n.t(`{0} \u2014 {1}
{2}

{3}`,t.authorName,O(t.hash),e.format(n),t.message):l.l10n.t(`{0}
{1}

{2}`,O(t.hash),e.format(n),t.message)}o(vc,"getCommitTooltip");class va extends l.TimelineItem{static is(e){return e instanceof va}constructor(e,n,r,i,a,{dateFormatter:s}){const c=l.l10n.t("Staged Changes");super(c,r.timestamp);this.id="index",this.contextValue=`${x.scheme}:${n}:file:${this.id}`,this.command=a,this.iconPath=new l.ThemeIcon("git-commit"),this.tooltip=l.l10n.t(`{0}  \u2014 {1}
{2}

{3}`,l.l10n.t("You"),l.l10n.t("Index"),s.format(new Date(r.timestamp)),Kl(r.type)),this.rootUri=e,this.providerId=n,this.hash="~",this.parents=i,this.message=c}}o(va,"ChangeOperationTimelineItem");class Gs{constructor(e){this.providerService=e,this._onDidChange=new l.EventEmitter,this.id="github-file-history",this.label=l.l10n.t("GitHub File History"),this.debouncer=new Or(500),this.disposable=l.Disposable.from(this.debouncer,e.onDidChangeProviders(this.onProvidersChanged,this),e.onDidChangeRepositories(this.onRepositoriesChanged,this),e.onDidChangeRepository(this.onRepositoryChanged,this),e.onDidRefresh(this.onRefresh,this),e.onDidChangeChangeStore(this.onUrisChanged,this),pe.onDidChangeAny(this.onConfigurationChanged,this),...this.registerCommands()),e.hasProviders&&this.ensureProviderRegistration()}get onDidChange(){return this._onDidChange.event}dispose(){var e;(e=this.providerDisposable)==null||e.dispose(),this.disposable.dispose()}onConfigurationChanged(e){(e.affectsConfiguration("git.timeline.date")||e.affectsConfiguration("git.timeline.showAuthor"))&&this.fireChanged()}onProvidersChanged(e){this.ensureProviderRegistration(),this.fireChanged()}onRefresh(e){if(this.rootUri===void 0)return;const n=E(this.rootUri);!e.some(r=>E(r)===n)||this.fireChanged()}onRepositoriesChanged(e){if(this.rootUri===void 0)return;const n=E(this.rootUri);(e.added.some(r=>E(r.uri)===n)||e.removed.some(r=>E(r.uri)===n))&&this.fireChanged()}onRepositoryChanged(e){this.rootUri===void 0||E(this.rootUri)!==E(e.repository.uri)||this.fireChanged()}onUrisChanged(e){if(this.rootUri===void 0)return;const n=E(this.rootUri);e.some(r=>E(r.rootUri)===n)&&this.fireChanged()}async provideTimeline(e,n,r){var i;try{this.rootUri=this.providerService.getVirtualRootUri(e);for(const te of this.providerService.repositories)if(te.uri.path===this.rootUri.path){this.rootUri=te.uri;break}const a=this.providerService.getRelativeFilePath(this.rootUri,e),s=await this.providerService.getMetadata(this.rootUri);if(!s||r.isCancellationRequested)return{items:[]};const c=await this.providerService.getCommits(this.rootUri,{ref:s.HEAD.sha,path:a||void 0,cursor:n.cursor,limit:typeof n.limit=="number"?n.limit:void 0});if(c===void 0||c.commits.length===0||r.isCancellationRequested)return{items:[]};const u=((i=c.paging)==null?void 0:i.more)?{cursor:c.paging.cursor}:void 0,d=new Intl.DateTimeFormat(l.env.language,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),f=pe.getAny("git.timeline.date",void 0,"committed"),h=pe.getAny("git.timeline.showAuthor",void 0,!0),p=await Promise.all(c.commits.map(async te=>new Ji(this.rootUri,s.provider.id,te,await this.resolveDiffCommand(te,s,e,a),{dateType:f,showAuthor:h,dateFormatter:d}))),b=n.cursor===void 0?await this.providerService.changeStoreGetChange(e):void 0;if(b&&Boolean(b.staged&&pe.get("staging.enabled"))){const A=new va(this.rootUri,s.provider.id,b,[c.commits[0].hash],await this.providerService.changeStoreResolveDiffCommand(b.uri,x.getProviderUri(b.uri),l.l10n.t("{0} (Index)",j(b.uri))),{dateFormatter:d});p.splice(0,0,A)}return{items:p,paging:u}}catch(a){return K.error(a),{items:[]}}}ensureProviderRegistration(){this.providerDisposable===void 0&&(this.providerDisposable=l.workspace.registerTimelineProvider([Gn.scheme,...this.providerService.registeredProviders.map(e=>e.id)],this))}fireChanged(){this.debouncer.debounce(()=>this._onDidChange.fire(void 0))}registerCommands(){let e;return[l.commands.registerCommand("remoteHub.timeline.copyCommitId",(n,r,i)=>{!Ji.is(n)||l.env.clipboard.writeText(n.hash)}),l.commands.registerCommand("remoteHub.timeline.copyCommitMessage",(n,r,i)=>{!Ji.is(n)||l.env.clipboard.writeText(n.message)}),l.commands.registerCommand("remoteHub.timeline.openDiff",async(n,r,i)=>{var a;!Ji.is(n)&&!va.is(n)||n.command!==void 0&&await l.commands.executeCommand(n.command.command,...(a=n.command.arguments)!=null?a:[])}),l.commands.registerCommand("remoteHub.timeline.openOnGitHub",async n=>{await this.openOnRemote(n)}),l.commands.registerCommand("remoteHub.timeline.openOnAzureRepos",async n=>{await this.openOnRemote(n)}),l.commands.registerCommand("remoteHub.timeline.selectForCompare",async(n,r,i)=>{!r||!Ji.is(n)&&!va.is(n)||(e={uri:r,left:n},await l.commands.executeCommand("setContext","remoteHub.timeline.selectedForCompare",!0))}),l.commands.registerCommand("remoteHub.timeline.compareWithSelected",async(n,r,i)=>{if(!r||!e||!Ji.is(n)&&!va.is(n)||E(r)!==E(e.uri))return;const{left:a}=e,s=this.providerService.getRelativeFilePath(n.rootUri,r),c=await this.providerService.getMetadata(n.rootUri),u=j(r),d=a.parents[0];let f;d===void 0?f=l.l10n.t("{0} ({1})",u,O(n.hash)):a.hash===""?f=l.l10n.t("{0} (Working Tree)",u):a.hash==="~"?f=l.l10n.t("{0} (Index)",u):f=l.l10n.t("{0} ({1})",u,O(a.hash));let h=a.hash===""||a.hash==="~"?r:this.providerService.createProviderUri(r,{repo:c.repo,ref:{type:ye.Commit,id:d!=null?d:"0000000000000000000000000000000000000000"}},s);d===void 0&&(h=h.with({query:"~"}));const p=n.parents[0];let b;p===void 0?b=l.l10n.t("{0} ({1})",u,O(n.hash)):p==="~"&&n.hash===""?b=l.l10n.t("{0} (Working Tree)",u):n.hash==="~"?b=l.l10n.t("{0} (Index)",u):b=l.l10n.t("{0} ({1})",u,O(n.hash));const te=l.l10n.t("{0} \u27F7 {1}",f,b),A=n.hash===""||n.hash==="~"?r:this.providerService.createProviderUri(r,{repo:c.repo,ref:{type:ye.Commit,id:n.hash}},s);await l.commands.executeCommand("vscode.diff",h,A,te)})]}async resolveDiffCommand(e,n,r,i,a){const s=j(r);let c=e.parents[0],u=this.providerService.createProviderUri(r,{repo:n.repo,ref:{type:ye.Commit,id:c!=null?c:"0000000000000000000000000000000000000000"}},i);try{await this.providerService.stat(u)}catch(h){c=void 0}let d;c===void 0?d=l.l10n.t("{0} ({1})",s,O(e.hash)):e.hash===""?d=l.l10n.t("{0} (Working Tree)",s):e.hash==="~"?d=l.l10n.t("{0} (Index)",s):d=l.l10n.t("{0} ({1}) \u27F7  {0} ({2})",s,O(c),O(e.hash)),c===void 0&&(u=u.with({query:"~"}));const f=e.hash===""||e.hash==="~"?r:this.providerService.createProviderUri(r,{repo:n.repo,ref:{type:ye.Commit,id:e.hash}},i);return{command:"vscode.diff",title:"Open Comparison",arguments:[u,f,d,a]}}async openOnRemote(e){if(!Ji.is(e))return;const n=await this.providerService.getMetadata(e.rootUri);await di("remoteHub.openOnRemote",{provider:n.provider,repo:n.repo,sha:e.hash})}}o(Gs,"VirtualTimelineProvider");class zs{constructor(e,n){this.providerService=e,this.telemetryService=n,this.disposable=l.window.registerUriHandler(this)}dispose(){this.disposable.dispose()}async handleUri(e){var n;const r=new _t(`RemoteUriHandler.handleUri(${e.path}, ${e.toString()})`);await Fr(this.providerService,void 0);try{switch(e.path){case"/open":{this.telemetryService.publicLog2("handleUri.open");let i,a;for(const c of e.query.split("&")){const[u,d]=c.split("=");switch(u){case"url":i=decodeURIComponent(d);break;case"location":a=d===Ve.CurrentWindow?Ve.CurrentWindow:Ve.NewWindow;break}}if(!i){r.log({message:": Unable to find url parameter"}),this.telemetryService.publicLog2("handleUri.open.abort",{reason:"aborted url not found"});return}i=i.trim(),a=a!=null?a:Ve.NewWindow;const s=await this.providerService.createWorkspaceForRemoteUrl(i,void 0,a);if(!s){r.log({message:`: Unable to open workspace for ${i}`}),this.telemetryService.publicLog2("handleUri.open.abort",{reason:"aborted invalid url"});const c=l.l10n.t("Show Extensions");l.window.showErrorMessage(l.l10n.t(`Unable to open ${i}.
You may need to install or enable additional extensions.`),c).then(u=>{u===c&&l.commands.executeCommand("workbench.view.extensions",`${qo.join(" ")}`)});return}r.log({message:`: Opening ${i} in ${a}`}),kn(this.providerService,s);break}case"/open-files":{let i;for(const s of e.query.split("&")){const[c,u]=s.split("=");if(c==="url"){i=decodeURIComponent(u);break}}if(!i){r.log({message:": Unable to find url parameter"});return}i=i.trim();const a=await this.providerService.createWorkspaceForRemoteUrl(i);if(!a){r.log({message:`: Unable to open files/folders for ${i}`});return}a.filesToOpen?(r.log({message:`: Opening files/folders for ${i}`}),await((n=Ro())==null?void 0:n.openPendingFiles(a.uri,a.filesToOpen))):r.log({message:`: No files/folders found to open for ${i}`});break}default:{r.log({message:`: Unknown Uri ${e.toString()}`});break}}}finally{r.stop()}}}o(zs,"RemoteUriHandler");var pc=Object.defineProperty,mc=Object.getOwnPropertyDescriptor,yc=o((t,e,n,r)=>{for(var i=r>1?void 0:r?mc(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&pc(e,n,i),i},"view_decorateClass"),Ca;(function(t){t.Change="remoteHub:viewItem:change",t.WorkspaceRepository="remoteHub:viewItem:workspaceRepository",t.WorkspaceRepositories="remoteHub:viewItem:workspaceRepositories",t.Message="remoteHub:viewItem:message"})(Ca||(Ca={}));const Vs=o(class{constructor(t,e){this.view=t,this.parent=e,this.splatted=!1}static is(t){return t instanceof Vs}get id(){}toString(){return`${K.toLoggableName(this)}${this.id!==void 0?`(${this.id})`:""}`}getParent(){var t,e;return((t=this.parent)==null?void 0:t.splatted)?(e=this.parent)==null?void 0:e.getParent():this.parent}triggerChange(t=!1,e=!1,n){return this.splatted&&this.parent!==void 0&&this.parent!==n?this.parent.triggerChange(t,e):this.view.refreshNode(this,t,e)}},"_ViewNode");let ba=Vs;yc([nn((t=!1,e=!1,n)=>JSON.stringify([t,e,n==null?void 0:n.toString()]))],ba.prototype,"triggerChange",1);class Js{constructor(e,n,r,i){this.id=e,this.name=n,this.providerService=r,this.telemetryService=i,this._onDidChangeTreeData=new l.EventEmitter,this.disposables=[];const a=!1;if(K.isDebugging&&a){const s=this.getTreeItem;this.getTreeItem=async function(c){var u;const d=await s.apply(this,[c]),f=c.getParent();return d.tooltip===void 0&&(d.tooltip=new l.MarkdownString(d.label!==void 0&&typeof d.label!="string"?d.label.label:(u=d.label)!=null?u:"")),typeof d.tooltip=="string"?d.tooltip=`${d.tooltip}

---
context: ${d.contextValue}
node: ${c.toString()}${f!==void 0?`
parent: ${f.toString()}`:""}`:d.tooltip.appendMarkdown(`

---

context: \`${d.contextValue}\`\\
node: \`${c.toString()}\`${f!==void 0?`\\
parent: \`${f.toString()}\``:""}`),d}}this.disposables.push(...this.registerCommands()),this.initialize({showCollapseAll:this.showCollapseAll}),setTimeout(()=>this.onConfigurationChanged(),0)}get onDidChangeTreeData(){return this._onDidChangeTreeData.event}get showCollapseAll(){return!0}filterConfigurationChanged(e){return!!pe.changed(e,`views.${this.configKey}`)}dispose(){l.Disposable.from(...this.disposables).dispose()}get title(){return this._title}set title(e){this._title=e,this.tree!==void 0&&(this.tree.title=e)}get description(){return this._description}set description(e){this._description=e,this.tree!==void 0&&(this.tree.description=e)}get message(){return this._message}set message(e){this._message=e,this.tree!==void 0&&(this.tree.message=e)}getQualifiedCommand(e){return`${this.id}.${e}`}onConfigurationChanged(e){e!==void 0&&this.root!==void 0&&this.refresh(!0)}initialize(e={}){this.tree=l.window.createTreeView(this.id,{...e,treeDataProvider:this}),this.disposables.push(pe.onDidChange(n=>{!this.filterConfigurationChanged(n)||(this._config=void 0,this.onConfigurationChanged(n))},this),this.tree),this._title=this.tree.title}ensureRoot(e=!1){return(this.root===void 0||e)&&(this.telemetryService.publicLog2("view.open",{view:this.id}),this.root=this.getRoot()),this.root}async getChildren(e){return e!==void 0?e.getChildren():(await Fr(this.providerService,void 0),this.ensureRoot().getChildren())}getParent(e){return e.getParent()}getTreeItem(e){return e.getTreeItem()}get selection(){return this.tree===void 0||this.root===void 0?[]:[...this.tree.selection]}get visible(){return this.tree!==void 0?this.tree.visible:!1}async refresh(e=!1){var n,r;await((r=(n=this.root)==null?void 0:n.refresh)==null?void 0:r.call(n,e)),this.triggerNodeChange()}async refreshNode(e,n=!1,r=!1){var i;const a=await((i=e.refresh)==null?void 0:i.call(e,n));!r&&a===!0||this.triggerNodeChange(e)}async reveal(e,n){if(this.tree!==void 0)try{await this.tree.reveal(e,n)}catch(r){K.error(r)}}async show(){try{await l.commands.executeCommand(`${this.id}.focus`)}catch(e){K.error(e)}}triggerNodeChange(e){this._onDidChangeTreeData.fire(e!==void 0&&e!==this.root?e:void 0)}get config(){return this._config===void 0&&(this._config=pe.get("views")[this.configKey]),this._config}}o(Js,"View");class js extends ba{constructor(e,n,r,i,a,s,c){super(e,n);this._message=r,this._description=i,this._tooltip=a,this._iconPath=s,this._contextValue=c}getChildren(){return[]}getTreeItem(){var e;const n=new l.TreeItem(this._message,l.TreeItemCollapsibleState.None);return n.contextValue=(e=this._contextValue)!=null?e:Ca.Message,n.description=this._description,n.tooltip=this._tooltip,n.iconPath=this._iconPath,n}}o(js,"MessageNode");var wc=Object.defineProperty,Sc=Object.getOwnPropertyDescriptor,Jo=o((t,e,n,r)=>{for(var i=r>1?void 0:r?Sc(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&wc(e,n,i),i},"workspaceRepositoriesView_decorateClass");const Ys=o(class extends ba{constructor(t,e,n,r,i,a,s){super(t,e);this.changeStore=n,this.canonical=r,this.workspaceRepository=i,this.operation=a,this.canApplyChanges=s}static getId(t,e,n){return`${Ga.getId(t,e)}:${this.key}(${n.uri.toString()})`}get id(){return Ys.getId(this.canonical.uri,this.workspaceRepository,this.operation)}getChildren(){return[]}async getTreeItem(){const t=this.view.providerService.getRelativeFilePath(this.workspaceRepository.uri,this.operation.uri),e=new l.TreeItem(t,l.TreeItemCollapsibleState.None);return e.id=this.id,e.contextValue=`${Ca.Change}${this.canApplyChanges?"+apply":""}`,e.resourceUri=this.view.providerService.getChangeStore(this.operation.uri).getScopedUri(this.operation.uri,this.workspaceRepository),e.command=await this.getDiffCommand(t,!0),e}async getDiffCommand(t,e=!1){if(e||this._command===void 0){const n=Boolean(this.operation.staged&&pe.get("staging.enabled"));if(this.workspaceRepository.workspaceId===this.view.workspaceId){const r=x.getProviderUri(this.operation.uri);this._command=await this.changeStore.resolveDiffCommand(this.operation.uri,r,n?l.l10n.t("{0} (Index)",j(this.operation.uri),this.workspaceRepository.ref.name):l.l10n.t("{0} (Working Tree)",j(this.operation.uri),this.workspaceRepository.ref.name))}else{const{repo:r}=this.view.providerService.getVirtualUriMetadata(this.workspaceRepository.uri),i=this.view.providerService.createProviderUri(this.operation.uri,{repo:r,ref:{type:ye.Commit,id:this.operation.revision}},t);this._command=await this.changeStore.resolveDiffCommand(this.operation.uri,i,n?l.l10n.t("{0} (Index of {1})",j(this.operation.uri),this.workspaceRepository.ref.name):l.l10n.t("{0} (Working Tree of {1})",j(this.operation.uri),this.workspaceRepository.ref.name))}}return this._command}async openChanges(){var t;const e=await this.getDiffCommand(this.view.providerService.getRelativeFilePath(this.workspaceRepository.uri,this.operation.uri));await l.commands.executeCommand(e.command,...(t=e.arguments)!=null?t:[])}async openFile(){const t=this.view.providerService.getChangeStore(this.operation.uri).getScopedUri(this.operation.uri,this.workspaceRepository.workspaceId);await l.window.showTextDocument(t)}async applyChanges(){const t=await this.view.getRepositoryToApplyChangesetTo(this.workspaceRepository);if(t!==void 0)try{await this.view.providerService.getChangeStore(t.uri).applyChangeset(t.uri,this.workspaceRepository,this.operation)}catch(e){l.window.showErrorMessage(String(e))}}},"_FileChangeNode");let qs=Ys;qs.key=":changes";const Qs=o(class extends ba{constructor(t,e,n,r,i){super(t,e);this.canonical=n,this.workspaceRepository=r,this.root=i}static getId(t,e){return`${Ao.getId(t)}:${this.key}(${e.workspaceId}/${e.uri.toString()})`}get id(){return Qs.getId(this.canonical.uri,this.workspaceRepository)}get name(){return this.workspaceRepository.name}get uri(){return this.workspaceRepository.uri}canApplyChanges(){if(!this.canonical.hasActive||l.workspace.getWorkspaceFolder(this.workspaceRepository.uri)!==void 0)return!1;const{changes:e}=this.workspaceRepository;return e!==void 0&&(e.added!==0||e.changed!==0||e.deleted!==0)}async getChildren(){if(this._children===void 0){const t=this.view.providerService.getChangeStore(this.workspaceRepository.uri).getScopedChangeStore(this.workspaceRepository),e=await t.getChanges(this.workspaceRepository.uri);this._children=e.map(n=>new qs(this.view,this,t,this.canonical,this.workspaceRepository,n,this.canApplyChanges()))}return this._children}getTreeItem(){const t=this.workspaceRepository.workspaceId===this.view.workspaceId,e=Yt(this.workspaceRepository),n=Gn.isCanonicalUri(this.workspaceRepository.uri)?l.l10n.t("{0} (default)",this.workspaceRepository.ref.name):this.workspaceRepository.ref.name,r=new l.TreeItem(this.root?this.canonical.name:n,e?l.TreeItemCollapsibleState.Collapsed:l.TreeItemCollapsibleState.None);return r.id=this.id,r.contextValue=`${Ca.WorkspaceRepository}${t?"+active":""}${this.canApplyChanges()?"+apply":""}`,r.description=`${this.root?`${this.workspaceRepository.ref.name}\xA0\xA0\u2022\xA0\xA0`:""}${An(this.workspaceRepository.timestamp,{ago:!0})}`,r.iconPath=t?new l.ThemeIcon("check"):this.root?el(this.canonical.provider.id):ti(this.workspaceRepository.ref.type,this.workspaceRepository.pullRequest),r.tooltip=new l.MarkdownString(void 0,!0).appendMarkdown(l.l10n.t(`{0}{1}\\
{2} {3} {4}{5}\\
Last accessed {6}

{7}
`,this.canonical.name,this.workspaceRepository.pullRequest?l.l10n.t(`\\
Pull request {0} #{1}`,"$(git-pull-request)",this.workspaceRepository.pullRequest.id):"",Cc(this.workspaceRepository.ref.type),Oi(this.workspaceRepository.ref.type),n,t?` \u2014 _${l.l10n.t("Active")}_ `:"",An(this.workspaceRepository.timestamp,{ago:!0}),mn(this.workspaceRepository.ref.type,this.workspaceRepository.changes,{preamble:`${l.l10n.t("Has Uncommitted Changes")}\\
`}))),e&&(r.resourceUri=l.Uri.parse("remotehub-view://wsrepo/changes")),r}refresh(t=!1){t&&(this._children=void 0)}async applyAllChanges(){const t=await this.view.getRepositoryToApplyChangesetTo(this.workspaceRepository);if(t!==void 0)try{await this.view.providerService.getChangeStore(t.uri).applyChangeset(t.uri,this.workspaceRepository)}catch(e){l.window.showErrorMessage(String(e))}}remove(){return this.view.providerService.workspaceRepositoriesRemoveRepository(this.workspaceRepository)}},"_WorkspaceRepositoryNode");let Ga=Qs;Ga.key=":wsrepo",Jo([nn()],Ga.prototype,"refresh",1);const Xs=o(class extends ba{constructor(t,e,n,r){super(t,e);this.canonical=n,this.workspaceRepositories=r}static getId(t){return`remoteHub${this.key}(${t.toString()})`}get id(){return Xs.getId(this.canonical.uri)}get name(){return this.canonical.name}get uri(){return this.canonical.uri}getChildren(){if(this.children===void 0){const t=this.workspaceRepositories;if(t.length===0)return this.view.message=void 0,[new js(this.view,this,l.l10n.t("No remote repositories could be found."))];this.view.message=void 0,this.children=t.map(e=>new Ga(this.view,this,this.canonical,e,!1))}return this.children}getTreeItem(){const t=this.workspaceRepositories.some(n=>n.workspaceId===this.view.workspaceId),e=new l.TreeItem(this.canonical.name,t?l.TreeItemCollapsibleState.Expanded:l.TreeItemCollapsibleState.Collapsed);return e.contextValue=Ca.WorkspaceRepositories,e.iconPath=el(this.canonical.provider.id),e}refresh(t=!1){t&&(this.children=void 0)}},"_CanonicalWorkspaceRepositoryNode");let Ao=Xs;Ao.key=":wsrepos",Jo([nn()],Ao.prototype,"refresh",1);class jo extends ba{constructor(e){super(e);this.splatted=!0}async getChildren(){if(this.children===void 0){const e=await this.view.providerService.workspaceRepositoriesGetRepositoriesByCanonicalUri();if(e.size===0)return[];this.view.message=void 0;const n=[];for(const[r,i]of e){const a=l.Uri.parse(r);try{const{name:s,provider:c}=this.view.providerService.getVirtualUriMetadata(a),u={uri:a,name:s,provider:c,hasActive:i.some(d=>d.workspaceId===this.view.workspaceId)};i.length===1?n.push(new Ga(this.view,this,u,i[0],!0)):n.push(new Ao(this.view,this,u,i))}catch(s){if(s instanceof Zt)continue;K.error(s)}}this.children=n}return this.children}getTreeItem(){return new l.TreeItem("Repositories",l.TreeItemCollapsibleState.Expanded)}refresh(e=!1){e&&(this.children=void 0)}}o(jo,"WorkspaceRepositoriesViewNode"),Jo([nn()],jo.prototype,"refresh",1);class Zs extends Js{constructor(e,n,r){super("remoteHub.views.workspaceRepositories",l.l10n.t("Remote Repositories"),e,r);this.workspaceId=n,this.configKey="workspaceRepositories",this.disposables.push(this.providerService.onDidChangeWorkspaceRepositories(this.onRepositoriesChanged,this),l.window.registerFileDecorationProvider({provideFileDecoration:(i,a)=>{if(!(i.scheme!=="remotehub-view"||i.authority!=="wsrepo"||!i.path.includes("/changes")))return{badge:"\u25CF",color:new l.ThemeColor("remoteHub.decorations.workspaceRepositoriesView.hasUncommittedChangesForegroundColor"),tooltip:l.l10n.t("Has Uncommitted Changes")}}}))}getRoot(){return new jo(this)}onRepositoriesChanged(){this.refresh(!0)}registerCommands(){return[l.commands.registerCommand(this.getQualifiedCommand("refresh"),()=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.refresh"),this.providerService.workspaceRepositoriesRefresh(),void this.refresh(!0)),this),l.commands.registerCommand(this.getQualifiedCommand("open"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.open"),kn(this.providerService,{name:e.name,uri:e.uri,location:Ve.CurrentWindow})),this),l.commands.registerCommand(this.getQualifiedCommand("openInNewWindow"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openInNewWindow"),kn(this.providerService,{name:e.name,uri:e.uri,location:Ve.NewWindow})),this),l.commands.registerCommand(this.getQualifiedCommand("applyAllChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.applyAllChanges"),e.applyAllChanges()),this),l.commands.registerCommand(this.getQualifiedCommand("remove"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.remove"),e.remove()),this),l.commands.registerCommand(this.getQualifiedCommand("openChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openChanges"),e.openChanges()),this),l.commands.registerCommand(this.getQualifiedCommand("openFile"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openFile"),e.openFile()),this),l.commands.registerCommand(this.getQualifiedCommand("applyChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.applyChanges"),e.applyChanges()),this)]}async getRepositoryToApplyChangesetTo(e){const n=E(this.providerService.getVirtualCanonicalRootUri(e.uri)),r=this.providerService.repositories.filter(a=>E(a.canonicalUri)===n);return await bc(r,l.l10n.t("Choose a repository to apply the changeset to"))}}o(Zs,"WorkspaceRepositoriesView");function Cc(t,e){switch(t){case V.Branch:return e?l.l10n.t("Pull Request #{0}",e.id):l.l10n.t("Branch");case V.RemoteBranch:return e?l.l10n.t("Pull Request #{0}",e.id):l.l10n.t("Remote Branch");case V.Tag:return l.l10n.t("Tag");case V.Commit:return l.l10n.t("Commit")}}o(Cc,"headTypeToString");function el(t){switch(t){case"github":return new l.ThemeIcon("github");case"azurerepos":return new l.ThemeIcon("azure-devops");default:return new l.ThemeIcon("vm")}}o(el,"providerToIconPath");async function bc(t,e){if(t.length!==0){if(t.length>1){const n=await l.window.showQuickPick(t.map(r=>({label:r.name,description:r.provider.name,repository:r})),{placeHolder:e});return n?n.repository:void 0}return t[0]}}o(bc,"getRepository");let Do;function Ro(){return Do}o(Ro,"getOpenActionsService");var pa;(function(t){t.HasCommitted="has:committed",t.Version="version"})(pa||(pa={}));let To;function tl(t){return To.globalState.get(t)}o(tl,"getState");async function Yo(t,e){return To.globalState.update(t,e)}o(Yo,"updateState");let nl=!1;function _c(){return nl}o(_c,"isPreRelease");async function Ec(t){To=t,Ye.configure("remoteHub",t),K.configure(t,"Remote Repositories",pe.get("logLevel")),_t.start("Time to root directory",{log:!1});const e=_n.configure(t),n=new Le(t),r=t.extension.packageJSON.version;await Yo(pa.Version,r),await t.workspaceState.update(pa.Version,r);const[,i]=To.extension.packageJSON.version.split(".");nl=Number.parseInt(i)%2==1;try{const a=new Gn(n,t.workspaceState);Do=new vo(a);const s=new Ns(a),c=new Ws(a,Do,n,s),u=new go(a);if(typeof l.workspace.registerEditSessionIdentityProvider!==void 0&&t.subscriptions.push(l.workspace.registerEditSessionIdentityProvider(x.scheme,new fa(a))),typeof l.workspace.registerCanonicalUriProvider!==void 0&&!l.extensions.getExtension("vscode.git")){const d=new Ot(a);try{t.subscriptions.push(...Ot.SupportedSchemes.map(f=>l.workspace.registerCanonicalUriProvider(f,d)))}catch{}}return t.subscriptions.push(pe.onDidChange(d=>{!pe.changed(d,"logLevel")||(K.logLevel=pe.get("logLevel"))}),a.onDidChangeRepositories(async d=>{for(const f of d.added)try{const h=await f.getMetadata(),{HEAD:p,defaultBranch:b,name:te,provider:A,pullRequest:ee}=h,me=p.name.replace(/\//g,"\u2009\u2215\u2009");let re=" ";if(ee!==void 0)re=` (PR ${ee.id}) `;else if(p.type===V.Tag)re=` (${me}) `;else if(p.type===V.Commit)re=` (${me}) `;else if(p.type===V.Branch||p.type===V.RemoteBranch){const Fe=p.branch.name.replace(/\//g,"\u2009\u2215\u2009");p.branch.name!==b.name&&(re=` (${Fe}) `)}const Pe={uri:f.uri,type:"folder",label:`${te}${re}[${A.name}]`};l.commands.executeCommand("_workbench.addToRecentlyOpened",Pe)}catch(h){K.error(h,"Failed to add repository to recently opened")}}),new _s(a,s),new ia(a),new zs(a,n),...bi(a,t.extension.id,n),...Tc(a,n),...await Ac(a,c,t,n),new Gs(a),new Ks(a),new Zs(a,e,n),c,Do,a,n),n.publicLog2("activate"),Promise.resolve(u)}catch(a){throw K.error(a),tt(t,a),a}}o(Ec,"activate");async function Ac(t,e,n,r){const i=[];if(rl()){const a=new Nt(t,r);t.registerVirtualIndexProvider("github",a),t.registerVirtualIndexProvider("azurerepos",a),i.push(a)}return i.push(Rc(t,e),Dc(e)),i}o(Ac,"registerProviders");function Dc(t){async function e(){let r=l.extensions.getExtension("ms-azuretools.vscode-azurestaticwebapps");r||await new Promise(a=>{const s=l.extensions.onDidChange(()=>{r=l.extensions.getExtension("ms-azuretools.vscode-azurestaticwebapps"),r&&(s.dispose(),a())})});const i=await r.activate();if(!(!i||typeof i.registerGitProvider!="function"))return i.registerGitProvider(t)}o(e,"registerWithStaticWebApps");const n=e();return l.Disposable.from({dispose:async()=>{var r;return void((r=await n)==null?void 0:r.dispose())}})}o(Dc,"registerStaticWebApps");function Rc(t,e){async function n(){var i;try{let a=(i=l.extensions.getExtension("GitHub.vscode-pull-request-github"))!=null?i:l.extensions.getExtension("GitHub.vscode-pull-request-github-insiders");a||(K.log("[ GHPR] Not currently installed or enabled; waiting..."),await new Promise(h=>{const p=l.extensions.onDidChange(()=>{var b;a=(b=l.extensions.getExtension("GitHub.vscode-pull-request-github"))!=null?b:l.extensions.getExtension("GitHub.vscode-pull-request-github-insiders"),a&&(p.dispose(),h())})})),K.log("[ GHPR] Registering..."),wr(Qn.HasPullRequestExtension,!0);const s=await a.activate();if(!s)throw new Error("Unable to get registration api");const c=s.registerGitProvider(e),u=t.onDidChangeRepositories(h=>d(h));async function d(h){const p=h.added.filter(b=>b.provider.id==="github");if(p.length!==0){K.log("[ GHPR] Checking for opened PRs...");for(const b of p){const te=await t.getBestRemoteUri(b.uri,X.PullRequest);if(!!te){u.dispose(),K.log("[ GHPR] Opened PR found; preloading"),l.commands.executeCommand("github.api.preloadPullRequest",te.toString());return}}K.log("[ GHPR] No opened PRs found")}}o(d,"onRepositoriesChanged"),K.log("[ GHPR] Registration complete");const f=t.repositories;return f.length&&d({added:f,removed:[]}),l.Disposable.from(c,u)}catch(a){return K.error(a,"[ GHPR] Registration failed;"),{dispose:()=>{}}}}o(n,"registerWithGHPR");const r=n();return l.Disposable.from({dispose:async()=>{var i;return void((i=await r)==null?void 0:i.dispose())}})}o(Rc,"registerGitHub");function Tc(t,e){if(!rl())return[];e.publicLog2("codex.enableRichNav",{});const n=new Bt(t);return[n,n.register(new Yn(e)),...Yn.createStatus()]}o(Tc,"registerNavigationServiceProviders");function rl(){return!1}o(rl,"isRichNavEnabled");const qo=["github.remotehub","ms-vscode.azure-repos"],Qo=new Map,Xo=new Map;async function Fr(t,e){var n,r,i;if(e!==void 0&&typeof e!="string"&&(e=Gn.getProviderId(e)),e&&Xo.has(e)){const a=Xo.get(e);if(!a)return;await Qo.get(a);return}for(const a of l.extensions.all){const s=a.id,{contributes:c}=a.packageJSON;if(!c||!qo.includes(s.toLowerCase()))continue;const u=Qo.get(s),d=(r=(n=c.virtualWorkspaces)==null?void 0:n.providers)!=null?r:[],f=d.find(p=>p===e)!==void 0,h=d.length&&e===void 0;if(!u&&(h||f)){const p=(i=l.extensions.getExtension(s))==null?void 0:i.activate().then(b=>b.registerVirtualProviderService(t));if(p===void 0)return;Qo.set(s,p);for(const b of d)Xo.set(b,s);if(await p,e!==void 0&&f)return}else u&&await u}}o(Fr,"ensureProvidersRegistered")})(),module.exports=Io})();
